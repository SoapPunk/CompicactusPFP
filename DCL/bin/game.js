"use strict";const getGlobalThis=function(){if("undefined"!=typeof globalThis)return globalThis;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==this)return this;throw new Error("Unable to locate global `this`")},globalObject=getGlobalThis();var loader;!function(_t){let Pt=0,Ft=[],Dt=[];const Ut={baseUrl:""},Lt={};function d(_t,Ft,Dt){let Ut=null,Kt={},Yt=null;"function"==typeof _t?Kt=_t:"string"==typeof _t?(Ut=_t,"function"==typeof Ft?Kt=Ft:Ft instanceof Array&&(Yt=Ft,Kt=Dt)):_t instanceof Array&&(Yt=_t,"function"==typeof Ft&&(Kt=Ft)),Yt=Yt||["require","exports","module"],null===Ut&&(Ut="unnamed-module-"+Pt++),Ut=g(Ut),Yt=(Yt||[]).map((_t=>function(_t,Pt){return _t?b(Pt,_t):Pt}(Ut,_t))),Lt[Ut]||(Lt[Ut]={name:Ut,parent:null,dclamd:1,dependencies:Yt,handlers:[],exports:{},dependants:new Set}),Lt[Ut].dependencies=Yt,p(Yt,(function(_t){const Pt=Lt[Ut];if(!Pt)throw new Error("Could not access registered module "+Ut);let Ft=Pt.exports;Ft="function"==typeof Kt?Kt.apply(globalObject,_t)||Ft:Kt,Pt.exports=Ft,u(Ut)}),(_t=>{if("function"!=typeof onerror)throw _t;onerror(_t)}),Ut)}function u(_t){const Pt=Lt[_t];if(!Pt)throw new Error("Could not access registered module "+_t);Pt.dclamd=2;let Ft=Pt.handlers;if(Ft&&Ft.length)for(let Pt=0;Pt<Ft.length;Pt++)Ft[Pt](Lt[_t])}function c(_t,Pt,Ft){if(!Lt[_t])return null;if(_t==Pt||50==Ft)return[_t];const Dt=Lt[_t].dependencies;for(let Ut=0,Lt=Dt.length;Ut<Lt;Ut++){let Lt=c(Dt[Ut],Pt,Ft+1);if(null!==Lt)return Lt.push(_t),Lt}return null}function a(_t,Pt){let Ft=Lt[_t];if(!Ft)return!1;let Dt={};for(let _t in Lt)Dt[_t]=!1;let Ut=[];for(Ut.push(Ft),Dt[_t]=!0;Ut.length>0;){let _t=Ut.shift().dependencies;if(_t)for(let Ft=0,Kt=_t.length;Ft<Kt;Ft++){let Kt=_t[Ft];if(Kt===Pt)return!0;let Yt=Lt[Kt];Yt&&!Dt[Kt]&&(Dt[Kt]=!0,Ut.push(Yt))}}return!1}function p(_t,Pt,Ft,Ut){let Kt=new Array(_t.length).fill(null),Yt=0,Zt=!1;if("string"==typeof _t){if(Lt[_t]){if(1===Lt[_t].dclamd)throw new Error(`Trying to load ${_t} from ${Ut}. The first module is still loading.`);return Lt[_t]}throw new Error(_t+" has not been defined. Please include it as a dependency in "+Ut+"'s define()")}const ee=_t.length;for(let re=0;re<ee;re++)switch(_t[re]){case"require":let h=function(_t,Pt,Ft){return p(_t,Pt,Ft,Ut)};h.toUrl=function(_t){return b(_t,Ut)},Kt[re]=h,Yt++;break;case"exports":if(!Lt[Ut])throw new Error("Parent module "+Ut+" not registered yet");Kt[re]=Lt[Ut].exports,Yt++;break;case"module":Kt[re]={id:Ut,uri:b(Ut)},Yt++;break;default:{const ve=_t[re],m=()=>{Kt[re]=Lt[ve].exports,Yt++,Yt===ee&&Pt&&(Zt=!0,Pt(Kt))};if(a(ve,Ut)){const _t=c(ve,Ut,0);_t&&(_t.reverse(),_t.push(ve),Dt.push(_t)),w(ve,(()=>{}),Ft,Ut),m()}else w(ve,m,Ft,Ut);break}}!Zt&&Yt===ee&&Pt&&Pt(Kt)}function h(_t,Pt){return function(){return dcl.callRpc(_t,Pt.name,Ft.slice.call(arguments,0))}}function w(_t,Pt,Ft,Dt){if(Lt[_t])return Lt[_t].dependants.add(Dt),void(1===Lt[_t].dclamd?Pt&&Lt[_t].handlers.push(Pt):Pt&&Pt(Lt[_t]));if(Lt[_t]={name:_t,parent:Dt,dclamd:1,handlers:[Pt],dependencies:[],dependants:new Set([Dt]),exports:{}},0===_t.indexOf("@")){let Pt=Lt[_t].exports;if("function"!=typeof dcl.loadModule)throw new Error("Asynchronous modules will not work because loadModule function is not present");dcl.loadModule(_t,Pt).then((Ft=>{for(let _t in Ft.methods){const Dt=Ft.methods[_t];Pt[Dt.name]=h(Ft.rpcHandle,Dt)}u(_t)})).catch((_t=>{Ft(_t)}))}}function g(_t){let Pt,Ft=_t;for(Pt=/\/\.\//;Pt.test(Ft);)Ft=Ft.replace(Pt,"/");for(Ft=Ft.replace(/^\.\//g,""),Pt=/\/(([^\/])|([^\/][^\/\.])|([^\/\.][^\/])|([^\/][^\/][^\/]+))\/\.\.\//;Pt.test(Ft);)Ft=Ft.replace(Pt,"/");return Ft=Ft.replace(/^(([^\/])|([^\/][^\/\.])|([^\/\.][^\/])|([^\/][^\/][^\/]+))\/\.\.\//,""),Ft=Ft.replace(/^\//g,""),Ft}function b(_t,Pt){switch(_t){case"require":case"exports":case"module":return _t}return Pt?function(_t,Pt){let Ft=_t;if(!Ft.startsWith("@")&&(Ft.startsWith("./")||Ft.startsWith("../"))){const _t=Pt.split("/");_t.pop(),Ft=g(_t.join("/")+"/"+Ft)}return Ft}(_t,Pt):g(_t)}_t.config=function(_t){if("object"==typeof _t)for(let Pt in _t)_t.hasOwnProperty(Pt)&&(Ut[Pt]=_t[Pt])},_t.define=d,function(_t){_t.amd={},_t.modules=Lt}(d=_t.define||(_t.define={})),_t.require=p,"undefined"!=typeof dcl&&dcl.onStart((()=>{const _t=new Set,Pt=[];for(let Ft in Lt)Lt[Ft]&&(1===Lt[Ft].dclamd&&Pt.push(Lt[Ft]),Lt[Ft].dependencies.forEach((Pt=>{"require"!=Pt&&"exports"!=Pt&&"module"!=Pt&&(Lt[Pt]||_t.add(Pt))})));const Ft=[];if(Dt.length&&Ft.push(`\n> Cyclic dependencies: ${Dt.map((_t=>"\n  - "+_t.join(" -> "))).join("")}`),_t.size&&Ft.push(`\n> Undeclared/unknown modules: ${Array.from(_t).map((_t=>"\n  - "+_t)).join("")}`),Pt.length&&Ft.push(`\n> These modules didn't load: ${Pt.map((_t=>"\n  - "+_t.name)).join("")}.\n`),Ft.length)throw new Error(Ft.join("\n"))})),p.toUrl=b}(loader||(loader={})),globalObject.define=loader.define,globalObject.dclamd=loader,function(_t){var Pt=function(){function t(){}return t.AVATAR={getEntityRepresentation:function(_t){return _t.avatarEntity}},t.FIRST_PERSON_CAMERA={getEntityRepresentation:function(_t){return _t.firstPersonCameraEntity}},t}(),n=function(_t,Pt){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_t,Pt){_t.__proto__=Pt}||function(_t,Pt){for(var Ft in Pt)Object.prototype.hasOwnProperty.call(Pt,Ft)&&(_t[Ft]=Pt[Ft])})(_t,Pt)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function o(_t,Pt){if("function"!=typeof Pt&&null!==Pt)throw new TypeError("Class extends value "+String(Pt)+" is not a constructor or null");function o(){this.constructor=_t}n(_t,Pt),_t.prototype=null===Pt?Object.create(Pt):(o.prototype=Pt.prototype,new o)}var i=function(){return(i=Object.assign||function(_t){for(var Pt,Ft=1,Dt=arguments.length;Ft<Dt;Ft++)for(var Ut in Pt=arguments[Ft])Object.prototype.hasOwnProperty.call(Pt,Ut)&&(_t[Ut]=Pt[Ut]);return _t}).apply(this,arguments)};function r(_t,Pt,Ft,Dt){var Ut,Lt=arguments.length,Kt=Lt<3?Pt:null===Dt?Dt=Object.getOwnPropertyDescriptor(Pt,Ft):Dt;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Kt=Reflect.decorate(_t,Pt,Ft,Dt);else for(var Yt=_t.length-1;Yt>=0;Yt--)(Ut=_t[Yt])&&(Kt=(Lt<3?Ut(Kt):Lt>3?Ut(Pt,Ft,Kt):Ut(Pt,Ft))||Kt);return Lt>3&&Kt&&Object.defineProperty(Pt,Ft,Kt),Kt}function u(_t){var Pt="function"==typeof Symbol&&Symbol.iterator,Ft=Pt&&_t[Pt],Dt=0;if(Ft)return Ft.call(_t);if(_t&&"number"==typeof _t.length)return{next:function(){return _t&&Dt>=_t.length&&(_t=void 0),{value:_t&&_t[Dt++],done:!_t}}};throw new TypeError(Pt?"Object is not iterable.":"Symbol.iterator is not defined.")}function p(_t,Pt){var Ft="function"==typeof Symbol&&_t[Symbol.iterator];if(!Ft)return _t;var Dt,Ut,Lt=Ft.call(_t),Kt=[];try{for(;(void 0===Pt||Pt-- >0)&&!(Dt=Lt.next()).done;)Kt.push(Dt.value)}catch(_t){Ut={error:_t}}finally{try{Dt&&!Dt.done&&(Ft=Lt.return)&&Ft.call(Lt)}finally{if(Ut)throw Ut.error}}return Kt}function h(_t,Pt){for(var Ft=0,Dt=Pt.length,Ut=_t.length;Ft<Dt;Ft++,Ut++)_t[Ut]=Pt[Ft];return _t}var Ft=0;function l(){for(var _t=[],Pt=0;Pt<arguments.length;Pt++)_t[Pt]=arguments[Pt];"undefined"!=typeof dcl?dcl.log.apply(dcl,h([],p(_t))):console.log.apply(console,h(["DEBUG:"],p(_t)))}function d(_t,Pt){"undefined"!=typeof dcl?dcl.error(_t,Pt):console.error("ERROR:",_t,Pt)}function f(_t){if(Ft++,0===_t.length)throw new Error("newId(type: string): type cannot be empty");return _t+Ft.toString(36)}function y(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(_t){var Pt=16*Math.random()|0;return("x"===_t?Pt:3&Pt|8).toString(16)}))}function v(_t,Pt){for(var Ft=[],Dt=0;Dt<_t;++Dt)Ft.push(Pt());return Ft}var Dt=[];function _(_t){if(!("__event_name__"in _t)||"string"!=typeof _t.__event_name__)throw new Error("The EventConstructor is not registered");return _t.__event_name__}var Ut=function(){function t(){this.listeners={}}return t.prototype.addListener=function(_t,Pt,Ft){if(!_t||"function"!=typeof _t)throw new Error("Invalid EventConstructor");var Dt=_(_t),Ut=this.listeners[Dt];Ut||(Ut=this.listeners[Dt]=[]);for(var Lt=0;Lt<Ut.length;Lt++)if(Ut[Lt].listener===Pt)throw new Error("The provided listener is already registered");return Ut.push({listener:Pt,fn:Ft}),this},t.prototype.removeListener=function(_t,Pt){if(!Pt||"function"!=typeof Pt)throw new Error("Invalid EventConstructor");var Ft=_(Pt),Dt=this.listeners[Ft];if(!Dt)return!1;for(var Ut=0;Ut<Dt.length;Ut++)if(Dt[Ut].listener===_t)return Dt.splice(Ut,1),!0;return!1},t.prototype.fireEvent=function(_t){var Pt=_(_t.constructor),Ft=this.listeners[Pt];if(Ft)for(var Dt=0;Dt<Ft.length;Dt++)try{var Ut=Ft[Dt];Ut.fn.call(Ut.listener,_t)}catch(_t){d(_t)}return this},t}();function w(){var _t=f("EV");if(-1!==Dt.indexOf(_t))throw new Error("The event name "+_t+" is already taken");return Dt.push(_t),function(Pt){return Pt.__event_name__=_t,Pt}}var Lt,Kt=r([w()],(function(_t,Pt,Ft){this.entity=_t,this.componentName=Pt,this.component=Ft})),Yt=r([w()],(function(_t,Pt,Ft){this.entity=_t,this.componentName=Pt,this.classId=Ft})),Zt=r([w()],(function(_t,Pt){this.entity=_t,this.parent=Pt}));_t.UIValueType=void 0,(Lt=_t.UIValueType||(_t.UIValueType={}))[Lt.PERCENT=0]="PERCENT",Lt[Lt.PIXELS=1]="PIXELS";var ee=function(){function e(Pt){if(this.type=_t.UIValueType.PIXELS,"string"==typeof Pt){var Ft=Pt;Ft.indexOf("px")>-1?this.type=_t.UIValueType.PIXELS:Ft.indexOf("%")>-1&&(this.type=_t.UIValueType.PERCENT),this.value=parseFloat(Ft)}else this.value=Pt}return e.prototype.toString=function(){var Pt=this.value.toString();return this.type===_t.UIValueType.PERCENT?Pt+="%":Pt+="px",Pt},e}(),re="__name__symbol_",ve="__classId__symbol_",Me="__component__id_",Se=r([w()],(function(_t,Pt,Ft){this.componentId=_t,this.componentName=Pt,this.classId=Ft})),Ie=r([w()],(function(_t){this.componentId=_t})),Re=r([w()],(function(_t,Pt){this.componentId=_t,this.component=Pt}));function M(_t,Pt){return function(Ft){if(Ft.isComponent)throw new TypeError("You cannot extend a component. Trying to extend "+Ft.originalClassName+" with: "+_t);var Dt=Ft,i=function(){var Ft=Array.prototype.slice.call(arguments),Ut=new(Dt.bind.apply(Dt,h([void 0],p(Ft))));return Object.defineProperty(Ut,re,{enumerable:!1,writable:!1,configurable:!1,value:_t}),void 0!==Pt&&Object.defineProperty(Ut,ve,{enumerable:!1,writable:!1,configurable:!1,value:Pt}),Ut};return void 0!==Pt&&(i.__classId__symbol_=Pt),i.__name__symbol_=_t,i.isComponent=!0,i.originalClassName=_t,(i.prototype=Ft.prototype).constructor=Ft,i}}function F(_t,Pt){return function(Ft){if(Ft.isComponent)throw new TypeError("You cannot extend a component. Trying to extend "+Ft.originalClassName+" with: "+_t);if("number"!=typeof Pt||isNaN(Pt))throw new Error("classId: "+Pt+" is an invalid integer");var Dt=Ft,i=function(){if(!F.engine)throw new Error("You need to set a DisposableComponent.engine before creating disposable components");var Ft=Array.prototype.slice.call(arguments),Ut=new(Dt.bind.apply(Dt,h([void 0],p(Ft)))),Lt=f("C");return Object.defineProperty(Ut,re,{enumerable:!1,writable:!1,configurable:!1,value:_t}),Object.defineProperty(Ut,Me,{enumerable:!1,writable:!1,configurable:!1,value:Lt}),void 0!==Pt&&Object.defineProperty(Ut,ve,{enumerable:!1,writable:!1,configurable:!1,value:Pt}),F.engine&&F.engine.registerComponent(Ut),Ut};return void 0!==Pt&&(i.__classId__symbol_=Pt),i.__name__symbol_=_t,i.isComponent=!0,i.isDisposableComponent=!0,i.originalClassName=_t,(i.prototype=Ft.prototype).constructor=Ft,i}}function L(_t){if(!_t)throw new TypeError(_t+" is not a component.");if(_t.__name__symbol_)return _t.__name__symbol_;throw new TypeError(_t+" is not a registered component.")}function D(_t){if(!_t)throw new TypeError(_t+" is not a component.");if(_t.__classId__symbol_)return _t.__classId__symbol_;if(!_t.__name__symbol_)throw new TypeError(_t+" is not a registered component.");return null}function N(_t){if(!_t)throw new TypeError(_t+" is not a component.");if(_t.__component__id_)return _t.__component__id_;throw new TypeError(_t+" is not a registered disposable component.")}!function(_t){_t.engine=null}(F||(F={}));var Ne=function(){function t(){this.dirty=!1,this.data={},this.subscriptions=[]}return t.component=function(_t,Pt){if(delete _t[Pt]){var Ft=Pt+"_"+Math.random();_t[Ft]=void 0,Object.defineProperty(_t,Ft,i(i({},Object.getOwnPropertyDescriptor(_t,Ft)),{enumerable:!1})),Object.defineProperty(_t,Pt.toString(),{get:function(){return this[Ft]},set:function(_t){var Dt=this[Ft];if(this.data[Pt]=_t?N(_t):null,this[Ft]=_t,_t!==Dt){this.dirty=!0;for(var Ut=0;Ut<this.subscriptions.length;Ut++)this.subscriptions[Ut](Pt,_t,Dt)}},enumerable:!0})}},t.field=function(_t,Pt){delete _t[Pt]&&Object.defineProperty(_t,Pt.toString(),{get:function(){return this.data[Pt]},set:function(_t){var Ft=this.data[Pt];if(this.data[Pt]=_t,_t!==Ft){this.dirty=!0;for(var Dt=0;Dt<this.subscriptions.length;Dt++)this.subscriptions[Dt](Pt,_t,Ft)}},enumerable:!0})},t.uiValue=function(_t,Pt){delete _t[Pt]&&Object.defineProperty(_t,Pt.toString(),{get:function(){return this.data[Pt].toString()},set:function(_t){var Ft=this.data[Pt],Dt=new ee(_t);if(this.data[Pt]=Dt,Dt!==Ft){this.dirty=!0;for(var Ut=0;Ut<this.subscriptions.length;Ut++)this.subscriptions[Ut](Pt,Dt,Ft)}},enumerable:!0})},t.readonly=function(_t,Pt){delete _t[Pt]&&Object.defineProperty(_t,Pt.toString(),{get:function(){if(Pt in this.data==0)throw new Error("The field "+Pt+" is uninitialized");return this.data[Pt]},set:function(_t){if(Pt in this.data)throw new Error("The field "+Pt+" is readonly");this.data[Pt]=_t,this.dirty=!0},enumerable:!0,configurable:!1})},t.prototype.onChange=function(_t){return this.subscriptions.push(_t),this},t.prototype.toJSON=function(){return this.data},t}();function H(_t){return Me in _t}var Pe=function(){function t(){for(var _t=[],Pt=0;Pt<arguments.length;Pt++)_t[Pt]=arguments[Pt];if(this.entities=[],this.active=!1,this._requiresNames=[],!_t)throw new Error("ComponentGroup: Could not load the requires list");if(!(_t instanceof Array))throw new Error("ComponentGroup: requires list is not an Array");Object.defineProperty(this,"requires",{get:function(){return _t.slice()}}),Object.defineProperty(this,"requiresNames",{get:function(){return this._requiresNames.slice()}});for(var n=function(Pt){var Dt=_t[Pt],Ut=null;if(!Dt)throw new Error("ComponentGroup: the required component at location "+Pt+" is invalid");try{Ut=L(Dt)}catch(_t){throw new Error("ComponentGroup: the required component at location "+Pt+" is not registered as a @Component. Remember to provide the class of the component, not the name")}if(Ft._requiresNames.some((function(_t){return _t===Ut})))throw new Error("ComponentGroup: the required component list has a repeated name "+Ut);Ft._requiresNames.push(Ut)},Ft=this,Dt=0;Dt<_t.length;Dt++)n(Dt)}return t.prototype.hasEntity=function(_t){return!!_t.isAddedToEngine()&&-1!==this.entities.indexOf(_t)},t.prototype.addEntity=function(_t){if(!_t.isAddedToEngine())throw new TypeError("ComponentGroup: Cannot add a entity that is not added to the engine");-1===this.entities.indexOf(_t)&&this.entities.push(_t)},t.prototype.removeEntity=function(_t){var Pt=this.entities.indexOf(_t);-1!==Pt&&this.entities.splice(Pt,1)},t.prototype.componentRemoved=function(_t,Pt){-1!==this._requiresNames.indexOf(Pt)&&this.removeEntity(_t)},t.prototype.meetsRequirements=function(_t){for(var Pt=0;Pt<this._requiresNames.length;Pt++)if(!(this._requiresNames[Pt]in _t.components))return!1;return!0},t}(),Fe=function(){function t(_t){this.name=_t,this.children={},this.eventManager=null,this.alive=!1,this.uuid=f("E"),this.components={},this.engine=null,this._parent=null}return t.prototype.addComponentOrReplace=function(_t){if("function"==typeof _t)throw new Error("You passed a function or class as a component, an instance of component is expected");if("object"!=typeof _t)throw new Error("You passed a "+typeof _t+", an instance of component is expected");var Pt=L(_t);if(this.components[Pt]){if(this.components[Pt]===_t)return _t;this.removeComponent(this.components[Pt],!1)}return this.addComponent(_t)},t.prototype.hasComponent=function(_t){var Pt=typeof _t;if("string"!==Pt&&"object"!==Pt&&"function"!==Pt)throw new Error("Entity#has(component): component is not a class, name or instance");if(null==_t)return!1;var Ft="string"===Pt?_t:L(_t),Dt=this.components[Ft];return!!Dt&&("object"===Pt?Dt===_t:"function"!==Pt||Dt instanceof _t)},t.prototype.getComponent=function(_t){var Pt=typeof _t;if("string"!==Pt&&"function"!==Pt)throw new Error("Entity#get(component): component is not a class or name");var Ft="string"===Pt?_t:L(_t),Dt=this.components[Ft];if(!Dt)throw new Error('Can not get component "'+Ft+'" from entity "'+this.identifier+'"');if("function"===Pt){if(Dt instanceof _t)return Dt;throw new Error('Can not get component "'+Ft+'" from entity "'+this.identifier+'" (by instance)')}return Dt},t.prototype.getComponentOrNull=function(_t){var Pt=typeof _t;if("string"!==Pt&&"function"!==Pt)throw new Error("Entity#getOrNull(component): component is not a class or name");var Ft="string"===Pt?_t:L(_t),Dt=this.components[Ft];return Dt?"function"===Pt?Dt instanceof _t?Dt:null:Dt:null},t.prototype.getComponentOrCreate=function(_t){if("function"!=typeof _t)throw new Error("Entity#getOrCreate(component): component is not a class");var Pt=this.getComponentOrNull(_t);return Pt||(L(Pt=new _t),this.addComponentOrReplace(Pt)),Pt},t.prototype.addComponent=function(_t){if("object"!=typeof _t)throw new Error("Entity#add(component): You passed a function or class as a component, an instance of component is expected");var Pt=L(_t),Ft=D(_t);if(this.components[Pt])throw new Error('A component of type "'+Pt+'" is already present in entity "'+this.identifier+'"');this.components[Pt]=_t,this.eventManager&&this.eventManager.fireEvent(new Yt(this,Pt,Ft));var Dt=_t;return"function"==typeof Dt.addedToEntity&&Dt.addedToEntity(this),_t},t.prototype.removeComponent=function(_t,Pt){void 0===Pt&&(Pt=!0);var Ft=typeof _t;if("string"!==Ft&&"function"!==Ft&&"object"!==Ft)throw new Error("Entity#remove(component): component is not a class, class or name");var Dt="string"===Ft?_t:L(_t),Ut=this.components[Dt];if(Ut){if("function"===Ft)return Ut instanceof _t?(delete this.components[Dt],void(Ut&&(Pt&&this.eventManager&&this.eventManager.fireEvent(new Kt(this,Dt,Ut)),"function"==typeof Ut.removedFromEntity&&Ut.removedFromEntity(this)))):void l('Entity Warning: Trying to remove wrong (by constructor) component "'+Dt+'" from entity "'+this.identifier+'"');delete this.components[Dt],Ut&&(Pt&&this.eventManager&&this.eventManager.fireEvent(new Kt(this,Dt,Ut)),"function"==typeof Ut.removedFromEntity&&Ut.removedFromEntity(this))}else l('Entity Warning: Trying to remove inexisting component "'+Dt+'" from entity "'+this.identifier+'"')},t.prototype.isAddedToEngine=function(){return!(!this.engine||!(this.uuid in this.engine.entities)&&this.engine.rootEntity!==this)},t.prototype.setParent=function(_t){var Pt;if(_t&&"getEntityRepresentation"in _t){if(!this.engine)throw new Error("In order to set an attachable as parent, you first need to add the entity to the engine.");Pt=_t.getEntityRepresentation(this.engine)}else Pt=!_t&&this.engine?this.engine.rootEntity:_t;var Ft=this.getParent();if(Pt===this)throw new Error('Failed to set parent for entity "'+this.identifier+"\": An entity can't set itself as a its own parent");if(Pt===Ft)return this;var Dt=this.getCircularAncestor(Pt);if(Dt)throw new Error('Failed to set parent for entity "'+this.identifier+'": Circular parent references are not allowed (See entity "'+Dt+'")');return Ft&&delete Ft.children[this.uuid],null!==Pt&&"0"!==Pt.uuid&&(!Pt.isAddedToEngine()&&this.isAddedToEngine()&&this.engine.removeEntity(this),Pt.isAddedToEngine()&&!this.isAddedToEngine()&&Pt.engine.addEntity(this)),this._parent=Pt||null,this.registerAsChild(),this.eventManager&&this.engine&&this.eventManager.fireEvent(new Zt(this,Pt)),this},t.prototype.getParent=function(){return this._parent},Object.defineProperty(t.prototype,"identifier",{get:function(){return this.name||this.uuid},enumerable:!1,configurable:!0}),t.prototype.getCircularAncestor=function(_t){for(var Pt=this.engine?this.engine.rootEntity:null,Ft=_t;Ft&&Ft!==Pt;){var Dt=Ft.getParent();if(Dt===this)return Ft.uuid;Ft=Dt}return null},t.prototype.registerAsChild=function(){var _t=this.getParent();this.uuid&&_t&&(_t.children[this.uuid]=this)},t}(),$e=function(){function t(_t){this.eventManager=new Ut,this.systems=[],this.entityLists={},this.addedSystems=[],this._entities={},this._disposableComponents={},this._componentGroups={},this.simpleSystems=[],this.eventManager.addListener(Yt,this,this.componentAddedHandler),this.eventManager.addListener(Kt,this,this.componentRemovedHandler),this.rootEntity=_t,this.firstPersonCameraEntity=new Fe,this.firstPersonCameraEntity.uuid="FirstPersonCameraEntityReference",this.addEntity(this.firstPersonCameraEntity),this.avatarEntity=new Fe,this.avatarEntity.uuid="AvatarEntityReference",this.addEntity(this.avatarEntity)}return Object.defineProperty(t.prototype,"entities",{get:function(){return this._entities},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"disposableComponents",{get:function(){return this._disposableComponents},enumerable:!1,configurable:!0}),t.prototype.addEntity=function(_t){var Pt=_t.getParent();if(_t.isAddedToEngine())return _t;for(var Ft in _t.eventManager=this.eventManager,_t.engine=this,this._entities[_t.uuid]=_t,this.checkRequirementsAndAdd(_t),Pt?Pt.isAddedToEngine()||Pt===this.rootEntity||l("Engine: warning, added an entity with a parent not present in the engine. Parent id: "+Pt.uuid):_t.setParent(this.rootEntity),_t.alive=!0,_t.children){var Dt=_t.children[Ft];Dt&&(Dt.isAddedToEngine()||this.addEntity(Dt))}return _t},t.prototype.removeEntity=function(_t){var Pt=_t.uuid;if(_t.isAddedToEngine()){for(var Ft in _t.components){var Dt=this._componentGroups[Ft];if(Dt)for(var Ut in Dt)Dt[Ut].removeEntity(_t);delete this.entityLists[Ft][Pt]}for(var Lt=0;Lt<this.simpleSystems.length;Lt++){var Kt=this.simpleSystems[Lt];Kt.onRemoveEntity&&Kt.onRemoveEntity(_t)}for(var Lt in _t.children){var Yt=_t.children[Lt];Yt&&this.removeEntity(Yt)}return _t.alive=!1,_t.eventManager=null,delete this._entities[Pt],!0}for(var Ft in l("Engine: Trying to remove non existent entity from engine."),_t.isAddedToEngine()?l("Engine: Entity id: "+Pt):l('Engine: Entity "'+_t.uuid+'" has not been added to any engine yet.'),l("Engine: Entity's components:"),_t.components)l(Ft);return!1},t.prototype.addSystem=function(_t,Pt){if(void 0===Pt&&(Pt=0),-1!==this.addedSystems.indexOf(_t))return l("Engine: Trying to add a system that is already added. Aborting"),_t;if(this.systems.length>0)for(var Ft=0;Ft<this.systems.length;Ft++){var Dt=this.systems[Ft],Ut=Ft===this.systems.length-1;if(Dt.priority>Pt){this.addedSystems.push(_t),this.systems.splice(Ft,0,{system:_t,priority:Pt});break}if(Ut){this.addedSystems.push(_t),this.systems.splice(Ft+1,0,{system:_t,priority:Pt});break}}else this.addedSystems.push(_t),this.systems.splice(1,0,{system:_t,priority:Pt});return this.registerSystem(_t),_t},t.prototype.removeSystem=function(_t){var Pt=this.addedSystems.indexOf(_t);if(-1!==Pt){_t.active=!1,_t.deactivate&&_t.deactivate(),this.addedSystems.splice(Pt,1);for(var Ft=0;Ft<this.systems.length;Ft++)this.systems[Ft].system===_t&&this.systems.splice(Ft,1);return!0}return!1},t.prototype.update=function(_t){for(var Pt in this.systems){var Ft=this.systems[Pt].system;if(Ft.active&&Ft.update)try{Ft.update(_t)}catch(_t){d(_t)}}return this},t.prototype.getEntitiesWithComponent=function(_t){var Pt="string"==typeof _t?_t:L(_t);return Pt in this.entityLists?this.entityLists[Pt]:this.entityLists[Pt]={}},t.prototype.registerComponent=function(_t){var Pt=N(_t),Ft=L(_t),Dt=D(_t);this._disposableComponents[Pt]=_t,null!==Dt&&(this.eventManager.fireEvent(new Se(Pt,Ft,Dt)),this.eventManager.fireEvent(new Re(Pt,_t)))},t.prototype.disposeComponent=function(_t){var Pt=N(_t);return delete this._disposableComponents[Pt]&&(this.eventManager.fireEvent(new Ie(Pt)),_t.onDispose&&_t.onDispose(),!0)},t.prototype.updateComponent=function(_t){this.eventManager.fireEvent(new Re(N(_t),_t))},t.prototype.getComponentGroup=function(){for(var _t=[],Pt=0;Pt<arguments.length;Pt++)_t[Pt]=arguments[Pt];var Ft=void 0;if(_t.length>0&&(Zt=this._componentGroups[L(_t[0])]))for(var Dt=_t.slice(),Ut=0;Ut<Zt.length;Ut++){var Lt=Zt[Ut];if(Dt.length===Lt.requires.length){for(var Kt=0;Kt<Dt.length&&-1!==Lt.requires.indexOf(Dt[Kt]);Kt++)Kt===Dt.length-1&&(Ft=Lt);if(Ft)break}}if(Ft)return Ft;(Ft=new(Pe.bind.apply(Pe,h([void 0],p(_t))))).active=!0;var Yt=Ft.requiresNames;for(Ut=0;Ut<Yt.length;Ut++){var Zt,ee=Yt[Ut];(Zt=this._componentGroups[ee])||(this._componentGroups[ee]=Zt=[]),-1===Zt.indexOf(Ft)&&Zt.push(Ft)}for(var re in this._entities)this.checkRequirements(this._entities[re],Ft);return Ft},t.prototype.removeComponentGroup=function(_t){if(_t.active){_t.active=!1;for(var Pt=_t.requiresNames,Ft=0;Ft<Pt.length;Ft++){var Dt=Pt[Ft],Ut=this._componentGroups[Dt];if(Ut){var Lt=Ut.indexOf(_t);-1!==Lt&&Ut.splice(Lt,1)}}return!0}return!1},t.prototype.registerSystem=function(_t){_t.active=!0,_t.activate&&_t.activate(this),this.simpleSystems.push(_t)},t.prototype.checkRequirementsAndAdd=function(_t){if(_t.isAddedToEngine()){for(var Pt in _t.components){Pt in this.entityLists||(this.entityLists[Pt]={}),this.entityLists[Pt][_t.uuid]=_t;var Ft=this._componentGroups[Pt];if(Ft)for(var Dt in Ft)this.checkRequirements(_t,Ft[Dt])}for(var Ut=0;Ut<this.simpleSystems.length;Ut++){var Lt=this.simpleSystems[Ut];Lt.onAddEntity&&Lt.onAddEntity(_t)}}},t.prototype.checkRequirements=function(_t,Pt){Pt.meetsRequirements(_t)?Pt.hasEntity(_t)||Pt.addEntity(_t):Pt.hasEntity(_t)&&Pt.removeEntity(_t)},t.prototype.componentAddedHandler=function(_t){var Pt,Ft=_t.entity,Dt=_t.componentName;if(Ft.isAddedToEngine()){this.entityLists[Dt]?this.entityLists[Dt][Ft.uuid]=Ft:this.entityLists[Dt]=((Pt={})[Ft.uuid]=Ft,Pt);var Ut=this._componentGroups[Dt];if(Ut)for(var Lt in Ut)this.checkRequirements(Ft,Ut[Lt])}},t.prototype.componentRemovedHandler=function(_t){var Pt=_t.entity,Ft=_t.componentName;if(Pt.isAddedToEngine()){delete this.entityLists[Ft][Pt.uuid];var Dt=this._componentGroups[Ft];if(Dt)for(var Ut in Dt)this.checkRequirements(Pt,Dt[Ut])}},t}(),ze=Promise.resolve().then.bind(Promise.resolve());function q(_t){var Pt=ze(_t);return Pt.isComplete=!1,Pt.then((function(_t){Pt.isComplete=!0,Pt.result=_t,Pt.didFail=!1})).catch((function(_t){Pt.isComplete=!0,Pt.error=_t,Pt.didFail=!0,d("executeTask: FAILED "+_t.toString(),_t)})),Pt}var De,Ue,Le,je,He=function(){function t(_t,Pt,Ft,Dt){void 0===Pt&&(Pt=!1),this.initalize(_t,Pt,Ft,Dt)}return t.prototype.initalize=function(_t,Pt,Ft,Dt){return void 0===Pt&&(Pt=!1),this.mask=_t,this.skipNextObservers=Pt,this.target=Ft,this.currentTarget=Dt,this},t}(),Z=function(_t,Pt,Ft){void 0===Ft&&(Ft=null),this.callback=_t,this.mask=Pt,this.scope=Ft,this.unregisterOnNextCall=!1,this._willBeUnregistered=!1},Ve=function(){function t(){this._observers=null,this._observables=null}return t.Watch=function(_t,Pt,Ft,Dt){var Ut,Lt;void 0===Ft&&(Ft=-1),void 0===Dt&&(Dt=null);var Kt=new t;Kt._observers=new Array,Kt._observables=_t;try{for(var Yt=u(_t),Zt=Yt.next();!Zt.done;Zt=Yt.next()){var ee=Zt.value.add(Pt,Ft,!1,Dt);ee&&Kt._observers.push(ee)}}catch(_t){Ut={error:_t}}finally{try{Zt&&!Zt.done&&(Lt=Yt.return)&&Lt.call(Yt)}finally{if(Ut)throw Ut.error}}return Kt},t.prototype.dispose=function(){if(this._observers&&this._observables)for(var _t=0;_t<this._observers.length;_t++)this._observables[_t].remove(this._observers[_t]);this._observers=null,this._observables=null},t}(),qe=function(){function t(_t){this._observers=new Array,this._onObserverAdded=null,this._eventState=new He(0),_t&&(this._onObserverAdded=_t)}return t.prototype.add=function(_t,Pt,Ft,Dt,Ut){if(void 0===Pt&&(Pt=-1),void 0===Ft&&(Ft=!1),void 0===Dt&&(Dt=null),void 0===Ut&&(Ut=!1),!_t)return null;var Lt=new Z(_t,Pt,Dt);return Lt.unregisterOnNextCall=Ut,Ft?this._observers.unshift(Lt):this._observers.push(Lt),this._onObserverAdded&&this._onObserverAdded(Lt),Lt},t.prototype.addOnce=function(_t){return this.add(_t,void 0,void 0,void 0,!0)},t.prototype.remove=function(_t){return!!_t&&-1!==this._observers.indexOf(_t)&&(this._deferUnregister(_t),!0)},t.prototype.removeCallback=function(_t,Pt){for(var Ft=0;Ft<this._observers.length;Ft++)if(this._observers[Ft].callback===_t&&(!Pt||Pt===this._observers[Ft].scope))return this._deferUnregister(this._observers[Ft]),!0;return!1},t.prototype.notifyObservers=function(_t,Pt,Ft,Dt){var Ut,Lt;if(void 0===Pt&&(Pt=-1),!this._observers.length)return!0;var Kt=this._eventState;Kt.mask=Pt,Kt.target=Ft,Kt.currentTarget=Dt,Kt.skipNextObservers=!1,Kt.lastReturnValue=_t;try{for(var Yt=u(this._observers),Zt=Yt.next();!Zt.done;Zt=Yt.next()){var ee=Zt.value;if(!ee._willBeUnregistered&&(ee.mask&Pt&&(ee.scope?Kt.lastReturnValue=ee.callback.apply(ee.scope,[_t,Kt]):Kt.lastReturnValue=ee.callback(_t,Kt),ee.unregisterOnNextCall&&this._deferUnregister(ee)),Kt.skipNextObservers))return!1}}catch(_t){Ut={error:_t}}finally{try{Zt&&!Zt.done&&(Lt=Yt.return)&&Lt.call(Yt)}finally{if(Ut)throw Ut.error}}return!0},t.prototype.notifyObserversWithPromise=function(_t,Pt,Ft,Dt){var Ut=this;void 0===Pt&&(Pt=-1);var Lt=Promise.resolve(_t);if(!this._observers.length)return Lt;var Kt=this._eventState;return Kt.mask=Pt,Kt.target=Ft,Kt.currentTarget=Dt,Kt.skipNextObservers=!1,this._observers.forEach((function(Ft){Kt.skipNextObservers||Ft._willBeUnregistered||Ft.mask&Pt&&(Lt=Ft.scope?Lt.then((function(Pt){return Kt.lastReturnValue=Pt,Ft.callback.apply(Ft.scope,[_t,Kt])})):Lt.then((function(Pt){return Kt.lastReturnValue=Pt,Ft.callback(_t,Kt)})),Ft.unregisterOnNextCall&&Ut._deferUnregister(Ft))})),Lt.then((function(){return _t}))},t.prototype.notifyObserver=function(_t,Pt,Ft){void 0===Ft&&(Ft=-1);var Dt=this._eventState;Dt.mask=Ft,Dt.skipNextObservers=!1,_t.callback(Pt,Dt)},t.prototype.hasObservers=function(){return this._observers.length>0},t.prototype.clear=function(){this._observers=new Array,this._onObserverAdded=null},t.prototype.clone=function(){var _t=new t;return _t._observers=this._observers.slice(0),_t},t.prototype.hasSpecificMask=function(_t){var Pt,Ft;void 0===_t&&(_t=-1);try{for(var Dt=u(this._observers),Ut=Dt.next();!Ut.done;Ut=Dt.next()){var Lt=Ut.value;if(Lt.mask&_t||Lt.mask===_t)return!0}}catch(_t){Pt={error:_t}}finally{try{Ut&&!Ut.done&&(Ft=Dt.return)&&Ft.call(Dt)}finally{if(Pt)throw Pt.error}}return!1},t.prototype._deferUnregister=function(_t){var Pt=this;_t.unregisterOnNextCall=!1,_t._willBeUnregistered=!0,q((function(){return function(_t,Pt,Ft,Dt){return new(Ft||(Ft=Promise))((function(Pt,Ut){function s(_t){try{u(Dt.next(_t))}catch(_t){Ut(_t)}}function a(_t){try{u(Dt.throw(_t))}catch(_t){Ut(_t)}}function u(_t){var Dt;_t.done?Pt(_t.value):(Dt=_t.value,Dt instanceof Ft?Dt:new Ft((function(_t){_t(Dt)}))).then(s,a)}u((Dt=Dt.apply(_t,[])).next())}))}(Pt,0,void 0,(function(){return function(_t,Pt){var Ft,Dt,Ut,Lt,Kt={label:0,sent:function(){if(1&Ut[0])throw Ut[1];return Ut[1]},trys:[],ops:[]};return Lt={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(Lt[Symbol.iterator]=function(){return this}),Lt;function a(Lt){return function(Yt){return function(Lt){if(Ft)throw new TypeError("Generator is already executing.");for(;Kt;)try{if(Ft=1,Dt&&(Ut=2&Lt[0]?Dt.return:Lt[0]?Dt.throw||((Ut=Dt.return)&&Ut.call(Dt),0):Dt.next)&&!(Ut=Ut.call(Dt,Lt[1])).done)return Ut;switch(Dt=0,Ut&&(Lt=[2&Lt[0],Ut.value]),Lt[0]){case 0:case 1:Ut=Lt;break;case 4:return Kt.label++,{value:Lt[1],done:!1};case 5:Kt.label++,Dt=Lt[1],Lt=[0];continue;case 7:Lt=Kt.ops.pop(),Kt.trys.pop();continue;default:if(!((Ut=(Ut=Kt.trys).length>0&&Ut[Ut.length-1])||6!==Lt[0]&&2!==Lt[0])){Kt=0;continue}if(3===Lt[0]&&(!Ut||Lt[1]>Ut[0]&&Lt[1]<Ut[3])){Kt.label=Lt[1];break}if(6===Lt[0]&&Kt.label<Ut[1]){Kt.label=Ut[1],Ut=Lt;break}if(Ut&&Kt.label<Ut[2]){Kt.label=Ut[2],Kt.ops.push(Lt);break}Ut[2]&&Kt.ops.pop(),Kt.trys.pop();continue}Lt=Pt.call(_t,Kt)}catch(_t){Lt=[6,_t],Dt=0}finally{Ft=Ut=0}if(5&Lt[0])throw Lt[1];return{value:Lt[0]?Lt[1]:void 0,done:!0}}([Lt,Yt])}}}(this,(function(Pt){return[2,this._remove(_t)]}))}))}))},t.prototype._remove=function(_t){if(!_t)return!1;var Pt=this._observers.indexOf(_t);return-1!==Pt&&(this._observers.splice(Pt,1),!0)},t}();_t.InputEventType=void 0,(Ue=_t.InputEventType||(_t.InputEventType={}))[Ue.DOWN=0]="DOWN",Ue[Ue.UP=1]="UP",_t.CameraMode=void 0,(Le=_t.CameraMode||(_t.CameraMode={}))[Le.FirstPerson=0]="FirstPerson",Le[Le.ThirdPerson=1]="ThirdPerson",Le[Le.BuildingToolGodMode=2]="BuildingToolGodMode",_t.LandRole=void 0,(je=_t.LandRole||(_t.LandRole={})).OWNER="owner",je.OPERATOR="operator";var Ge,We=r([w()],(function(_t,Pt){this.uuid=_t,this.payload=Pt})),Ke=r([w()],(function(_t){this.payload=_t})),Ye=r([w()],(function(_t){this.payload=_t}));function ot(_t){return function(){Ge&&Ge.subscribe(_t)}}var Qe=new qe(ot("cameraModeChanged")),Ze=new qe(ot("idleStateChanged")),tn=new qe(ot("onEnterScene")),en=tn,nn=new qe(ot("onLeaveScene")),rn=nn,on=new qe(ot("sceneStart")),an=new qe(ot("playerExpression"));function lt(_t){(Ge=_t)&&Ge.onEvent((function(_t){switch(_t.type){case"onEnterScene":return void tn.notifyObservers(_t.data);case"onLeaveScene":return void nn.notifyObservers(_t.data);case"cameraModeChanged":return void Qe.notifyObservers(_t.data);case"idleStateChanged":return void Ze.notifyObservers(_t.data);case"sceneStart":return void on.notifyObservers(_t.data);case"playerExpression":return void an.notifyObservers(_t.data)}}))}var sn,un,pn=function(){function t(_t){this.dcl=_t,this.cachedComponents={}}return t.prototype.activate=function(_t){var Pt=this;this.engine=_t,_t.eventManager.addListener(Yt,this,this.componentAdded),_t.eventManager.addListener(Kt,this,this.componentRemoved),_t.eventManager.addListener(Se,this,this.disposableComponentCreated),_t.eventManager.addListener(Ie,this,this.disposableComponentRemoved),_t.eventManager.addListener(Re,this,this.disposableComponentUpdated),_t.eventManager.addListener(Zt,this,this.parentChanged);var Ft=_t.rootEntity.uuid;this.dcl.addEntity(Ft),this.dcl.onUpdate((function(Ft){_t.update(Ft),Pt.presentEntities()})),this.dcl.onEvent((function(Pt){var Ft=Pt.data;switch(Pt.type){case"uuidEvent":_t.eventManager.fireEvent(new We(Ft.uuid,Ft.payload));break;case"raycastResponse":("HitFirst"===Ft.queryType||"HitAll"===Ft.queryType)&&_t.eventManager.fireEvent(new Ke(Ft));break;case"pointerEvent":_t.eventManager.fireEvent(new Ye(Ft.payload))}}))},t.prototype.onAddEntity=function(_t){if(_t&&_t.isAddedToEngine()){var Pt=_t.uuid,Ft=_t.getParent();for(var Dt in this.dcl.addEntity(Pt),Ft&&this.dcl.setParent(Pt,Ft.uuid),this.cachedComponents[Pt]={},_t.components){var Ut=_t.components[Dt],Lt=D(Ut);if(null!==Lt)if(H(Ut))this.dcl.attachEntityComponent(_t.uuid,Dt,N(Ut));else{var Kt=JSON.stringify(Ut);this.dcl.updateEntityComponent(Pt,Dt,Lt,Kt),this.cachedComponents[Pt][Dt]=Kt}}}},t.prototype.onRemoveEntity=function(_t){if(_t.isAddedToEngine()){var Pt=_t.uuid;this.dcl.removeEntity(Pt),delete this.cachedComponents[Pt]}},t.prototype.presentEntities=function(){for(var _t in this.engine.entities){var Pt=this.engine.entities[_t];for(var Ft in Pt.components){var Dt=D(Kt=Pt.components[Ft]);if(null!==Dt&&!H(Kt)){var Ut=this.getJsonIfDirty(Pt.uuid,Ft,Kt);Ut&&(this.dcl.updateEntityComponent(Pt.uuid,Ft,Dt,Ut),this.clearDirty(Pt.uuid,Ft,Kt,Ut))}}}for(var Lt in this.engine.disposableComponents){var Kt;(Kt=this.engine.disposableComponents[Lt])instanceof Ne&&Kt.dirty&&(this.dcl.componentUpdated(Lt,JSON.stringify(Kt)),Kt.dirty=!1)}},t.prototype.componentAdded=function(_t){if(_t.entity.isAddedToEngine()){var Pt=_t.entity.components[_t.componentName];if(H(Pt))this.dcl.attachEntityComponent(_t.entity.uuid,_t.componentName,N(Pt));else if(null!==_t.classId){var Ft=JSON.stringify(Pt);this.dcl.updateEntityComponent(_t.entity.uuid,_t.componentName,_t.classId,Ft),this.cachedComponents[_t.entity.uuid][_t.componentName]=Ft}}},t.prototype.componentRemoved=function(_t){_t.entity.isAddedToEngine()&&(this.dcl.removeEntityComponent(_t.entity.uuid,_t.componentName),delete this.cachedComponents[_t.entity.uuid][_t.componentName])},t.prototype.disposableComponentCreated=function(_t){this.dcl.componentCreated(_t.componentId,_t.componentName,_t.classId)},t.prototype.disposableComponentRemoved=function(_t){this.dcl.componentDisposed(_t.componentId)},t.prototype.disposableComponentUpdated=function(_t){this.dcl.componentUpdated(_t.componentId,JSON.stringify(_t.component))},t.prototype.parentChanged=function(_t){this.dcl.setParent(_t.entity.uuid,_t.parent?_t.parent.uuid:"0")},t.prototype.getJsonIfDirty=function(_t,Pt,Ft){var Dt=JSON.stringify(Ft);return Dt!==this.cachedComponents[_t][Pt]&&Dt},t.prototype.clearDirty=function(_t,Pt,Ft,Dt){this.cachedComponents[_t][Pt]=Dt},t}();_t.Orientation=void 0,(sn=_t.Orientation||(_t.Orientation={}))[sn.CW=0]="CW",sn[sn.CCW=1]="CCW",_t.Space=void 0,(un=_t.Space||(_t.Space={}))[un.LOCAL=0]="LOCAL",un[un.WORLD=1]="WORLD",un[un.BONE=2]="BONE";var ln,dn=1/2.2,yn=2.2,hn=1e-6,fn=Math.PI/180,mn=360/(2*Math.PI),vn=function(){function t(){}return t.WithinEpsilon=function(_t,Pt,Ft){void 0===Ft&&(Ft=1401298e-51);var Dt=_t-Pt;return-Ft<=Dt&&Dt<=Ft},t.ToHex=function(_t){var Pt=_t.toString(16);return _t<=15?("0"+Pt).toUpperCase():Pt.toUpperCase()},t.Sign=function(_t){var Pt=+_t;return 0===Pt||isNaN(Pt)?Pt:Pt>0?1:-1},t.Clamp=function(_t,Pt,Ft){return void 0===Pt&&(Pt=0),void 0===Ft&&(Ft=1),Math.min(Ft,Math.max(Pt,_t))},t.Log2=function(_t){return Math.log(_t)*Math.LOG2E},t.Repeat=function(_t,Pt){return _t-Math.floor(_t/Pt)*Pt},t.Normalize=function(_t,Pt,Ft){return(_t-Pt)/(Ft-Pt)},t.Denormalize=function(_t,Pt,Ft){return _t*(Ft-Pt)+Pt},t.DeltaAngle=function(_t,Pt){var Ft=t.Repeat(Pt-_t,360);return Ft>180&&(Ft-=360),Ft},t.PingPong=function(_t,Pt){var Ft=t.Repeat(_t,2*Pt);return Pt-Math.abs(Ft-Pt)},t.SmoothStep=function(_t,Pt,Ft){var Dt=t.Clamp(Ft);return Pt*(Dt=-2*Dt*Dt*Dt+3*Dt*Dt)+_t*(1-Dt)},t.MoveTowards=function(_t,Pt,Ft){return Math.abs(Pt-_t)<=Ft?Pt:_t+t.Sign(Pt-_t)*Ft},t.MoveTowardsAngle=function(_t,Pt,Ft){var Dt=t.DeltaAngle(_t,Pt);return-Ft<Dt&&Dt<Ft?Pt:t.MoveTowards(_t,_t+Dt,Ft)},t.Lerp=function(_t,Pt,Ft){return _t+(Pt-_t)*Ft},t.LerpAngle=function(_t,Pt,Ft){var Dt=t.Repeat(Pt-_t,360);return Dt>180&&(Dt-=360),_t+Dt*t.Clamp(Ft)},t.InverseLerp=function(_t,Pt,Ft){return _t!==Pt?t.Clamp((Ft-_t)/(Pt-_t)):0},t.Hermite=function(_t,Pt,Ft,Dt,Ut){var Lt=Ut*Ut,Kt=Ut*Lt;return _t*(2*Kt-3*Lt+1)+Ft*(-2*Kt+3*Lt)+Pt*(Kt-2*Lt+Ut)+Dt*(Kt-Lt)},t.RandomRange=function(_t,Pt){return _t===Pt?_t:Math.random()*(Pt-_t)+_t},t.RangeToPercent=function(_t,Pt,Ft){return(_t-Pt)/(Ft-Pt)},t.PercentToRange=function(_t,Pt,Ft){return(Ft-Pt)*_t+Pt},t.NormalizeRadians=function(_t){return _t-t.TwoPi*Math.floor((_t+Math.PI)/t.TwoPi)},t.TwoPi=2*Math.PI,t}(),gn=function(){function t(_t,Pt,Ft,Dt){this.x=_t,this.y=Pt,this.z=Ft,this.w=Dt}return t.Add=function(_t,Pt){return new t(_t.x,_t.y,_t.z,_t.w).addInPlace(Pt)},t.FromArray=function(_t,Pt){return void 0===Pt&&(Pt=0),new t(_t[Pt],_t[Pt+1],_t[Pt+2],_t[Pt+3])},t.FromArrayToRef=function(_t,Pt,Ft){Ft.x=_t[Pt],Ft.y=_t[Pt+1],Ft.z=_t[Pt+2],Ft.w=_t[Pt+3]},t.FromFloatArrayToRef=function(_t,Pt,Ft){t.FromArrayToRef(_t,Pt,Ft)},t.FromFloatsToRef=function(_t,Pt,Ft,Dt,Ut){Ut.x=_t,Ut.y=Pt,Ut.z=Ft,Ut.w=Dt},t.Zero=function(){return new t(0,0,0,0)},t.One=function(){return new t(1,1,1,1)},t.Normalize=function(_t){var Pt=t.Zero();return t.NormalizeToRef(_t,Pt),Pt},t.NormalizeToRef=function(_t,Pt){Pt.copyFrom(_t),Pt.normalize()},t.Minimize=function(_t,Pt){var Ft=new t(_t.x,_t.y,_t.z,_t.w);return Ft.minimizeInPlace(Pt),Ft},t.Maximize=function(_t,Pt){var Ft=new t(_t.x,_t.y,_t.z,_t.w);return Ft.maximizeInPlace(Pt),Ft},t.Distance=function(_t,Pt){return Math.sqrt(t.DistanceSquared(_t,Pt))},t.DistanceSquared=function(_t,Pt){var Ft=_t.x-Pt.x,Dt=_t.y-Pt.y,Ut=_t.z-Pt.z,Lt=_t.w-Pt.w;return Ft*Ft+Dt*Dt+Ut*Ut+Lt*Lt},t.Center=function(_t,Pt){var Ft=t.Add(_t,Pt);return Ft.scaleInPlace(.5),Ft},t.TransformNormal=function(_t,Pt){var Ft=t.Zero();return t.TransformNormalToRef(_t,Pt,Ft),Ft},t.TransformNormalToRef=function(_t,Pt,Ft){var Dt=Pt.m,Ut=_t.x*Dt[0]+_t.y*Dt[4]+_t.z*Dt[8],Lt=_t.x*Dt[1]+_t.y*Dt[5]+_t.z*Dt[9],Kt=_t.x*Dt[2]+_t.y*Dt[6]+_t.z*Dt[10];Ft.x=Ut,Ft.y=Lt,Ft.z=Kt,Ft.w=_t.w},t.TransformNormalFromFloatsToRef=function(_t,Pt,Ft,Dt,Ut,Lt){var Kt=Ut.m;Lt.x=_t*Kt[0]+Pt*Kt[4]+Ft*Kt[8],Lt.y=_t*Kt[1]+Pt*Kt[5]+Ft*Kt[9],Lt.z=_t*Kt[2]+Pt*Kt[6]+Ft*Kt[10],Lt.w=Dt},t.prototype.toString=function(){return"{X: "+this.x+" Y:"+this.y+" Z:"+this.z+" W:"+this.w+"}"},t.prototype.getClassName=function(){return"Vector4"},t.prototype.getHashCode=function(){var _t=this.x||0;return 397*(_t=397*(_t=397*_t^(this.y||0))^(this.z||0))^(this.w||0)},t.prototype.asArray=function(){var _t=new Array;return this.toArray(_t,0),_t},t.prototype.toArray=function(_t,Pt){return void 0===Pt&&(Pt=0),_t[Pt]=this.x,_t[Pt+1]=this.y,_t[Pt+2]=this.z,_t[Pt+3]=this.w,this},t.prototype.addInPlace=function(_t){return this.x+=_t.x,this.y+=_t.y,this.z+=_t.z,this.w+=_t.w,this},t.prototype.add=function(_t){return new t(this.x+_t.x,this.y+_t.y,this.z+_t.z,this.w+_t.w)},t.prototype.addToRef=function(_t,Pt){return Pt.x=this.x+_t.x,Pt.y=this.y+_t.y,Pt.z=this.z+_t.z,Pt.w=this.w+_t.w,this},t.prototype.subtractInPlace=function(_t){return this.x-=_t.x,this.y-=_t.y,this.z-=_t.z,this.w-=_t.w,this},t.prototype.subtract=function(_t){return new t(this.x-_t.x,this.y-_t.y,this.z-_t.z,this.w-_t.w)},t.prototype.subtractToRef=function(_t,Pt){return Pt.x=this.x-_t.x,Pt.y=this.y-_t.y,Pt.z=this.z-_t.z,Pt.w=this.w-_t.w,this},t.prototype.subtractFromFloats=function(_t,Pt,Ft,Dt){return new t(this.x-_t,this.y-Pt,this.z-Ft,this.w-Dt)},t.prototype.subtractFromFloatsToRef=function(_t,Pt,Ft,Dt,Ut){return Ut.x=this.x-_t,Ut.y=this.y-Pt,Ut.z=this.z-Ft,Ut.w=this.w-Dt,this},t.prototype.negate=function(){return new t(-this.x,-this.y,-this.z,-this.w)},t.prototype.scaleInPlace=function(_t){return this.x*=_t,this.y*=_t,this.z*=_t,this.w*=_t,this},t.prototype.scale=function(_t){return new t(this.x*_t,this.y*_t,this.z*_t,this.w*_t)},t.prototype.scaleToRef=function(_t,Pt){return Pt.x=this.x*_t,Pt.y=this.y*_t,Pt.z=this.z*_t,Pt.w=this.w*_t,this},t.prototype.scaleAndAddToRef=function(_t,Pt){return Pt.x+=this.x*_t,Pt.y+=this.y*_t,Pt.z+=this.z*_t,Pt.w+=this.w*_t,this},t.prototype.equals=function(_t){return _t&&this.x===_t.x&&this.y===_t.y&&this.z===_t.z&&this.w===_t.w},t.prototype.equalsWithEpsilon=function(_t,Pt){return void 0===Pt&&(Pt=hn),_t&&vn.WithinEpsilon(this.x,_t.x,Pt)&&vn.WithinEpsilon(this.y,_t.y,Pt)&&vn.WithinEpsilon(this.z,_t.z,Pt)&&vn.WithinEpsilon(this.w,_t.w,Pt)},t.prototype.equalsToFloats=function(_t,Pt,Ft,Dt){return this.x===_t&&this.y===Pt&&this.z===Ft&&this.w===Dt},t.prototype.multiplyInPlace=function(_t){return this.x*=_t.x,this.y*=_t.y,this.z*=_t.z,this.w*=_t.w,this},t.prototype.multiply=function(_t){return new t(this.x*_t.x,this.y*_t.y,this.z*_t.z,this.w*_t.w)},t.prototype.multiplyToRef=function(_t,Pt){return Pt.x=this.x*_t.x,Pt.y=this.y*_t.y,Pt.z=this.z*_t.z,Pt.w=this.w*_t.w,this},t.prototype.multiplyByFloats=function(_t,Pt,Ft,Dt){return new t(this.x*_t,this.y*Pt,this.z*Ft,this.w*Dt)},t.prototype.divide=function(_t){return new t(this.x/_t.x,this.y/_t.y,this.z/_t.z,this.w/_t.w)},t.prototype.divideToRef=function(_t,Pt){return Pt.x=this.x/_t.x,Pt.y=this.y/_t.y,Pt.z=this.z/_t.z,Pt.w=this.w/_t.w,this},t.prototype.divideInPlace=function(_t){return this.divideToRef(_t,this)},t.prototype.minimizeInPlace=function(_t){return _t.x<this.x&&(this.x=_t.x),_t.y<this.y&&(this.y=_t.y),_t.z<this.z&&(this.z=_t.z),_t.w<this.w&&(this.w=_t.w),this},t.prototype.maximizeInPlace=function(_t){return _t.x>this.x&&(this.x=_t.x),_t.y>this.y&&(this.y=_t.y),_t.z>this.z&&(this.z=_t.z),_t.w>this.w&&(this.w=_t.w),this},t.prototype.floor=function(){return new t(Math.floor(this.x),Math.floor(this.y),Math.floor(this.z),Math.floor(this.w))},t.prototype.fract=function(){return new t(this.x-Math.floor(this.x),this.y-Math.floor(this.y),this.z-Math.floor(this.z),this.w-Math.floor(this.w))},t.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},t.prototype.lengthSquared=function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},t.prototype.normalize=function(){var _t=this.length();return 0===_t?this:this.scaleInPlace(1/_t)},t.prototype.toVector3=function(){return new wn(this.x,this.y,this.z)},t.prototype.clone=function(){return new t(this.x,this.y,this.z,this.w)},t.prototype.copyFrom=function(_t){return this.x=_t.x,this.y=_t.y,this.z=_t.z,this.w=_t.w,this},t.prototype.copyFromFloats=function(_t,Pt,Ft,Dt){return this.x=_t,this.y=Pt,this.z=Ft,this.w=Dt,this},t.prototype.set=function(_t,Pt,Ft,Dt){return this.copyFromFloats(_t,Pt,Ft,Dt)},t.prototype.setAll=function(_t){return this.x=this.y=this.z=this.w=_t,this},t}(),bn=function(){function t(){this._isIdentity=!1,this._isIdentityDirty=!0,this._isIdentity3x2=!0,this._isIdentity3x2Dirty=!0,this._m=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this._updateIdentityStatus(!1)}return Object.defineProperty(t.prototype,"m",{get:function(){return this._m},enumerable:!1,configurable:!0}),Object.defineProperty(t,"IdentityReadOnly",{get:function(){return t._identityReadOnly},enumerable:!1,configurable:!0}),t.FromArray=function(_t,Pt){void 0===Pt&&(Pt=0);var Ft=new t;return t.FromArrayToRef(_t,Pt,Ft),Ft},t.FromArrayToRef=function(_t,Pt,Ft){for(var Dt=0;Dt<16;Dt++)Ft._m[Dt]=_t[Dt+Pt];Ft._markAsUpdated()},t.FromFloatArrayToRefScaled=function(_t,Pt,Ft,Dt){for(var Ut=0;Ut<16;Ut++)Dt._m[Ut]=_t[Ut+Pt]*Ft;Dt._markAsUpdated()},t.FromValuesToRef=function(_t,Pt,Ft,Dt,Ut,Lt,Kt,Yt,Zt,ee,re,ve,Me,Se,Ie,Re,Ne){var Pe=Ne._m;Pe[0]=_t,Pe[1]=Pt,Pe[2]=Ft,Pe[3]=Dt,Pe[4]=Ut,Pe[5]=Lt,Pe[6]=Kt,Pe[7]=Yt,Pe[8]=Zt,Pe[9]=ee,Pe[10]=re,Pe[11]=ve,Pe[12]=Me,Pe[13]=Se,Pe[14]=Ie,Pe[15]=Re,Ne._markAsUpdated()},t.FromValues=function(_t,Pt,Ft,Dt,Ut,Lt,Kt,Yt,Zt,ee,re,ve,Me,Se,Ie,Re){var Ne=new t,Pe=Ne._m;return Pe[0]=_t,Pe[1]=Pt,Pe[2]=Ft,Pe[3]=Dt,Pe[4]=Ut,Pe[5]=Lt,Pe[6]=Kt,Pe[7]=Yt,Pe[8]=Zt,Pe[9]=ee,Pe[10]=re,Pe[11]=ve,Pe[12]=Me,Pe[13]=Se,Pe[14]=Ie,Pe[15]=Re,Ne._markAsUpdated(),Ne},t.Compose=function(_t,Pt,Ft){var Dt=new t;return t.ComposeToRef(_t,Pt,Ft,Dt),Dt},t.ComposeToRef=function(_t,Pt,Ft,Dt){t.ScalingToRef(_t.x,_t.y,_t.z,Tn.Matrix[1]),Pt.toRotationMatrix(Tn.Matrix[0]),Tn.Matrix[1].multiplyToRef(Tn.Matrix[0],Dt),Dt.setTranslation(Ft)},t.Identity=function(){var _t=t.FromValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return _t._updateIdentityStatus(!0),_t},t.IdentityToRef=function(_t){t.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,_t),_t._updateIdentityStatus(!0)},t.Zero=function(){var _t=t.FromValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);return _t._updateIdentityStatus(!1),_t},t.RotationX=function(_t){var Pt=new t;return t.RotationXToRef(_t,Pt),Pt},t.Invert=function(_t){var Pt=new t;return _t.invertToRef(Pt),Pt},t.RotationXToRef=function(_t,Pt){var Ft=Math.sin(_t),Dt=Math.cos(_t);t.FromValuesToRef(1,0,0,0,0,Dt,Ft,0,0,-Ft,Dt,0,0,0,0,1,Pt),Pt._updateIdentityStatus(1===Dt&&0===Ft)},t.RotationY=function(_t){var Pt=new t;return t.RotationYToRef(_t,Pt),Pt},t.RotationYToRef=function(_t,Pt){var Ft=Math.sin(_t),Dt=Math.cos(_t);t.FromValuesToRef(Dt,0,-Ft,0,0,1,0,0,Ft,0,Dt,0,0,0,0,1,Pt),Pt._updateIdentityStatus(1===Dt&&0===Ft)},t.RotationZ=function(_t){var Pt=new t;return t.RotationZToRef(_t,Pt),Pt},t.RotationZToRef=function(_t,Pt){var Ft=Math.sin(_t),Dt=Math.cos(_t);t.FromValuesToRef(Dt,Ft,0,0,-Ft,Dt,0,0,0,0,1,0,0,0,0,1,Pt),Pt._updateIdentityStatus(1===Dt&&0===Ft)},t.RotationAxis=function(_t,Pt){var Ft=new t;return t.RotationAxisToRef(_t,Pt,Ft),Ft},t.RotationAxisToRef=function(_t,Pt,Ft){var Dt=Math.sin(-Pt),Ut=Math.cos(-Pt),Lt=1-Ut;_t.normalize();var Kt=Ft._m;Kt[0]=_t.x*_t.x*Lt+Ut,Kt[1]=_t.x*_t.y*Lt-_t.z*Dt,Kt[2]=_t.x*_t.z*Lt+_t.y*Dt,Kt[3]=0,Kt[4]=_t.y*_t.x*Lt+_t.z*Dt,Kt[5]=_t.y*_t.y*Lt+Ut,Kt[6]=_t.y*_t.z*Lt-_t.x*Dt,Kt[7]=0,Kt[8]=_t.z*_t.x*Lt-_t.y*Dt,Kt[9]=_t.z*_t.y*Lt+_t.x*Dt,Kt[10]=_t.z*_t.z*Lt+Ut,Kt[11]=0,Kt[12]=0,Kt[13]=0,Kt[14]=0,Kt[15]=1,Ft._markAsUpdated()},t.RotationYawPitchRoll=function(_t,Pt,Ft){var Dt=new t;return t.RotationYawPitchRollToRef(_t,Pt,Ft,Dt),Dt},t.RotationYawPitchRollToRef=function(_t,Pt,Ft,Dt){_n.RotationYawPitchRollToRef(_t,Pt,Ft,Tn.Quaternion[0]),Tn.Quaternion[0].toRotationMatrix(Dt)},t.Scaling=function(_t,Pt,Ft){var Dt=new t;return t.ScalingToRef(_t,Pt,Ft,Dt),Dt},t.ScalingToRef=function(_t,Pt,Ft,Dt){t.FromValuesToRef(_t,0,0,0,0,Pt,0,0,0,0,Ft,0,0,0,0,1,Dt),Dt._updateIdentityStatus(1===_t&&1===Pt&&1===Ft)},t.Translation=function(_t,Pt,Ft){var Dt=new t;return t.TranslationToRef(_t,Pt,Ft,Dt),Dt},t.TranslationToRef=function(_t,Pt,Ft,Dt){t.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,_t,Pt,Ft,1,Dt),Dt._updateIdentityStatus(0===_t&&0===Pt&&0===Ft)},t.Lerp=function(_t,Pt,Ft){var Dt=new t;return t.LerpToRef(_t,Pt,Ft,Dt),Dt},t.LerpToRef=function(_t,Pt,Ft,Dt){for(var Ut=0;Ut<16;Ut++)Dt._m[Ut]=_t._m[Ut]*(1-Ft)+Pt._m[Ut]*Ft;Dt._markAsUpdated()},t.DecomposeLerp=function(_t,Pt,Ft){var Dt=new t;return t.DecomposeLerpToRef(_t,Pt,Ft,Dt),Dt},t.DecomposeLerpToRef=function(_t,Pt,Ft,Dt){var Ut=Tn.Vector3[0],Lt=Tn.Quaternion[0],Kt=Tn.Vector3[1];_t.decompose(Ut,Lt,Kt);var Yt=Tn.Vector3[2],Zt=Tn.Quaternion[1],ee=Tn.Vector3[3];Pt.decompose(Yt,Zt,ee);var re=Tn.Vector3[4];wn.LerpToRef(Ut,Yt,Ft,re);var ve=Tn.Quaternion[2];_n.SlerpToRef(Lt,Zt,Ft,ve);var Me=Tn.Vector3[5];wn.LerpToRef(Kt,ee,Ft,Me),t.ComposeToRef(re,ve,Me,Dt)},t.LookAtLH=function(_t,Pt,Ft){var Dt=new t;return t.LookAtLHToRef(_t,Pt,Ft,Dt),Dt},t.LookAtLHToRef=function(_t,Pt,Ft,Dt){var Ut=Tn.Vector3[0],Lt=Tn.Vector3[1],Kt=Tn.Vector3[2];Pt.subtractToRef(_t,Kt),Kt.normalize(),wn.CrossToRef(Ft,Kt,Ut);var Yt=Ut.lengthSquared();0===Yt?Ut.x=1:Ut.normalizeFromLength(Math.sqrt(Yt)),wn.CrossToRef(Kt,Ut,Lt),Lt.normalize();var Zt=-wn.Dot(Ut,_t),ee=-wn.Dot(Lt,_t),re=-wn.Dot(Kt,_t);t.FromValuesToRef(Ut.x,Lt.x,Kt.x,0,Ut.y,Lt.y,Kt.y,0,Ut.z,Lt.z,Kt.z,0,Zt,ee,re,1,Dt)},t.LookAtRH=function(_t,Pt,Ft){var Dt=new t;return t.LookAtRHToRef(_t,Pt,Ft,Dt),Dt},t.LookAtRHToRef=function(_t,Pt,Ft,Dt){var Ut=Tn.Vector3[0],Lt=Tn.Vector3[1],Kt=Tn.Vector3[2];_t.subtractToRef(Pt,Kt),Kt.normalize(),wn.CrossToRef(Ft,Kt,Ut);var Yt=Ut.lengthSquared();0===Yt?Ut.x=1:Ut.normalizeFromLength(Math.sqrt(Yt)),wn.CrossToRef(Kt,Ut,Lt),Lt.normalize();var Zt=-wn.Dot(Ut,_t),ee=-wn.Dot(Lt,_t),re=-wn.Dot(Kt,_t);t.FromValuesToRef(Ut.x,Lt.x,Kt.x,0,Ut.y,Lt.y,Kt.y,0,Ut.z,Lt.z,Kt.z,0,Zt,ee,re,1,Dt)},t.OrthoLH=function(_t,Pt,Ft,Dt){var Ut=new t;return t.OrthoLHToRef(_t,Pt,Ft,Dt,Ut),Ut},t.OrthoLHToRef=function(_t,Pt,Ft,Dt,Ut){var Lt=2/_t,Kt=2/Pt,Yt=2/(Dt-Ft),Zt=-(Dt+Ft)/(Dt-Ft);t.FromValuesToRef(Lt,0,0,0,0,Kt,0,0,0,0,Yt,0,0,0,Zt,1,Ut),Ut._updateIdentityStatus(1===Lt&&1===Kt&&1===Yt&&0===Zt)},t.OrthoOffCenterLH=function(_t,Pt,Ft,Dt,Ut,Lt){var Kt=new t;return t.OrthoOffCenterLHToRef(_t,Pt,Ft,Dt,Ut,Lt,Kt),Kt},t.OrthoOffCenterLHToRef=function(_t,Pt,Ft,Dt,Ut,Lt,Kt){var Yt=2/(Pt-_t),Zt=2/(Dt-Ft),ee=2/(Lt-Ut),re=-(Lt+Ut)/(Lt-Ut),ve=(_t+Pt)/(_t-Pt),Me=(Dt+Ft)/(Ft-Dt);t.FromValuesToRef(Yt,0,0,0,0,Zt,0,0,0,0,ee,0,ve,Me,re,1,Kt),Kt._markAsUpdated()},t.OrthoOffCenterRH=function(_t,Pt,Ft,Dt,Ut,Lt){var Kt=new t;return t.OrthoOffCenterRHToRef(_t,Pt,Ft,Dt,Ut,Lt,Kt),Kt},t.OrthoOffCenterRHToRef=function(_t,Pt,Ft,Dt,Ut,Lt,Kt){t.OrthoOffCenterLHToRef(_t,Pt,Ft,Dt,Ut,Lt,Kt),Kt._m[10]*=-1},t.PerspectiveLH=function(_t,Pt,Ft,Dt){var Ut=new t,Lt=2*Ft/_t,Kt=2*Ft/Pt,Yt=(Dt+Ft)/(Dt-Ft),Zt=-2*Dt*Ft/(Dt-Ft);return t.FromValuesToRef(Lt,0,0,0,0,Kt,0,0,0,0,Yt,1,0,0,Zt,0,Ut),Ut._updateIdentityStatus(!1),Ut},t.PerspectiveFovLH=function(_t,Pt,Ft,Dt){var Ut=new t;return t.PerspectiveFovLHToRef(_t,Pt,Ft,Dt,Ut),Ut},t.PerspectiveFovLHToRef=function(_t,Pt,Ft,Dt,Ut,Lt){void 0===Lt&&(Lt=!0);var Kt=Ft,Yt=Dt,Zt=1/Math.tan(.5*_t),ee=Lt?Zt/Pt:Zt,re=Lt?Zt:Zt*Pt,ve=(Yt+Kt)/(Yt-Kt),Me=-2*Yt*Kt/(Yt-Kt);t.FromValuesToRef(ee,0,0,0,0,re,0,0,0,0,ve,1,0,0,Me,0,Ut),Ut._updateIdentityStatus(!1)},t.PerspectiveFovRH=function(_t,Pt,Ft,Dt){var Ut=new t;return t.PerspectiveFovRHToRef(_t,Pt,Ft,Dt,Ut),Ut},t.PerspectiveFovRHToRef=function(_t,Pt,Ft,Dt,Ut,Lt){void 0===Lt&&(Lt=!0);var Kt=Ft,Yt=Dt,Zt=1/Math.tan(.5*_t),ee=Lt?Zt/Pt:Zt,re=Lt?Zt:Zt*Pt,ve=-(Yt+Kt)/(Yt-Kt),Me=-2*Yt*Kt/(Yt-Kt);t.FromValuesToRef(ee,0,0,0,0,re,0,0,0,0,ve,-1,0,0,Me,0,Ut),Ut._updateIdentityStatus(!1)},t.PerspectiveFovWebVRToRef=function(_t,Pt,Ft,Dt,Ut){void 0===Ut&&(Ut=!1);var Lt=Ut?-1:1,Kt=Math.tan(_t.upDegrees*Math.PI/180),Yt=Math.tan(_t.downDegrees*Math.PI/180),Zt=Math.tan(_t.leftDegrees*Math.PI/180),ee=Math.tan(_t.rightDegrees*Math.PI/180),re=2/(Zt+ee),ve=2/(Kt+Yt),Me=Dt._m;Me[0]=re,Me[1]=Me[2]=Me[3]=Me[4]=0,Me[5]=ve,Me[6]=Me[7]=0,Me[8]=(Zt-ee)*re*.5,Me[9]=-(Kt-Yt)*ve*.5,Me[10]=-Ft/(Pt-Ft),Me[11]=1*Lt,Me[12]=Me[13]=Me[15]=0,Me[14]=-2*Ft*Pt/(Ft-Pt),Dt._markAsUpdated()},t.GetAsMatrix2x2=function(_t){return[_t._m[0],_t._m[1],_t._m[4],_t._m[5]]},t.GetAsMatrix3x3=function(_t){return[_t._m[0],_t._m[1],_t._m[2],_t._m[4],_t._m[5],_t._m[6],_t._m[8],_t._m[9],_t._m[10]]},t.Transpose=function(_t){var Pt=new t;return t.TransposeToRef(_t,Pt),Pt},t.TransposeToRef=function(_t,Pt){var Ft=Pt._m,Dt=_t._m;Ft[0]=Dt[0],Ft[1]=Dt[4],Ft[2]=Dt[8],Ft[3]=Dt[12],Ft[4]=Dt[1],Ft[5]=Dt[5],Ft[6]=Dt[9],Ft[7]=Dt[13],Ft[8]=Dt[2],Ft[9]=Dt[6],Ft[10]=Dt[10],Ft[11]=Dt[14],Ft[12]=Dt[3],Ft[13]=Dt[7],Ft[14]=Dt[11],Ft[15]=Dt[15],Pt._updateIdentityStatus(_t._isIdentity,_t._isIdentityDirty)},t.Reflection=function(_t){var Pt=new t;return t.ReflectionToRef(_t,Pt),Pt},t.ReflectionToRef=function(_t,Pt){_t.normalize();var Ft=_t.normal.x,Dt=_t.normal.y,Ut=_t.normal.z,Lt=-2*Ft,Kt=-2*Dt,Yt=-2*Ut;t.FromValuesToRef(Lt*Ft+1,Kt*Ft,Yt*Ft,0,Lt*Dt,Kt*Dt+1,Yt*Dt,0,Lt*Ut,Kt*Ut,Yt*Ut+1,0,Lt*_t.d,Kt*_t.d,Yt*_t.d,1,Pt)},t.FromXYZAxesToRef=function(_t,Pt,Ft,Dt){t.FromValuesToRef(_t.x,_t.y,_t.z,0,Pt.x,Pt.y,Pt.z,0,Ft.x,Ft.y,Ft.z,0,0,0,0,1,Dt)},t.FromQuaternionToRef=function(_t,Pt){var Ft=_t.x*_t.x,Dt=_t.y*_t.y,Ut=_t.z*_t.z,Lt=_t.x*_t.y,Kt=_t.z*_t.w,Yt=_t.z*_t.x,Zt=_t.y*_t.w,ee=_t.y*_t.z,re=_t.x*_t.w;Pt._m[0]=1-2*(Dt+Ut),Pt._m[1]=2*(Lt+Kt),Pt._m[2]=2*(Yt-Zt),Pt._m[3]=0,Pt._m[4]=2*(Lt-Kt),Pt._m[5]=1-2*(Ut+Ft),Pt._m[6]=2*(ee+re),Pt._m[7]=0,Pt._m[8]=2*(Yt+Zt),Pt._m[9]=2*(ee-re),Pt._m[10]=1-2*(Dt+Ft),Pt._m[11]=0,Pt._m[12]=0,Pt._m[13]=0,Pt._m[14]=0,Pt._m[15]=1,Pt._markAsUpdated()},t.prototype._markAsUpdated=function(){this.updateFlag=t._updateFlagSeed++,this._isIdentity=!1,this._isIdentity3x2=!1,this._isIdentityDirty=!0,this._isIdentity3x2Dirty=!0},t.prototype.isIdentity=function(){if(this._isIdentityDirty){this._isIdentityDirty=!1;var _t=this._m;this._isIdentity=1===_t[0]&&0===_t[1]&&0===_t[2]&&0===_t[3]&&0===_t[4]&&1===_t[5]&&0===_t[6]&&0===_t[7]&&0===_t[8]&&0===_t[9]&&1===_t[10]&&0===_t[11]&&0===_t[12]&&0===_t[13]&&0===_t[14]&&1===_t[15]}return this._isIdentity},t.prototype.isIdentityAs3x2=function(){return this._isIdentity3x2Dirty&&(this._isIdentity3x2Dirty=!1,1!==this._m[0]||1!==this._m[5]||1!==this._m[15]||0!==this._m[1]||0!==this._m[2]||0!==this._m[3]||0!==this._m[4]||0!==this._m[6]||0!==this._m[7]||0!==this._m[8]||0!==this._m[9]||0!==this._m[10]||0!==this._m[11]||0!==this._m[12]||0!==this._m[13]||0!==this._m[14]?this._isIdentity3x2=!1:this._isIdentity3x2=!0),this._isIdentity3x2},t.prototype.determinant=function(){if(!0===this._isIdentity)return 1;var _t=this._m,Pt=_t[0],Ft=_t[1],Dt=_t[2],Ut=_t[3],Lt=_t[4],Kt=_t[5],Yt=_t[6],Zt=_t[7],ee=_t[8],re=_t[9],ve=_t[10],Me=_t[11],Se=_t[12],Ie=_t[13],Re=_t[14],Ne=_t[15],Pe=ve*Ne-Re*Me,Fe=re*Ne-Ie*Me,$e=re*Re-Ie*ve,ze=ee*Ne-Se*Me,De=ee*Re-ve*Se,Ue=ee*Ie-Se*re;return Pt*+(Kt*Pe-Yt*Fe+Zt*$e)+Ft*-(Lt*Pe-Yt*ze+Zt*De)+Dt*+(Lt*Fe-Kt*ze+Zt*Ue)+Ut*-(Lt*$e-Kt*De+Yt*Ue)},t.prototype.toArray=function(){return this._m},t.prototype.asArray=function(){return this._m},t.prototype.invert=function(){return this.invertToRef(this),this},t.prototype.reset=function(){return t.FromValuesToRef(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,this),this._updateIdentityStatus(!1),this},t.prototype.add=function(_t){var Pt=new t;return this.addToRef(_t,Pt),Pt},t.prototype.addToRef=function(_t,Pt){for(var Ft=0;Ft<16;Ft++)Pt._m[Ft]=this._m[Ft]+_t._m[Ft];return Pt._markAsUpdated(),this},t.prototype.addToSelf=function(_t){for(var Pt=0;Pt<16;Pt++)this._m[Pt]+=_t._m[Pt];return this._markAsUpdated(),this},t.prototype.invertToRef=function(_t){if(!0===this._isIdentity)return t.IdentityToRef(_t),this;var Pt=this._m,Ft=Pt[0],Dt=Pt[1],Ut=Pt[2],Lt=Pt[3],Kt=Pt[4],Yt=Pt[5],Zt=Pt[6],ee=Pt[7],re=Pt[8],ve=Pt[9],Me=Pt[10],Se=Pt[11],Ie=Pt[12],Re=Pt[13],Ne=Pt[14],Pe=Pt[15],Fe=Me*Pe-Ne*Se,$e=ve*Pe-Re*Se,ze=ve*Ne-Re*Me,De=re*Pe-Ie*Se,Ue=re*Ne-Me*Ie,Le=re*Re-Ie*ve,je=+(Yt*Fe-Zt*$e+ee*ze),He=-(Kt*Fe-Zt*De+ee*Ue),Ve=+(Kt*$e-Yt*De+ee*Le),qe=-(Kt*ze-Yt*Ue+Zt*Le),Ge=Ft*je+Dt*He+Ut*Ve+Lt*qe;if(0===Ge)return _t.copyFrom(this),this;var We=1/Ge,Ke=Zt*Pe-Ne*ee,Ye=Yt*Pe-Re*ee,Qe=Yt*Ne-Re*Zt,Ze=Kt*Pe-Ie*ee,tn=Kt*Ne-Ie*Zt,en=Kt*Re-Ie*Yt,nn=Zt*Se-Me*ee,rn=Yt*Se-ve*ee,on=Yt*Me-ve*Zt,an=Kt*Se-re*ee,sn=Kt*Me-re*Zt,un=Kt*ve-re*Yt,pn=-(Dt*Fe-Ut*$e+Lt*ze),ln=+(Ft*Fe-Ut*De+Lt*Ue),dn=-(Ft*$e-Dt*De+Lt*Le),yn=+(Ft*ze-Dt*Ue+Ut*Le),hn=+(Dt*Ke-Ut*Ye+Lt*Qe),fn=-(Ft*Ke-Ut*Ze+Lt*tn),mn=+(Ft*Ye-Dt*Ze+Lt*en),vn=-(Ft*Qe-Dt*tn+Ut*en),gn=-(Dt*nn-Ut*rn+Lt*on),bn=+(Ft*nn-Ut*an+Lt*sn),_n=-(Ft*rn-Dt*an+Lt*un),wn=+(Ft*on-Dt*sn+Ut*un);return t.FromValuesToRef(je*We,pn*We,hn*We,gn*We,He*We,ln*We,fn*We,bn*We,Ve*We,dn*We,mn*We,_n*We,qe*We,yn*We,vn*We,wn*We,_t),this},t.prototype.addAtIndex=function(_t,Pt){return this._m[_t]+=Pt,this._markAsUpdated(),this},t.prototype.multiplyAtIndex=function(_t,Pt){return this._m[_t]*=Pt,this._markAsUpdated(),this},t.prototype.setTranslationFromFloats=function(_t,Pt,Ft){return this._m[12]=_t,this._m[13]=Pt,this._m[14]=Ft,this._markAsUpdated(),this},t.prototype.setTranslation=function(_t){return this.setTranslationFromFloats(_t.x,_t.y,_t.z)},t.prototype.getTranslation=function(){return new wn(this._m[12],this._m[13],this._m[14])},t.prototype.getTranslationToRef=function(_t){return _t.x=this._m[12],_t.y=this._m[13],_t.z=this._m[14],this},t.prototype.removeRotationAndScaling=function(){var _t=this.m;return t.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,_t[12],_t[13],_t[14],_t[15],this),this._updateIdentityStatus(0===_t[12]&&0===_t[13]&&0===_t[14]&&1===_t[15]),this},t.prototype.multiply=function(_t){var Pt=new t;return this.multiplyToRef(_t,Pt),Pt},t.prototype.copyFrom=function(_t){_t.copyToArray(this._m);var Pt=_t;return this._updateIdentityStatus(Pt._isIdentity,Pt._isIdentityDirty,Pt._isIdentity3x2,Pt._isIdentity3x2Dirty),this},t.prototype.copyToArray=function(_t,Pt){void 0===Pt&&(Pt=0);for(var Ft=0;Ft<16;Ft++)_t[Pt+Ft]=this._m[Ft];return this},t.prototype.multiplyToRef=function(_t,Pt){return this._isIdentity?(Pt.copyFrom(_t),this):_t._isIdentity?(Pt.copyFrom(this),this):(this.multiplyToArray(_t,Pt._m,0),Pt._markAsUpdated(),this)},t.prototype.multiplyToArray=function(_t,Pt,Ft){var Dt=this._m,Ut=_t.m,Lt=Dt[0],Kt=Dt[1],Yt=Dt[2],Zt=Dt[3],ee=Dt[4],re=Dt[5],ve=Dt[6],Me=Dt[7],Se=Dt[8],Ie=Dt[9],Re=Dt[10],Ne=Dt[11],Pe=Dt[12],Fe=Dt[13],$e=Dt[14],ze=Dt[15],De=Ut[0],Ue=Ut[1],Le=Ut[2],je=Ut[3],He=Ut[4],Ve=Ut[5],qe=Ut[6],Ge=Ut[7],We=Ut[8],Ke=Ut[9],Ye=Ut[10],Qe=Ut[11],Ze=Ut[12],tn=Ut[13],en=Ut[14],nn=Ut[15];return Pt[Ft]=Lt*De+Kt*He+Yt*We+Zt*Ze,Pt[Ft+1]=Lt*Ue+Kt*Ve+Yt*Ke+Zt*tn,Pt[Ft+2]=Lt*Le+Kt*qe+Yt*Ye+Zt*en,Pt[Ft+3]=Lt*je+Kt*Ge+Yt*Qe+Zt*nn,Pt[Ft+4]=ee*De+re*He+ve*We+Me*Ze,Pt[Ft+5]=ee*Ue+re*Ve+ve*Ke+Me*tn,Pt[Ft+6]=ee*Le+re*qe+ve*Ye+Me*en,Pt[Ft+7]=ee*je+re*Ge+ve*Qe+Me*nn,Pt[Ft+8]=Se*De+Ie*He+Re*We+Ne*Ze,Pt[Ft+9]=Se*Ue+Ie*Ve+Re*Ke+Ne*tn,Pt[Ft+10]=Se*Le+Ie*qe+Re*Ye+Ne*en,Pt[Ft+11]=Se*je+Ie*Ge+Re*Qe+Ne*nn,Pt[Ft+12]=Pe*De+Fe*He+$e*We+ze*Ze,Pt[Ft+13]=Pe*Ue+Fe*Ve+$e*Ke+ze*tn,Pt[Ft+14]=Pe*Le+Fe*qe+$e*Ye+ze*en,Pt[Ft+15]=Pe*je+Fe*Ge+$e*Qe+ze*nn,this},t.prototype.equals=function(_t){var Pt=_t;if(!Pt)return!1;if((this._isIdentity||Pt._isIdentity)&&!this._isIdentityDirty&&!Pt._isIdentityDirty)return this._isIdentity&&Pt._isIdentity;var Ft=this.m,Dt=Pt.m;return Ft[0]===Dt[0]&&Ft[1]===Dt[1]&&Ft[2]===Dt[2]&&Ft[3]===Dt[3]&&Ft[4]===Dt[4]&&Ft[5]===Dt[5]&&Ft[6]===Dt[6]&&Ft[7]===Dt[7]&&Ft[8]===Dt[8]&&Ft[9]===Dt[9]&&Ft[10]===Dt[10]&&Ft[11]===Dt[11]&&Ft[12]===Dt[12]&&Ft[13]===Dt[13]&&Ft[14]===Dt[14]&&Ft[15]===Dt[15]},t.prototype.clone=function(){var _t=new t;return _t.copyFrom(this),_t},t.prototype.getClassName=function(){return"Matrix"},t.prototype.getHashCode=function(){for(var _t=this._m[0]||0,Pt=1;Pt<16;Pt++)_t=397*_t^(this._m[Pt]||0);return _t},t.prototype.decompose=function(_t,Pt,Ft){if(this._isIdentity)return Ft&&Ft.setAll(0),_t&&_t.setAll(1),Pt&&Pt.copyFromFloats(0,0,0,1),!0;var Dt=this._m;Ft&&Ft.copyFromFloats(Dt[12],Dt[13],Dt[14]);var Ut=_t||Tn.Vector3[0];if(Ut.x=Math.sqrt(Dt[0]*Dt[0]+Dt[1]*Dt[1]+Dt[2]*Dt[2]),Ut.y=Math.sqrt(Dt[4]*Dt[4]+Dt[5]*Dt[5]+Dt[6]*Dt[6]),Ut.z=Math.sqrt(Dt[8]*Dt[8]+Dt[9]*Dt[9]+Dt[10]*Dt[10]),this.determinant()<=0&&(Ut.y*=-1),0===Ut.x||0===Ut.y||0===Ut.z)return Pt&&Pt.copyFromFloats(0,0,0,1),!1;if(Pt){var Lt=1/Ut.x,Kt=1/Ut.y,Yt=1/Ut.z;t.FromValuesToRef(Dt[0]*Lt,Dt[1]*Lt,Dt[2]*Lt,0,Dt[4]*Kt,Dt[5]*Kt,Dt[6]*Kt,0,Dt[8]*Yt,Dt[9]*Yt,Dt[10]*Yt,0,0,0,0,1,Tn.Matrix[0]),_n.FromRotationMatrixToRef(Tn.Matrix[0],Pt)}return!0},t.prototype.getRow=function(_t){if(_t<0||_t>3)return null;var Pt=4*_t;return new gn(this._m[Pt+0],this._m[Pt+1],this._m[Pt+2],this._m[Pt+3])},t.prototype.setRow=function(_t,Pt){return this.setRowFromFloats(_t,Pt.x,Pt.y,Pt.z,Pt.w)},t.prototype.transpose=function(){return t.Transpose(this)},t.prototype.transposeToRef=function(_t){return t.TransposeToRef(this,_t),this},t.prototype.setRowFromFloats=function(_t,Pt,Ft,Dt,Ut){if(_t<0||_t>3)return this;var Lt=4*_t;return this._m[Lt+0]=Pt,this._m[Lt+1]=Ft,this._m[Lt+2]=Dt,this._m[Lt+3]=Ut,this._markAsUpdated(),this},t.prototype.scale=function(_t){var Pt=new t;return this.scaleToRef(_t,Pt),Pt},t.prototype.scaleToRef=function(_t,Pt){for(var Ft=0;Ft<16;Ft++)Pt._m[Ft]=this._m[Ft]*_t;return Pt._markAsUpdated(),this},t.prototype.scaleAndAddToRef=function(_t,Pt){for(var Ft=0;Ft<16;Ft++)Pt._m[Ft]+=this._m[Ft]*_t;return Pt._markAsUpdated(),this},t.prototype.toNormalMatrix=function(_t){var Pt=Tn.Matrix[0];this.invertToRef(Pt),Pt.transposeToRef(_t);var Ft=_t._m;t.FromValuesToRef(Ft[0],Ft[1],Ft[2],0,Ft[4],Ft[5],Ft[6],0,Ft[8],Ft[9],Ft[10],0,0,0,0,1,_t)},t.prototype.getRotationMatrix=function(){var _t=new t;return this.getRotationMatrixToRef(_t),_t},t.prototype.getRotationMatrixToRef=function(_t){var Pt=Tn.Vector3[0];if(!this.decompose(Pt))return t.IdentityToRef(_t),this;var Ft=this._m,Dt=1/Pt.x,Ut=1/Pt.y,Lt=1/Pt.z;return t.FromValuesToRef(Ft[0]*Dt,Ft[1]*Dt,Ft[2]*Dt,0,Ft[4]*Ut,Ft[5]*Ut,Ft[6]*Ut,0,Ft[8]*Lt,Ft[9]*Lt,Ft[10]*Lt,0,0,0,0,1,_t),this},t.prototype.toggleModelMatrixHandInPlace=function(){var _t=this._m;_t[2]*=-1,_t[6]*=-1,_t[8]*=-1,_t[9]*=-1,_t[14]*=-1,this._markAsUpdated()},t.prototype.toggleProjectionMatrixHandInPlace=function(){var _t=this._m;_t[8]*=-1,_t[9]*=-1,_t[10]*=-1,_t[11]*=-1,this._markAsUpdated()},t.prototype._updateIdentityStatus=function(_t,Pt,Ft,Dt){void 0===Pt&&(Pt=!1),void 0===Ft&&(Ft=!1),void 0===Dt&&(Dt=!0),this.updateFlag=t._updateFlagSeed++,this._isIdentity=_t,this._isIdentity3x2=_t||Ft,this._isIdentityDirty=!this._isIdentity&&Pt,this._isIdentity3x2Dirty=!this._isIdentity3x2&&Dt},t._updateFlagSeed=0,t._identityReadOnly=t.Identity(),t}(),_n=function(){function t(_t,Pt,Ft,Dt){void 0===_t&&(_t=0),void 0===Pt&&(Pt=0),void 0===Ft&&(Ft=0),void 0===Dt&&(Dt=1),this.x=_t,this.y=Pt,this.z=Ft,this.w=Dt}return t.FromRotationMatrix=function(_t){var Pt=new t;return t.FromRotationMatrixToRef(_t,Pt),Pt},t.FromRotationMatrixToRef=function(_t,Pt){var Ft,Dt=_t.m,Ut=Dt[0],Lt=Dt[4],Kt=Dt[8],Yt=Dt[1],Zt=Dt[5],ee=Dt[9],re=Dt[2],ve=Dt[6],Me=Dt[10],Se=Ut+Zt+Me;Se>0?(Ft=.5/Math.sqrt(Se+1),Pt.w=.25/Ft,Pt.x=(ve-ee)*Ft,Pt.y=(Kt-re)*Ft,Pt.z=(Yt-Lt)*Ft):Ut>Zt&&Ut>Me?(Ft=2*Math.sqrt(1+Ut-Zt-Me),Pt.w=(ve-ee)/Ft,Pt.x=.25*Ft,Pt.y=(Lt+Yt)/Ft,Pt.z=(Kt+re)/Ft):Zt>Me?(Ft=2*Math.sqrt(1+Zt-Ut-Me),Pt.w=(Kt-re)/Ft,Pt.x=(Lt+Yt)/Ft,Pt.y=.25*Ft,Pt.z=(ee+ve)/Ft):(Ft=2*Math.sqrt(1+Me-Ut-Zt),Pt.w=(Yt-Lt)/Ft,Pt.x=(Kt+re)/Ft,Pt.y=(ee+ve)/Ft,Pt.z=.25*Ft)},t.Dot=function(_t,Pt){return _t.x*Pt.x+_t.y*Pt.y+_t.z*Pt.z+_t.w*Pt.w},t.AreClose=function(_t,Pt){return t.Dot(_t,Pt)>=0},t.Zero=function(){return new t(0,0,0,0)},t.Inverse=function(_t){return new t(-_t.x,-_t.y,-_t.z,_t.w)},t.IsIdentity=function(_t){return _t&&0===_t.x&&0===_t.y&&0===_t.z&&1===_t.w},t.RotationAxis=function(_t,Pt){var Ft=Pt*fn;return t.RotationAxisToRef(_t,Ft,new t)},t.RotationAxisToRef=function(_t,Pt,Ft){var Dt=Pt*fn,Ut=Math.sin(Dt/2);return _t.normalize(),Ft.w=Math.cos(Dt/2),Ft.x=_t.x*Ut,Ft.y=_t.y*Ut,Ft.z=_t.z*Ut,Ft},t.FromArray=function(_t,Pt){return void 0===Pt&&(Pt=0),new t(_t[Pt],_t[Pt+1],_t[Pt+2],_t[Pt+3])},t.FromEulerAnglesRef=function(_t,Pt,Ft,Dt){return t.RotationYawPitchRollToRef(Pt*fn,_t*fn,Ft*fn,Dt)},t.RotationYawPitchRoll=function(_t,Pt,Ft){var Dt=new t;return t.RotationYawPitchRollToRef(_t,Pt,Ft,Dt),Dt},t.RotationYawPitchRollToRef=function(_t,Pt,Ft,Dt){var Ut=.5*Pt,Lt=.5*_t,Kt=.5*Ft,Yt=Math.cos(Ut),Zt=Math.cos(Lt),ee=Math.cos(Kt),re=Math.sin(Ut),ve=Math.sin(Lt),Me=Math.sin(Kt);Dt.x=Zt*re*ee+ve*Yt*Me,Dt.y=ve*Yt*ee-Zt*re*Me,Dt.z=Zt*Yt*Me-ve*re*ee,Dt.w=Zt*Yt*ee+ve*re*Me},t.RotationAlphaBetaGamma=function(_t,Pt,Ft){var Dt=new t;return t.RotationAlphaBetaGammaToRef(_t,Pt,Ft,Dt),Dt},t.RotationAlphaBetaGammaToRef=function(_t,Pt,Ft,Dt){var Ut=.5*(Ft+_t),Lt=.5*(Ft-_t),Kt=.5*Pt;Dt.x=Math.cos(Lt)*Math.sin(Kt),Dt.y=Math.sin(Lt)*Math.sin(Kt),Dt.z=Math.sin(Ut)*Math.cos(Kt),Dt.w=Math.cos(Ut)*Math.cos(Kt)},t.RotationQuaternionFromAxis=function(_t,Pt,Ft){var Dt=new t(0,0,0,0);return t.RotationQuaternionFromAxisToRef(_t,Pt,Ft,Dt),Dt},t.RotationQuaternionFromAxisToRef=function(_t,Pt,Ft,Dt){var Ut=Tn.Matrix[0];bn.FromXYZAxesToRef(_t.normalize(),Pt.normalize(),Ft.normalize(),Ut),t.FromRotationMatrixToRef(Ut,Dt)},t.Slerp=function(_t,Pt,Ft){var Dt=t.Identity;return t.SlerpToRef(_t,Pt,Ft,Dt),Dt},t.SlerpToRef=function(_t,Pt,Ft,Dt){var Ut,Lt,Kt=_t.x*Pt.x+_t.y*Pt.y+_t.z*Pt.z+_t.w*Pt.w,Yt=!1;if(Kt<0&&(Yt=!0,Kt=-Kt),Kt>.999999)Lt=1-Ft,Ut=Yt?-Ft:Ft;else{var Zt=Math.acos(Kt),ee=1/Math.sin(Zt);Lt=Math.sin((1-Ft)*Zt)*ee,Ut=Yt?-Math.sin(Ft*Zt)*ee:Math.sin(Ft*Zt)*ee}Dt.x=Lt*_t.x+Ut*Pt.x,Dt.y=Lt*_t.y+Ut*Pt.y,Dt.z=Lt*_t.z+Ut*Pt.z,Dt.w=Lt*_t.w+Ut*Pt.w},t.Hermite=function(_t,Pt,Ft,Dt,Ut){var Lt=Ut*Ut,Kt=Ut*Lt,Yt=2*Kt-3*Lt+1,Zt=-2*Kt+3*Lt,ee=Kt-2*Lt+Ut,re=Kt-Lt;return new t(_t.x*Yt+Ft.x*Zt+Pt.x*ee+Dt.x*re,_t.y*Yt+Ft.y*Zt+Pt.y*ee+Dt.y*re,_t.z*Yt+Ft.z*Zt+Pt.z*ee+Dt.z*re,_t.w*Yt+Ft.w*Zt+Pt.w*ee+Dt.w*re)},Object.defineProperty(t,"Identity",{get:function(){return new t(0,0,0,1)},enumerable:!1,configurable:!0}),t.Angle=function(_t,Pt){var Ft=t.Dot(_t,Pt);return 2*Math.acos(Math.min(Math.abs(Ft),1))*mn},t.Euler=function(_t,Pt,Ft){return t.RotationYawPitchRoll(Pt*fn,_t*fn,Ft*fn)},t.LookRotation=function(_t,Pt){void 0===Pt&&(Pt=Tn.staticUp);var Ft=wn.Normalize(_t),Dt=wn.Normalize(wn.Cross(Pt,Ft)),Ut=wn.Cross(Ft,Dt),Lt=Dt.x,Kt=Dt.y,Yt=Dt.z,Zt=Ut.x,ee=Ut.y,re=Ut.z,ve=Ft.x,Me=Ft.y,Se=Ft.z,Ie=Lt+ee+Se,Re=new t;if(Ie>0){var Ne=Math.sqrt(Ie+1);return Re.w=.5*Ne,Ne=.5/Ne,Re.x=(re-Me)*Ne,Re.y=(ve-Yt)*Ne,Re.z=(Kt-Zt)*Ne,Re}if(Lt>=ee&&Lt>=Se){var Pe=Math.sqrt(1+Lt-ee-Se),Fe=.5/Pe;return Re.x=.5*Pe,Re.y=(Kt+Zt)*Fe,Re.z=(Yt+ve)*Fe,Re.w=(re-Me)*Fe,Re}if(ee>Se){var $e=Math.sqrt(1+ee-Lt-Se),ze=.5/$e;return Re.x=(Zt+Kt)*ze,Re.y=.5*$e,Re.z=(Me+re)*ze,Re.w=(ve-Yt)*ze,Re}var De=Math.sqrt(1+Se-Lt-ee),Ue=.5/De;return Re.x=(ve+Yt)*Ue,Re.y=(Me+re)*Ue,Re.z=.5*De,Re.w=(Kt-Zt)*Ue,Re},t.RotateTowards=function(_t,Pt,Ft){var Dt=t.Angle(_t,Pt);if(0===Dt)return Pt;var Ut=Math.min(1,Ft/Dt);return t.Slerp(_t,Pt,Ut)},t.FromToRotation=function(_t,Pt,Ft){void 0===Ft&&(Ft=Tn.staticUp);var Dt=_t.normalize(),Ut=Pt.normalize(),Lt=wn.Cross(Dt,Ut),Kt=Math.sqrt(Dt.lengthSquared()*Ut.lengthSquared())+wn.Dot(Dt,Ut);return Lt.lengthSquared()<1e-4?Math.abs(Kt)<1e-4?new t(Ft.x,Ft.y,Ft.z,0).normalized:t.Identity:new t(Lt.x,Lt.y,Lt.z,Kt).normalized},Object.defineProperty(t.prototype,"normalized",{get:function(){return this.normalize()},enumerable:!1,configurable:!0}),t.prototype.setFromToRotation=function(_t,Pt,Ft){void 0===Ft&&(Ft=Tn.staticUp);var Dt=t.FromToRotation(_t,Pt,Ft);this.x=Dt.x,this.y=Dt.y,this.z=Dt.z,this.w=Dt.w},Object.defineProperty(t.prototype,"eulerAngles",{get:function(){var _t=new wn,Pt=this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w,Ft=this.x*this.w-this.y*this.z;return Ft>.4995*Pt?(_t.x=Math.PI/2,_t.y=2*Math.atan2(this.y,this.x),_t.z=0):Ft<-.4995*Pt?(_t.x=-Math.PI/2,_t.y=-2*Math.atan2(this.y,this.x),_t.z=0):(_t.x=Math.asin(2*(this.w*this.x-this.y*this.z)),_t.y=Math.atan2(2*this.w*this.y+2*this.z*this.x,1-2*(this.x*this.x+this.y*this.y)),_t.z=Math.atan2(2*this.w*this.z+2*this.x*this.y,1-2*(this.z*this.z+this.x*this.x))),_t.x*=mn,_t.y*=mn,_t.z*=mn,_t.x=vn.Repeat(_t.x,360),_t.y=vn.Repeat(_t.y,360),_t.z=vn.Repeat(_t.z,360),_t},set:function(_t){this.setEuler(_t.x,_t.y,_t.z)},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+", "+this.w+")"},Object.defineProperty(t.prototype,"length",{get:function(){return Math.sqrt(this.lengthSquared)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lengthSquared",{get:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},enumerable:!1,configurable:!0}),t.prototype.getClassName=function(){return"Quaternion"},t.prototype.getHashCode=function(){var _t=this.x||0;return 397*(_t=397*(_t=397*_t^(this.y||0))^(this.z||0))^(this.w||0)},t.prototype.asArray=function(){return[this.x,this.y,this.z,this.w]},t.prototype.equals=function(_t){return _t&&this.x===_t.x&&this.y===_t.y&&this.z===_t.z&&this.w===_t.w},t.prototype.clone=function(){return new t(this.x,this.y,this.z,this.w)},t.prototype.copyFrom=function(_t){return this.x=_t.x,this.y=_t.y,this.z=_t.z,this.w=_t.w,this},t.prototype.copyFromFloats=function(_t,Pt,Ft,Dt){return this.x=_t,this.y=Pt,this.z=Ft,this.w=Dt,this},t.prototype.set=function(_t,Pt,Ft,Dt){return this.copyFromFloats(_t,Pt,Ft,Dt)},t.prototype.setEuler=function(_t,Pt,Ft){return t.RotationYawPitchRollToRef(Pt*fn,_t*fn,Ft*fn,this),this},t.prototype.add=function(_t){return new t(this.x+_t.x,this.y+_t.y,this.z+_t.z,this.w+_t.w)},t.prototype.addInPlace=function(_t){return this.x+=_t.x,this.y+=_t.y,this.z+=_t.z,this.w+=_t.w,this},t.prototype.subtract=function(_t){return new t(this.x-_t.x,this.y-_t.y,this.z-_t.z,this.w-_t.w)},t.prototype.scale=function(_t){return new t(this.x*_t,this.y*_t,this.z*_t,this.w*_t)},t.prototype.scaleToRef=function(_t,Pt){return Pt.x=this.x*_t,Pt.y=this.y*_t,Pt.z=this.z*_t,Pt.w=this.w*_t,this},t.prototype.scaleInPlace=function(_t){return this.x*=_t,this.y*=_t,this.z*=_t,this.w*=_t,this},t.prototype.scaleAndAddToRef=function(_t,Pt){return Pt.x+=this.x*_t,Pt.y+=this.y*_t,Pt.z+=this.z*_t,Pt.w+=this.w*_t,this},t.prototype.multiply=function(_t){var Pt=new t(0,0,0,1);return this.multiplyToRef(_t,Pt),Pt},t.prototype.multiplyToRef=function(_t,Pt){var Ft=this.x*_t.w+this.y*_t.z-this.z*_t.y+this.w*_t.x,Dt=-this.x*_t.z+this.y*_t.w+this.z*_t.x+this.w*_t.y,Ut=this.x*_t.y-this.y*_t.x+this.z*_t.w+this.w*_t.z,Lt=-this.x*_t.x-this.y*_t.y-this.z*_t.z+this.w*_t.w;return Pt.copyFromFloats(Ft,Dt,Ut,Lt),this},t.prototype.multiplyInPlace=function(_t){return this.multiplyToRef(_t,this),this},t.prototype.conjugateToRef=function(_t){return _t.copyFromFloats(-this.x,-this.y,-this.z,this.w),this},t.prototype.conjugateInPlace=function(){return this.x*=-1,this.y*=-1,this.z*=-1,this},t.prototype.conjugate=function(){return new t(-this.x,-this.y,-this.z,this.w)},t.prototype.normalize=function(){var _t=1/this.length;return this.x*=_t,this.y*=_t,this.z*=_t,this.w*=_t,this},t.prototype.angleAxis=function(_t,Pt){if(0===Pt.lengthSquared())return t.Identity;var Ft=t.Identity,Dt=_t*fn;Dt*=.5;var Ut=Pt.normalize();return Ut=Pt.scaleInPlace(Math.sin(Dt)),Ft.x=Ut.x,Ft.y=Ut.y,Ft.z=Ut.z,Ft.w=Math.cos(Dt),Ft.normalize()},t.prototype.toRotationMatrix=function(_t){return bn.FromQuaternionToRef(this,_t),this},t.prototype.fromRotationMatrix=function(_t){return t.FromRotationMatrixToRef(_t,this),this},t}(),wn=function(){function t(_t,Pt,Ft){void 0===_t&&(_t=0),void 0===Pt&&(Pt=0),void 0===Ft&&(Ft=0),this.x=_t,this.y=Pt,this.z=Ft}return Object.defineProperty(t.prototype,"isNonUniform",{get:function(){var _t=Math.abs(this.x),Pt=Math.abs(this.y);if(_t!==Pt)return!0;var Ft=Math.abs(this.z);return _t!==Ft||Pt!==Ft},enumerable:!1,configurable:!0}),t.Add=function(_t,Pt){return new t(_t.x,_t.y,_t.z).addInPlace(Pt)},t.GetClipFactor=function(_t,Pt,Ft,Dt){var Ut=t.Dot(_t,Ft)-Dt;return Ut/(Ut-(t.Dot(Pt,Ft)-Dt))},t.GetAngleBetweenVectors=function(_t,Pt,Ft){var Dt=_t.normalizeToRef(Tn.Vector3[1]),Ut=Pt.normalizeToRef(Tn.Vector3[2]),Lt=t.Dot(Dt,Ut),Kt=Tn.Vector3[3];return t.CrossToRef(Dt,Ut,Kt),t.Dot(Kt,Ft)>0?Math.acos(Lt):-Math.acos(Lt)},t.FromArray=function(_t,Pt){return void 0===Pt&&(Pt=0),new t(_t[Pt],_t[Pt+1],_t[Pt+2])},t.FromFloatArray=function(_t,Pt){return t.FromArray(_t,Pt)},t.FromArrayToRef=function(_t,Pt,Ft){Ft.x=_t[Pt],Ft.y=_t[Pt+1],Ft.z=_t[Pt+2]},t.FromFloatArrayToRef=function(_t,Pt,Ft){return t.FromArrayToRef(_t,Pt,Ft)},t.FromFloatsToRef=function(_t,Pt,Ft,Dt){Dt.copyFromFloats(_t,Pt,Ft)},t.Zero=function(){return new t(0,0,0)},t.One=function(){return new t(1,1,1)},t.Up=function(){return new t(0,1,0)},t.Down=function(){return new t(0,-1,0)},t.Forward=function(){return new t(0,0,1)},t.Backward=function(){return new t(0,0,-1)},t.Right=function(){return new t(1,0,0)},t.Left=function(){return new t(-1,0,0)},t.TransformCoordinates=function(_t,Pt){var Ft=t.Zero();return t.TransformCoordinatesToRef(_t,Pt,Ft),Ft},t.TransformCoordinatesToRef=function(_t,Pt,Ft){return t.TransformCoordinatesFromFloatsToRef(_t.x,_t.y,_t.z,Pt,Ft)},t.TransformCoordinatesFromFloatsToRef=function(_t,Pt,Ft,Dt,Ut){var Lt=Dt.m,Kt=_t*Lt[0]+Pt*Lt[4]+Ft*Lt[8]+Lt[12],Yt=_t*Lt[1]+Pt*Lt[5]+Ft*Lt[9]+Lt[13],Zt=_t*Lt[2]+Pt*Lt[6]+Ft*Lt[10]+Lt[14],ee=1/(_t*Lt[3]+Pt*Lt[7]+Ft*Lt[11]+Lt[15]);Ut.x=Kt*ee,Ut.y=Yt*ee,Ut.z=Zt*ee},t.TransformNormal=function(_t,Pt){var Ft=t.Zero();return t.TransformNormalToRef(_t,Pt,Ft),Ft},t.TransformNormalToRef=function(_t,Pt,Ft){this.TransformNormalFromFloatsToRef(_t.x,_t.y,_t.z,Pt,Ft)},t.TransformNormalFromFloatsToRef=function(_t,Pt,Ft,Dt,Ut){var Lt=Dt.m;Ut.x=_t*Lt[0]+Pt*Lt[4]+Ft*Lt[8],Ut.y=_t*Lt[1]+Pt*Lt[5]+Ft*Lt[9],Ut.z=_t*Lt[2]+Pt*Lt[6]+Ft*Lt[10]},t.CatmullRom=function(_t,Pt,Ft,Dt,Ut){var Lt=Ut*Ut,Kt=Ut*Lt;return new t(.5*(2*Pt.x+(-_t.x+Ft.x)*Ut+(2*_t.x-5*Pt.x+4*Ft.x-Dt.x)*Lt+(-_t.x+3*Pt.x-3*Ft.x+Dt.x)*Kt),.5*(2*Pt.y+(-_t.y+Ft.y)*Ut+(2*_t.y-5*Pt.y+4*Ft.y-Dt.y)*Lt+(-_t.y+3*Pt.y-3*Ft.y+Dt.y)*Kt),.5*(2*Pt.z+(-_t.z+Ft.z)*Ut+(2*_t.z-5*Pt.z+4*Ft.z-Dt.z)*Lt+(-_t.z+3*Pt.z-3*Ft.z+Dt.z)*Kt))},t.Clamp=function(_t,Pt,Ft){var Dt=new t;return t.ClampToRef(_t,Pt,Ft,Dt),Dt},t.ClampToRef=function(_t,Pt,Ft,Dt){var Ut=_t.x;Ut=(Ut=Ut>Ft.x?Ft.x:Ut)<Pt.x?Pt.x:Ut;var Lt=_t.y;Lt=(Lt=Lt>Ft.y?Ft.y:Lt)<Pt.y?Pt.y:Lt;var Kt=_t.z;Kt=(Kt=Kt>Ft.z?Ft.z:Kt)<Pt.z?Pt.z:Kt,Dt.copyFromFloats(Ut,Lt,Kt)},t.Hermite=function(_t,Pt,Ft,Dt,Ut){var Lt=Ut*Ut,Kt=Ut*Lt,Yt=2*Kt-3*Lt+1,Zt=-2*Kt+3*Lt,ee=Kt-2*Lt+Ut,re=Kt-Lt;return new t(_t.x*Yt+Ft.x*Zt+Pt.x*ee+Dt.x*re,_t.y*Yt+Ft.y*Zt+Pt.y*ee+Dt.y*re,_t.z*Yt+Ft.z*Zt+Pt.z*ee+Dt.z*re)},t.Lerp=function(_t,Pt,Ft){var Dt=new t(0,0,0);return t.LerpToRef(_t,Pt,Ft,Dt),Dt},t.LerpToRef=function(_t,Pt,Ft,Dt){Dt.x=_t.x+(Pt.x-_t.x)*Ft,Dt.y=_t.y+(Pt.y-_t.y)*Ft,Dt.z=_t.z+(Pt.z-_t.z)*Ft},t.Dot=function(_t,Pt){return _t.x*Pt.x+_t.y*Pt.y+_t.z*Pt.z},t.Cross=function(_t,Pt){var Ft=t.Zero();return t.CrossToRef(_t,Pt,Ft),Ft},t.CrossToRef=function(_t,Pt,Ft){var Dt=_t.y*Pt.z-_t.z*Pt.y,Ut=_t.z*Pt.x-_t.x*Pt.z,Lt=_t.x*Pt.y-_t.y*Pt.x;Ft.copyFromFloats(Dt,Ut,Lt)},t.Normalize=function(_t){var Pt=t.Zero();return t.NormalizeToRef(_t,Pt),Pt},t.NormalizeToRef=function(_t,Pt){_t.normalizeToRef(Pt)},t.Minimize=function(_t,Pt){var Ft=new t(_t.x,_t.y,_t.z);return Ft.minimizeInPlace(Pt),Ft},t.Maximize=function(_t,Pt){var Ft=new t(_t.x,_t.y,_t.z);return Ft.maximizeInPlace(Pt),Ft},t.Distance=function(_t,Pt){return Math.sqrt(t.DistanceSquared(_t,Pt))},t.DistanceSquared=function(_t,Pt){var Ft=_t.x-Pt.x,Dt=_t.y-Pt.y,Ut=_t.z-Pt.z;return Ft*Ft+Dt*Dt+Ut*Ut},t.Center=function(_t,Pt){var Ft=t.Add(_t,Pt);return Ft.scaleInPlace(.5),Ft},t.RotationFromAxis=function(_t,Pt,Ft){var Dt=t.Zero();return t.RotationFromAxisToRef(_t,Pt,Ft,Dt),Dt},t.RotationFromAxisToRef=function(_t,Pt,Ft,Dt){var Ut=Tn.Quaternion[0];_n.RotationQuaternionFromAxisToRef(_t,Pt,Ft,Ut),Dt.copyFrom(Ut.eulerAngles)},t.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},t.prototype.getClassName=function(){return"Vector3"},t.prototype.getHashCode=function(){var _t=this.x||0;return 397*(_t=397*_t^(this.y||0))^(this.z||0)},t.prototype.asArray=function(){var _t=[];return this.toArray(_t,0),_t},t.prototype.toArray=function(_t,Pt){return void 0===Pt&&(Pt=0),_t[Pt]=this.x,_t[Pt+1]=this.y,_t[Pt+2]=this.z,this},t.prototype.toQuaternion=function(){return _n.Identity.setEuler(this.y,this.x,this.z)},t.prototype.addInPlace=function(_t){return this.addInPlaceFromFloats(_t.x,_t.y,_t.z)},t.prototype.addInPlaceFromFloats=function(_t,Pt,Ft){return this.x+=_t,this.y+=Pt,this.z+=Ft,this},t.prototype.add=function(_t){return new t(this.x+_t.x,this.y+_t.y,this.z+_t.z)},t.prototype.addToRef=function(_t,Pt){return Pt.copyFromFloats(this.x+_t.x,this.y+_t.y,this.z+_t.z)},t.prototype.subtractInPlace=function(_t){return this.x-=_t.x,this.y-=_t.y,this.z-=_t.z,this},t.prototype.subtract=function(_t){return new t(this.x-_t.x,this.y-_t.y,this.z-_t.z)},t.prototype.subtractToRef=function(_t,Pt){return this.subtractFromFloatsToRef(_t.x,_t.y,_t.z,Pt)},t.prototype.subtractFromFloats=function(_t,Pt,Ft){return new t(this.x-_t,this.y-Pt,this.z-Ft)},t.prototype.subtractFromFloatsToRef=function(_t,Pt,Ft,Dt){return Dt.copyFromFloats(this.x-_t,this.y-Pt,this.z-Ft)},t.prototype.applyMatrix4=function(_t){this.applyMatrix4ToRef(_t,this)},t.prototype.applyMatrix4ToRef=function(_t,Pt){var Ft=this,Dt=Ft.x,Ut=Ft.y,Lt=Ft.z,Kt=_t.m,Yt=1/(Kt[3]*Dt+Kt[7]*Ut+Kt[11]*Lt+Kt[15]);return Pt.x=(Kt[0]*Dt+Kt[4]*Ut+Kt[8]*Lt+Kt[12])*Yt,Pt.y=(Kt[1]*Dt+Kt[5]*Ut+Kt[9]*Lt+Kt[13])*Yt,Pt.z=(Kt[2]*Dt+Kt[6]*Ut+Kt[10]*Lt+Kt[14])*Yt,Pt},t.prototype.rotate=function(_t){return this.rotateToRef(_t,this)},t.prototype.rotateToRef=function(_t,Pt){var Ft=this,Dt=Ft.x,Ut=Ft.y,Lt=Ft.z,Kt=_t.x,Yt=_t.y,Zt=_t.z,ee=_t.w,re=ee*Dt+Yt*Lt-Zt*Ut,ve=ee*Ut+Zt*Dt-Kt*Lt,Me=ee*Lt+Kt*Ut-Yt*Dt,Se=-Kt*Dt-Yt*Ut-Zt*Lt;return Pt.x=re*ee+Se*-Kt+ve*-Zt-Me*-Yt,Pt.y=ve*ee+Se*-Yt+Me*-Kt-re*-Zt,Pt.z=Me*ee+Se*-Zt+re*-Yt-ve*-Kt,Pt},t.prototype.negate=function(){return new t(-this.x,-this.y,-this.z)},t.prototype.scaleInPlace=function(_t){return this.x*=_t,this.y*=_t,this.z*=_t,this},t.prototype.scale=function(_t){return new t(this.x*_t,this.y*_t,this.z*_t)},t.prototype.scaleToRef=function(_t,Pt){return Pt.copyFromFloats(this.x*_t,this.y*_t,this.z*_t)},t.prototype.scaleAndAddToRef=function(_t,Pt){return Pt.addInPlaceFromFloats(this.x*_t,this.y*_t,this.z*_t)},t.prototype.equals=function(_t){return _t&&this.x===_t.x&&this.y===_t.y&&this.z===_t.z},t.prototype.equalsWithEpsilon=function(_t,Pt){return void 0===Pt&&(Pt=hn),_t&&vn.WithinEpsilon(this.x,_t.x,Pt)&&vn.WithinEpsilon(this.y,_t.y,Pt)&&vn.WithinEpsilon(this.z,_t.z,Pt)},t.prototype.equalsToFloats=function(_t,Pt,Ft){return this.x===_t&&this.y===Pt&&this.z===Ft},t.prototype.multiplyInPlace=function(_t){return this.x*=_t.x,this.y*=_t.y,this.z*=_t.z,this},t.prototype.multiply=function(_t){return this.multiplyByFloats(_t.x,_t.y,_t.z)},t.prototype.multiplyToRef=function(_t,Pt){return Pt.copyFromFloats(this.x*_t.x,this.y*_t.y,this.z*_t.z)},t.prototype.multiplyByFloats=function(_t,Pt,Ft){return new t(this.x*_t,this.y*Pt,this.z*Ft)},t.prototype.divide=function(_t){return new t(this.x/_t.x,this.y/_t.y,this.z/_t.z)},t.prototype.divideToRef=function(_t,Pt){return Pt.copyFromFloats(this.x/_t.x,this.y/_t.y,this.z/_t.z)},t.prototype.divideInPlace=function(_t){return this.divideToRef(_t,this)},t.prototype.minimizeInPlace=function(_t){return this.minimizeInPlaceFromFloats(_t.x,_t.y,_t.z)},t.prototype.maximizeInPlace=function(_t){return this.maximizeInPlaceFromFloats(_t.x,_t.y,_t.z)},t.prototype.minimizeInPlaceFromFloats=function(_t,Pt,Ft){return _t<this.x&&(this.x=_t),Pt<this.y&&(this.y=Pt),Ft<this.z&&(this.z=Ft),this},t.prototype.maximizeInPlaceFromFloats=function(_t,Pt,Ft){return _t>this.x&&(this.x=_t),Pt>this.y&&(this.y=Pt),Ft>this.z&&(this.z=Ft),this},t.prototype.floor=function(){return new t(Math.floor(this.x),Math.floor(this.y),Math.floor(this.z))},t.prototype.fract=function(){return new t(this.x-Math.floor(this.x),this.y-Math.floor(this.y),this.z-Math.floor(this.z))},t.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},t.prototype.lengthSquared=function(){return this.x*this.x+this.y*this.y+this.z*this.z},t.prototype.normalize=function(){return this.normalizeFromLength(this.length())},t.prototype.normalizeFromLength=function(_t){return 0===_t||1===_t?this:this.scaleInPlace(1/_t)},t.prototype.normalizeToNew=function(){var _t=new t(0,0,0);return this.normalizeToRef(_t),_t},t.prototype.normalizeToRef=function(_t){var Pt=this.length();return 0===Pt||1===Pt?_t.copyFromFloats(this.x,this.y,this.z):this.scaleToRef(1/Pt,_t)},t.prototype.clone=function(){return new t(this.x,this.y,this.z)},t.prototype.copyFrom=function(_t){return this.copyFromFloats(_t.x,_t.y,_t.z)},t.prototype.copyFromFloats=function(_t,Pt,Ft){return this.x=_t,this.y=Pt,this.z=Ft,this},t.prototype.set=function(_t,Pt,Ft){return this.copyFromFloats(_t,Pt,Ft)},t.prototype.setAll=function(_t){return this.x=this.y=this.z=_t,this},t}(),Tn={Vector3:v(6,wn.Zero),Matrix:v(2,bn.Identity),Quaternion:v(3,_n.Zero),staticUp:wn.Up(),tmpMatrix:bn.Zero()},En=function(){function t(_t){this._radians=_t,this._radians<0&&(this._radians+=2*Math.PI)}return t.BetweenTwoPoints=function(_t,Pt){var Ft=Pt.subtract(_t);return new t(Math.atan2(Ft.y,Ft.x))},t.FromRadians=function(_t){return new t(_t)},t.FromDegrees=function(_t){return new t(_t*Math.PI/180)},t.prototype.degrees=function(){return 180*this._radians/Math.PI},t.prototype.radians=function(){return this._radians},t}(),xn=function(){function t(_t,Pt){void 0===_t&&(_t=0),void 0===Pt&&(Pt=0),this.x=_t,this.y=Pt}return t.Zero=function(){return new t(0,0)},t.One=function(){return new t(1,1)},t.Add=function(_t,Pt){return new t(_t.x,_t.y).addInPlace(Pt)},t.FromArray=function(_t,Pt){return void 0===Pt&&(Pt=0),new t(_t[Pt],_t[Pt+1])},t.FromArrayToRef=function(_t,Pt,Ft){Ft.x=_t[Pt],Ft.y=_t[Pt+1]},t.CatmullRom=function(_t,Pt,Ft,Dt,Ut){var Lt=Ut*Ut,Kt=Ut*Lt;return new t(.5*(2*Pt.x+(-_t.x+Ft.x)*Ut+(2*_t.x-5*Pt.x+4*Ft.x-Dt.x)*Lt+(-_t.x+3*Pt.x-3*Ft.x+Dt.x)*Kt),.5*(2*Pt.y+(-_t.y+Ft.y)*Ut+(2*_t.y-5*Pt.y+4*Ft.y-Dt.y)*Lt+(-_t.y+3*Pt.y-3*Ft.y+Dt.y)*Kt))},t.Clamp=function(_t,Pt,Ft){var Dt=_t.x;Dt=(Dt=Dt>Ft.x?Ft.x:Dt)<Pt.x?Pt.x:Dt;var Ut=_t.y;return new t(Dt,Ut=(Ut=Ut>Ft.y?Ft.y:Ut)<Pt.y?Pt.y:Ut)},t.Hermite=function(_t,Pt,Ft,Dt,Ut){var Lt=Ut*Ut,Kt=Ut*Lt,Yt=2*Kt-3*Lt+1,Zt=-2*Kt+3*Lt,ee=Kt-2*Lt+Ut,re=Kt-Lt;return new t(_t.x*Yt+Ft.x*Zt+Pt.x*ee+Dt.x*re,_t.y*Yt+Ft.y*Zt+Pt.y*ee+Dt.y*re)},t.Lerp=function(_t,Pt,Ft){return new t(_t.x+(Pt.x-_t.x)*Ft,_t.y+(Pt.y-_t.y)*Ft)},t.Dot=function(_t,Pt){return _t.x*Pt.x+_t.y*Pt.y},t.Normalize=function(_t){var Pt=new t(_t.x,_t.y);return Pt.normalize(),Pt},t.Minimize=function(_t,Pt){return new t(_t.x<Pt.x?_t.x:Pt.x,_t.y<Pt.y?_t.y:Pt.y)},t.Maximize=function(_t,Pt){return new t(_t.x>Pt.x?_t.x:Pt.x,_t.y>Pt.y?_t.y:Pt.y)},t.Transform=function(_t,Pt){var Ft=t.Zero();return t.TransformToRef(_t,Pt,Ft),Ft},t.TransformToRef=function(_t,Pt,Ft){var Dt=Pt.m,Ut=_t.x*Dt[0]+_t.y*Dt[4]+Dt[12],Lt=_t.x*Dt[1]+_t.y*Dt[5]+Dt[13];Ft.x=Ut,Ft.y=Lt},t.PointInTriangle=function(_t,Pt,Ft,Dt){var Ut=.5*(-Ft.y*Dt.x+Pt.y*(-Ft.x+Dt.x)+Pt.x*(Ft.y-Dt.y)+Ft.x*Dt.y),Lt=Ut<0?-1:1,Kt=(Pt.y*Dt.x-Pt.x*Dt.y+(Dt.y-Pt.y)*_t.x+(Pt.x-Dt.x)*_t.y)*Lt,Yt=(Pt.x*Ft.y-Pt.y*Ft.x+(Pt.y-Ft.y)*_t.x+(Ft.x-Pt.x)*_t.y)*Lt;return Kt>0&&Yt>0&&Kt+Yt<2*Ut*Lt},t.Distance=function(_t,Pt){return Math.sqrt(t.DistanceSquared(_t,Pt))},t.DistanceSquared=function(_t,Pt){var Ft=_t.x-Pt.x,Dt=_t.y-Pt.y;return Ft*Ft+Dt*Dt},t.Center=function(_t,Pt){var Ft=t.Add(_t,Pt);return Ft.scaleInPlace(.5),Ft},t.DistanceOfPointFromSegment=function(_t,Pt,Ft){var Dt=t.DistanceSquared(Pt,Ft);if(0===Dt)return t.Distance(_t,Pt);var Ut=Ft.subtract(Pt),Lt=Math.max(0,Math.min(1,t.Dot(_t.subtract(Pt),Ut)/Dt)),Kt=Pt.add(Ut.multiplyByFloats(Lt,Lt));return t.Distance(_t,Kt)},t.prototype.toString=function(){return"{X: "+this.x+" Y:"+this.y+"}"},t.prototype.getClassName=function(){return"Vector2"},t.prototype.getHashCode=function(){return 397*(this.x||0)^(this.y||0)},t.prototype.toArray=function(_t,Pt){return void 0===Pt&&(Pt=0),_t[Pt]=this.x,_t[Pt+1]=this.y,this},t.prototype.asArray=function(){var _t=new Array;return this.toArray(_t,0),_t},t.prototype.copyFrom=function(_t){return this.x=_t.x,this.y=_t.y,this},t.prototype.copyFromFloats=function(_t,Pt){return this.x=_t,this.y=Pt,this},t.prototype.set=function(_t,Pt){return this.copyFromFloats(_t,Pt)},t.prototype.add=function(_t){return new t(this.x+_t.x,this.y+_t.y)},t.prototype.addToRef=function(_t,Pt){return Pt.x=this.x+_t.x,Pt.y=this.y+_t.y,this},t.prototype.addInPlace=function(_t){return this.x+=_t.x,this.y+=_t.y,this},t.prototype.addVector3=function(_t){return new t(this.x+_t.x,this.y+_t.y)},t.prototype.subtract=function(_t){return new t(this.x-_t.x,this.y-_t.y)},t.prototype.subtractToRef=function(_t,Pt){return Pt.x=this.x-_t.x,Pt.y=this.y-_t.y,this},t.prototype.subtractInPlace=function(_t){return this.x-=_t.x,this.y-=_t.y,this},t.prototype.multiplyInPlace=function(_t){return this.x*=_t.x,this.y*=_t.y,this},t.prototype.multiply=function(_t){return new t(this.x*_t.x,this.y*_t.y)},t.prototype.multiplyToRef=function(_t,Pt){return Pt.x=this.x*_t.x,Pt.y=this.y*_t.y,this},t.prototype.multiplyByFloats=function(_t,Pt){return new t(this.x*_t,this.y*Pt)},t.prototype.divide=function(_t){return new t(this.x/_t.x,this.y/_t.y)},t.prototype.divideToRef=function(_t,Pt){return Pt.x=this.x/_t.x,Pt.y=this.y/_t.y,this},t.prototype.divideInPlace=function(_t){return this.divideToRef(_t,this)},t.prototype.negate=function(){return new t(-this.x,-this.y)},t.prototype.scaleInPlace=function(_t){return this.x*=_t,this.y*=_t,this},t.prototype.scale=function(_t){var Pt=new t(0,0);return this.scaleToRef(_t,Pt),Pt},t.prototype.scaleToRef=function(_t,Pt){return Pt.x=this.x*_t,Pt.y=this.y*_t,this},t.prototype.scaleAndAddToRef=function(_t,Pt){return Pt.x+=this.x*_t,Pt.y+=this.y*_t,this},t.prototype.equals=function(_t){return _t&&this.x===_t.x&&this.y===_t.y},t.prototype.equalsWithEpsilon=function(_t,Pt){return void 0===Pt&&(Pt=hn),_t&&vn.WithinEpsilon(this.x,_t.x,Pt)&&vn.WithinEpsilon(this.y,_t.y,Pt)},t.prototype.floor=function(){return new t(Math.floor(this.x),Math.floor(this.y))},t.prototype.fract=function(){return new t(this.x-Math.floor(this.x),this.y-Math.floor(this.y))},t.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t.prototype.lengthSquared=function(){return this.x*this.x+this.y*this.y},t.prototype.normalize=function(){var _t=this.length();if(0===_t)return this;var Pt=1/_t;return this.x*=Pt,this.y*=Pt,this},t.prototype.clone=function(){return new t(this.x,this.y)},t}(),zt=function(Pt,Ft,Dt){this.startPoint=Pt,this.midPoint=Ft,this.endPoint=Dt;var Ut=Math.pow(Ft.x,2)+Math.pow(Ft.y,2),Lt=(Math.pow(Pt.x,2)+Math.pow(Pt.y,2)-Ut)/2,Kt=(Ut-Math.pow(Dt.x,2)-Math.pow(Dt.y,2))/2,Yt=(Pt.x-Ft.x)*(Ft.y-Dt.y)-(Ft.x-Dt.x)*(Pt.y-Ft.y);this.centerPoint=new xn((Lt*(Ft.y-Dt.y)-Kt*(Pt.y-Ft.y))/Yt,((Pt.x-Ft.x)*Kt-(Ft.x-Dt.x)*Lt)/Yt),this.radius=this.centerPoint.subtract(this.startPoint).length(),this.startAngle=En.BetweenTwoPoints(this.centerPoint,this.startPoint);var Zt=this.startAngle.degrees(),ee=En.BetweenTwoPoints(this.centerPoint,this.midPoint).degrees(),re=En.BetweenTwoPoints(this.centerPoint,this.endPoint).degrees();ee-Zt>180&&(ee-=360),ee-Zt<-180&&(ee+=360),re-ee>180&&(re-=360),re-ee<-180&&(re+=360),this.orientation=ee-Zt<0?_t.Orientation.CW:_t.Orientation.CCW,this.angle=En.FromDegrees(this.orientation===_t.Orientation.CW?Zt-re:re-Zt)},Cn=function(){function t(){}return t.X=new wn(1,0,0),t.Y=new wn(0,1,0),t.Z=new wn(0,0,1),t}(),Mn=function(){function t(){}return t.Interpolate=function(_t,Pt,Ft,Dt,Ut){for(var Lt=1-3*Dt+3*Pt,Kt=3*Dt-6*Pt,Yt=3*Pt,Zt=_t,ee=0;ee<5;ee++){var re=Zt*Zt;Zt-=1/(3*Lt*re+2*Kt*Zt+Yt)*(Lt*(re*Zt)+Kt*re+Yt*Zt-_t),Zt=Math.min(1,Math.max(0,Zt))}return 3*Math.pow(1-Zt,2)*Zt*Ft+3*(1-Zt)*Math.pow(Zt,2)*Ut+Math.pow(Zt,3)},t}(),An=function(){function t(_t,Pt,Ft,Dt){void 0===_t&&(_t=0),void 0===Pt&&(Pt=0),void 0===Ft&&(Ft=0),void 0===Dt&&(Dt=1),this.r=_t,this.g=Pt,this.b=Ft,this.a=Dt}return t.FromHexString=function(_t){if("#"!==_t.substring(0,1)||9!==_t.length)return new t(0,0,0,0);var Pt=parseInt(_t.substring(1,3),16),Ft=parseInt(_t.substring(3,5),16),Dt=parseInt(_t.substring(5,7),16),Ut=parseInt(_t.substring(7,9),16);return t.FromInts(Pt,Ft,Dt,Ut)},t.Lerp=function(_t,Pt,Ft){var Dt=new t(0,0,0,0);return t.LerpToRef(_t,Pt,Ft,Dt),Dt},t.LerpToRef=function(_t,Pt,Ft,Dt){Dt.r=_t.r+(Pt.r-_t.r)*Ft,Dt.g=_t.g+(Pt.g-_t.g)*Ft,Dt.b=_t.b+(Pt.b-_t.b)*Ft,Dt.a=_t.a+(Pt.a-_t.a)*Ft},t.Red=function(){return new t(1,0,0,1)},t.Green=function(){return new t(0,1,0,1)},t.Blue=function(){return new t(0,0,1,1)},t.Black=function(){return new t(0,0,0,1)},t.White=function(){return new t(1,1,1,1)},t.Purple=function(){return new t(.5,0,.5,1)},t.Magenta=function(){return new t(1,0,1,1)},t.Yellow=function(){return new t(1,1,0,1)},t.Gray=function(){return new t(.5,.5,.5,1)},t.Teal=function(){return new t(0,1,1,1)},t.Clear=function(){return new t(0,0,0,0)},t.FromColor3=function(_t,Pt){return void 0===Pt&&(Pt=1),new t(_t.r,_t.g,_t.b,Pt)},t.FromArray=function(_t,Pt){return void 0===Pt&&(Pt=0),new t(_t[Pt],_t[Pt+1],_t[Pt+2],_t[Pt+3])},t.FromInts=function(_t,Pt,Ft,Dt){return new t(_t/255,Pt/255,Ft/255,Dt/255)},t.CheckColors4=function(_t,Pt){if(_t.length===3*Pt){for(var Ft=[],Dt=0;Dt<_t.length;Dt+=3){var Ut=Dt/3*4;Ft[Ut]=_t[Dt],Ft[Ut+1]=_t[Dt+1],Ft[Ut+2]=_t[Dt+2],Ft[Ut+3]=1}return Ft}return _t},t.prototype.addInPlace=function(_t){return this.r+=_t.r,this.g+=_t.g,this.b+=_t.b,this.a+=_t.a,this},t.prototype.asArray=function(){var _t=new Array;return this.toArray(_t,0),_t},t.prototype.toArray=function(_t,Pt){return void 0===Pt&&(Pt=0),_t[Pt]=this.r,_t[Pt+1]=this.g,_t[Pt+2]=this.b,_t[Pt+3]=this.a,this},t.prototype.add=function(_t){return new t(this.r+_t.r,this.g+_t.g,this.b+_t.b,this.a+_t.a)},t.prototype.subtract=function(_t){return new t(this.r-_t.r,this.g-_t.g,this.b-_t.b,this.a-_t.a)},t.prototype.subtractToRef=function(_t,Pt){return Pt.r=this.r-_t.r,Pt.g=this.g-_t.g,Pt.b=this.b-_t.b,Pt.a=this.a-_t.a,this},t.prototype.scale=function(_t){return new t(this.r*_t,this.g*_t,this.b*_t,this.a*_t)},t.prototype.scaleToRef=function(_t,Pt){return Pt.r=this.r*_t,Pt.g=this.g*_t,Pt.b=this.b*_t,Pt.a=this.a*_t,this},t.prototype.scaleAndAddToRef=function(_t,Pt){return Pt.r+=this.r*_t,Pt.g+=this.g*_t,Pt.b+=this.b*_t,Pt.a+=this.a*_t,this},t.prototype.clampToRef=function(_t,Pt,Ft){return void 0===_t&&(_t=0),void 0===Pt&&(Pt=1),Ft.r=vn.Clamp(this.r,_t,Pt),Ft.g=vn.Clamp(this.g,_t,Pt),Ft.b=vn.Clamp(this.b,_t,Pt),Ft.a=vn.Clamp(this.a,_t,Pt),this},t.prototype.multiply=function(_t){return new t(this.r*_t.r,this.g*_t.g,this.b*_t.b,this.a*_t.a)},t.prototype.multiplyToRef=function(_t,Pt){return Pt.r=this.r*_t.r,Pt.g=this.g*_t.g,Pt.b=this.b*_t.b,Pt.a=this.a*_t.a,Pt},t.prototype.toString=function(){return"{R: "+this.r+" G:"+this.g+" B:"+this.b+" A:"+this.a+"}"},t.prototype.getClassName=function(){return"Color4"},t.prototype.getHashCode=function(){var _t=this.r||0;return 397*(_t=397*(_t=397*_t^(this.g||0))^(this.b||0))^(this.a||0)},t.prototype.clone=function(){return new t(this.r,this.g,this.b,this.a)},t.prototype.copyFrom=function(_t){return this.r=_t.r,this.g=_t.g,this.b=_t.b,this.a=_t.a,this},t.prototype.copyFromFloats=function(_t,Pt,Ft,Dt){return this.r=_t,this.g=Pt,this.b=Ft,this.a=Dt,this},t.prototype.set=function(_t,Pt,Ft,Dt){return this.copyFromFloats(_t,Pt,Ft,Dt)},t.prototype.toHexString=function(){var _t=255*this.r|0,Pt=255*this.g|0,Ft=255*this.b|0,Dt=255*this.a|0;return"#"+vn.ToHex(_t)+vn.ToHex(Pt)+vn.ToHex(Ft)+vn.ToHex(Dt)},t.prototype.toLinearSpace=function(){var _t=new t;return this.toLinearSpaceToRef(_t),_t},t.prototype.toLinearSpaceToRef=function(_t){return _t.r=Math.pow(this.r,yn),_t.g=Math.pow(this.g,yn),_t.b=Math.pow(this.b,yn),_t.a=this.a,this},t.prototype.toGammaSpace=function(){var _t=new t;return this.toGammaSpaceToRef(_t),_t},t.prototype.toGammaSpaceToRef=function(_t){return _t.r=Math.pow(this.r,dn),_t.g=Math.pow(this.g,dn),_t.b=Math.pow(this.b,dn),_t.a=this.a,this},t}(),Sn=function(){function t(_t,Pt,Ft){void 0===_t&&(_t=0),void 0===Pt&&(Pt=0),void 0===Ft&&(Ft=0),this.r=_t,this.g=Pt,this.b=Ft}return t.FromHexString=function(_t){if("#"!==_t.substring(0,1)||7!==_t.length)return new t(0,0,0);var Pt=parseInt(_t.substring(1,3),16),Ft=parseInt(_t.substring(3,5),16),Dt=parseInt(_t.substring(5,7),16);return t.FromInts(Pt,Ft,Dt)},t.FromArray=function(_t,Pt){return void 0===Pt&&(Pt=0),new t(_t[Pt],_t[Pt+1],_t[Pt+2])},t.FromInts=function(_t,Pt,Ft){return new t(_t/255,Pt/255,Ft/255)},t.Lerp=function(_t,Pt,Ft){var Dt=new t(0,0,0);return t.LerpToRef(_t,Pt,Ft,Dt),Dt},t.LerpToRef=function(_t,Pt,Ft,Dt){Dt.r=_t.r+(Pt.r-_t.r)*Ft,Dt.g=_t.g+(Pt.g-_t.g)*Ft,Dt.b=_t.b+(Pt.b-_t.b)*Ft},t.Red=function(){return new t(1,0,0)},t.Green=function(){return new t(0,1,0)},t.Blue=function(){return new t(0,0,1)},t.Black=function(){return new t(0,0,0)},t.White=function(){return new t(1,1,1)},t.Purple=function(){return new t(.5,0,.5)},t.Magenta=function(){return new t(1,0,1)},t.Yellow=function(){return new t(1,1,0)},t.Gray=function(){return new t(.5,.5,.5)},t.Teal=function(){return new t(0,1,1)},t.Random=function(){return new t(Math.random(),Math.random(),Math.random())},t.prototype.toString=function(){return"{R: "+this.r+" G:"+this.g+" B:"+this.b+"}"},t.prototype.getClassName=function(){return"Color3"},t.prototype.getHashCode=function(){var _t=this.r||0;return 397*(_t=397*_t^(this.g||0))^(this.b||0)},t.prototype.toArray=function(_t,Pt){return void 0===Pt&&(Pt=0),_t[Pt]=this.r,_t[Pt+1]=this.g,_t[Pt+2]=this.b,this},t.prototype.toColor4=function(_t){return void 0===_t&&(_t=1),new An(this.r,this.g,this.b,_t)},t.prototype.asArray=function(){var _t=new Array;return this.toArray(_t,0),_t},t.prototype.toLuminance=function(){return.3*this.r+.59*this.g+.11*this.b},t.prototype.multiply=function(_t){return new t(this.r*_t.r,this.g*_t.g,this.b*_t.b)},t.prototype.multiplyToRef=function(_t,Pt){return Pt.r=this.r*_t.r,Pt.g=this.g*_t.g,Pt.b=this.b*_t.b,this},t.prototype.equals=function(_t){return _t&&this.r===_t.r&&this.g===_t.g&&this.b===_t.b},t.prototype.equalsFloats=function(_t,Pt,Ft){return this.r===_t&&this.g===Pt&&this.b===Ft},t.prototype.scale=function(_t){return new t(this.r*_t,this.g*_t,this.b*_t)},t.prototype.scaleToRef=function(_t,Pt){return Pt.r=this.r*_t,Pt.g=this.g*_t,Pt.b=this.b*_t,this},t.prototype.scaleAndAddToRef=function(_t,Pt){return Pt.r+=this.r*_t,Pt.g+=this.g*_t,Pt.b+=this.b*_t,this},t.prototype.clampToRef=function(_t,Pt,Ft){return void 0===_t&&(_t=0),void 0===Pt&&(Pt=1),Ft.r=vn.Clamp(this.r,_t,Pt),Ft.g=vn.Clamp(this.g,_t,Pt),Ft.b=vn.Clamp(this.b,_t,Pt),this},t.prototype.add=function(_t){return new t(this.r+_t.r,this.g+_t.g,this.b+_t.b)},t.prototype.addToRef=function(_t,Pt){return Pt.r=this.r+_t.r,Pt.g=this.g+_t.g,Pt.b=this.b+_t.b,this},t.prototype.subtract=function(_t){return new t(this.r-_t.r,this.g-_t.g,this.b-_t.b)},t.prototype.subtractToRef=function(_t,Pt){return Pt.r=this.r-_t.r,Pt.g=this.g-_t.g,Pt.b=this.b-_t.b,this},t.prototype.clone=function(){return new t(this.r,this.g,this.b)},t.prototype.copyFrom=function(_t){return this.r=_t.r,this.g=_t.g,this.b=_t.b,this},t.prototype.copyFromFloats=function(_t,Pt,Ft){return this.r=_t,this.g=Pt,this.b=Ft,this},t.prototype.set=function(_t,Pt,Ft){return this.copyFromFloats(_t,Pt,Ft)},t.prototype.toHexString=function(){var _t=255*this.r|0,Pt=255*this.g|0,Ft=255*this.b|0;return"#"+vn.ToHex(_t)+vn.ToHex(Pt)+vn.ToHex(Ft)},t.prototype.toLinearSpace=function(){var _t=new t;return this.toLinearSpaceToRef(_t),_t},t.prototype.toLinearSpaceToRef=function(_t){return _t.r=Math.pow(this.r,yn),_t.g=Math.pow(this.g,yn),_t.b=Math.pow(this.b,yn),this},t.prototype.toGammaSpace=function(){var _t=new t;return this.toGammaSpaceToRef(_t),_t},t.prototype.toGammaSpaceToRef=function(_t){return _t.r=Math.pow(this.r,dn),_t.g=Math.pow(this.g,dn),_t.b=Math.pow(this.b,dn),this},t.prototype.toJSON=function(){return{r:this.r,g:this.g,b:this.b}},t}(),In=function(){function t(_t){this._length=0,this._points=_t,this._length=this._computeLength(_t)}return t.CreateQuadraticBezier=function(_t,Pt,Ft,Dt){Dt=Dt>2?Dt:3;for(var Ut=new Array,s=function(_t,Pt,Ft,Dt){return(1-_t)*(1-_t)*Pt+2*_t*(1-_t)*Ft+_t*_t*Dt},Lt=0;Lt<=Dt;Lt++)Ut.push(new wn(s(Lt/Dt,_t.x,Pt.x,Ft.x),s(Lt/Dt,_t.y,Pt.y,Ft.y),s(Lt/Dt,_t.z,Pt.z,Ft.z)));return new t(Ut)},t.CreateCubicBezier=function(_t,Pt,Ft,Dt,Ut){Ut=Ut>3?Ut:4;for(var Lt=new Array,a=function(_t,Pt,Ft,Dt,Ut){return(1-_t)*(1-_t)*(1-_t)*Pt+3*_t*(1-_t)*(1-_t)*Ft+3*_t*_t*(1-_t)*Dt+_t*_t*_t*Ut},Kt=0;Kt<=Ut;Kt++)Lt.push(new wn(a(Kt/Ut,_t.x,Pt.x,Ft.x,Dt.x),a(Kt/Ut,_t.y,Pt.y,Ft.y,Dt.y),a(Kt/Ut,_t.z,Pt.z,Ft.z,Dt.z)));return new t(Lt)},t.CreateHermiteSpline=function(_t,Pt,Ft,Dt,Ut){for(var Lt=new Array,Kt=1/Ut,Yt=0;Yt<=Ut;Yt++)Lt.push(wn.Hermite(_t,Pt,Ft,Dt,Yt*Kt));return new t(Lt)},t.CreateCatmullRomSpline=function(_t,Pt,Ft){var Dt=new Array,Ut=1/Pt,Lt=0;if(Ft){for(var Kt=_t.length,Yt=0;Yt<Kt;Yt++){Lt=0;for(var Zt=0;Zt<Pt;Zt++)Dt.push(wn.CatmullRom(_t[Yt%Kt],_t[(Yt+1)%Kt],_t[(Yt+2)%Kt],_t[(Yt+3)%Kt],Lt)),Lt+=Ut}Dt.push(Dt[0])}else{var ee=new Array;for(ee.push(_t[0].clone()),Array.prototype.push.apply(ee,_t),ee.push(_t[_t.length-1].clone()),Yt=0,Yt=0;Yt<ee.length-3;Yt++)for(Lt=0,Zt=0;Zt<Pt;Zt++)Dt.push(wn.CatmullRom(ee[Yt],ee[Yt+1],ee[Yt+2],ee[Yt+3],Lt)),Lt+=Ut;Yt--,Dt.push(wn.CatmullRom(ee[Yt],ee[Yt+1],ee[Yt+2],ee[Yt+3],Lt))}return new t(Dt)},t.prototype.getPoints=function(){return this._points},t.prototype.length=function(){return this._length},t.prototype.continue=function(_t){for(var Pt=this._points[this._points.length-1],Ft=this._points.slice(),Dt=_t.getPoints(),Ut=1;Ut<Dt.length;Ut++)Ft.push(Dt[Ut].subtract(Dt[0]).add(Pt));return new t(Ft)},t.prototype._computeLength=function(_t){for(var Pt=0,Ft=1;Ft<_t.length;Ft++)Pt+=_t[Ft].subtract(_t[Ft-1]).length();return Pt},t}(),Rn=function(){function t(_t,Pt,Ft,Dt){this.normal=new wn(_t,Pt,Ft),this.d=Dt}return t.FromArray=function(_t){return new t(_t[0],_t[1],_t[2],_t[3])},t.FromPoints=function(_t,Pt,Ft){var Dt=new t(0,0,0,0);return Dt.copyFromPoints(_t,Pt,Ft),Dt},t.FromPositionAndNormal=function(_t,Pt){var Ft=new t(0,0,0,0);return Pt.normalize(),Ft.normal=Pt,Ft.d=-(Pt.x*_t.x+Pt.y*_t.y+Pt.z*_t.z),Ft},t.SignedDistanceToPlaneFromPositionAndNormal=function(_t,Pt,Ft){var Dt=-(Pt.x*_t.x+Pt.y*_t.y+Pt.z*_t.z);return wn.Dot(Ft,Pt)+Dt},t.prototype.asArray=function(){return[this.normal.x,this.normal.y,this.normal.z,this.d]},t.prototype.clone=function(){return new t(this.normal.x,this.normal.y,this.normal.z,this.d)},t.prototype.getClassName=function(){return"Plane"},t.prototype.getHashCode=function(){return 397*this.normal.getHashCode()^(this.d||0)},t.prototype.normalize=function(){var _t=Math.sqrt(this.normal.x*this.normal.x+this.normal.y*this.normal.y+this.normal.z*this.normal.z),Pt=0;return 0!==_t&&(Pt=1/_t),this.normal.x*=Pt,this.normal.y*=Pt,this.normal.z*=Pt,this.d*=Pt,this},t.prototype.transform=function(_t){var Pt=Tn.Matrix[0];bn.TransposeToRef(_t,Pt);var Ft=Pt.m,Dt=this.normal.x,Ut=this.normal.y,Lt=this.normal.z,Kt=this.d;return new t(Dt*Ft[0]+Ut*Ft[1]+Lt*Ft[2]+Kt*Ft[3],Dt*Ft[4]+Ut*Ft[5]+Lt*Ft[6]+Kt*Ft[7],Dt*Ft[8]+Ut*Ft[9]+Lt*Ft[10]+Kt*Ft[11],Dt*Ft[12]+Ut*Ft[13]+Lt*Ft[14]+Kt*Ft[15])},t.prototype.dotCoordinate=function(_t){return this.normal.x*_t.x+this.normal.y*_t.y+this.normal.z*_t.z+this.d},t.prototype.copyFromPoints=function(_t,Pt,Ft){var Dt,Ut=Pt.x-_t.x,Lt=Pt.y-_t.y,Kt=Pt.z-_t.z,Yt=Ft.x-_t.x,Zt=Ft.y-_t.y,ee=Ft.z-_t.z,re=Lt*ee-Kt*Zt,ve=Kt*Yt-Ut*ee,Me=Ut*Zt-Lt*Yt,Se=Math.sqrt(re*re+ve*ve+Me*Me);return Dt=0!==Se?1/Se:0,this.normal.x=re*Dt,this.normal.y=ve*Dt,this.normal.z=Me*Dt,this.d=-(this.normal.x*_t.x+this.normal.y*_t.y+this.normal.z*_t.z),this},t.prototype.isFrontFacingTo=function(_t,Pt){return wn.Dot(this.normal,_t)<=Pt},t.prototype.signedDistanceTo=function(_t){return wn.Dot(_t,this.normal)+this.d},t}(),Nn=function(){function t(){}return t.GetPlanes=function(_t){for(var Pt=[],Ft=0;Ft<6;Ft++)Pt.push(new Rn(0,0,0,0));return t.GetPlanesToRef(_t,Pt),Pt},t.GetNearPlaneToRef=function(_t,Pt){var Ft=_t.m;Pt.normal.x=Ft[3]+Ft[2],Pt.normal.y=Ft[7]+Ft[6],Pt.normal.z=Ft[11]+Ft[10],Pt.d=Ft[15]+Ft[14],Pt.normalize()},t.GetFarPlaneToRef=function(_t,Pt){var Ft=_t.m;Pt.normal.x=Ft[3]-Ft[2],Pt.normal.y=Ft[7]-Ft[6],Pt.normal.z=Ft[11]-Ft[10],Pt.d=Ft[15]-Ft[14],Pt.normalize()},t.GetLeftPlaneToRef=function(_t,Pt){var Ft=_t.m;Pt.normal.x=Ft[3]+Ft[0],Pt.normal.y=Ft[7]+Ft[4],Pt.normal.z=Ft[11]+Ft[8],Pt.d=Ft[15]+Ft[12],Pt.normalize()},t.GetRightPlaneToRef=function(_t,Pt){var Ft=_t.m;Pt.normal.x=Ft[3]-Ft[0],Pt.normal.y=Ft[7]-Ft[4],Pt.normal.z=Ft[11]-Ft[8],Pt.d=Ft[15]-Ft[12],Pt.normalize()},t.GetTopPlaneToRef=function(_t,Pt){var Ft=_t.m;Pt.normal.x=Ft[3]-Ft[1],Pt.normal.y=Ft[7]-Ft[5],Pt.normal.z=Ft[11]-Ft[9],Pt.d=Ft[15]-Ft[13],Pt.normalize()},t.GetBottomPlaneToRef=function(_t,Pt){var Ft=_t.m;Pt.normal.x=Ft[3]+Ft[1],Pt.normal.y=Ft[7]+Ft[5],Pt.normal.z=Ft[11]+Ft[9],Pt.d=Ft[15]+Ft[13],Pt.normalize()},t.GetPlanesToRef=function(_t,Pt){t.GetNearPlaneToRef(_t,Pt[0]),t.GetFarPlaneToRef(_t,Pt[1]),t.GetLeftPlaneToRef(_t,Pt[2]),t.GetRightPlaneToRef(_t,Pt[3]),t.GetTopPlaneToRef(_t,Pt[4]),t.GetBottomPlaneToRef(_t,Pt[5])},t}(),Pn=function(){function e(_t,Pt){this.closed=!1,this._points=new Array,this._length=0,this._points.push(new xn(_t,Pt))}return e.StartingAt=function(_t,Pt){return new e(_t,Pt)},e.prototype.addLineTo=function(_t,Pt){if(this.closed)return this;var Ft=new xn(_t,Pt),Dt=this._points[this._points.length-1];return this._points.push(Ft),this._length+=Ft.subtract(Dt).length(),this},e.prototype.addArcTo=function(Pt,Ft,Dt,Ut,Lt){if(void 0===Lt&&(Lt=36),this.closed)return this;var Kt=this._points[this._points.length-1],Yt=new xn(Pt,Ft),Zt=new xn(Dt,Ut),ee=new zt(Kt,Yt,Zt),re=ee.angle.radians()/Lt;ee.orientation===_t.Orientation.CW&&(re*=-1);for(var ve=ee.startAngle.radians()+re,Me=0;Me<Lt;Me++){var Se=Math.cos(ve)*ee.radius+ee.centerPoint.x,Ie=Math.sin(ve)*ee.radius+ee.centerPoint.y;this.addLineTo(Se,Ie),ve+=re}return this},e.prototype.close=function(){return this.closed=!0,this},e.prototype.length=function(){var _t=this._length;if(!this.closed){var Pt=this._points[this._points.length-1];_t+=this._points[0].subtract(Pt).length()}return _t},e.prototype.getPoints=function(){return this._points},e.prototype.getPointAtLengthPosition=function(_t){if(_t<0||_t>1)return xn.Zero();for(var Pt=_t*this.length(),Ft=0,Dt=0;Dt<this._points.length;Dt++){var Ut=(Dt+1)%this._points.length,Lt=this._points[Dt],Kt=this._points[Ut].subtract(Lt),Yt=Kt.length()+Ft;if(Pt>=Ft&&Pt<=Yt){var Zt=Kt.normalize(),ee=Pt-Ft;return new xn(Lt.x+Zt.x*ee,Lt.y+Zt.y*ee)}Ft=Yt}return xn.Zero()},e}(),On=function(){function t(_t,Pt,Ft){void 0===Pt&&(Pt=null),this.path=_t,this._curve=new Array,this._distances=new Array,this._tangents=new Array,this._normals=new Array,this._binormals=new Array;for(var Dt=0;Dt<_t.length;Dt++)this._curve[Dt]=_t[Dt].clone();this._raw=Ft||!1,this._compute(Pt)}return t.prototype.getCurve=function(){return this._curve},t.prototype.getTangents=function(){return this._tangents},t.prototype.getNormals=function(){return this._normals},t.prototype.getBinormals=function(){return this._binormals},t.prototype.getDistances=function(){return this._distances},t.prototype.update=function(_t,Pt){void 0===Pt&&(Pt=null);for(var Ft=0;Ft<_t.length;Ft++)this._curve[Ft].x=_t[Ft].x,this._curve[Ft].y=_t[Ft].y,this._curve[Ft].z=_t[Ft].z;return this._compute(Pt),this},t.prototype._compute=function(_t){var Pt=this._curve.length;this._tangents[0]=this._getFirstNonNullVector(0),this._raw||this._tangents[0].normalize(),this._tangents[Pt-1]=this._curve[Pt-1].subtract(this._curve[Pt-2]),this._raw||this._tangents[Pt-1].normalize();var Ft,Dt,Ut,Lt,Kt=this._tangents[0],Yt=this._normalVector(this._curve[0],Kt,_t);this._normals[0]=Yt,this._raw||this._normals[0].normalize(),this._binormals[0]=wn.Cross(Kt,this._normals[0]),this._raw||this._binormals[0].normalize(),this._distances[0]=0;for(var Zt=1;Zt<Pt;Zt++)Ft=this._getLastNonNullVector(Zt),Zt<Pt-1&&(Dt=this._getFirstNonNullVector(Zt),this._tangents[Zt]=Ft.add(Dt),this._tangents[Zt].normalize()),this._distances[Zt]=this._distances[Zt-1]+Ft.length(),Ut=this._tangents[Zt],Lt=this._binormals[Zt-1],this._normals[Zt]=wn.Cross(Lt,Ut),this._raw||this._normals[Zt].normalize(),this._binormals[Zt]=wn.Cross(Ut,this._normals[Zt]),this._raw||this._binormals[Zt].normalize()},t.prototype._getFirstNonNullVector=function(_t){for(var Pt=1,Ft=this._curve[_t+Pt].subtract(this._curve[_t]);0===Ft.length()&&_t+Pt+1<this._curve.length;)Pt++,Ft=this._curve[_t+Pt].subtract(this._curve[_t]);return Ft},t.prototype._getLastNonNullVector=function(_t){for(var Pt=1,Ft=this._curve[_t].subtract(this._curve[_t-Pt]);0===Ft.length()&&_t>Pt+1;)Pt++,Ft=this._curve[_t].subtract(this._curve[_t-Pt]);return Ft},t.prototype._normalVector=function(_t,Pt,Ft){var Dt,Ut,Lt=Pt.length();(0===Lt&&(Lt=1),null==Ft)?(Ut=vn.WithinEpsilon(Math.abs(Pt.y)/Lt,1,hn)?vn.WithinEpsilon(Math.abs(Pt.x)/Lt,1,hn)?vn.WithinEpsilon(Math.abs(Pt.z)/Lt,1,hn)?wn.Zero():new wn(0,0,1):new wn(1,0,0):new wn(0,-1,0),Dt=wn.Cross(Pt,Ut)):(Dt=wn.Cross(Pt,Ft),wn.CrossToRef(Dt,Pt,Dt));return Dt.normalize(),Dt},t}(),kn=function(){function t(_t,Pt){this.width=_t,this.height=Pt}return Object.defineProperty(t.prototype,"surface",{get:function(){return this.width*this.height},enumerable:!1,configurable:!0}),t.Zero=function(){return new t(0,0)},t.Lerp=function(_t,Pt,Ft){return new t(_t.width+(Pt.width-_t.width)*Ft,_t.height+(Pt.height-_t.height)*Ft)},t.prototype.toString=function(){return"{W: "+this.width+", H: "+this.height+"}"},t.prototype.getClassName=function(){return"Size"},t.prototype.getHashCode=function(){return 397*(this.width||0)^(this.height||0)},t.prototype.copyFrom=function(_t){this.width=_t.width,this.height=_t.height},t.prototype.copyFromFloats=function(_t,Pt){return this.width=_t,this.height=Pt,this},t.prototype.set=function(_t,Pt){return this.copyFromFloats(_t,Pt)},t.prototype.multiplyByFloats=function(_t,Pt){return new t(this.width*_t,this.height*Pt)},t.prototype.clone=function(){return new t(this.width,this.height)},t.prototype.equals=function(_t){return!!_t&&this.width===_t.width&&this.height===_t.height},t.prototype.add=function(_t){return new t(this.width+_t.width,this.height+_t.height)},t.prototype.subtract=function(_t){return new t(this.width-_t.width,this.height-_t.height)},t}(),Fn={looping:!0,speed:1,weight:1,layer:0},$n=function(_t){function e(Pt,Ft){void 0===Ft&&(Ft=Fn);var Dt=_t.call(this)||this;return Dt.isAnimationClip=!0,Dt.looping=Fn.looping,Dt.weight=Fn.weight,Dt.playing=!1,Dt.shouldReset=!1,Dt.speed=Fn.speed,Dt.name=f("AnimClip"),Dt.layer=Fn.layer,Dt.clip=Pt,Dt.setParams(i({},Ft)),Dt}return o(e,_t),e.prototype.setParams=function(_t){return this.looping=void 0!==_t.looping?_t.looping:this.looping,this.speed=_t.speed||this.speed,this.weight=_t.weight||this.weight,this.layer=_t.layer||this.layer,this},e.prototype.toJSON=function(){var Pt=JSON.parse(JSON.stringify(_t.prototype.toJSON.call(this)));return this.shouldReset&&(this.shouldReset=!1),Pt},e.prototype.play=function(_t){var Pt;void 0===_t&&(_t=!1),null===(Pt=this.owner)||void 0===Pt||Pt.play(this,_t)},e.prototype.pause=function(){var _t;null===(_t=this.owner)||void 0===_t||_t.pause(this)},e.prototype.reset=function(){this.shouldReset=!0},e.prototype.stop=function(){var _t;null===(_t=this.owner)||void 0===_t||_t.stop(this)},r([Ne.readonly],e.prototype,"clip",void 0),r([Ne.field],e.prototype,"looping",void 0),r([Ne.field],e.prototype,"weight",void 0),r([Ne.field],e.prototype,"playing",void 0),r([Ne.field],e.prototype,"shouldReset",void 0),r([Ne.field],e.prototype,"speed",void 0),r([Ne.readonly],e.prototype,"name",void 0),e}(Ne);_t.ActionButton=void 0,(ln=_t.ActionButton||(_t.ActionButton={})).POINTER="POINTER",ln.PRIMARY="PRIMARY",ln.SECONDARY="SECONDARY",ln.ANY="ANY";var zn,Dn,Gt=function(_t){if(this.callback=_t,!_t||!("apply"in _t)||!("call"in _t))throw new Error("Callback is not a function");Ln.ensureInstance()},Un=function(_t){function e(){return null!==_t&&_t.apply(this,arguments)||this}return o(e,_t),r([M("pointerDown")],e)}(Gt),Bn=function(_t){function e(){return null!==_t&&_t.apply(this,arguments)||this}return o(e,_t),r([M("pointerUp")],e)}(Gt),Xt=function(_t,Pt){this.fn=_t,this.useRaycast=Pt},Ln=function(){function e(){var Pt,Ft;this.subscriptions=((Pt={})[_t.ActionButton.POINTER]={BUTTON_DOWN:[],BUTTON_UP:[]},Pt[_t.ActionButton.PRIMARY]={BUTTON_DOWN:[],BUTTON_UP:[]},Pt[_t.ActionButton.SECONDARY]={BUTTON_DOWN:[],BUTTON_UP:[]},Pt[_t.ActionButton.ANY]={BUTTON_DOWN:[],BUTTON_UP:[]},Pt),this.internalState=((Ft={})[_t.ActionButton.POINTER]={BUTTON_DOWN:!1},Ft[_t.ActionButton.PRIMARY]={BUTTON_DOWN:!1},Ft[_t.ActionButton.SECONDARY]={BUTTON_DOWN:!1},Ft[_t.ActionButton.ANY]={BUTTON_DOWN:!1},Ft)}return Object.defineProperty(e,"instance",{get:function(){return e.ensureInstance(),e._instance},enumerable:!1,configurable:!0}),e.ensureInstance=function(){e._instance||(e._instance=new e)},e.prototype.isButtonPressed=function(_t){return this.internalState[_t]},e.prototype.subscribe=function(_t,Pt,Ft,Dt){var Ut=this;return this.subscriptions[Pt][_t].push(new Xt(Dt,Ft)),function(){Ut.unsubscribe(_t,Pt,Dt)}},e.prototype.unsubscribe=function(_t,Pt,Ft){var Dt=this.getSubscriptionId(_t,Pt,Ft);return Dt>-1&&this.subscriptions[Pt][_t].splice(Dt,1)},e.prototype.handlePointerEvent=function(Pt){var Ft=this.getPointerById(Pt.buttonId),Dt=i(i({},Pt),{button:Ft,direction:(new wn).copyFrom(Pt.direction),origin:(new wn).copyFrom(Pt.origin),hit:void 0}),Ut=Pt.hit?i(i({},Pt.hit),{hitPoint:(new wn).copyFrom(Pt.hit.hitPoint),normal:(new wn).copyFrom(Pt.hit.normal),worldNormal:(new wn).copyFrom(Pt.hit.worldNormal)}):void 0;if(Pt.type===_t.InputEventType.DOWN){this.internalState[Ft].BUTTON_DOWN=!0;for(var Lt=0;Lt<this.subscriptions[Ft].BUTTON_DOWN.length;Lt++)(Kt=this.subscriptions[Ft].BUTTON_DOWN[Lt]).useRaycast?Dt.hit=Ut:Dt.hit=void 0,Kt.fn(Dt);Ut&&Ut.entityId&&F.engine&&(Zt=(Yt=F.engine.entities[Ut.entityId])&&Yt.getComponentOrNull(Un))&&(Dt.hit=Ut,Zt.callback(Dt))}else{for(this.internalState[Ft].BUTTON_DOWN=!1,Lt=0;Lt<this.subscriptions[Ft].BUTTON_UP.length;Lt++){var Kt;(Kt=this.subscriptions[Ft].BUTTON_UP[Lt]).useRaycast?Dt.hit=Ut:Dt.hit=void 0,Kt.fn(Dt)}var Yt,Zt;Ut&&Ut.entityId&&F.engine&&(Zt=(Yt=F.engine.entities[Ut.entityId])&&Yt.getComponentOrNull(Bn))&&(Dt.hit=Ut,Zt.callback(Dt))}},e.prototype.getSubscriptionId=function(_t,Pt,Ft){for(var Dt=0;Dt<this.subscriptions[Pt][_t].length;Dt++)if(this.subscriptions[Pt][_t][Dt].fn===Ft)return Dt;return-1},e.prototype.getPointerById=function(Pt){return 0===Pt?_t.ActionButton.POINTER:1===Pt?_t.ActionButton.PRIMARY:_t.ActionButton.SECONDARY},e}();_t.CLASS_ID=void 0,(zn=_t.CLASS_ID||(_t.CLASS_ID={}))[zn.TRANSFORM=1]="TRANSFORM",zn[zn.UUID_CALLBACK=8]="UUID_CALLBACK",zn[zn.BOX_SHAPE=16]="BOX_SHAPE",zn[zn.SPHERE_SHAPE=17]="SPHERE_SHAPE",zn[zn.PLANE_SHAPE=18]="PLANE_SHAPE",zn[zn.CONE_SHAPE=19]="CONE_SHAPE",zn[zn.CYLINDER_SHAPE=20]="CYLINDER_SHAPE",zn[zn.TEXT_SHAPE=21]="TEXT_SHAPE",zn[zn.NFT_SHAPE=22]="NFT_SHAPE",zn[zn.UI_WORLD_SPACE_SHAPE=23]="UI_WORLD_SPACE_SHAPE",zn[zn.UI_SCREEN_SPACE_SHAPE=24]="UI_SCREEN_SPACE_SHAPE",zn[zn.UI_CONTAINER_RECT=25]="UI_CONTAINER_RECT",zn[zn.UI_CONTAINER_STACK=26]="UI_CONTAINER_STACK",zn[zn.UI_TEXT_SHAPE=27]="UI_TEXT_SHAPE",zn[zn.UI_INPUT_TEXT_SHAPE=28]="UI_INPUT_TEXT_SHAPE",zn[zn.UI_IMAGE_SHAPE=29]="UI_IMAGE_SHAPE",zn[zn.UI_SLIDER_SHAPE=30]="UI_SLIDER_SHAPE",zn[zn.CIRCLE_SHAPE=31]="CIRCLE_SHAPE",zn[zn.BILLBOARD=32]="BILLBOARD",zn[zn.ANIMATION=33]="ANIMATION",zn[zn.FONT=34]="FONT",zn[zn.UI_FULLSCREEN_SHAPE=40]="UI_FULLSCREEN_SHAPE",zn[zn.UI_BUTTON_SHAPE=41]="UI_BUTTON_SHAPE",zn[zn.GLTF_SHAPE=54]="GLTF_SHAPE",zn[zn.OBJ_SHAPE=55]="OBJ_SHAPE",zn[zn.AVATAR_SHAPE=56]="AVATAR_SHAPE",zn[zn.BASIC_MATERIAL=64]="BASIC_MATERIAL",zn[zn.PBR_MATERIAL=65]="PBR_MATERIAL",zn[zn.HIGHLIGHT_ENTITY=66]="HIGHLIGHT_ENTITY",zn[zn.SOUND=67]="SOUND",zn[zn.TEXTURE=68]="TEXTURE",zn[zn.VIDEO_CLIP=70]="VIDEO_CLIP",zn[zn.VIDEO_TEXTURE=71]="VIDEO_TEXTURE",zn[zn.AUDIO_CLIP=200]="AUDIO_CLIP",zn[zn.AUDIO_SOURCE=201]="AUDIO_SOURCE",zn[zn.AUDIO_STREAM=202]="AUDIO_STREAM",zn[zn.GIZMOS=203]="GIZMOS",zn[zn.SMART_ITEM=204]="SMART_ITEM",zn[zn.AVATAR_MODIFIER_AREA=205]="AVATAR_MODIFIER_AREA",zn[zn.NAME=300]="NAME",zn[zn.LOCKED_ON_EDIT=301]="LOCKED_ON_EDIT",zn[zn.VISIBLE_ON_EDIT=302]="VISIBLE_ON_EDIT",_t.AvatarModifiers=void 0,(Dn=_t.AvatarModifiers||(_t.AvatarModifiers={})).HIDE_AVATARS="HIDE_AVATARS",Dn.DISABLE_PASSPORTS="DISABLE_PASSPORTS";var jn,Hn=function(Pt){function n(_t){var Ft=Pt.call(this)||this;return Ft.area=_t.area,Ft.modifiers=_t.modifiers,Ft}return o(n,Pt),r([Ne.field],n.prototype,"area",void 0),r([Ne.field],n.prototype,"modifiers",void 0),r([M("engine.avatarModifierArea",_t.CLASS_ID.AVATAR_MODIFIER_AREA)],n)}(Ne),Vn=function(Pt){function n(_t){void 0===_t&&(_t={});var Ft=Pt.call(this)||this;return Ft.position=_t.position||wn.Zero(),Ft.rotation=_t.rotation||_n.Identity,Ft.scale=_t.scale||new wn(1,1,1),Ft}return o(n,Pt),Object.defineProperty(n.prototype,"eulerAngles",{get:function(){return this.rotation.eulerAngles},enumerable:!1,configurable:!0}),n.prototype.lookAt=function(_t,Pt){void 0===Pt&&(Pt=Tn.staticUp);var Ft=new bn;return bn.LookAtLHToRef(this.position,_t,Pt,Ft),Ft.invert(),_n.FromRotationMatrixToRef(Ft,this.rotation),this},n.prototype.rotate=function(_t,Pt){return this.rotation.multiplyInPlace(this.rotation.angleAxis(Pt,_t)),this},n.prototype.translate=function(_t){return this.position.addInPlace(_t),this},r([Ne.field],n.prototype,"position",void 0),r([Ne.field],n.prototype,"rotation",void 0),r([Ne.field],n.prototype,"scale",void 0),r([M("engine.transform",_t.CLASS_ID.TRANSFORM)],n)}(Ne),qn=function(Pt){function n(_t,Ft,Dt){void 0===_t&&(_t=!0),void 0===Ft&&(Ft=!0),void 0===Dt&&(Dt=!0);var Ut=Pt.call(this)||this;return Ut.x=!0,Ut.y=!0,Ut.z=!0,Ut.x=_t,Ut.y=Ft,Ut.z=Dt,Ut}return o(n,Pt),r([Ne.field],n.prototype,"x",void 0),r([Ne.field],n.prototype,"y",void 0),r([Ne.field],n.prototype,"z",void 0),r([M("engine.billboard",_t.CLASS_ID.BILLBOARD)],n)}(Ne),Gn=function(_t){function e(){var Pt=null!==_t&&_t.apply(this,arguments)||this;return Pt.withCollisions=!0,Pt.isPointerBlocker=!0,Pt.visible=!0,Pt}return o(e,_t),r([Ne.field],e.prototype,"withCollisions",void 0),r([Ne.field],e.prototype,"isPointerBlocker",void 0),r([Ne.field],e.prototype,"visible",void 0),e}(Ne),Wn=function(Pt){function n(){return null!==Pt&&Pt.apply(this,arguments)||this}return o(n,Pt),r([Ne.field],n.prototype,"uvs",void 0),r([F("engine.shape",_t.CLASS_ID.BOX_SHAPE)],n)}(Gn),Kn=function(Pt){function n(){return null!==Pt&&Pt.apply(this,arguments)||this}return o(n,Pt),r([F("engine.shape",_t.CLASS_ID.SPHERE_SHAPE)],n)}(Gn),Jn=function(Pt){function n(){return null!==Pt&&Pt.apply(this,arguments)||this}return o(n,Pt),r([Ne.field],n.prototype,"segments",void 0),r([Ne.field],n.prototype,"arc",void 0),r([F("engine.shape",_t.CLASS_ID.CIRCLE_SHAPE)],n)}(Gn),Yn=function(Pt){function n(){var _t=null!==Pt&&Pt.apply(this,arguments)||this;return _t.width=1,_t.height=1,_t}return o(n,Pt),r([Ne.field],n.prototype,"width",void 0),r([Ne.field],n.prototype,"height",void 0),r([Ne.field],n.prototype,"uvs",void 0),r([F("engine.shape",_t.CLASS_ID.PLANE_SHAPE)],n)}(Gn),Qn=function(Pt){function n(){var _t=null!==Pt&&Pt.apply(this,arguments)||this;return _t.radiusTop=0,_t.radiusBottom=1,_t.segmentsHeight=1,_t.segmentsRadial=36,_t.openEnded=!1,_t.radius=null,_t.arc=360,_t}return o(n,Pt),r([Ne.field],n.prototype,"radiusTop",void 0),r([Ne.field],n.prototype,"radiusBottom",void 0),r([Ne.field],n.prototype,"segmentsHeight",void 0),r([Ne.field],n.prototype,"segmentsRadial",void 0),r([Ne.field],n.prototype,"openEnded",void 0),r([Ne.field],n.prototype,"radius",void 0),r([Ne.field],n.prototype,"arc",void 0),r([F("engine.shape",_t.CLASS_ID.CONE_SHAPE)],n)}(Gn),Zn=function(Pt){function n(){var _t=null!==Pt&&Pt.apply(this,arguments)||this;return _t.radiusTop=1,_t.radiusBottom=1,_t.segmentsHeight=1,_t.segmentsRadial=36,_t.openEnded=!1,_t.radius=null,_t.arc=360,_t}return o(n,Pt),r([Ne.field],n.prototype,"radiusTop",void 0),r([Ne.field],n.prototype,"radiusBottom",void 0),r([Ne.field],n.prototype,"segmentsHeight",void 0),r([Ne.field],n.prototype,"segmentsRadial",void 0),r([Ne.field],n.prototype,"openEnded",void 0),r([Ne.field],n.prototype,"radius",void 0),r([Ne.field],n.prototype,"arc",void 0),r([F("engine.shape",_t.CLASS_ID.CYLINDER_SHAPE)],n)}(Gn),Xn=function(Pt){function n(_t){var Ft=Pt.call(this)||this;return Ft.src=_t,Ft}return o(n,Pt),r([Gn.readonly],n.prototype,"src",void 0),r([F("engine.shape",_t.CLASS_ID.GLTF_SHAPE)],n)}(Gn);_t.PictureFrameStyle=void 0,(jn=_t.PictureFrameStyle||(_t.PictureFrameStyle={}))[jn.CLASSIC=0]="CLASSIC",jn[jn.BAROQUE_ORNAMENT=1]="BAROQUE_ORNAMENT",jn[jn.DIAMOND_ORNAMENT=2]="DIAMOND_ORNAMENT",jn[jn.MINIMAL_WIDE=3]="MINIMAL_WIDE",jn[jn.MINIMAL_GREY=4]="MINIMAL_GREY",jn[jn.BLOCKY=5]="BLOCKY",jn[jn.GOLD_EDGES=6]="GOLD_EDGES",jn[jn.GOLD_CARVED=7]="GOLD_CARVED",jn[jn.GOLD_WIDE=8]="GOLD_WIDE",jn[jn.GOLD_ROUNDED=9]="GOLD_ROUNDED",jn[jn.METAL_MEDIUM=10]="METAL_MEDIUM",jn[jn.METAL_WIDE=11]="METAL_WIDE",jn[jn.METAL_SLIM=12]="METAL_SLIM",jn[jn.METAL_ROUNDED=13]="METAL_ROUNDED",jn[jn.PINS=14]="PINS",jn[jn.MINIMAL_BLACK=15]="MINIMAL_BLACK",jn[jn.MINIMAL_WHITE=16]="MINIMAL_WHITE",jn[jn.TAPE=17]="TAPE",jn[jn.WOOD_SLIM=18]="WOOD_SLIM",jn[jn.WOOD_WIDE=19]="WOOD_WIDE",jn[jn.WOOD_TWIGS=20]="WOOD_TWIGS",jn[jn.CANVAS=21]="CANVAS",jn[jn.NONE=22]="NONE";var tr,er=function(Pt){function n(Ft,Dt){void 0===Dt&&(Dt={});var Ut=Pt.call(this)||this;Ut.src=Ft;var Lt=new Sn(.6404918,.611472,.8584906),Kt=_t.PictureFrameStyle.CLASSIC;return"r"in Dt?Lt=Dt:null!=Dt&&(Dt.color&&(Lt=Dt.color),Dt.style&&(Kt=Dt.style)),Ut.color=Lt,Ut.style=Kt,Ut}return o(n,Pt),r([Gn.readonly],n.prototype,"src",void 0),r([Gn.readonly],n.prototype,"style",void 0),r([Ne.field],n.prototype,"color",void 0),r([F("engine.shape",_t.CLASS_ID.NFT_SHAPE)],n)}(Gn),nr=function(Pt){function n(_t,Ft){var Dt=Pt.call(this)||this;if(Dt.src=_t,Ft)for(var Ut in Ft)Dt[Ut]=Ft[Ut];return Dt}return o(n,Pt),r([Ne.readonly],n.prototype,"src",void 0),r([Ne.readonly],n.prototype,"samplingMode",void 0),r([Ne.readonly],n.prototype,"wrap",void 0),r([Ne.readonly],n.prototype,"hasAlpha",void 0),r([F("engine.texture",_t.CLASS_ID.TEXTURE)],n)}(Ne),rr=function(Pt){function n(){var _t=null!==Pt&&Pt.apply(this,arguments)||this;return _t.states=[],_t}return o(n,Pt),n.prototype.addClip=function(_t){var Pt=this;return this.states.push(_t),_t.onChange((function(){Pt.dirty=!0})),_t.owner=this,this},n.prototype.getClip=function(_t){for(var Pt=0;Pt<this.states.length;Pt++){var Ft=this.states[Pt];if(Ft.clip===_t)return Ft}var Dt=new $n(_t);return this.addClip(Dt),Dt},n.prototype.stop=function(_t){if(_t)_t.playing=!1,_t.shouldReset=!0;else for(var Pt=0;Pt<this.states.length;Pt++){var Ft=this.states[Pt];this.stop(Ft)}},n.prototype.play=function(_t,Pt){void 0===Pt&&(Pt=!1);for(var Ft=0;Ft<this.states.length;Ft++){var Dt=this.states[Ft];Dt.layer===_t.layer&&_t!==Dt&&this.pause(Dt)}Pt&&(_t.shouldReset=!0),_t.playing=!0,_t.dirty=!0,_t.data.nonce=Math.random()},n.prototype.pause=function(_t){if(_t)_t.playing=!1;else for(var Pt=0;Pt<this.states.length;Pt++){var Ft=this.states[Pt];this.pause(Ft)}},r([Ne.readonly],n.prototype,"states",void 0),r([M("engine.animator",_t.CLASS_ID.ANIMATION)],n)}(Gn),ir=function(Pt){function n(_t){var Ft=Pt.call(this)||this;return Ft.src=_t,Ft}return o(n,Pt),r([Ne.readonly],n.prototype,"src",void 0),r([F("engine.shape",_t.CLASS_ID.OBJ_SHAPE)],n)}(Gn),or=function(Pt){function n(_t){void 0===_t&&(_t="");var Ft=Pt.call(this)||this;return Ft.src=_t,Ft}return o(n,Pt),r([Ne.readonly],n.prototype,"src",void 0),r([F("engine.font",_t.CLASS_ID.FONT)],n)}(Ne);_t.Fonts=void 0,(tr=_t.Fonts||(_t.Fonts={})).SanFrancisco="builtin:SF-UI-Text-Regular SDF",tr.SanFrancisco_Heavy="builtin:SF-UI-Text-Heavy SDF",tr.SanFrancisco_Semibold="builtin:SF-UI-Text-Semibold SDF",tr.LiberationSans="builtin:LiberationSans SDF";var ar,sr=function(Pt){function n(_t){var Ft=Pt.call(this)||this;return Ft.outlineWidth=0,Ft.outlineColor=new Sn(1,1,1),Ft.color=new Sn(1,1,1),Ft.fontSize=10,Ft.fontWeight="normal",Ft.opacity=1,Ft.value="",Ft.lineSpacing="0px",Ft.lineCount=0,Ft.resizeToFit=!1,Ft.textWrapping=!1,Ft.shadowBlur=0,Ft.shadowOffsetX=0,Ft.shadowOffsetY=0,Ft.shadowColor=new Sn(1,1,1),Ft.zIndex=0,Ft.hTextAlign="center",Ft.vTextAlign="center",Ft.width=1,Ft.height=1,Ft.paddingTop=0,Ft.paddingRight=0,Ft.paddingBottom=0,Ft.paddingLeft=0,Ft.isPickable=!1,Ft.billboard=!1,Ft.visible=!0,_t&&(Ft.value=_t),Ft}return o(n,Pt),r([Ne.field],n.prototype,"outlineWidth",void 0),r([Ne.field],n.prototype,"outlineColor",void 0),r([Ne.field],n.prototype,"color",void 0),r([Ne.field],n.prototype,"fontSize",void 0),r([Ne.field],n.prototype,"fontWeight",void 0),r([Ne.component],n.prototype,"font",void 0),r([Ne.field],n.prototype,"opacity",void 0),r([Ne.field],n.prototype,"value",void 0),r([Ne.field],n.prototype,"lineSpacing",void 0),r([Ne.field],n.prototype,"lineCount",void 0),r([Ne.field],n.prototype,"resizeToFit",void 0),r([Ne.field],n.prototype,"textWrapping",void 0),r([Ne.field],n.prototype,"shadowBlur",void 0),r([Ne.field],n.prototype,"shadowOffsetX",void 0),r([Ne.field],n.prototype,"shadowOffsetY",void 0),r([Ne.field],n.prototype,"shadowColor",void 0),r([Ne.field],n.prototype,"zIndex",void 0),r([Ne.field],n.prototype,"hTextAlign",void 0),r([Ne.field],n.prototype,"vTextAlign",void 0),r([Ne.field],n.prototype,"width",void 0),r([Ne.field],n.prototype,"height",void 0),r([Ne.field],n.prototype,"paddingTop",void 0),r([Ne.field],n.prototype,"paddingRight",void 0),r([Ne.field],n.prototype,"paddingBottom",void 0),r([Ne.field],n.prototype,"paddingLeft",void 0),r([Ne.field],n.prototype,"isPickable",void 0),r([Ne.field],n.prototype,"billboard",void 0),r([Ne.field],n.prototype,"visible",void 0),r([M("engine.text",_t.CLASS_ID.TEXT_SHAPE)],n)}(Ne);_t.TransparencyMode=void 0,(ar=_t.TransparencyMode||(_t.TransparencyMode={}))[ar.OPAQUE=0]="OPAQUE",ar[ar.ALPHA_TEST=1]="ALPHA_TEST",ar[ar.ALPHA_BLEND=2]="ALPHA_BLEND",ar[ar.ALPHA_TEST_AND_BLEND=3]="ALPHA_TEST_AND_BLEND",ar[ar.AUTO=4]="AUTO";var ur,pr=function(Pt){function n(){var Ft=null!==Pt&&Pt.apply(this,arguments)||this;return Ft.alphaTest=.5,Ft.castShadows=!0,Ft.transparencyMode=_t.TransparencyMode.AUTO,Ft}return o(n,Pt),r([Ne.field],n.prototype,"alphaTest",void 0),r([Ne.field],n.prototype,"albedoColor",void 0),r([Ne.field],n.prototype,"emissiveColor",void 0),r([Ne.field],n.prototype,"metallic",void 0),r([Ne.field],n.prototype,"roughness",void 0),r([Ne.field],n.prototype,"ambientColor",void 0),r([Ne.field],n.prototype,"reflectionColor",void 0),r([Ne.field],n.prototype,"reflectivityColor",void 0),r([Ne.field],n.prototype,"directIntensity",void 0),r([Ne.field],n.prototype,"microSurface",void 0),r([Ne.field],n.prototype,"emissiveIntensity",void 0),r([Ne.field],n.prototype,"environmentIntensity",void 0),r([Ne.field],n.prototype,"specularIntensity",void 0),r([Ne.component],n.prototype,"albedoTexture",void 0),r([Ne.component],n.prototype,"alphaTexture",void 0),r([Ne.component],n.prototype,"emissiveTexture",void 0),r([Ne.component],n.prototype,"bumpTexture",void 0),r([Ne.component],n.prototype,"refractionTexture",void 0),r([Ne.field],n.prototype,"castShadows",void 0),r([Ne.field],n.prototype,"transparencyMode",void 0),r([F("engine.material",_t.CLASS_ID.PBR_MATERIAL)],n)}(Ne),lr=function(Pt){function n(){var _t=null!==Pt&&Pt.apply(this,arguments)||this;return _t.alphaTest=.5,_t.castShadows=!0,_t}return o(n,Pt),r([Ne.component],n.prototype,"texture",void 0),r([Ne.field],n.prototype,"alphaTest",void 0),r([Ne.field],n.prototype,"castShadows",void 0),r([F("engine.material",_t.CLASS_ID.BASIC_MATERIAL)],n)}(Ne),cr=function(_t){function e(Pt){var Ft=_t.call(this)||this;if(Ft.uuid=f("UUID"),!Pt||!("apply"in Pt)||!("call"in Pt))throw new Error("Callback is not a function");return Ft.callback=Pt,Ft}return o(e,_t),e.uuidEvent=function(_t,Pt){if(delete _t[Pt]){var Ft=Pt+"_"+Math.random();_t[Ft]=void 0,Object.defineProperty(_t,Ft,i(i({},Object.getOwnPropertyDescriptor(_t,Ft)),{enumerable:!1})),Object.defineProperty(_t,Pt.toString(),{get:function(){return this[Ft]},set:function(_t){var Dt=this[Ft];if(_t){if(!(_t instanceof e))throw new Error("value is not an OnUUIDEvent");this.data[Pt]=_t.uuid}else this.data[Pt]=null;if(this[Ft]=_t,_t!==Dt){this.dirty=!0;for(var Ut=0;Ut<this.subscriptions.length;Ut++)this.subscriptions[Ut](Pt,_t,Dt)}},enumerable:!0})}},e.prototype.toJSON=function(){return{uuid:this.uuid,type:this.type}},r([Ne.field],e.prototype,"callback",void 0),e}(Ne),dr=function(Pt){function n(){var Ft=null!==Pt&&Pt.apply(this,arguments)||this;return Ft.button=_t.ActionButton.ANY,Ft.hoverText="Interact",Ft.distance=10,Ft.showFeedback=!0,Ft}return o(n,Pt),n.prototype.toJSON=function(){return{uuid:this.uuid,type:this.type,button:this.button,hoverText:this.hoverText,distance:this.distance,showFeedback:this.showFeedback}},r([Ne.field],n.prototype,"button",void 0),r([Ne.field],n.prototype,"hoverText",void 0),r([Ne.field],n.prototype,"distance",void 0),r([Ne.field],n.prototype,"showFeedback",void 0),n}(cr),yr=function(Pt){function n(){var _t=null!==Pt&&Pt.apply(this,arguments)||this;return _t.type="onPointerLock",_t}return o(n,Pt),r([Ne.readonly],n.prototype,"type",void 0),r([M("engine.onPointerLock",_t.CLASS_ID.UUID_CALLBACK)],n)}(cr),hr=function(Pt){function n(){var _t=null!==Pt&&Pt.apply(this,arguments)||this;return _t.type="onAnimationEnd",_t}return o(n,Pt),r([Ne.readonly],n.prototype,"type",void 0),r([M("engine.onAnimationEnd",_t.CLASS_ID.UUID_CALLBACK)],n)}(cr),fr=function(Pt){function n(){return null!==Pt&&Pt.apply(this,arguments)||this}return o(n,Pt),r([M("engine.smartItem",_t.CLASS_ID.SMART_ITEM)],n)}(Ne),mr=function(Pt){function n(_t){var Ft=Pt.call(this)||this;return Ft.url=_t,Ft}return o(n,Pt),r([Ne.readonly],n.prototype,"url",void 0),r([F("engine.VideoClip",_t.CLASS_ID.VIDEO_CLIP)],n)}(Ne),vr=function(Pt){function n(_t,Ft){var Dt=Pt.call(this)||this;if(Dt.volume=1,Dt.playbackRate=1,Dt.loop=!1,Dt.seek=-1,Dt.playing=!1,!(_t instanceof mr))throw new Error("Trying to create VideoTexture(VideoClip) with an invalid VideoClip");if(Dt.videoClipId=N(_t),Ft)for(var Ut in Ft)Dt[Ut]=Ft[Ut];return Dt}return o(n,Pt),n.prototype.play=function(){this.playing=!0},n.prototype.pause=function(){this.playing=!1},n.prototype.reset=function(){this.seekTime(0),this.pause()},n.prototype.seekTime=function(_t){this.seek=_t,this.dirty=!0,this.data.nonce=Math.random()},n.prototype.toJSON=function(){if(this.seek>=0){var _t=JSON.parse(JSON.stringify(Pt.prototype.toJSON.call(this)));return this.seek=-1,_t}return Pt.prototype.toJSON.call(this)},r([Ne.readonly],n.prototype,"videoClipId",void 0),r([Ne.readonly],n.prototype,"samplingMode",void 0),r([Ne.readonly],n.prototype,"wrap",void 0),r([Ne.field],n.prototype,"volume",void 0),r([Ne.field],n.prototype,"playbackRate",void 0),r([Ne.field],n.prototype,"loop",void 0),r([Ne.field],n.prototype,"seek",void 0),r([Ne.field],n.prototype,"playing",void 0),r([F("engine.VideoTexture",_t.CLASS_ID.VIDEO_TEXTURE)],n)}(Ne),gr=function(){function e(){var Pt=this;this.position=new wn,this.rotation=new _n,this.feetPosition=new wn,this.worldPosition=new wn,this.lastEventPosition={x:0,y:0,z:0},this.lastEventWorldPosition={x:0,y:0,z:0},this.lastEventRotation={x:0,y:0,z:0,w:1},this._playerHeight=1.6,this._cameraMode=_t.CameraMode.FirstPerson,"undefined"!=typeof dcl&&(dcl.subscribe("positionChanged"),dcl.subscribe("rotationChanged"),dcl.subscribe("cameraModeChanged"),dcl.onEvent((function(_t){switch(_t.type){case"positionChanged":Pt.positionChanged(_t.data);break;case"rotationChanged":Pt.rotationChanged(_t.data);break;case"cameraModeChanged":Pt.cameraModeChanged(_t.data)}}))),Object.defineProperty(this.position,"x",{get:function(){return Pt.lastEventPosition.x}}),Object.defineProperty(this.position,"y",{get:function(){return Pt.lastEventPosition.y}}),Object.defineProperty(this.position,"z",{get:function(){return Pt.lastEventPosition.z}}),Object.defineProperty(this.worldPosition,"x",{get:function(){return Pt.lastEventWorldPosition.x}}),Object.defineProperty(this.worldPosition,"y",{get:function(){return Pt.lastEventWorldPosition.y}}),Object.defineProperty(this.worldPosition,"z",{get:function(){return Pt.lastEventWorldPosition.z}}),Object.defineProperty(this.feetPosition,"x",{get:function(){return Pt.lastEventPosition.x}}),Object.defineProperty(this.feetPosition,"y",{get:function(){return Pt.lastEventPosition.y-Pt.playerHeight}}),Object.defineProperty(this.feetPosition,"z",{get:function(){return Pt.lastEventPosition.z}}),Object.defineProperty(this.rotation,"x",{get:function(){return Pt.lastEventRotation.x}}),Object.defineProperty(this.rotation,"y",{get:function(){return Pt.lastEventRotation.y}}),Object.defineProperty(this.rotation,"z",{get:function(){return Pt.lastEventRotation.z}}),Object.defineProperty(this.rotation,"w",{get:function(){return Pt.lastEventRotation.w}})}return Object.defineProperty(e,"instance",{get:function(){return e._instance||(e._instance=new e),e._instance},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playerHeight",{get:function(){return this._playerHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cameraMode",{get:function(){return this._cameraMode},enumerable:!1,configurable:!0}),e.prototype.positionChanged=function(_t){this.lastEventPosition=_t.position,this.lastEventWorldPosition=_t.cameraPosition,this._playerHeight=_t.playerHeight},e.prototype.rotationChanged=function(_t){this.lastEventRotation=_t.quaternion},e.prototype.cameraModeChanged=function(_t){this._cameraMode=_t.cameraMode},e}();!function(_t){_t.HitFirst="rqhf",_t.HitAll="rqha"}(ur||(ur={}));var br,_r=function(){function t(){this.queries={}}return Object.defineProperty(t,"instance",{get:function(){return t.ensureInstance(),t._instance},enumerable:!1,configurable:!0}),t.ensureInstance=function(){t._instance||(t._instance=new t)},t.prototype.getRayFromCamera=function(_t){var Pt=gr.instance.rotation,Ft=bn.Identity();Pt.toRotationMatrix(Ft);var Dt=wn.TransformCoordinates(wn.Forward(),Ft);return{origin:gr.instance.position,direction:Dt,distance:_t}},t.prototype.getRayFromPositions=function(_t,Pt){var Ft=Pt.subtract(_t),Dt=Ft.length();return{origin:_t,direction:Ft.normalize(),distance:Dt}},t.prototype.hitFirst=function(_t,Pt,Ft){var Dt="number"==typeof Ft?ur.HitFirst+Ft:y();this.queries[Dt]=Pt,"undefined"!=typeof dcl&&dcl.query("raycast",{queryId:Dt,queryType:"HitFirst",ray:_t})},t.prototype.hitAll=function(_t,Pt,Ft){var Dt="number"==typeof Ft?ur.HitAll+Ft:y();this.queries[Dt]=Pt,"undefined"!=typeof dcl&&dcl.query("raycast",{queryId:Dt,queryType:"HitAll",ray:_t})},t.prototype.hitFirstAvatar=function(_t,Pt){l("not implemented yet")},t.prototype.hitAllAvatars=function(_t,Pt){l("not implemented yet")},t.prototype.handleRaycastHitFirstResponse=function(_t){this.queries[_t.payload.queryId](_t.payload.payload),delete this.queries[_t.payload.queryId]},t.prototype.handleRaycastHitAllResponse=function(_t){this.queries[_t.payload.queryId](_t.payload.payload),delete this.queries[_t.payload.queryId]},t}(),wr=function(){function t(){}return t.prototype.activate=function(_t){_t.eventManager.addListener(Ke,this,(function(_t){"HitFirst"===_t.payload.queryType?_r.instance.handleRaycastHitFirstResponse(_t):"HitAll"===_t.payload.queryType&&_r.instance.handleRaycastHitAllResponse(_t)})),"undefined"!=typeof dcl&&dcl.subscribe("raycastResponse")},t.prototype.deactivate=function(){"undefined"!=typeof dcl&&dcl.unsubscribe("raycastResponse")},t}(),Tr=new wr,Er=function(){function t(){}return t.prototype.activate=function(_t){_t.eventManager.addListener(Ye,this,(function(_t){Ln.instance.handlePointerEvent(_t.payload)})),"undefined"!=typeof dcl&&(dcl.subscribe("pointerUp"),dcl.subscribe("pointerDown"),dcl.subscribe("pointerEvent"))},t.prototype.deactivate=function(){"undefined"!=typeof dcl&&(dcl.unsubscribe("pointerUp"),dcl.unsubscribe("pointerDown"),dcl.unsubscribe("pointerEvent"))},t}(),xr=new Er,Cr=function(){function t(){this.handlerMap={}}return t.prototype.activate=function(_t){_t.eventManager.addListener(We,this,this.handleEvent),_t.eventManager.addListener(Yt,this,this.componentAdded),_t.eventManager.addListener(Kt,this,this.componentRemoved),"undefined"!=typeof dcl&&dcl.subscribe("uuidEvent")},t.prototype.deactivate=function(){"undefined"!=typeof dcl&&dcl.unsubscribe("uuidEvent")},t.prototype.onAddEntity=function(_t){for(var Pt in _t.components){var Ft=_t.components[Pt];Ft instanceof cr&&(this.handlerMap[Ft.uuid]=Ft)}},t.prototype.onRemoveEntity=function(_t){for(var Pt in _t.components){var Ft=_t.components[Pt];Ft instanceof cr&&delete this.handlerMap[Ft.uuid]}},t.prototype.componentAdded=function(_t){if(_t.entity.isAddedToEngine()){var Pt=_t.entity.components[_t.componentName];Pt instanceof cr&&(this.handlerMap[Pt.uuid]=Pt)}},t.prototype.componentRemoved=function(_t){_t.entity.isAddedToEngine()&&_t.component instanceof cr&&delete this.handlerMap[_t.component.uuid]},t.prototype.handleEvent=function(_t){if(_t.uuid in this.handlerMap){var Pt=this.handlerMap[_t.uuid];Pt&&Pt.callback&&"call"in Pt.callback&&Pt.callback(_t.payload)}},t}(),Mr=new Cr,Ar=function(Pt){function n(_t){var Ft=Pt.call(this)||this;return Ft.loop=!1,Ft.volume=1,Ft.url=_t,Ft}return o(n,Pt),r([Ne.readonly],n.prototype,"url",void 0),r([Ne.field],n.prototype,"loop",void 0),r([Ne.field],n.prototype,"loadingCompleteEventId",void 0),r([Ne.field],n.prototype,"volume",void 0),r([F("engine.AudioClip",_t.CLASS_ID.AUDIO_CLIP)],n)}(Ne),Sr=function(Pt){function n(_t){var Ft=Pt.call(this)||this;if(Ft.audioClip=_t,Ft.loop=!1,Ft.volume=1,Ft.playing=!1,Ft.pitch=1,Ft.playedAtTimestamp=Date.now(),!(_t instanceof Ar))throw new Error("Trying to create AudioSource(AudioClip) with an invalid AudioClip");return Ft.audioClipId=N(_t),Ft}return o(n,Pt),n.prototype.playOnce=function(){return this.playing=!0,this.dirty=!0,this.playedAtTimestamp=Date.now(),this.data.nonce=Math.random(),this},r([Ne.readonly],n.prototype,"audioClipId",void 0),r([Ne.field],n.prototype,"loop",void 0),r([Ne.field],n.prototype,"volume",void 0),r([Ne.field],n.prototype,"playing",void 0),r([Ne.field],n.prototype,"pitch",void 0),r([Ne.field],n.prototype,"playedAtTimestamp",void 0),r([M("engine.AudioSource",_t.CLASS_ID.AUDIO_SOURCE)],n)}(Ne),Ir=function(Pt){function n(_t){var Ft=Pt.call(this)||this;return Ft.playing=!1,Ft.volume=1,Ft.url=_t,Ft.playing=!0,Ft}return o(n,Pt),r([Ne.readonly],n.prototype,"url",void 0),r([Ne.field],n.prototype,"playing",void 0),r([Ne.field],n.prototype,"volume",void 0),r([M("engine.AudioStream",_t.CLASS_ID.AUDIO_STREAM)],n)}(Ne);_t.Gizmo=void 0,(br=_t.Gizmo||(_t.Gizmo={})).MOVE="MOVE",br.ROTATE="ROTATE",br.SCALE="SCALE",br.NONE="NONE";var Rr,Nr=function(Pt){function n(){var _t=null!==Pt&&Pt.apply(this,arguments)||this;return _t.type="gizmoEvent",_t}return o(n,Pt),r([Ne.readonly],n.prototype,"type",void 0),r([M("engine.gizmoEvent",_t.CLASS_ID.UUID_CALLBACK)],n)}(cr),Pr=function(Pt){function n(){var _t=null!==Pt&&Pt.apply(this,arguments)||this;return _t.position=!0,_t.rotation=!0,_t.scale=!0,_t.cycle=!0,_t.localReference=!1,_t}return o(n,Pt),r([Ne.field],n.prototype,"position",void 0),r([Ne.field],n.prototype,"rotation",void 0),r([Ne.field],n.prototype,"scale",void 0),r([Ne.field],n.prototype,"cycle",void 0),r([Ne.field],n.prototype,"selectedGizmo",void 0),r([Ne.field],n.prototype,"localReference",void 0),r([M("engine.gizmos",_t.CLASS_ID.GIZMOS)],n)}(Ne),Or=function(_t){function e(Pt){var Ft=_t.call(this)||this;return Ft.name=null,Ft.visible=!0,Ft.opacity=1,Ft.hAlign="center",Ft.vAlign="center",Ft.width="100px",Ft.height="50px",Ft.positionX="0px",Ft.positionY="0px",Ft.isPointerBlocker=!0,Pt&&(Ft._parent=Pt,Ft.data.parentComponent=N(Pt)),Ft}return o(e,_t),Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parentComponent",{get:function(){return this.data.parentComponent},enumerable:!1,configurable:!0}),r([Ne.field],e.prototype,"name",void 0),r([Ne.field],e.prototype,"visible",void 0),r([Ne.field],e.prototype,"opacity",void 0),r([Ne.field],e.prototype,"hAlign",void 0),r([Ne.field],e.prototype,"vAlign",void 0),r([Ne.uiValue],e.prototype,"width",void 0),r([Ne.uiValue],e.prototype,"height",void 0),r([Ne.uiValue],e.prototype,"positionX",void 0),r([Ne.uiValue],e.prototype,"positionY",void 0),r([Ne.field],e.prototype,"isPointerBlocker",void 0),e}(Ne),kr=function(Pt){function n(){return Pt.call(this,null)||this}return o(n,Pt),r([F("engine.shape",_t.CLASS_ID.UI_FULLSCREEN_SHAPE)],n)}(Or),Fr=function(Pt){function n(){return Pt.call(this,null)||this}return o(n,Pt),r([F("engine.shape",_t.CLASS_ID.UI_WORLD_SPACE_SHAPE)],n)}(Or),$r=function(Pt){function n(){return Pt.call(this,null)||this}return o(n,Pt),r([F("engine.shape",_t.CLASS_ID.UI_SCREEN_SPACE_SHAPE)],n)}(Or),zr=function(Pt){function n(){var _t=null!==Pt&&Pt.apply(this,arguments)||this;return _t.adaptWidth=!1,_t.adaptHeight=!1,_t.thickness=0,_t.color=An.Clear(),_t.alignmentUsesSize=!0,_t}return o(n,Pt),r([Ne.field],n.prototype,"adaptWidth",void 0),r([Ne.field],n.prototype,"adaptHeight",void 0),r([Ne.field],n.prototype,"thickness",void 0),r([Ne.field],n.prototype,"color",void 0),r([Ne.field],n.prototype,"alignmentUsesSize",void 0),r([F("engine.shape",_t.CLASS_ID.UI_CONTAINER_RECT)],n)}(Or);_t.UIStackOrientation=void 0,(Rr=_t.UIStackOrientation||(_t.UIStackOrientation={}))[Rr.VERTICAL=0]="VERTICAL",Rr[Rr.HORIZONTAL=1]="HORIZONTAL";var Dr=function(Pt){function n(){var Ft=null!==Pt&&Pt.apply(this,arguments)||this;return Ft.adaptWidth=!0,Ft.adaptHeight=!0,Ft.color=An.Clear(),Ft.stackOrientation=_t.UIStackOrientation.VERTICAL,Ft.spacing=0,Ft}return o(n,Pt),r([Ne.field],n.prototype,"adaptWidth",void 0),r([Ne.field],n.prototype,"adaptHeight",void 0),r([Ne.field],n.prototype,"color",void 0),r([Ne.field],n.prototype,"stackOrientation",void 0),r([Ne.field],n.prototype,"spacing",void 0),r([F("engine.shape",_t.CLASS_ID.UI_CONTAINER_STACK)],n)}(Or),Ur=function(Pt){function n(){var _t=null!==Pt&&Pt.apply(this,arguments)||this;return _t.fontSize=10,_t.fontWeight="normal",_t.thickness=0,_t.cornerRadius=0,_t.color=An.White(),_t.background=An.White(),_t.paddingTop=0,_t.paddingRight=0,_t.paddingBottom=0,_t.paddingLeft=0,_t.shadowBlur=0,_t.shadowOffsetX=0,_t.shadowOffsetY=0,_t.shadowColor=An.Black(),_t.text="button",_t}return o(n,Pt),r([Ne.field],n.prototype,"fontSize",void 0),r([Ne.field],n.prototype,"fontWeight",void 0),r([Ne.field],n.prototype,"thickness",void 0),r([Ne.field],n.prototype,"cornerRadius",void 0),r([Ne.field],n.prototype,"color",void 0),r([Ne.field],n.prototype,"background",void 0),r([Ne.field],n.prototype,"paddingTop",void 0),r([Ne.field],n.prototype,"paddingRight",void 0),r([Ne.field],n.prototype,"paddingBottom",void 0),r([Ne.field],n.prototype,"paddingLeft",void 0),r([Ne.field],n.prototype,"shadowBlur",void 0),r([Ne.field],n.prototype,"shadowOffsetX",void 0),r([Ne.field],n.prototype,"shadowOffsetY",void 0),r([Ne.field],n.prototype,"shadowColor",void 0),r([Ne.field],n.prototype,"text",void 0),r([F("engine.shape",_t.CLASS_ID.UI_BUTTON_SHAPE)],n)}(Or),Br=function(Pt){function n(){var _t=null!==Pt&&Pt.apply(this,arguments)||this;return _t.outlineWidth=0,_t.outlineColor=An.White(),_t.color=An.White(),_t.fontSize=10,_t.fontAutoSize=!1,_t.fontWeight="normal",_t.value="",_t.lineSpacing=0,_t.lineCount=0,_t.adaptWidth=!1,_t.adaptHeight=!1,_t.textWrapping=!1,_t.shadowBlur=0,_t.shadowOffsetX=0,_t.shadowOffsetY=0,_t.shadowColor=An.Black(),_t.hTextAlign="left",_t.vTextAlign="bottom",_t.paddingTop=0,_t.paddingRight=0,_t.paddingBottom=0,_t.paddingLeft=0,_t}return o(n,Pt),r([Ne.field],n.prototype,"outlineWidth",void 0),r([Ne.field],n.prototype,"outlineColor",void 0),r([Ne.field],n.prototype,"color",void 0),r([Ne.field],n.prototype,"fontSize",void 0),r([Ne.field],n.prototype,"fontAutoSize",void 0),r([Ne.field],n.prototype,"fontWeight",void 0),r([Ne.component],n.prototype,"font",void 0),r([Ne.field],n.prototype,"value",void 0),r([Ne.field],n.prototype,"lineSpacing",void 0),r([Ne.field],n.prototype,"lineCount",void 0),r([Ne.field],n.prototype,"adaptWidth",void 0),r([Ne.field],n.prototype,"adaptHeight",void 0),r([Ne.field],n.prototype,"textWrapping",void 0),r([Ne.field],n.prototype,"shadowBlur",void 0),r([Ne.field],n.prototype,"shadowOffsetX",void 0),r([Ne.field],n.prototype,"shadowOffsetY",void 0),r([Ne.field],n.prototype,"shadowColor",void 0),r([Ne.field],n.prototype,"hTextAlign",void 0),r([Ne.field],n.prototype,"vTextAlign",void 0),r([Ne.field],n.prototype,"paddingTop",void 0),r([Ne.field],n.prototype,"paddingRight",void 0),r([Ne.field],n.prototype,"paddingBottom",void 0),r([Ne.field],n.prototype,"paddingLeft",void 0),r([F("engine.shape",_t.CLASS_ID.UI_TEXT_SHAPE)],n)}(Or),Lr=function(Pt){function n(){var _t=null!==Pt&&Pt.apply(this,arguments)||this;return _t.outlineWidth=0,_t.outlineColor=An.Black(),_t.color=An.Clear(),_t.thickness=1,_t.fontSize=10,_t.fontWeight="normal",_t.value="",_t.placeholderColor=An.White(),_t.placeholder="",_t.margin=10,_t.maxWidth=100,_t.hTextAlign="left",_t.vTextAlign="bottom",_t.autoStretchWidth=!0,_t.background=An.Black(),_t.focusedBackground=An.Black(),_t.textWrapping=!1,_t.shadowBlur=0,_t.shadowOffsetX=0,_t.shadowOffsetY=0,_t.shadowColor=An.White(),_t.paddingTop=0,_t.paddingRight=0,_t.paddingBottom=0,_t.paddingLeft=0,_t.onTextSubmit=null,_t.onChanged=null,_t.onFocus=null,_t.onBlur=null,_t}return o(n,Pt),r([Ne.field],n.prototype,"outlineWidth",void 0),r([Ne.field],n.prototype,"outlineColor",void 0),r([Ne.field],n.prototype,"color",void 0),r([Ne.field],n.prototype,"thickness",void 0),r([Ne.field],n.prototype,"fontSize",void 0),r([Ne.field],n.prototype,"fontWeight",void 0),r([Ne.component],n.prototype,"font",void 0),r([Ne.field],n.prototype,"value",void 0),r([Ne.field],n.prototype,"placeholderColor",void 0),r([Ne.field],n.prototype,"placeholder",void 0),r([Ne.field],n.prototype,"margin",void 0),r([Ne.field],n.prototype,"maxWidth",void 0),r([Ne.field],n.prototype,"hTextAlign",void 0),r([Ne.field],n.prototype,"vTextAlign",void 0),r([Ne.field],n.prototype,"autoStretchWidth",void 0),r([Ne.field],n.prototype,"background",void 0),r([Ne.field],n.prototype,"focusedBackground",void 0),r([Ne.field],n.prototype,"textWrapping",void 0),r([Ne.field],n.prototype,"shadowBlur",void 0),r([Ne.field],n.prototype,"shadowOffsetX",void 0),r([Ne.field],n.prototype,"shadowOffsetY",void 0),r([Ne.field],n.prototype,"shadowColor",void 0),r([Ne.field],n.prototype,"paddingTop",void 0),r([Ne.field],n.prototype,"paddingRight",void 0),r([Ne.field],n.prototype,"paddingBottom",void 0),r([Ne.field],n.prototype,"paddingLeft",void 0),r([cr.uuidEvent],n.prototype,"onTextSubmit",void 0),r([cr.uuidEvent],n.prototype,"onChanged",void 0),r([cr.uuidEvent],n.prototype,"onFocus",void 0),r([cr.uuidEvent],n.prototype,"onBlur",void 0),r([F("engine.shape",_t.CLASS_ID.UI_INPUT_TEXT_SHAPE)],n)}(Or),jr=function(Pt){function n(_t,Ft){var Dt=Pt.call(this,_t)||this;return Dt.sourceLeft=0,Dt.sourceTop=0,Dt.sourceWidth=1,Dt.sourceHeight=1,Dt.paddingTop=0,Dt.paddingRight=0,Dt.paddingBottom=0,Dt.paddingLeft=0,Dt.sizeInPixels=!0,Dt.onClick=null,Dt.source=Ft,Dt}return o(n,Pt),r([Ne.field],n.prototype,"sourceLeft",void 0),r([Ne.field],n.prototype,"sourceTop",void 0),r([Ne.field],n.prototype,"sourceWidth",void 0),r([Ne.field],n.prototype,"sourceHeight",void 0),r([Ne.component],n.prototype,"source",void 0),r([Ne.field],n.prototype,"paddingTop",void 0),r([Ne.field],n.prototype,"paddingRight",void 0),r([Ne.field],n.prototype,"paddingBottom",void 0),r([Ne.field],n.prototype,"paddingLeft",void 0),r([Ne.field],n.prototype,"sizeInPixels",void 0),r([cr.uuidEvent],n.prototype,"onClick",void 0),r([F("engine.shape",_t.CLASS_ID.UI_IMAGE_SHAPE)],n)}(Or),Hr=function(Pt){function n(){var _t=null!==Pt&&Pt.apply(this,arguments)||this;return _t.valueX=0,_t.valueY=0,_t.borderColor=An.White(),_t.backgroundColor=An.Clear(),_t.isHorizontal=!1,_t.isVertical=!1,_t.paddingTop=0,_t.paddingRight=0,_t.paddingBottom=0,_t.paddingLeft=0,_t.onChanged=null,_t}return o(n,Pt),r([Ne.field],n.prototype,"valueX",void 0),r([Ne.field],n.prototype,"valueY",void 0),r([Ne.field],n.prototype,"borderColor",void 0),r([Ne.field],n.prototype,"backgroundColor",void 0),r([Ne.field],n.prototype,"isHorizontal",void 0),r([Ne.field],n.prototype,"isVertical",void 0),r([Ne.field],n.prototype,"paddingTop",void 0),r([Ne.field],n.prototype,"paddingRight",void 0),r([Ne.field],n.prototype,"paddingBottom",void 0),r([Ne.field],n.prototype,"paddingLeft",void 0),r([cr.uuidEvent],n.prototype,"onChanged",void 0),r([F("engine.shape",_t.CLASS_ID.UI_SLIDER_SHAPE)],n)}(Or),Vr=function(Pt){function n(){var _t=null!==Pt&&Pt.apply(this,arguments)||this;return _t.useDummyModel=!1,_t.talking=!1,_t}var Ft;return o(n,Pt),Ft=n,n.Dummy=function(){var _t=new Ft;return _t.useDummyModel=!0,_t},r([Ne.field],n.prototype,"id",void 0),r([Ne.field],n.prototype,"name",void 0),r([Ne.field],n.prototype,"expressionTriggerId",void 0),r([Ne.field],n.prototype,"expressionTriggerTimestamp",void 0),r([Ne.field],n.prototype,"bodyShape",void 0),r([Ne.field],n.prototype,"wearables",void 0),r([Ne.field],n.prototype,"skinColor",void 0),r([Ne.field],n.prototype,"hairColor",void 0),r([Ne.field],n.prototype,"eyeColor",void 0),r([Ne.field],n.prototype,"useDummyModel",void 0),r([Ne.field],n.prototype,"talking",void 0),Ft=r([M("engine.avatarShape",_t.CLASS_ID.AVATAR_SHAPE)],n)}(Ne),qr=function(Pt){function n(_t){var Ft=Pt.call(this,_t)||this;return Ft.type="onFocus",Mr.handlerMap[Ft.uuid]=Ft,Ft}return o(n,Pt),r([Ne.readonly],n.prototype,"type",void 0),r([M("engine.onFocus",_t.CLASS_ID.UUID_CALLBACK)],n)}(cr),Gr=function(Pt){function n(_t){var Ft=Pt.call(this,_t)||this;return Ft.type="onTextSubmit",Mr.handlerMap[Ft.uuid]=Ft,Ft}return o(n,Pt),r([Ne.readonly],n.prototype,"type",void 0),r([M("engine.onTextSubmit",_t.CLASS_ID.UUID_CALLBACK)],n)}(cr),Wr=function(Pt){function n(_t){var Ft=Pt.call(this,_t)||this;return Ft.type="onBlur",Mr.handlerMap[Ft.uuid]=Ft,Ft}return o(n,Pt),r([Ne.readonly],n.prototype,"type",void 0),r([M("engine.onBlur",_t.CLASS_ID.UUID_CALLBACK)],n)}(cr),Kr=function(Pt){function n(_t){var Ft=Pt.call(this,_t)||this;return Ft.type="onEnter",Mr.handlerMap[Ft.uuid]=Ft,Ft}return o(n,Pt),r([Ne.readonly],n.prototype,"type",void 0),r([M("engine.onEnter",_t.CLASS_ID.UUID_CALLBACK)],n)}(cr),Jr=function(Pt){function n(_t){var Ft=Pt.call(this,_t)||this;return Ft.type="onChange",Mr.handlerMap[Ft.uuid]=Ft,Ft}return o(n,Pt),r([Ne.readonly],n.prototype,"type",void 0),r([M("engine.onChange",_t.CLASS_ID.UUID_CALLBACK)],n)}(cr),Yr=function(Pt){function n(_t,Ft){var Dt=Pt.call(this,_t)||this;return Dt.type="onClick",Mr.handlerMap[Dt.uuid]=Dt,Ft&&(Dt.showFeedback=!(!1===Ft.showFeedback),Ft.button&&(Dt.button=Ft.button),Ft.hoverText&&(Dt.hoverText=Ft.hoverText),Ft.distance&&(Dt.distance=Ft.distance)),Dt}return o(n,Pt),r([Ne.readonly],n.prototype,"type",void 0),r([M("engine.onClick",_t.CLASS_ID.UUID_CALLBACK)],n)}(dr),Qr=function(Pt){function n(_t,Ft){var Dt=Pt.call(this,_t)||this;return Dt.type="pointerDown",Mr.handlerMap[Dt.uuid]=Dt,Ft&&(Dt.showFeedback=!(!1===Ft.showFeedback),Ft.button&&(Dt.button=Ft.button),Ft.hoverText&&(Dt.hoverText=Ft.hoverText),Ft.distance&&(Dt.distance=Ft.distance)),Dt}return o(n,Pt),r([Ne.readonly],n.prototype,"type",void 0),r([M("engine.pointerDown",_t.CLASS_ID.UUID_CALLBACK)],n)}(dr),Zr=function(Pt){function n(_t,Ft){var Dt=Pt.call(this,_t)||this;return Dt.type="pointerUp",Mr.handlerMap[Dt.uuid]=Dt,Ft&&(Dt.showFeedback=!(!1===Ft.showFeedback),Ft.button&&(Dt.button=Ft.button),Ft.hoverText&&(Dt.hoverText=Ft.hoverText),Ft.distance&&(Dt.distance=Ft.distance)),Dt}return o(n,Pt),r([Ne.readonly],n.prototype,"type",void 0),r([M("engine.pointerUp",_t.CLASS_ID.UUID_CALLBACK)],n)}(dr),Xr=null,ti=null,ei=null;function cn(){return ei||(ei=new qe),ei}var ni=function(){function t(){var _t=this;this.messageQueue=[],this.connected=!1,this.flushing=!1,function(){if(!ti){(ti=dcl.loadModule("@decentraland/CommunicationsController",{})).then((function(_t){Xr=_t}));var _t=cn();dcl.subscribe("comms"),dcl.onEvent((function(Pt){"comms"===Pt.type&&_t.notifyObservers(Pt.data)}))}return ti}().then((function(Pt){_t.connected=!0,_t.flush()}))}return t.prototype.on=function(_t,Pt){return cn().add((function(Ft){try{var Dt=JSON.parse(Ft.message);Dt.message===_t&&Pt(Dt.payload,Ft.sender)}catch(Ft){dcl.error("Error parsing comms message "+Ft.message,Ft)}}))},t.prototype.sendRaw=function(_t){this.messageQueue.push(_t),this.connected&&this.flush()},t.prototype.emit=function(_t,Pt){var Ft=JSON.stringify({message:_t,payload:Pt});this.sendRaw(Ft),cn().notifyObservers({message:Ft,sender:"self"})},t.prototype.flush=function(){var _t=this;if(0!==this.messageQueue.length&&this.connected&&Xr&&!this.flushing){var Pt=this.messageQueue.shift();this.flushing=!0,dcl.callRpc(Xr.rpcHandle,"send",[Pt]).then((function(Pt){_t.flushing=!1,_t.flush()}),(function(Pt){_t.flushing=!1,d("Error flushing MessageBus",Pt)}))}},t}(),ri=new Fe("scene");ri.uuid="0";var ii=new $e(ri);F.engine=ii,"undefined"!=typeof dcl&&(ii.addSystem(new pn(dcl),1/0),lt(dcl)),ii.addSystem(Mr),ii.addSystem(xr),ii.addSystem(Tr),_t.AVATAR_OBSERVABLE="AVATAR_OBSERVABLE",_t.Angle=En,_t.AnimationState=$n,_t.Animator=rr,_t.Arc2=zt,_t.Attachable=Pt,_t.AudioClip=Ar,_t.AudioSource=Sr,_t.AudioStream=Ir,_t.AvatarModifierArea=Hn,_t.AvatarShape=Vr,_t.Axis=Cn,_t.BasicMaterial=lr,_t.BezierCurve=Mn,_t.Billboard=qn,_t.BoxShape=Wn,_t.Camera=gr,_t.CircleShape=Jn,_t.Color3=Sn,_t.Color4=An,_t.Component=M,_t.ComponentAdded=Yt,_t.ComponentGroup=Pe,_t.ComponentRemoved=Kt,_t.ConeShape=Qn,_t.Curve3=In,_t.CylinderShape=Zn,_t.DEG2RAD=fn,_t.DisposableComponent=F,_t.DisposableComponentCreated=Se,_t.DisposableComponentRemoved=Ie,_t.DisposableComponentUpdated=Re,_t.Engine=$e,_t.Entity=Fe,_t.Epsilon=hn,_t.EventConstructor=w,_t.EventManager=Ut,_t.Font=or,_t.Frustum=Nn,_t.GLTFShape=Xn,_t.Gizmos=Pr,_t.GlobalPointerDown=Un,_t.GlobalPointerUp=Bn,_t.Input=Ln,_t.Material=pr,_t.MathTmp=Tn,_t.Matrix=bn,_t.MessageBus=ni,_t.MultiObserver=Ve,_t.NFTShape=er,_t.OBJShape=ir,_t.Observable=qe,_t.ObservableComponent=Ne,_t.Observer=Z,_t.ObserverEventState=He,_t.OnAnimationEnd=hr,_t.OnBlur=Wr,_t.OnChanged=Jr,_t.OnClick=Yr,_t.OnEnter=Kr,_t.OnFocus=qr,_t.OnGizmoEvent=Nr,_t.OnPointerDown=Qr,_t.OnPointerLock=yr,_t.OnPointerUUIDEvent=dr,_t.OnPointerUp=Zr,_t.OnTextSubmit=Gr,_t.OnUUIDEvent=cr,_t.ParentChanged=Zt,_t.Path2=Pn,_t.Path3D=On,_t.PhysicsCast=_r,_t.Plane=Rn,_t.PlaneShape=Yn,_t.PointerEvent=Ye,_t.PointerEventComponent=Gt,_t.PointerEventSystem=Er,_t.Quaternion=_n,_t.RAD2DEG=mn,_t.RaycastEventSystem=wr,_t.RaycastResponse=Ke,_t.Scalar=vn,_t.Shape=Gn,_t.Size=kn,_t.SmartItem=fr,_t.SphereShape=Kn,_t.Subscription=Xt,_t.TextShape=sr,_t.Texture=nr,_t.ToGammaSpace=dn,_t.ToLinearSpace=yn,_t.Transform=Vn,_t.UIButton=Ur,_t.UICanvas=$r,_t.UIContainerRect=zr,_t.UIContainerStack=Dr,_t.UIFullScreen=kr,_t.UIImage=jr,_t.UIInputText=Lr,_t.UIScrollRect=Hr,_t.UIShape=Or,_t.UIText=Br,_t.UIValue=ee,_t.UIWorldSpace=Fr,_t.UUIDEvent=We,_t.UUIDEventSystem=Cr,_t.Vector2=xn,_t.Vector3=wn,_t.Vector4=gn,_t.VideoClip=mr,_t.VideoTexture=vr,_t._initEventObservables=lt,_t.buildArray=v,_t.engine=ii,_t.error=d,_t.executeTask=q,_t.getComponentClassId=D,_t.getComponentId=N,_t.getComponentName=L,_t.getMessageObserver=cn,_t.isDisposableComponent=H,_t.log=l,_t.newId=f,_t.onCameraModeChangedObservable=Qe,_t.onEnterScene=en,_t.onEnterSceneObservable=tn,_t.onIdleStateChangedObservable=Ze,_t.onLeaveScene=rn,_t.onLeaveSceneObservable=nn,_t.onPlayerExpressionObservable=an,_t.onSceneReadyObservable=on,_t.openExternalURL=function(_t){"undefined"!=typeof dcl?dcl.openExternalUrl(_t):d("ERROR: openExternalURL dcl is undefined")},_t.openNFTDialog=function(_t,Pt){if(void 0===Pt&&(Pt=null),"undefined"!=typeof dcl){var Ft=_t.match(/ethereum:\/\/(.+)\/(.+)/);if(!Ft||Ft.length<3)return;dcl.openNFTDialog(Ft[1],Ft[2],Pt)}else d("ERROR: openNFTDialog dcl is undefined")},_t.pointerEventSystem=xr,_t.raycastEventSystem=Tr,_t.teleportTo=function(_t){var Pt;Pt=[_t],void 0===De&&"undefined"!=typeof dcl&&(De=dcl.loadModule("@decentraland/UserActionModule",{})),void 0!==De&&"undefined"!=typeof dcl&&De.then((function(_t){dcl.callRpc(_t.rpcHandle,"requestTeleport",Pt)}))},_t.uuid=y,_t.uuidEventSystem=Mr,Object.defineProperty(_t,"__esModule",{value:!0})}(this.self=this.self||{}),function(_t,Pt){"object"==typeof exports&&"undefined"!=typeof module?Pt(exports):"function"==typeof define&&define.amd?define("decentraland-transactions",["exports"],Pt):Pt((_t="undefined"!=typeof globalThis?globalThis:_t||self)["decentraland-transactions"]={})}(this,(function(_t){var Pt;_t.ContractName=void 0,(Pt=_t.ContractName||(_t.ContractName={})).Bid="Bid",Pt.CollectionFactory="CollectionFactory",Pt.CollectionManager="CollectionManager",Pt.CollectionStore="CollectionStore",Pt.Committee="Committee",Pt.ERC20="ERC20",Pt.ERC721="ERC721",Pt.ERC721CollectionV2="ERC721CollectionV2",Pt.Forwarder="Forwarder",Pt.MANAToken="MANAToken",Pt.Marketplace="Marketplace",Pt.Rarities="Rarities";const Ft=[{name:"name",type:"string"},{name:"version",type:"string"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"}],Dt=[{name:"nonce",type:"uint256"},{name:"from",type:"address"},{name:"functionSignature",type:"bytes"}];function r(_t){return _t&&_t.__esModule&&Object.prototype.hasOwnProperty.call(_t,"default")?_t.default:_t}function s(_t,Pt){return _t(Pt={exports:{}},Pt.exports),Pt.exports}function i(_t){return _t&&_t.default||_t}var Ut=s((function(_t,Pt){Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.getRules=Pt.isJSONType=void 0;const Ft=new Set(["string","number","integer","boolean","null","object","array"]);Pt.isJSONType=function(_t){return"string"==typeof _t&&Ft.has(_t)},Pt.getRules=function(){const _t={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{..._t,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},_t.number,_t.string,_t.array,_t.object],post:{rules:[]},all:{},keywords:{}}}}));r(Ut),Ut.getRules,Ut.isJSONType;var Lt=s((function(_t,Pt){function n(_t,Pt){return Pt.rules.some((Pt=>a(_t,Pt)))}function a(_t,Pt){var Ft;return void 0!==_t[Pt.keyword]||(null===(Ft=Pt.definition.implements)||void 0===Ft?void 0:Ft.some((Pt=>void 0!==_t[Pt])))}Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.shouldUseRule=Pt.shouldUseGroup=Pt.schemaHasRulesForType=void 0,Pt.schemaHasRulesForType=function({schema:_t,self:Pt},Ft){const Dt=Pt.RULES.types[Ft];return Dt&&!0!==Dt&&n(_t,Dt)},Pt.shouldUseGroup=n,Pt.shouldUseRule=a}));r(Lt),Lt.shouldUseRule,Lt.shouldUseGroup,Lt.schemaHasRulesForType;var Kt=s((function(_t,Pt){Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.getProperty=Pt.safeStringify=Pt.stringify=Pt.strConcat=Pt.addCodeArg=Pt.str=Pt._=Pt.nil=Pt._Code=Pt.Name=Pt.IDENTIFIER=Pt._CodeOrName=void 0;class n{}Pt._CodeOrName=n,Pt.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class a extends n{constructor(_t){if(super(),!Pt.IDENTIFIER.test(_t))throw new Error("CodeGen: name must be a valid identifier");this.str=_t}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}Pt.Name=a;class r extends n{constructor(_t){super(),this._items="string"==typeof _t?[_t]:_t}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const _t=this._items[0];return""===_t||'""'===_t}get str(){var _t;return null!==(_t=this._str)&&void 0!==_t?_t:this._str=this._items.reduce(((_t,Pt)=>`${_t}${Pt}`),"")}get names(){var _t;return null!==(_t=this._names)&&void 0!==_t?_t:this._names=this._items.reduce(((_t,Pt)=>(Pt instanceof a&&(_t[Pt.str]=(_t[Pt.str]||0)+1),_t)),{})}}function s(_t,...Pt){const Ft=[_t[0]];let Dt=0;for(;Dt<Pt.length;)p(Ft,Pt[Dt]),Ft.push(_t[++Dt]);return new r(Ft)}Pt._Code=r,Pt.nil=new r(""),Pt._=s;const Ft=new r("+");function o(_t,...Pt){const Dt=[d(_t[0])];let Ut=0;for(;Ut<Pt.length;)Dt.push(Ft),p(Dt,Pt[Ut]),Dt.push(Ft,d(_t[++Ut]));return function(_t){let Pt=1;for(;Pt<_t.length-1;){if(_t[Pt]===Ft){const Ft=u(_t[Pt-1],_t[Pt+1]);if(void 0!==Ft){_t.splice(Pt-1,3,Ft);continue}_t[Pt++]="+"}Pt++}}(Dt),new r(Dt)}function p(_t,Pt){var Ft;Pt instanceof r?_t.push(...Pt._items):Pt instanceof a?_t.push(Pt):_t.push("number"==typeof(Ft=Pt)||"boolean"==typeof Ft||null===Ft?Ft:d(Array.isArray(Ft)?Ft.join(","):Ft))}function u(_t,Pt){if('""'===Pt)return _t;if('""'===_t)return Pt;if("string"==typeof _t){if(Pt instanceof a||'"'!==_t[_t.length-1])return;return"string"!=typeof Pt?`${_t.slice(0,-1)}${Pt}"`:'"'===Pt[0]?_t.slice(0,-1)+Pt.slice(1):void 0}return"string"!=typeof Pt||'"'!==Pt[0]||_t instanceof a?void 0:`"${_t}${Pt.slice(1)}`}function d(_t){return JSON.stringify(_t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}Pt.str=o,Pt.addCodeArg=p,Pt.strConcat=function(_t,Pt){return Pt.emptyStr()?_t:_t.emptyStr()?Pt:o`${_t}${Pt}`},Pt.stringify=function(_t){return new r(d(_t))},Pt.safeStringify=d,Pt.getProperty=function(_t){return"string"==typeof _t&&Pt.IDENTIFIER.test(_t)?new r(`.${_t}`):s`[${_t}]`}}));r(Kt),Kt.getProperty,Kt.safeStringify,Kt.stringify,Kt.strConcat,Kt.addCodeArg,Kt.str,Kt._,Kt.nil,Kt._Code,Kt.Name,Kt.IDENTIFIER,Kt._CodeOrName;var Yt=s((function(_t,Pt){Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.ValueScope=Pt.ValueScopeName=Pt.Scope=Pt.varKinds=Pt.UsedValueState=void 0;class n extends Error{constructor(_t){super(`CodeGen: "code" for ${_t} not defined`),this.value=_t.value}}var Ft;!function(_t){_t[_t.Started=0]="Started",_t[_t.Completed=1]="Completed"}(Ft=Pt.UsedValueState||(Pt.UsedValueState={})),Pt.varKinds={const:new Kt.Name("const"),let:new Kt.Name("let"),var:new Kt.Name("var")};class r{constructor({prefixes:_t,parent:Pt}={}){this._names={},this._prefixes=_t,this._parent=Pt}toName(_t){return _t instanceof Kt.Name?_t:this.name(_t)}name(_t){return new Kt.Name(this._newName(_t))}_newName(_t){return`${_t}${(this._names[_t]||this._nameGroup(_t)).index++}`}_nameGroup(_t){var Pt,Ft;if((null===(Ft=null===(Pt=this._parent)||void 0===Pt?void 0:Pt._prefixes)||void 0===Ft?void 0:Ft.has(_t))||this._prefixes&&!this._prefixes.has(_t))throw new Error(`CodeGen: prefix "${_t}" is not allowed in this scope`);return this._names[_t]={prefix:_t,index:0}}}Pt.Scope=r;class s extends Kt.Name{constructor(_t,Pt){super(Pt),this.prefix=_t}setValue(_t,{property:Pt,itemIndex:Ft}){this.value=_t,this.scopePath=Kt._`.${new Kt.Name(Pt)}[${Ft}]`}}Pt.ValueScopeName=s;const Dt=Kt._`\n`;Pt.ValueScope=class extends r{constructor(_t){super(_t),this._values={},this._scope=_t.scope,this.opts={..._t,_n:_t.lines?Dt:Kt.nil}}get(){return this._scope}name(_t){return new s(_t,this._newName(_t))}value(_t,Pt){var Ft;if(void 0===Pt.ref)throw new Error("CodeGen: ref must be passed in value");const Dt=this.toName(_t),{prefix:Ut}=Dt,Lt=null!==(Ft=Pt.key)&&void 0!==Ft?Ft:Pt.ref;let Kt=this._values[Ut];if(Kt){const _t=Kt.get(Lt);if(_t)return _t}else Kt=this._values[Ut]=new Map;Kt.set(Lt,Dt);const Yt=this._scope[Ut]||(this._scope[Ut]=[]),Zt=Yt.length;return Yt[Zt]=Pt.ref,Dt.setValue(Pt,{property:Ut,itemIndex:Zt}),Dt}getValue(_t,Pt){const Ft=this._values[_t];if(Ft)return Ft.get(Pt)}scopeRefs(_t,Pt=this._values){return this._reduceValues(Pt,(Pt=>{if(void 0===Pt.scopePath)throw new Error(`CodeGen: name "${Pt}" has no value`);return Kt._`${_t}${Pt.scopePath}`}))}scopeCode(_t=this._values,Pt,Ft){return this._reduceValues(_t,(_t=>{if(void 0===_t.value)throw new Error(`CodeGen: name "${_t}" has no value`);return _t.value.code}),Pt,Ft)}_reduceValues(_t,Dt,Ut={},Lt){let Yt=Kt.nil;for(const Zt in _t){const ee=_t[Zt];if(!ee)continue;const re=Ut[Zt]=Ut[Zt]||new Map;ee.forEach((_t=>{if(re.has(_t))return;re.set(_t,Ft.Started);let Ut=Dt(_t);if(Ut){const Ft=this.opts.es5?Pt.varKinds.var:Pt.varKinds.const;Yt=Kt._`${Yt}${Ft} ${_t} = ${Ut};${this.opts._n}`}else{if(!(Ut=null==Lt?void 0:Lt(_t)))throw new n(_t);Yt=Kt._`${Yt}${Ut}${this.opts._n}`}re.set(_t,Ft.Completed)}))}return Yt}}}));r(Yt),Yt.ValueScope,Yt.ValueScopeName,Yt.Scope,Yt.varKinds,Yt.UsedValueState;var Zt=s((function(_t,Pt){Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.or=Pt.and=Pt.not=Pt.CodeGen=Pt.operators=Pt.varKinds=Pt.ValueScopeName=Pt.ValueScope=Pt.Scope=Pt.Name=Pt.stringify=Pt.getProperty=Pt.nil=Pt.strConcat=Pt.str=Pt._=void 0;var Ft=Kt;Object.defineProperty(Pt,"_",{enumerable:!0,get:function(){return Ft._}}),Object.defineProperty(Pt,"str",{enumerable:!0,get:function(){return Ft.str}}),Object.defineProperty(Pt,"strConcat",{enumerable:!0,get:function(){return Ft.strConcat}}),Object.defineProperty(Pt,"nil",{enumerable:!0,get:function(){return Ft.nil}}),Object.defineProperty(Pt,"getProperty",{enumerable:!0,get:function(){return Ft.getProperty}}),Object.defineProperty(Pt,"stringify",{enumerable:!0,get:function(){return Ft.stringify}}),Object.defineProperty(Pt,"Name",{enumerable:!0,get:function(){return Ft.Name}});var Dt=Yt;Object.defineProperty(Pt,"Scope",{enumerable:!0,get:function(){return Dt.Scope}}),Object.defineProperty(Pt,"ValueScope",{enumerable:!0,get:function(){return Dt.ValueScope}}),Object.defineProperty(Pt,"ValueScopeName",{enumerable:!0,get:function(){return Dt.ValueScopeName}}),Object.defineProperty(Pt,"varKinds",{enumerable:!0,get:function(){return Dt.varKinds}}),Pt.operators={GT:new Kt._Code(">"),GTE:new Kt._Code(">="),LT:new Kt._Code("<"),LTE:new Kt._Code("<="),EQ:new Kt._Code("==="),NEQ:new Kt._Code("!=="),NOT:new Kt._Code("!"),OR:new Kt._Code("||"),AND:new Kt._Code("&&"),ADD:new Kt._Code("+")};class r{optimizeNodes(){return this}optimizeNames(_t,Pt){return this}}class s extends r{constructor(_t,Pt,Ft){super(),this.varKind=_t,this.name=Pt,this.rhs=Ft}render({es5:_t,_n:Pt}){const Ft=_t?Yt.varKinds.var:this.varKind,Dt=void 0===this.rhs?"":` = ${this.rhs}`;return`${Ft} ${this.name}${Dt};`+Pt}optimizeNames(_t,Pt){if(_t[this.name.str])return this.rhs&&(this.rhs=A(this.rhs,_t,Pt)),this}get names(){return this.rhs instanceof Kt._CodeOrName?this.rhs.names:{}}}class i extends r{constructor(_t,Pt,Ft){super(),this.lhs=_t,this.rhs=Pt,this.sideEffects=Ft}render({_n:_t}){return`${this.lhs} = ${this.rhs};`+_t}optimizeNames(_t,Pt){if(!(this.lhs instanceof Kt.Name)||_t[this.lhs.str]||this.sideEffects)return this.rhs=A(this.rhs,_t,Pt),this}get names(){return S(this.lhs instanceof Kt.Name?{}:{...this.lhs.names},this.rhs)}}class o extends i{constructor(_t,Pt,Ft,Dt){super(_t,Ft,Dt),this.op=Pt}render({_n:_t}){return`${this.lhs} ${this.op}= ${this.rhs};`+_t}}class p extends r{constructor(_t){super(),this.label=_t,this.names={}}render({_n:_t}){return`${this.label}:`+_t}}class l extends r{constructor(_t){super(),this.label=_t,this.names={}}render({_n:_t}){return`break${this.label?` ${this.label}`:""};`+_t}}class c extends r{constructor(_t){super(),this.error=_t}render({_n:_t}){return`throw ${this.error};`+_t}get names(){return this.error.names}}class y extends r{constructor(_t){super(),this.code=_t}render({_n:_t}){return`${this.code};`+_t}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(_t,Pt){return this.code=A(this.code,_t,Pt),this}get names(){return this.code instanceof Kt._CodeOrName?this.code.names:{}}}class m extends r{constructor(_t=[]){super(),this.nodes=_t}render(_t){return this.nodes.reduce(((Pt,Ft)=>Pt+Ft.render(_t)),"")}optimizeNodes(){const{nodes:_t}=this;let Pt=_t.length;for(;Pt--;){const Ft=_t[Pt].optimizeNodes();Array.isArray(Ft)?_t.splice(Pt,1,...Ft):Ft?_t[Pt]=Ft:_t.splice(Pt,1)}return _t.length>0?this:void 0}optimizeNames(_t,Pt){const{nodes:Ft}=this;let Dt=Ft.length;for(;Dt--;){const Ut=Ft[Dt];Ut.optimizeNames(_t,Pt)||(x(_t,Ut.names),Ft.splice(Dt,1))}return Ft.length>0?this:void 0}get names(){return this.nodes.reduce(((_t,Pt)=>N(_t,Pt.names)),{})}}class f extends m{render(_t){return"{"+_t._n+super.render(_t)+"}"+_t._n}}class h extends m{}class b extends f{}b.kind="else";class v extends f{constructor(_t,Pt){super(Pt),this.condition=_t}render(_t){let Pt=`if(${this.condition})`+super.render(_t);return this.else&&(Pt+="else "+this.else.render(_t)),Pt}optimizeNodes(){super.optimizeNodes();const _t=this.condition;if(!0===_t)return this.nodes;let Pt=this.else;if(Pt){const _t=Pt.optimizeNodes();Pt=this.else=Array.isArray(_t)?new b(_t):_t}return Pt?!1===_t?Pt instanceof v?Pt:Pt.nodes:this.nodes.length?this:new v(P(_t),Pt instanceof v?[Pt]:Pt.nodes):!1!==_t&&this.nodes.length?this:void 0}optimizeNames(_t,Pt){var Ft;if(this.else=null===(Ft=this.else)||void 0===Ft?void 0:Ft.optimizeNames(_t,Pt),super.optimizeNames(_t,Pt)||this.else)return this.condition=A(this.condition,_t,Pt),this}get names(){const _t=super.names;return S(_t,this.condition),this.else&&N(_t,this.else.names),_t}}v.kind="if";class g extends f{}g.kind="for";class _ extends g{constructor(_t){super(),this.iteration=_t}render(_t){return`for(${this.iteration})`+super.render(_t)}optimizeNames(_t,Pt){if(super.optimizeNames(_t,Pt))return this.iteration=A(this.iteration,_t,Pt),this}get names(){return N(super.names,this.iteration.names)}}class T extends g{constructor(_t,Pt,Ft,Dt){super(),this.varKind=_t,this.name=Pt,this.from=Ft,this.to=Dt}render(_t){const Pt=_t.es5?Yt.varKinds.var:this.varKind,{name:Ft,from:Dt,to:Ut}=this;return`for(${Pt} ${Ft}=${Dt}; ${Ft}<${Ut}; ${Ft}++)`+super.render(_t)}get names(){const _t=S(super.names,this.from);return S(_t,this.to)}}class w extends g{constructor(_t,Pt,Ft,Dt){super(),this.loop=_t,this.varKind=Pt,this.name=Ft,this.iterable=Dt}render(_t){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(_t)}optimizeNames(_t,Pt){if(super.optimizeNames(_t,Pt))return this.iterable=A(this.iterable,_t,Pt),this}get names(){return N(super.names,this.iterable.names)}}class $ extends f{constructor(_t,Pt,Ft){super(),this.name=_t,this.args=Pt,this.async=Ft}render(_t){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(_t)}}$.kind="func";class E extends m{render(_t){return"return "+super.render(_t)}}E.kind="return";class M extends f{render(_t){let Pt="try"+super.render(_t);return this.catch&&(Pt+=this.catch.render(_t)),this.finally&&(Pt+=this.finally.render(_t)),Pt}optimizeNodes(){var _t,Pt;return super.optimizeNodes(),null===(_t=this.catch)||void 0===_t||_t.optimizeNodes(),null===(Pt=this.finally)||void 0===Pt||Pt.optimizeNodes(),this}optimizeNames(_t,Pt){var Ft,Dt;return super.optimizeNames(_t,Pt),null===(Ft=this.catch)||void 0===Ft||Ft.optimizeNames(_t,Pt),null===(Dt=this.finally)||void 0===Dt||Dt.optimizeNames(_t,Pt),this}get names(){const _t=super.names;return this.catch&&N(_t,this.catch.names),this.finally&&N(_t,this.finally.names),_t}}class C extends f{constructor(_t){super(),this.error=_t}render(_t){return`catch(${this.error})`+super.render(_t)}}C.kind="catch";class I extends f{render(_t){return"finally"+super.render(_t)}}function N(_t,Pt){for(const Ft in Pt)_t[Ft]=(_t[Ft]||0)+(Pt[Ft]||0);return _t}function S(_t,Pt){return Pt instanceof Kt._CodeOrName?N(_t,Pt.names):_t}function A(_t,Pt,Ft){return _t instanceof Kt.Name?r(_t):(Dt=_t)instanceof Kt._Code&&Dt._items.some((_t=>_t instanceof Kt.Name&&1===Pt[_t.str]&&void 0!==Ft[_t.str]))?new Kt._Code(_t._items.reduce(((_t,Pt)=>(Pt instanceof Kt.Name&&(Pt=r(Pt)),Pt instanceof Kt._Code?_t.push(...Pt._items):_t.push(Pt),_t)),[])):_t;var Dt;function r(_t){const Dt=Ft[_t.str];return void 0===Dt||1!==Pt[_t.str]?_t:(delete Pt[_t.str],Dt)}}function x(_t,Pt){for(const Ft in Pt)_t[Ft]=(_t[Ft]||0)-(Pt[Ft]||0)}function P(_t){return"boolean"==typeof _t||"number"==typeof _t||null===_t?!_t:Kt._`!${j(_t)}`}I.kind="finally",Pt.CodeGen=class{constructor(_t,Pt={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...Pt,_n:Pt.lines?"\n":""},this._extScope=_t,this._scope=new Yt.Scope({parent:_t}),this._nodes=[new h]}toString(){return this._root.render(this.opts)}name(_t){return this._scope.name(_t)}scopeName(_t){return this._extScope.name(_t)}scopeValue(_t,Pt){const Ft=this._extScope.value(_t,Pt);return(this._values[Ft.prefix]||(this._values[Ft.prefix]=new Set)).add(Ft),Ft}getScopeValue(_t,Pt){return this._extScope.getValue(_t,Pt)}scopeRefs(_t){return this._extScope.scopeRefs(_t,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(_t,Pt,Ft,Dt){const Ut=this._scope.toName(Pt);return void 0!==Ft&&Dt&&(this._constants[Ut.str]=Ft),this._leafNode(new s(_t,Ut,Ft)),Ut}const(_t,Pt,Ft){return this._def(Yt.varKinds.const,_t,Pt,Ft)}let(_t,Pt,Ft){return this._def(Yt.varKinds.let,_t,Pt,Ft)}var(_t,Pt,Ft){return this._def(Yt.varKinds.var,_t,Pt,Ft)}assign(_t,Pt,Ft){return this._leafNode(new i(_t,Pt,Ft))}add(_t,Ft){return this._leafNode(new o(_t,Pt.operators.ADD,Ft))}code(_t){return"function"==typeof _t?_t():_t!==Kt.nil&&this._leafNode(new y(_t)),this}object(..._t){const Pt=["{"];for(const[Ft,Dt]of _t)Pt.length>1&&Pt.push(","),Pt.push(Ft),(Ft!==Dt||this.opts.es5)&&(Pt.push(":"),Kt.addCodeArg(Pt,Dt));return Pt.push("}"),new Kt._Code(Pt)}if(_t,Pt,Ft){if(this._blockNode(new v(_t)),Pt&&Ft)this.code(Pt).else().code(Ft).endIf();else if(Pt)this.code(Pt).endIf();else if(Ft)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(_t){return this._elseNode(new v(_t))}else(){return this._elseNode(new b)}endIf(){return this._endBlockNode(v,b)}_for(_t,Pt){return this._blockNode(_t),Pt&&this.code(Pt).endFor(),this}for(_t,Pt){return this._for(new _(_t),Pt)}forRange(_t,Pt,Ft,Dt,Ut=(this.opts.es5?Yt.varKinds.var:Yt.varKinds.let)){const Lt=this._scope.toName(_t);return this._for(new T(Ut,Lt,Pt,Ft),(()=>Dt(Lt)))}forOf(_t,Pt,Ft,Dt=Yt.varKinds.const){const Ut=this._scope.toName(_t);if(this.opts.es5){const _t=Pt instanceof Kt.Name?Pt:this.var("_arr",Pt);return this.forRange("_i",0,Kt._`${_t}.length`,(Pt=>{this.var(Ut,Kt._`${_t}[${Pt}]`),Ft(Ut)}))}return this._for(new w("of",Dt,Ut,Pt),(()=>Ft(Ut)))}forIn(_t,Pt,Ft,Dt=(this.opts.es5?Yt.varKinds.var:Yt.varKinds.const)){if(this.opts.ownProperties)return this.forOf(_t,Kt._`Object.keys(${Pt})`,Ft);const Ut=this._scope.toName(_t);return this._for(new w("in",Dt,Ut,Pt),(()=>Ft(Ut)))}endFor(){return this._endBlockNode(g)}label(_t){return this._leafNode(new p(_t))}break(_t){return this._leafNode(new l(_t))}return(_t){const Pt=new E;if(this._blockNode(Pt),this.code(_t),1!==Pt.nodes.length)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(E)}try(_t,Pt,Ft){if(!Pt&&!Ft)throw new Error('CodeGen: "try" without "catch" and "finally"');const Dt=new M;if(this._blockNode(Dt),this.code(_t),Pt){const _t=this.name("e");this._currNode=Dt.catch=new C(_t),Pt(_t)}return Ft&&(this._currNode=Dt.finally=new I,this.code(Ft)),this._endBlockNode(C,I)}throw(_t){return this._leafNode(new c(_t))}block(_t,Pt){return this._blockStarts.push(this._nodes.length),_t&&this.code(_t).endBlock(Pt),this}endBlock(_t){const Pt=this._blockStarts.pop();if(void 0===Pt)throw new Error("CodeGen: not in self-balancing block");const Ft=this._nodes.length-Pt;if(Ft<0||void 0!==_t&&Ft!==_t)throw new Error(`CodeGen: wrong number of nodes: ${Ft} vs ${_t} expected`);return this._nodes.length=Pt,this}func(_t,Pt=Kt.nil,Ft,Dt){return this._blockNode(new $(_t,Pt,Ft)),Dt&&this.code(Dt).endFunc(),this}endFunc(){return this._endBlockNode($)}optimize(_t=1){for(;_t-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(_t){return this._currNode.nodes.push(_t),this}_blockNode(_t){this._currNode.nodes.push(_t),this._nodes.push(_t)}_endBlockNode(_t,Pt){const Ft=this._currNode;if(Ft instanceof _t||Pt&&Ft instanceof Pt)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${Pt?`${_t.kind}/${Pt.kind}`:_t.kind}"`)}_elseNode(_t){const Pt=this._currNode;if(!(Pt instanceof v))throw new Error('CodeGen: "else" without "if"');return this._currNode=Pt.else=_t,this}get _root(){return this._nodes[0]}get _currNode(){const _t=this._nodes;return _t[_t.length-1]}set _currNode(_t){const Pt=this._nodes;Pt[Pt.length-1]=_t}},Pt.not=P;const Ut=k(Pt.operators.AND);Pt.and=function(..._t){return _t.reduce(Ut)};const Lt=k(Pt.operators.OR);function k(_t){return(Pt,Ft)=>Pt===Kt.nil?Ft:Ft===Kt.nil?Pt:Kt._`${j(Pt)} ${_t} ${j(Ft)}`}function j(_t){return _t instanceof Kt.Name?_t:Kt._`(${_t})`}Pt.or=function(..._t){return _t.reduce(Lt)}}));r(Zt),Zt.or,Zt.and,Zt.not,Zt.CodeGen,Zt.operators,Zt.varKinds,Zt.ValueScopeName,Zt.ValueScope,Zt.Scope,Zt.Name,Zt.stringify,Zt.getProperty,Zt.nil,Zt.strConcat,Zt.str,Zt._;var ee=s((function(_t,Pt){Object.defineProperty(Pt,"__esModule",{value:!0});const Ft={data:new Zt.Name("data"),valCxt:new Zt.Name("valCxt"),dataPath:new Zt.Name("dataPath"),parentData:new Zt.Name("parentData"),parentDataProperty:new Zt.Name("parentDataProperty"),rootData:new Zt.Name("rootData"),dynamicAnchors:new Zt.Name("dynamicAnchors"),vErrors:new Zt.Name("vErrors"),errors:new Zt.Name("errors"),this:new Zt.Name("this"),self:new Zt.Name("self"),scope:new Zt.Name("scope"),json:new Zt.Name("json"),jsonPos:new Zt.Name("jsonPos"),jsonLen:new Zt.Name("jsonLen"),jsonPart:new Zt.Name("jsonPart")};Pt.default=Ft}));r(ee);var re=s((function(_t,Pt){function n(_t,Pt){const Ft=_t.const("err",Pt);_t.if(Zt._`${ee.default.vErrors} === null`,(()=>_t.assign(ee.default.vErrors,Zt._`[${Ft}]`)),Zt._`${ee.default.vErrors}.push(${Ft})`),_t.code(Zt._`${ee.default.errors}++`)}function a(_t,Pt){const{gen:Ft,validateName:Dt,schemaEnv:Ut}=_t;Ut.$async?Ft.throw(Zt._`new ${_t.ValidationError}(${Pt})`):(Ft.assign(Zt._`${Dt}.errors`,Pt),Ft.return(!1))}Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.extendErrors=Pt.resetErrorsCount=Pt.reportExtraError=Pt.reportError=Pt.keyword$DataError=Pt.keywordError=void 0,Pt.keywordError={message:({keyword:_t})=>Zt.str`should pass "${_t}" keyword validation`},Pt.keyword$DataError={message:({keyword:_t,schemaType:Pt})=>Pt?Zt.str`"${_t}" keyword must be ${Pt} ($data)`:Zt.str`"${_t}" keyword is invalid ($data)`},Pt.reportError=function(_t,Ft=Pt.keywordError,Dt){const{it:Ut}=_t,{gen:Lt,compositeRule:Kt,allErrors:Yt}=Ut,ee=s(_t,Ft);(null!=Dt?Dt:Kt||Yt)?n(Lt,ee):a(Ut,Zt._`[${ee}]`)},Pt.reportExtraError=function(_t,Ft=Pt.keywordError){const{it:Dt}=_t,{gen:Ut,compositeRule:Lt,allErrors:Kt}=Dt;n(Ut,s(_t,Ft)),Lt||Kt||a(Dt,ee.default.vErrors)},Pt.resetErrorsCount=function(_t,Pt){_t.assign(ee.default.errors,Pt),_t.if(Zt._`${ee.default.vErrors} !== null`,(()=>_t.if(Pt,(()=>_t.assign(Zt._`${ee.default.vErrors}.length`,Pt)),(()=>_t.assign(ee.default.vErrors,null)))))},Pt.extendErrors=function({gen:_t,keyword:Pt,schemaValue:Ft,data:Dt,errsCount:Ut,it:Lt}){if(void 0===Ut)throw new Error("ajv implementation error");const Kt=_t.name("err");_t.forRange("i",Ut,ee.default.errors,(Ut=>{_t.const(Kt,Zt._`${ee.default.vErrors}[${Ut}]`),_t.if(Zt._`${Kt}.dataPath === undefined`,(()=>_t.assign(Zt._`${Kt}.dataPath`,Zt.strConcat(ee.default.dataPath,Lt.errorPath)))),_t.assign(Zt._`${Kt}.schemaPath`,Zt.str`${Lt.errSchemaPath}/${Pt}`),Lt.opts.verbose&&(_t.assign(Zt._`${Kt}.schema`,Ft),_t.assign(Zt._`${Kt}.data`,Dt))}))};const Ft={keyword:new Zt.Name("keyword"),schemaPath:new Zt.Name("schemaPath"),params:new Zt.Name("params"),propertyName:new Zt.Name("propertyName"),message:new Zt.Name("message"),schema:new Zt.Name("schema"),parentSchema:new Zt.Name("parentSchema"),instancePath:new Zt.Name("instancePath")};function s(_t,Pt){const{createErrors:Ft,opts:Dt}=_t.it;return!1===Ft?Zt._`{}`:(Dt.jtd&&!Dt.ajvErrors?i:o)(_t,Pt)}function i(_t,{message:Pt}){const{gen:Dt,keyword:Ut,it:Lt}=_t,{errorPath:Kt,errSchemaPath:Yt,opts:re}=Lt,ve=[[Ft.instancePath,Zt.strConcat(ee.default.dataPath,Kt)],[Ft.schemaPath,Zt.str`${Yt}/${Ut}`]];return re.messages&&ve.push([Ft.message,"function"==typeof Pt?Pt(_t):Pt]),Dt.object(...ve)}function o(_t,Pt){const{gen:Dt,keyword:Ut,data:Lt,schemaValue:Kt,it:Yt}=_t,{topSchemaRef:re,schemaPath:ve,errorPath:Me,errSchemaPath:Se,propertyName:Ie,opts:Re}=Yt,{params:Ne,message:Pe}=Pt,Fe=[[Ft.keyword,Ut],[ee.default.dataPath,Zt.strConcat(ee.default.dataPath,Me)],[Ft.schemaPath,Zt.str`${Se}/${Ut}`],[Ft.params,"function"==typeof Ne?Ne(_t):Ne||Zt._`{}`]];return Ie&&Fe.push([Ft.propertyName,Ie]),Re.messages&&Fe.push([Ft.message,"function"==typeof Pe?Pe(_t):Pe]),Re.verbose&&Fe.push([Ft.schema,Kt],[Ft.parentSchema,Zt._`${re}${ve}`],[ee.default.data,Lt]),Dt.object(...Fe)}}));r(re),re.extendErrors,re.resetErrorsCount,re.reportExtraError,re.reportError,re.keyword$DataError,re.keywordError;var ve=s((function(_t,Pt){Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.boolOrEmptySchema=Pt.topBoolOrEmptySchema=void 0;const Ft={message:"boolean schema is false"};function a(_t,Pt){const{gen:Dt,data:Ut}=_t,Lt={gen:Dt,keyword:"false schema",data:Ut,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:_t};re.reportError(Lt,Ft,Pt)}Pt.topBoolOrEmptySchema=function(_t){const{gen:Pt,schema:Ft,validateName:Dt}=_t;!1===Ft?a(_t,!1):"object"==typeof Ft&&!0===Ft.$async?Pt.return(ee.default.data):(Pt.assign(Zt._`${Dt}.errors`,null),Pt.return(!0))},Pt.boolOrEmptySchema=function(_t,Pt){const{gen:Ft,schema:Dt}=_t;!1===Dt?(Ft.var(Pt,!1),a(_t)):Ft.var(Pt,!0)}}));r(ve),ve.boolOrEmptySchema,ve.topBoolOrEmptySchema;var Me=s((function(_t,Pt){function n(_t,Pt,Ft){const{gen:Dt,compositeRule:Ut,data:Lt,opts:Kt}=_t;if(void 0===Ft)return;const Yt=Zt._`${Lt}${Zt.getProperty(Pt)}`;if(Ut)return void De.checkStrictMode(_t,`default is ignored for: ${Yt}`);let ee=Zt._`${Yt} === undefined`;"empty"===Kt.useDefaults&&(ee=Zt._`${ee} || ${Yt} === null || ${Yt} === ""`),Dt.if(ee,Zt._`${Yt} = ${Zt.stringify(Ft)}`)}Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.assignDefaults=void 0,Pt.assignDefaults=function(_t,Pt){const{properties:Ft,items:Dt}=_t.schema;if("object"===Pt&&Ft)for(const Pt in Ft)n(_t,Pt,Ft[Pt].default);else"array"===Pt&&Array.isArray(Dt)&&Dt.forEach(((Pt,Ft)=>n(_t,Ft,Pt.default)))}}));r(Me),Me.assignDefaults;var Se=s((function(_t,Pt){var Ft;Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.applySubschema=Pt.Type=void 0,function(_t){_t[_t.Num=0]="Num",_t[_t.Str=1]="Str"}(Ft=Pt.Type||(Pt.Type={})),Pt.applySubschema=function(_t,Pt,Dt){const Ut=function(_t,{keyword:Pt,schemaProp:Ft,schema:Dt,schemaPath:Ut,errSchemaPath:Lt,topSchemaRef:Kt}){if(void 0!==Pt&&void 0!==Dt)throw new Error('both "keyword" and "schema" passed, only one allowed');if(void 0!==Pt){const Dt=_t.schema[Pt];return void 0===Ft?{schema:Dt,schemaPath:Zt._`${_t.schemaPath}${Zt.getProperty(Pt)}`,errSchemaPath:`${_t.errSchemaPath}/${Pt}`}:{schema:Dt[Ft],schemaPath:Zt._`${_t.schemaPath}${Zt.getProperty(Pt)}${Zt.getProperty(Ft)}`,errSchemaPath:`${_t.errSchemaPath}/${Pt}/${Ue.escapeFragment(Ft)}`}}if(void 0!==Dt){if(void 0===Ut||void 0===Lt||void 0===Kt)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:Dt,schemaPath:Ut,topSchemaRef:Kt,errSchemaPath:Lt}}throw new Error('either "keyword" or "schema" must be passed')}(_t,Pt);!function(_t,Pt,{dataProp:Dt,dataPropType:Ut,data:Lt,dataTypes:Kt,propertyName:Yt}){if(void 0!==Lt&&void 0!==Dt)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:ee}=Pt;if(void 0!==Dt){const{errorPath:Lt,dataPathArr:Kt,opts:Yt}=Pt;u(ee.let("data",Zt._`${Pt.data}${Zt.getProperty(Dt)}`,!0)),_t.errorPath=Zt.str`${Lt}${function(_t,Pt,Dt){if(_t instanceof Zt.Name){const Ut=Pt===Ft.Num;return Dt?Ut?Zt._`"[" + ${_t} + "]"`:Zt._`"['" + ${_t} + "']"`:Ut?Zt._`"/" + ${_t}`:Zt._`"/" + ${_t}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return Dt?Zt.getProperty(_t).toString():"/"+Ue.escapeJsonPointer(_t)}(Dt,Ut,Yt.jsPropertySyntax)}`,_t.parentDataProperty=Zt._`${Dt}`,_t.dataPathArr=[...Kt,_t.parentDataProperty]}function u(Ft){_t.data=Ft,_t.dataLevel=Pt.dataLevel+1,_t.dataTypes=[],Pt.definedProperties=new Set,_t.parentData=Pt.data,_t.dataNames=[...Pt.dataNames,Ft]}void 0!==Lt&&(u(Lt instanceof Zt.Name?Lt:ee.let("data",Lt,!0)),void 0!==Yt&&(_t.propertyName=Yt)),Kt&&(_t.dataTypes=Kt)}(Ut,_t,Pt),function(_t,{jtdDiscriminator:Pt,jtdMetadata:Ft,compositeRule:Dt,createErrors:Ut,allErrors:Lt}){void 0!==Dt&&(_t.compositeRule=Dt),void 0!==Ut&&(_t.createErrors=Ut),void 0!==Lt&&(_t.allErrors=Lt),_t.jtdDiscriminator=Pt,_t.jtdMetadata=Ft}(Ut,Pt);const Lt={..._t,...Ut,items:void 0,props:void 0};return De.subschemaCode(Lt,Dt),Lt}}));r(Se),Se.applySubschema,Se.Type;var Ie=s((function(_t,Pt){function n(_t){return _t.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:Zt._`Object.prototype.hasOwnProperty`})}function a(_t,Pt,Ft){return Zt._`${n(_t)}.call(${Pt}, ${Ft})`}function r(_t,Pt,Ft,Dt){const Ut=Zt._`${Pt}${Zt.getProperty(Ft)} === undefined`;return Dt?Zt.or(Ut,Zt.not(a(_t,Pt,Ft))):Ut}function s(_t){return _t?Object.keys(_t).filter((_t=>"__proto__"!==_t)):[]}Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.validateUnion=Pt.validateArray=Pt.usePattern=Pt.callValidateCode=Pt.schemaProperties=Pt.allSchemaProperties=Pt.noPropertyInData=Pt.propertyInData=Pt.isOwnProperty=Pt.hasPropFunc=Pt.reportMissingProp=Pt.checkMissingProp=Pt.checkReportMissingProp=void 0,Pt.checkReportMissingProp=function(_t,Pt){const{gen:Ft,data:Dt,it:Ut}=_t;Ft.if(r(Ft,Dt,Pt,Ut.opts.ownProperties),(()=>{_t.setParams({missingProperty:Zt._`${Pt}`},!0),_t.error()}))},Pt.checkMissingProp=function({gen:_t,data:Pt,it:{opts:Ft}},Dt,Ut){return Zt.or(...Dt.map((Dt=>Zt.and(r(_t,Pt,Dt,Ft.ownProperties),Zt._`${Ut} = ${Dt}`))))},Pt.reportMissingProp=function(_t,Pt){_t.setParams({missingProperty:Pt},!0),_t.error()},Pt.hasPropFunc=n,Pt.isOwnProperty=a,Pt.propertyInData=function(_t,Pt,Ft,Dt){const Ut=Zt._`${Pt}${Zt.getProperty(Ft)} !== undefined`;return Dt?Zt._`${Ut} && ${a(_t,Pt,Ft)}`:Ut},Pt.noPropertyInData=r,Pt.allSchemaProperties=s,Pt.schemaProperties=function(_t,Pt){return s(Pt).filter((Ft=>!Ue.alwaysValidSchema(_t,Pt[Ft])))},Pt.callValidateCode=function({schemaCode:_t,data:Pt,it:{gen:Ft,topSchemaRef:Dt,schemaPath:Ut,errorPath:Lt},it:Kt},Yt,re,ve){const Me=ve?Zt._`${_t}, ${Pt}, ${Dt}${Ut}`:Pt,Se=[[ee.default.dataPath,Zt.strConcat(ee.default.dataPath,Lt)],[ee.default.parentData,Kt.parentData],[ee.default.parentDataProperty,Kt.parentDataProperty],[ee.default.rootData,ee.default.rootData]];Kt.opts.dynamicRef&&Se.push([ee.default.dynamicAnchors,ee.default.dynamicAnchors]);const Ie=Zt._`${Me}, ${Ft.object(...Se)}`;return re!==Zt.nil?Zt._`${Yt}.call(${re}, ${Ie})`:Zt._`${Yt}(${Ie})`},Pt.usePattern=function(_t,Pt){return _t.scopeValue("pattern",{key:Pt,ref:new RegExp(Pt,"u"),code:Zt._`new RegExp(${Pt}, "u")`})},Pt.validateArray=function(_t){const{gen:Pt,data:Ft,keyword:Dt,it:Ut}=_t,Lt=Pt.name("valid");if(Ut.allErrors){const _t=Pt.let("valid",!0);return i((()=>Pt.assign(_t,!1))),_t}return Pt.var(Lt,!0),i((()=>Pt.break())),Lt;function i(Ut){const Kt=Pt.const("len",Zt._`${Ft}.length`);Pt.forRange("i",0,Kt,(Ft=>{_t.subschema({keyword:Dt,dataProp:Ft,dataPropType:Se.Type.Num},Lt),Pt.if(Zt.not(Lt),Ut)}))}},Pt.validateUnion=function(_t){const{gen:Pt,schema:Ft,keyword:Dt,it:Ut}=_t;if(!Array.isArray(Ft))throw new Error("ajv implementation error");if(Ft.some((_t=>Ue.alwaysValidSchema(Ut,_t)))&&!Ut.opts.unevaluated)return;const Lt=Pt.let("valid",!1),Kt=Pt.name("_valid");Pt.block((()=>Ft.forEach(((Ft,Ut)=>{const Yt=_t.subschema({keyword:Dt,schemaProp:Ut,compositeRule:!0},Kt);Pt.assign(Lt,Zt._`${Lt} || ${Kt}`),_t.mergeValidEvaluated(Yt,Kt)||Pt.if(Zt.not(Lt))})))),_t.result(Lt,(()=>_t.reset()),(()=>_t.error(!0)))}}));r(Ie),Ie.validateUnion,Ie.validateArray,Ie.usePattern,Ie.callValidateCode,Ie.schemaProperties,Ie.allSchemaProperties,Ie.noPropertyInData,Ie.propertyInData,Ie.isOwnProperty,Ie.hasPropFunc,Ie.reportMissingProp,Ie.checkMissingProp,Ie.checkReportMissingProp;var Re=s((function(_t,Pt){function n(_t,Pt){var Ft;const{gen:Dt,keyword:Ut,schema:Lt,parentSchema:Kt,$data:Yt,it:ve}=_t;!function({schemaEnv:_t},Pt){if(Pt.async&&!_t.$async)throw new Error("async keyword in sync schema")}(ve,Pt);const Me=!Yt&&Pt.compile?Pt.compile.call(ve.self,Lt,Kt,ve):Pt.validate,Se=r(Dt,Ut,Me),Re=Dt.let("valid");function v(Ft=(Pt.async?Zt._`await `:Zt.nil)){const Ut=ve.opts.passContext?ee.default.this:ee.default.self,Lt=!("compile"in Pt&&!Yt||!1===Pt.schema);Dt.assign(Re,Zt._`${Ft}${Ie.callValidateCode(_t,Se,Ut,Lt)}`,Pt.modifying)}function g(_t){var Ft;Dt.if(Zt.not(null!==(Ft=Pt.valid)&&void 0!==Ft?Ft:Re),_t)}_t.block$data(Re,(function(){if(!1===Pt.errors)v(),Pt.modifying&&a(_t),g((()=>_t.error()));else{const Ft=Pt.async?function(){const _t=Dt.let("ruleErrs",null);return Dt.try((()=>v(Zt._`await `)),(Pt=>Dt.assign(Re,!1).if(Zt._`${Pt} instanceof ${ve.ValidationError}`,(()=>Dt.assign(_t,Zt._`${Pt}.errors`)),(()=>Dt.throw(Pt))))),_t}():function(){const _t=Zt._`${Se}.errors`;return Dt.assign(_t,null),v(Zt.nil),_t}();Pt.modifying&&a(_t),g((()=>function(_t,Pt){const{gen:Ft}=_t;Ft.if(Zt._`Array.isArray(${Pt})`,(()=>{Ft.assign(ee.default.vErrors,Zt._`${ee.default.vErrors} === null ? ${Pt} : ${ee.default.vErrors}.concat(${Pt})`).assign(ee.default.errors,Zt._`${ee.default.vErrors}.length`),re.extendErrors(_t)}),(()=>_t.error()))}(_t,Ft)))}})),_t.ok(null!==(Ft=Pt.valid)&&void 0!==Ft?Ft:Re)}function a(_t){const{gen:Pt,data:Ft,it:Dt}=_t;Pt.if(Dt.parentData,(()=>Pt.assign(Ft,Zt._`${Dt.parentData}[${Dt.parentDataProperty}]`)))}function r(_t,Pt,Ft){if(void 0===Ft)throw new Error(`keyword "${Pt}" failed to compile`);return _t.scopeValue("keyword","function"==typeof Ft?{ref:Ft}:{ref:Ft,code:Zt.stringify(Ft)})}Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.keywordCode=void 0,Pt.keywordCode=function(_t,Pt,Ft,Dt){const Ut=new je.default(_t,Ft,Pt);"code"in Ft?Ft.code(Ut,Dt):Ut.$data&&Ft.validate?n(Ut,Ft):"macro"in Ft?function(_t,Pt){const{gen:Ft,keyword:Dt,schema:Ut,parentSchema:Lt,it:Kt}=_t,Yt=Pt.macro.call(Kt.self,Ut,Lt,Kt),ee=r(Ft,Dt,Yt);!1!==Kt.opts.validateSchema&&Kt.self.validateSchema(Yt,!0);const re=Ft.name("valid");_t.subschema({schema:Yt,schemaPath:Zt.nil,errSchemaPath:`${Kt.errSchemaPath}/${Dt}`,topSchemaRef:ee,compositeRule:!0},re),_t.pass(re,(()=>_t.error(!0)))}(Ut,Ft):(Ft.compile||Ft.validate)&&n(Ut,Ft)}}));r(Re),Re.keywordCode;var Ne=s((function(_t,Pt){function n(_t,Pt){const{gen:Ft,schema:Dt,opts:{useDefaults:Ut}}=_t;Ut&&Me.assignDefaults(_t,Pt.type),Ft.block((()=>{for(const Ft of Pt.rules)Lt.shouldUseRule(Dt,Ft)&&Re.keywordCode(_t,Ft.keyword,Ft.definition,Pt.type)}))}function a(_t,Pt){return _t.includes(Pt)||"number"===Pt&&_t.includes("integer")}function r(_t,Pt){return _t.includes(Pt)||"integer"===Pt&&_t.includes("number")}function s(_t,Pt){Pt+=` at "${_t.schemaEnv.baseId+_t.errSchemaPath}" (strictTypes)`,De.checkStrictMode(_t,Pt,_t.opts.strictTypes)}Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.schemaKeywords=void 0,Pt.schemaKeywords=function(_t,Pt,Ft,Dt){const{gen:Ut,schema:Kt,data:Yt,allErrors:re,opts:ve,self:Me}=_t,{RULES:Se}=Me;function g(Me){Lt.shouldUseGroup(Kt,Me)&&(Me.type?(Ut.if(Le.checkDataType(Me.type,Yt,ve.strict)),n(_t,Me),1===Pt.length&&Pt[0]===Me.type&&Ft&&(Ut.else(),Le.reportTypeError(_t)),Ut.endIf()):n(_t,Me),re||Ut.if(Zt._`${ee.default.errors} === ${Dt||0}`))}!Kt.$ref||!ve.ignoreKeywordsWithRef&&Ue.schemaHasRulesButRef(Kt,Se)?(ve.jtd||function(_t,Pt){!_t.schemaEnv.meta&&_t.opts.strictTypes&&(function(_t,Pt){Pt.length&&(_t.dataTypes.length?(Pt.forEach((Pt=>{r(_t.dataTypes,Pt)||s(_t,`type "${Pt}" not allowed by context "${_t.dataTypes.join(",")}"`)})),_t.dataTypes=_t.dataTypes.filter((_t=>r(Pt,_t)))):_t.dataTypes=Pt)}(_t,Pt),_t.opts.allowUnionTypes||function(_t,Pt){Pt.length>1&&(2!==Pt.length||!Pt.includes("null"))&&s(_t,"use allowUnionTypes to allow union type keyword")}(_t,Pt),function(_t,Pt){const Ft=_t.self.RULES.all;for(const Dt in Ft){const Ut=Ft[Dt];if("object"==typeof Ut&&Lt.shouldUseRule(_t.schema,Ut)){const{type:Ft}=Ut.definition;Ft.length&&!Ft.some((_t=>a(Pt,_t)))&&s(_t,`missing type "${Ft.join(",")}" for keyword "${Dt}"`)}}}(_t,_t.dataTypes))}(_t,Pt),Ut.block((()=>{for(const _t of Se.rules)g(_t);g(Se.post)}))):Ut.block((()=>Re.keywordCode(_t,"$ref",Se.all.$ref.definition)))}}));r(Ne),Ne.schemaKeywords;var Pe=function e(_t,Pt){if(_t===Pt)return!0;if(_t&&Pt&&"object"==typeof _t&&"object"==typeof Pt){if(_t.constructor!==Pt.constructor)return!1;var Ft,Dt,Ut;if(Array.isArray(_t)){if((Ft=_t.length)!=Pt.length)return!1;for(Dt=Ft;0!=Dt--;)if(!e(_t[Dt],Pt[Dt]))return!1;return!0}if(_t.constructor===RegExp)return _t.source===Pt.source&&_t.flags===Pt.flags;if(_t.valueOf!==Object.prototype.valueOf)return _t.valueOf()===Pt.valueOf();if(_t.toString!==Object.prototype.toString)return _t.toString()===Pt.toString();if((Ft=(Ut=Object.keys(_t)).length)!==Object.keys(Pt).length)return!1;for(Dt=Ft;0!=Dt--;)if(!Object.prototype.hasOwnProperty.call(Pt,Ut[Dt]))return!1;for(Dt=Ft;0!=Dt--;){var Lt=Ut[Dt];if(!e(_t[Lt],Pt[Lt]))return!1}return!0}return _t!=_t&&Pt!=Pt},Fe=s((function(_t){var Pt=_t.exports=function(_t,Pt,Ft){"function"==typeof Pt&&(Ft=Pt,Pt={}),n(Pt,"function"==typeof(Ft=Pt.cb||Ft)?Ft:Ft.pre||function(){},Ft.post||function(){},_t,"",_t)};function n(_t,Ft,Dt,Ut,Lt,Kt,Yt,Zt,ee,re){if(Ut&&"object"==typeof Ut&&!Array.isArray(Ut)){for(var ve in Ft(Ut,Lt,Kt,Yt,Zt,ee,re),Ut){var Me=Ut[ve];if(Array.isArray(Me)){if(ve in Pt.arrayKeywords)for(var Se=0;Se<Me.length;Se++)n(_t,Ft,Dt,Me[Se],Lt+"/"+ve+"/"+Se,Kt,Lt,ve,Ut,Se)}else if(ve in Pt.propsKeywords){if(Me&&"object"==typeof Me)for(var Ie in Me)n(_t,Ft,Dt,Me[Ie],Lt+"/"+ve+"/"+Ie.replace(/~/g,"~0").replace(/\//g,"~1"),Kt,Lt,ve,Ut,Ie)}else(ve in Pt.keywords||_t.allKeys&&!(ve in Pt.skipKeywords))&&n(_t,Ft,Dt,Me,Lt+"/"+ve,Kt,Lt,ve,Ut)}Dt(Ut,Lt,Kt,Yt,Zt,ee,re)}}Pt.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},Pt.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},Pt.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},Pt.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}})),$e=s((function(_t,Pt){!function(_t){function t(){for(var _t=arguments.length,Pt=Array(_t),Ft=0;Ft<_t;Ft++)Pt[Ft]=arguments[Ft];if(Pt.length>1){Pt[0]=Pt[0].slice(0,-1);for(var Dt=Pt.length-1,Ut=1;Ut<Dt;++Ut)Pt[Ut]=Pt[Ut].slice(1,-1);return Pt[Dt]=Pt[Dt].slice(1),Pt.join("")}return Pt[0]}function n(_t){return"(?:"+_t+")"}function a(_t){return void 0===_t?"undefined":null===_t?"null":Object.prototype.toString.call(_t).split(" ").pop().split("]").shift().toLowerCase()}function r(_t){return _t.toUpperCase()}function o(_t){var Pt="[A-Za-z]",Ft="[0-9]",Dt=t(Ft,"[A-Fa-f]"),Ut=n(n("%[EFef]"+Dt+"%"+Dt+Dt+"%"+Dt+Dt)+"|"+n("%[89A-Fa-f]"+Dt+"%"+Dt+Dt)+"|"+n("%"+Dt+Dt)),Lt="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",Kt=t("[\\:\\/\\?\\#\\[\\]\\@]",Lt),Yt=_t?"[\\uE000-\\uF8FF]":"[]",Zt=t(Pt,Ft,"[\\-\\.\\_\\~]",_t?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]");n(Pt+t(Pt,Ft,"[\\+\\-\\.]")+"*"),n(n(Ut+"|"+t(Zt,Lt,"[\\:]"))+"*");var ee=n(n("25[0-5]")+"|"+n("2[0-4]"+Ft)+"|"+n("1"+Ft+Ft)+"|"+n("0?[1-9]"+Ft)+"|0?0?"+Ft),re=n(ee+"\\."+ee+"\\."+ee+"\\."+ee),ve=n(Dt+"{1,4}"),Me=n(n(ve+"\\:"+ve)+"|"+re),Se=n(n(ve+"\\:")+"{6}"+Me),Ie=n("\\:\\:"+n(ve+"\\:")+"{5}"+Me),Re=n(n(ve)+"?\\:\\:"+n(ve+"\\:")+"{4}"+Me),Ne=n(n(n(ve+"\\:")+"{0,1}"+ve)+"?\\:\\:"+n(ve+"\\:")+"{3}"+Me),Pe=n(n(n(ve+"\\:")+"{0,2}"+ve)+"?\\:\\:"+n(ve+"\\:")+"{2}"+Me),Fe=n(n(n(ve+"\\:")+"{0,3}"+ve)+"?\\:\\:"+ve+"\\:"+Me),$e=n(n(n(ve+"\\:")+"{0,4}"+ve)+"?\\:\\:"+Me),ze=n(n(n(ve+"\\:")+"{0,5}"+ve)+"?\\:\\:"+ve),De=n(n(n(ve+"\\:")+"{0,6}"+ve)+"?\\:\\:"),Ue=n([Se,Ie,Re,Ne,Pe,Fe,$e,ze,De].join("|")),Le=n(n(Zt+"|"+Ut)+"+");n("[vV]"+Dt+"+\\."+t(Zt,Lt,"[\\:]")+"+"),n(n(Ut+"|"+t(Zt,Lt))+"*");var je=n(Ut+"|"+t(Zt,Lt,"[\\:\\@]"));return n(n(Ut+"|"+t(Zt,Lt,"[\\@]"))+"+"),n(n(je+"|"+t("[\\/\\?]",Yt))+"*"),{NOT_SCHEME:new RegExp(t("[^]",Pt,Ft,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(t("[^\\%\\:]",Zt,Lt),"g"),NOT_HOST:new RegExp(t("[^\\%\\[\\]\\:]",Zt,Lt),"g"),NOT_PATH:new RegExp(t("[^\\%\\/\\:\\@]",Zt,Lt),"g"),NOT_PATH_NOSCHEME:new RegExp(t("[^\\%\\/\\@]",Zt,Lt),"g"),NOT_QUERY:new RegExp(t("[^\\%]",Zt,Lt,"[\\:\\@\\/\\?]",Yt),"g"),NOT_FRAGMENT:new RegExp(t("[^\\%]",Zt,Lt,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(t("[^]",Zt,Lt),"g"),UNRESERVED:new RegExp(Zt,"g"),OTHER_CHARS:new RegExp(t("[^\\%]",Zt,Kt),"g"),PCT_ENCODED:new RegExp(Ut,"g"),IPV4ADDRESS:new RegExp("^("+re+")$"),IPV6ADDRESS:new RegExp("^\\[?("+Ue+")"+n(n("\\%25|\\%(?!"+Dt+"{2})")+"("+Le+")")+"?\\]?$")}}var Pt=o(!1),Ft=o(!0),d=function(_t,Pt){if(Array.isArray(_t))return _t;if(Symbol.iterator in Object(_t))return function(_t,Pt){var Ft=[],Dt=!0,Ut=!1,Lt=void 0;try{for(var Kt,Yt=_t[Symbol.iterator]();!(Dt=(Kt=Yt.next()).done)&&(Ft.push(Kt.value),!Pt||Ft.length!==Pt);Dt=!0);}catch(_t){Ut=!0,Lt=_t}finally{try{!Dt&&Yt.return&&Yt.return()}finally{if(Ut)throw Lt}}return Ft}(_t,Pt);throw new TypeError("Invalid attempt to destructure non-iterable instance")},Dt=2147483647,Ut=36,Lt=/^xn--/,Kt=/[^\0-\x7E]/,Yt=/[\x2E\u3002\uFF0E\uFF61]/g,Zt={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},ee=Math.floor,re=String.fromCharCode;function N(_t){throw new RangeError(Zt[_t])}function A(_t,Pt){var Ft=_t.split("@"),Dt="";return Ft.length>1&&(Dt=Ft[0]+"@",_t=Ft[1]),Dt+function(_t,Pt){for(var Ft=[],Dt=_t.length;Dt--;)Ft[Dt]=Pt(_t[Dt]);return Ft}((_t=_t.replace(Yt,".")).split("."),Pt).join(".")}var P=function(_t){return _t-48<10?_t-22:_t-65<26?_t-65:_t-97<26?_t-97:Ut},O=function(_t,Pt){return _t+22+75*(_t<26)-((0!=Pt)<<5)},R=function(_t,Pt,Ft){var Dt=0;for(_t=Ft?ee(_t/700):_t>>1,_t+=ee(_t/Pt);_t>455;Dt+=Ut)_t=ee(_t/35);return ee(Dt+36*_t/(_t+38))},V_toASCII=function(_t){return A(_t,(function(_t){return Kt.test(_t)?"xn--"+function(_t){var Pt=[],Ft=(_t=function(_t){for(var Pt=[],Ft=0,Dt=_t.length;Ft<Dt;){var Ut=_t.charCodeAt(Ft++);if(Ut>=55296&&Ut<=56319&&Ft<Dt){var Lt=_t.charCodeAt(Ft++);56320==(64512&Lt)?Pt.push(((1023&Ut)<<10)+(1023&Lt)+65536):(Pt.push(Ut),Ft--)}else Pt.push(Ut)}return Pt}(_t)).length,Lt=128,Kt=0,Yt=72,Zt=!0,ve=!1,Me=void 0;try{for(var Se,Ie=_t[Symbol.iterator]();!(Zt=(Se=Ie.next()).done);Zt=!0){var Re=Se.value;Re<128&&Pt.push(re(Re))}}catch(_t){ve=!0,Me=_t}finally{try{!Zt&&Ie.return&&Ie.return()}finally{if(ve)throw Me}}var Ne=Pt.length,Pe=Ne;for(Ne&&Pt.push("-");Pe<Ft;){var Fe=Dt,$e=!0,ze=!1,De=void 0;try{for(var Ue,Le=_t[Symbol.iterator]();!($e=(Ue=Le.next()).done);$e=!0){var je=Ue.value;je>=Lt&&je<Fe&&(Fe=je)}}catch(_t){ze=!0,De=_t}finally{try{!$e&&Le.return&&Le.return()}finally{if(ze)throw De}}var He=Pe+1;Fe-Lt>ee((Dt-Kt)/He)&&N("overflow"),Kt+=(Fe-Lt)*He,Lt=Fe;var Ve=!0,qe=!1,Ge=void 0;try{for(var We,Ke=_t[Symbol.iterator]();!(Ve=(We=Ke.next()).done);Ve=!0){var Ye=We.value;if(Ye<Lt&&++Kt>Dt&&N("overflow"),Ye==Lt){for(var Qe=Kt,Ze=Ut;;Ze+=Ut){var tn=Ze<=Yt?1:Ze>=Yt+26?26:Ze-Yt;if(Qe<tn)break;var en=Qe-tn,nn=Ut-tn;Pt.push(re(O(tn+en%nn,0))),Qe=ee(en/nn)}Pt.push(re(O(Qe,0))),Yt=R(Kt,He,Pe==Ne),Kt=0,++Pe}}}catch(_t){qe=!0,Ge=_t}finally{try{!Ve&&Ke.return&&Ke.return()}finally{if(qe)throw Ge}}++Kt,++Lt}return Pt.join("")}(_t):_t}))},V_toUnicode=function(_t){return A(_t,(function(_t){return Lt.test(_t)?function(_t){var Pt=[],Ft=_t.length,Lt=0,Kt=128,Yt=72,Zt=_t.lastIndexOf("-");Zt<0&&(Zt=0);for(var re=0;re<Zt;++re)_t.charCodeAt(re)>=128&&N("not-basic"),Pt.push(_t.charCodeAt(re));for(var ve=Zt>0?Zt+1:0;ve<Ft;){for(var Me=Lt,Se=1,Ie=Ut;;Ie+=Ut){ve>=Ft&&N("invalid-input");var Re=P(_t.charCodeAt(ve++));(Re>=Ut||Re>ee((Dt-Lt)/Se))&&N("overflow"),Lt+=Re*Se;var Ne=Ie<=Yt?1:Ie>=Yt+26?26:Ie-Yt;if(Re<Ne)break;var Pe=Ut-Ne;Se>ee(Dt/Pe)&&N("overflow"),Se*=Pe}var Fe=Pt.length+1;Yt=R(Lt-Me,Fe,0==Me),ee(Lt/Fe)>Dt-Kt&&N("overflow"),Kt+=ee(Lt/Fe),Lt%=Fe,Pt.splice(Lt++,0,Kt)}return String.fromCodePoint.apply(String,Pt)}(_t.slice(4).toLowerCase()):_t}))},ve={};function B(_t){var Pt=_t.charCodeAt(0);return Pt<16?"%0"+Pt.toString(16).toUpperCase():Pt<128?"%"+Pt.toString(16).toUpperCase():Pt<2048?"%"+(Pt>>6|192).toString(16).toUpperCase()+"%"+(63&Pt|128).toString(16).toUpperCase():"%"+(Pt>>12|224).toString(16).toUpperCase()+"%"+(Pt>>6&63|128).toString(16).toUpperCase()+"%"+(63&Pt|128).toString(16).toUpperCase()}function H(_t){for(var Pt="",Ft=0,Dt=_t.length;Ft<Dt;){var Ut=parseInt(_t.substr(Ft+1,2),16);if(Ut<128)Pt+=String.fromCharCode(Ut),Ft+=3;else if(Ut>=194&&Ut<224){if(Dt-Ft>=6){var Lt=parseInt(_t.substr(Ft+4,2),16);Pt+=String.fromCharCode((31&Ut)<<6|63&Lt)}else Pt+=_t.substr(Ft,6);Ft+=6}else if(Ut>=224){if(Dt-Ft>=9){var Kt=parseInt(_t.substr(Ft+4,2),16),Yt=parseInt(_t.substr(Ft+7,2),16);Pt+=String.fromCharCode((15&Ut)<<12|(63&Kt)<<6|63&Yt)}else Pt+=_t.substr(Ft,9);Ft+=9}else Pt+=_t.substr(Ft,3),Ft+=3}return Pt}function L(_t,Pt){function n(_t){var Ft=H(_t);return Ft.match(Pt.UNRESERVED)?Ft:_t}return _t.scheme&&(_t.scheme=String(_t.scheme).replace(Pt.PCT_ENCODED,n).toLowerCase().replace(Pt.NOT_SCHEME,"")),void 0!==_t.userinfo&&(_t.userinfo=String(_t.userinfo).replace(Pt.PCT_ENCODED,n).replace(Pt.NOT_USERINFO,B).replace(Pt.PCT_ENCODED,r)),void 0!==_t.host&&(_t.host=String(_t.host).replace(Pt.PCT_ENCODED,n).toLowerCase().replace(Pt.NOT_HOST,B).replace(Pt.PCT_ENCODED,r)),void 0!==_t.path&&(_t.path=String(_t.path).replace(Pt.PCT_ENCODED,n).replace(_t.scheme?Pt.NOT_PATH:Pt.NOT_PATH_NOSCHEME,B).replace(Pt.PCT_ENCODED,r)),void 0!==_t.query&&(_t.query=String(_t.query).replace(Pt.PCT_ENCODED,n).replace(Pt.NOT_QUERY,B).replace(Pt.PCT_ENCODED,r)),void 0!==_t.fragment&&(_t.fragment=String(_t.fragment).replace(Pt.PCT_ENCODED,n).replace(Pt.NOT_FRAGMENT,B).replace(Pt.PCT_ENCODED,r)),_t}function K(_t){return _t.replace(/^0*(.*)/,"$1")||"0"}function z(_t,Pt){var Ft=_t.match(Pt.IPV4ADDRESS)||[],Dt=d(Ft,2)[1];return Dt?Dt.split(".").map(K).join("."):_t}function q(_t,Pt){var Ft=_t.match(Pt.IPV6ADDRESS)||[],Dt=d(Ft,3),Ut=Dt[1],Lt=Dt[2];if(Ut){for(var Kt=Ut.toLowerCase().split("::").reverse(),Yt=d(Kt,2),Zt=Yt[0],ee=Yt[1],re=ee?ee.split(":").map(K):[],ve=Zt.split(":").map(K),Me=Pt.IPV4ADDRESS.test(ve[ve.length-1]),Se=Me?7:8,Ie=ve.length-Se,Re=Array(Se),Ne=0;Ne<Se;++Ne)Re[Ne]=re[Ne]||ve[Ie+Ne]||"";Me&&(Re[Se-1]=z(Re[Se-1],Pt));var Pe=Re.reduce((function(_t,Pt,Ft){if(!Pt||"0"===Pt){var Dt=_t[_t.length-1];Dt&&Dt.index+Dt.length===Ft?Dt.length++:_t.push({index:Ft,length:1})}return _t}),[]).sort((function(_t,Pt){return Pt.length-_t.length}))[0],Fe=void 0;if(Pe&&Pe.length>1){var $e=Re.slice(0,Pe.index),ze=Re.slice(Pe.index+Pe.length);Fe=$e.join(":")+"::"+ze.join(":")}else Fe=Re.join(":");return Lt&&(Fe+="%"+Lt),Fe}return _t}var Me=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,Se=void 0==="".match(/(){0}/)[1];function W(_t){var Dt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},Ut={},Lt=!1!==Dt.iri?Ft:Pt;"suffix"===Dt.reference&&(_t=(Dt.scheme?Dt.scheme+":":"")+"//"+_t);var Kt=_t.match(Me);if(Kt){Se?(Ut.scheme=Kt[1],Ut.userinfo=Kt[3],Ut.host=Kt[4],Ut.port=parseInt(Kt[5],10),Ut.path=Kt[6]||"",Ut.query=Kt[7],Ut.fragment=Kt[8],isNaN(Ut.port)&&(Ut.port=Kt[5])):(Ut.scheme=Kt[1]||void 0,Ut.userinfo=-1!==_t.indexOf("@")?Kt[3]:void 0,Ut.host=-1!==_t.indexOf("//")?Kt[4]:void 0,Ut.port=parseInt(Kt[5],10),Ut.path=Kt[6]||"",Ut.query=-1!==_t.indexOf("?")?Kt[7]:void 0,Ut.fragment=-1!==_t.indexOf("#")?Kt[8]:void 0,isNaN(Ut.port)&&(Ut.port=_t.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?Kt[4]:void 0)),Ut.host&&(Ut.host=q(z(Ut.host,Lt),Lt)),void 0!==Ut.scheme||void 0!==Ut.userinfo||void 0!==Ut.host||void 0!==Ut.port||Ut.path||void 0!==Ut.query?void 0===Ut.scheme?Ut.reference="relative":void 0===Ut.fragment?Ut.reference="absolute":Ut.reference="uri":Ut.reference="same-document",Dt.reference&&"suffix"!==Dt.reference&&Dt.reference!==Ut.reference&&(Ut.error=Ut.error||"URI is not a "+Dt.reference+" reference.");var Yt=ve[(Dt.scheme||Ut.scheme||"").toLowerCase()];if(Dt.unicodeSupport||Yt&&Yt.unicodeSupport)L(Ut,Lt);else{if(Ut.host&&(Dt.domainHost||Yt&&Yt.domainHost))try{Ut.host=V_toASCII(Ut.host.replace(Lt.PCT_ENCODED,H).toLowerCase())}catch(_t){Ut.error=Ut.error||"Host's domain name can not be converted to ASCII via punycode: "+_t}L(Ut,Pt)}Yt&&Yt.parse&&Yt.parse(Ut,Dt)}else Ut.error=Ut.error||"URI can not be parsed.";return Ut}function Y(_t,Dt){var Ut=!1!==Dt.iri?Ft:Pt,Lt=[];return void 0!==_t.userinfo&&(Lt.push(_t.userinfo),Lt.push("@")),void 0!==_t.host&&Lt.push(q(z(String(_t.host),Ut),Ut).replace(Ut.IPV6ADDRESS,(function(_t,Pt,Ft){return"["+Pt+(Ft?"%25"+Ft:"")+"]"}))),"number"!=typeof _t.port&&"string"!=typeof _t.port||(Lt.push(":"),Lt.push(String(_t.port))),Lt.length?Lt.join(""):void 0}var Ie=/^\.\.?\//,Re=/^\/\.(\/|$)/,Ne=/^\/\.\.(\/|$)/,Pe=/^\/?(?:.|\n)*?(?=\/|$)/;function te(_t){for(var Pt=[];_t.length;)if(_t.match(Ie))_t=_t.replace(Ie,"");else if(_t.match(Re))_t=_t.replace(Re,"/");else if(_t.match(Ne))_t=_t.replace(Ne,"/"),Pt.pop();else if("."===_t||".."===_t)_t="";else{var Ft=_t.match(Pe);if(!Ft)throw new Error("Unexpected dot segment condition");var Dt=Ft[0];_t=_t.slice(Dt.length),Pt.push(Dt)}return Pt.join("")}function ne(_t){var Dt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},Ut=Dt.iri?Ft:Pt,Lt=[],Kt=ve[(Dt.scheme||_t.scheme||"").toLowerCase()];if(Kt&&Kt.serialize&&Kt.serialize(_t,Dt),_t.host)if(Ut.IPV6ADDRESS.test(_t.host));else if(Dt.domainHost||Kt&&Kt.domainHost)try{_t.host=Dt.iri?V_toUnicode(_t.host):V_toASCII(_t.host.replace(Ut.PCT_ENCODED,H).toLowerCase())}catch(Ut){_t.error=_t.error||"Host's domain name can not be converted to "+(Dt.iri?"Unicode":"ASCII")+" via punycode: "+Ut}L(_t,Ut),"suffix"!==Dt.reference&&_t.scheme&&(Lt.push(_t.scheme),Lt.push(":"));var Yt=Y(_t,Dt);if(void 0!==Yt&&("suffix"!==Dt.reference&&Lt.push("//"),Lt.push(Yt),_t.path&&"/"!==_t.path.charAt(0)&&Lt.push("/")),void 0!==_t.path){var Zt=_t.path;Dt.absolutePath||Kt&&Kt.absolutePath||(Zt=te(Zt)),void 0===Yt&&(Zt=Zt.replace(/^\/\//,"/%2F")),Lt.push(Zt)}return void 0!==_t.query&&(Lt.push("?"),Lt.push(_t.query)),void 0!==_t.fragment&&(Lt.push("#"),Lt.push(_t.fragment)),Lt.join("")}function ae(_t,Pt){var Ft=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},Dt={};return arguments[3]||(_t=W(ne(_t,Ft),Ft),Pt=W(ne(Pt,Ft),Ft)),!(Ft=Ft||{}).tolerant&&Pt.scheme?(Dt.scheme=Pt.scheme,Dt.userinfo=Pt.userinfo,Dt.host=Pt.host,Dt.port=Pt.port,Dt.path=te(Pt.path||""),Dt.query=Pt.query):(void 0!==Pt.userinfo||void 0!==Pt.host||void 0!==Pt.port?(Dt.userinfo=Pt.userinfo,Dt.host=Pt.host,Dt.port=Pt.port,Dt.path=te(Pt.path||""),Dt.query=Pt.query):(Pt.path?("/"===Pt.path.charAt(0)?Dt.path=te(Pt.path):(void 0===_t.userinfo&&void 0===_t.host&&void 0===_t.port||_t.path?_t.path?Dt.path=_t.path.slice(0,_t.path.lastIndexOf("/")+1)+Pt.path:Dt.path=Pt.path:Dt.path="/"+Pt.path,Dt.path=te(Dt.path)),Dt.query=Pt.query):(Dt.path=_t.path,void 0!==Pt.query?Dt.query=Pt.query:Dt.query=_t.query),Dt.userinfo=_t.userinfo,Dt.host=_t.host,Dt.port=_t.port),Dt.scheme=_t.scheme),Dt.fragment=Pt.fragment,Dt}function pe(_t,Dt){return _t&&_t.toString().replace(Dt&&Dt.iri?Ft.PCT_ENCODED:Pt.PCT_ENCODED,H)}var Fe={scheme:"http",domainHost:!0,parse:function(_t,Pt){return _t.host||(_t.error=_t.error||"HTTP URIs must have a host."),_t},serialize:function(_t,Pt){var Ft="https"===String(_t.scheme).toLowerCase();return _t.port!==(Ft?443:80)&&""!==_t.port||(_t.port=void 0),_t.path||(_t.path="/"),_t}},$e={scheme:"https",domainHost:Fe.domainHost,parse:Fe.parse,serialize:Fe.serialize};function le(_t){return"boolean"==typeof _t.secure?_t.secure:"wss"===String(_t.scheme).toLowerCase()}var ze={scheme:"ws",domainHost:!0,parse:function(_t,Pt){var Ft=_t;return Ft.secure=le(Ft),Ft.resourceName=(Ft.path||"/")+(Ft.query?"?"+Ft.query:""),Ft.path=void 0,Ft.query=void 0,Ft},serialize:function(_t,Pt){if(_t.port!==(le(_t)?443:80)&&""!==_t.port||(_t.port=void 0),"boolean"==typeof _t.secure&&(_t.scheme=_t.secure?"wss":"ws",_t.secure=void 0),_t.resourceName){var Ft=_t.resourceName.split("?"),Dt=d(Ft,2),Ut=Dt[0],Lt=Dt[1];_t.path=Ut&&"/"!==Ut?Ut:void 0,_t.query=Lt,_t.resourceName=void 0}return _t.fragment=void 0,_t}},De={scheme:"wss",domainHost:ze.domainHost,parse:ze.parse,serialize:ze.serialize},Ue={},Le="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",je="[0-9A-Fa-f]",He=n(n("%[EFef]"+je+"%"+je+je+"%"+je+je)+"|"+n("%[89A-Fa-f]"+je+"%"+je+je)+"|"+n("%"+je+je)),Ve=t("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),qe=new RegExp(Le,"g"),Ge=new RegExp(He,"g"),We=new RegExp(t("[^]","[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]","[\\.]",'[\\"]',Ve),"g"),Ke=new RegExp(t("[^]",Le,"[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]"),"g"),Ye=Ke;function Ce(_t){var Pt=H(_t);return Pt.match(qe)?Pt:_t}var Qe={scheme:"mailto",parse:function(_t,Pt){var Ft=_t,Dt=Ft.to=Ft.path?Ft.path.split(","):[];if(Ft.path=void 0,Ft.query){for(var Ut=!1,Lt={},Kt=Ft.query.split("&"),Yt=0,Zt=Kt.length;Yt<Zt;++Yt){var ee=Kt[Yt].split("=");switch(ee[0]){case"to":for(var re=ee[1].split(","),ve=0,Me=re.length;ve<Me;++ve)Dt.push(re[ve]);break;case"subject":Ft.subject=pe(ee[1],Pt);break;case"body":Ft.body=pe(ee[1],Pt);break;default:Ut=!0,Lt[pe(ee[0],Pt)]=pe(ee[1],Pt)}}Ut&&(Ft.headers=Lt)}Ft.query=void 0;for(var Se=0,Ie=Dt.length;Se<Ie;++Se){var Re=Dt[Se].split("@");if(Re[0]=pe(Re[0]),Pt.unicodeSupport)Re[1]=pe(Re[1],Pt).toLowerCase();else try{Re[1]=V_toASCII(pe(Re[1],Pt).toLowerCase())}catch(_t){Ft.error=Ft.error||"Email address's domain name can not be converted to ASCII via punycode: "+_t}Dt[Se]=Re.join("@")}return Ft},serialize:function(_t,Pt){var Ft=_t,Dt=function(_t){return null!=_t?_t instanceof Array?_t:"number"!=typeof _t.length||_t.split||_t.setInterval||_t.call?[_t]:Array.prototype.slice.call(_t):[]}(_t.to);if(Dt){for(var Ut=0,Lt=Dt.length;Ut<Lt;++Ut){var Kt=String(Dt[Ut]),Yt=Kt.lastIndexOf("@"),Zt=Kt.slice(0,Yt).replace(Ge,Ce).replace(Ge,r).replace(We,B),ee=Kt.slice(Yt+1);try{ee=Pt.iri?V_toUnicode(ee):V_toASCII(pe(ee,Pt).toLowerCase())}catch(_t){Ft.error=Ft.error||"Email address's domain name can not be converted to "+(Pt.iri?"Unicode":"ASCII")+" via punycode: "+_t}Dt[Ut]=Zt+"@"+ee}Ft.path=Dt.join(",")}var re=_t.headers=_t.headers||{};_t.subject&&(re.subject=_t.subject),_t.body&&(re.body=_t.body);var ve=[];for(var Me in re)re[Me]!==Ue[Me]&&ve.push(Me.replace(Ge,Ce).replace(Ge,r).replace(Ke,B)+"="+re[Me].replace(Ge,Ce).replace(Ge,r).replace(Ye,B));return ve.length&&(Ft.query=ve.join("&")),Ft}},Ze=/^([^\:]+)\:(.*)/,tn={scheme:"urn",parse:function(_t,Pt){var Ft=_t.path&&_t.path.match(Ze),Dt=_t;if(Ft){var Ut=Pt.scheme||Dt.scheme||"urn",Lt=Ft[1].toLowerCase(),Kt=Ft[2],Yt=Ut+":"+(Pt.nid||Lt),Zt=ve[Yt];Dt.nid=Lt,Dt.nss=Kt,Dt.path=void 0,Zt&&(Dt=Zt.parse(Dt,Pt))}else Dt.error=Dt.error||"URN can not be parsed.";return Dt},serialize:function(_t,Pt){var Ft=Pt.scheme||_t.scheme||"urn",Dt=_t.nid,Ut=Ft+":"+(Pt.nid||Dt),Lt=ve[Ut];Lt&&(_t=Lt.serialize(_t,Pt));var Kt=_t,Yt=_t.nss;return Kt.path=(Dt||Pt.nid)+":"+Yt,Kt}},en=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,nn={scheme:"urn:uuid",parse:function(_t,Pt){var Ft=_t;return Ft.uuid=Ft.nss,Ft.nss=void 0,Pt.tolerant||Ft.uuid&&Ft.uuid.match(en)||(Ft.error=Ft.error||"UUID is not valid."),Ft},serialize:function(_t,Pt){var Ft=_t;return Ft.nss=(_t.uuid||"").toLowerCase(),Ft}};ve[Fe.scheme]=Fe,ve[$e.scheme]=$e,ve[ze.scheme]=ze,ve[De.scheme]=De,ve[Qe.scheme]=Qe,ve[tn.scheme]=tn,ve[nn.scheme]=nn,_t.SCHEMES=ve,_t.pctEncChar=B,_t.pctDecChars=H,_t.parse=W,_t.removeDotSegments=te,_t.serialize=ne,_t.resolveComponents=ae,_t.resolve=function(_t,Pt,Ft){var Dt=function(_t,Pt){var Ft={scheme:"null"};if(Pt)for(var Dt in Pt)Ft[Dt]=Pt[Dt];return Ft}(0,Ft);return ne(ae(W(_t,Dt),W(Pt,Dt),Dt,!0),Dt)},_t.normalize=function(_t,Pt){return"string"==typeof _t?_t=ne(W(_t,Pt),Pt):"object"===a(_t)&&(_t=W(ne(_t,Pt),Pt)),_t},_t.equal=function(_t,Pt,Ft){return"string"==typeof _t?_t=ne(W(_t,Ft),Ft):"object"===a(_t)&&(_t=ne(_t,Ft)),"string"==typeof Pt?Pt=ne(W(Pt,Ft),Ft):"object"===a(Pt)&&(Pt=ne(Pt,Ft)),_t===Pt},_t.escapeComponent=function(_t,Dt){return _t&&_t.toString().replace(Dt&&Dt.iri?Ft.ESCAPE:Pt.ESCAPE,B)},_t.unescapeComponent=pe,Object.defineProperty(_t,"__esModule",{value:!0})}(Pt)}));r($e);var ze=s((function(_t,Pt){Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.getSchemaRefs=Pt.resolveUrl=Pt.normalizeId=Pt._getFullPath=Pt.getFullPath=Pt.inlineRef=void 0;const Ft=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);Pt.inlineRef=function(_t,Pt=!0){return"boolean"==typeof _t||(!0===Pt?!r(_t):!!Pt&&s(_t)<=Pt)};const Dt=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function r(_t){for(const Pt in _t){if(Dt.has(Pt))return!0;const Ft=_t[Pt];if(Array.isArray(Ft)&&Ft.some(r))return!0;if("object"==typeof Ft&&r(Ft))return!0}return!1}function s(_t){let Pt=0;for(const Dt in _t){if("$ref"===Dt)return 1/0;if(Pt++,!Ft.has(Dt)&&("object"==typeof _t[Dt]&&Ue.eachItem(_t[Dt],(_t=>Pt+=s(_t))),Pt===1/0))return 1/0}return Pt}function i(_t="",Pt){return!1!==Pt&&(_t=u(_t)),o($e.parse(_t))}function o(_t){return $e.serialize(_t).split("#")[0]+"#"}Pt.getFullPath=i,Pt._getFullPath=o;const Ut=/#\/?$/;function u(_t){return _t?_t.replace(Ut,""):""}Pt.normalizeId=u,Pt.resolveUrl=function(_t,Pt){return Pt=u(Pt),$e.resolve(_t,Pt)};const Lt=/^[a-z_][-a-z0-9._]*$/i;Pt.getSchemaRefs=function(_t){if("boolean"==typeof _t)return{};const Pt=u(_t.$id),Ft={"":Pt},Dt=i(Pt,!1),Ut={},Kt=new Set;return Fe(_t,{allKeys:!0},((_t,Pt,Yt,Zt)=>{if(void 0===Zt)return;const ee=Dt+Pt;let re=Ft[Zt];function m(Pt){if(Pt=u(re?$e.resolve(re,Pt):Pt),Kt.has(Pt))throw p(Pt);Kt.add(Pt);let Ft=this.refs[Pt];return"string"==typeof Ft&&(Ft=this.refs[Ft]),"object"==typeof Ft?o(_t,Ft.schema,Pt):Pt!==u(ee)&&("#"===Pt[0]?(o(_t,Ut[Pt],Pt),Ut[Pt]=_t):this.refs[Pt]=ee),Pt}function f(_t){if("string"==typeof _t){if(!Lt.test(_t))throw new Error(`invalid anchor "${_t}"`);m.call(this,`#${_t}`)}}"string"==typeof _t.$id&&(re=m.call(this,_t.$id)),f.call(this,_t.$anchor),f.call(this,_t.$dynamicAnchor),Ft[Pt]=re})),Ut;function o(_t,Pt,Ft){if(void 0!==Pt&&!Pe(_t,Pt))throw p(Ft)}function p(_t){return new Error(`reference "${_t}" resolves to more than one schema`)}}}));r(ze),ze.getSchemaRefs,ze.resolveUrl,ze.normalizeId,ze._getFullPath,ze.getFullPath,ze.inlineRef;var De=s((function(_t,Pt){function n({gen:_t,validateName:Pt,schema:Ft,schemaEnv:Dt,opts:Ut},Lt){Ut.code.es5?_t.func(Pt,Zt._`${ee.default.data}, ${ee.default.valCxt}`,Dt.$async,(()=>{_t.code(Zt._`"use strict"; ${a(Ft,Ut)}`),function(_t,Pt){_t.if(ee.default.valCxt,(()=>{_t.var(ee.default.dataPath,Zt._`${ee.default.valCxt}.${ee.default.dataPath}`),_t.var(ee.default.parentData,Zt._`${ee.default.valCxt}.${ee.default.parentData}`),_t.var(ee.default.parentDataProperty,Zt._`${ee.default.valCxt}.${ee.default.parentDataProperty}`),_t.var(ee.default.rootData,Zt._`${ee.default.valCxt}.${ee.default.rootData}`),Pt.dynamicRef&&_t.var(ee.default.dynamicAnchors,Zt._`${ee.default.valCxt}.${ee.default.dynamicAnchors}`)}),(()=>{_t.var(ee.default.dataPath,Zt._`""`),_t.var(ee.default.parentData,Zt._`undefined`),_t.var(ee.default.parentDataProperty,Zt._`undefined`),_t.var(ee.default.rootData,ee.default.data),Pt.dynamicRef&&_t.var(ee.default.dynamicAnchors,Zt._`{}`)}))}(_t,Ut),_t.code(Lt)})):_t.func(Pt,Zt._`${ee.default.data}, ${function(_t){return Zt._`{${ee.default.dataPath}="", ${ee.default.parentData}, ${ee.default.parentDataProperty}, ${ee.default.rootData}=${ee.default.data}${_t.dynamicRef?Zt._`, ${ee.default.dynamicAnchors}={}`:Zt.nil}}={}`}(Ut)}`,Dt.$async,(()=>_t.code(a(Ft,Ut)).code(Lt)))}function a(_t,Pt){return"object"==typeof _t&&_t.$id&&(Pt.code.source||Pt.code.process)?Zt._`/*# sourceURL=${_t.$id} */`:Zt.nil}function r({schema:_t,self:Pt}){if("boolean"==typeof _t)return!_t;for(const Ft in _t)if(Pt.RULES.all[Ft])return!0;return!1}function s(_t){return"boolean"!=typeof _t.schema}function i(_t){Ue.checkUnknownRules(_t),function(_t){const{schema:Pt,errSchemaPath:Ft,opts:Dt,self:Ut}=_t;Pt.$ref&&Dt.ignoreKeywordsWithRef&&Ue.schemaHasRulesButRef(Pt,Ut.RULES)&&Ut.logger.warn(`$ref: keywords ignored in schema at path "${Ft}"`)}(_t)}function o(_t,Pt){if(_t.opts.jtd)return Ne.schemaKeywords(_t,[],!1,Pt);const Ft=Le.getSchemaTypes(_t.schema),Dt=Le.coerceAndCheckDataType(_t,Ft);Ne.schemaKeywords(_t,Ft,!Dt,Pt)}function p({gen:_t,schemaEnv:Pt,schema:Ft,errSchemaPath:Dt,opts:Ut}){const Lt=Ft.$comment;if(!0===Ut.$comment)_t.code(Zt._`${ee.default.self}.logger.log(${Lt})`);else if("function"==typeof Ut.$comment){const Ft=Zt.str`${Dt}/$comment`,Ut=_t.scopeValue("root",{ref:Pt.root});_t.code(Zt._`${ee.default.self}.opts.$comment(${Lt}, ${Ft}, ${Ut}.schema)`)}}function u(_t,Pt,Ft=_t.opts.strict){if(Ft){if(Pt=`strict mode: ${Pt}`,!0===Ft)throw new Error(Pt);_t.self.logger.warn(Pt)}}Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.checkStrictMode=Pt.schemaCxtHasRules=Pt.subschemaCode=Pt.validateFunctionCode=void 0,Pt.validateFunctionCode=function(_t){s(_t)&&(i(_t),r(_t))?function(_t){const{schema:Pt,opts:Ft,gen:Dt}=_t;n(_t,(()=>{Ft.$comment&&Pt.$comment&&p(_t),function(_t){const{schema:Pt,opts:Ft}=_t;void 0!==Pt.default&&Ft.useDefaults&&Ft.strict&&u(_t,"default is ignored in the schema root")}(_t),Dt.let(ee.default.vErrors,null),Dt.let(ee.default.errors,0),Ft.unevaluated&&function(_t){const{gen:Pt,validateName:Ft}=_t;_t.evaluated=Pt.const("evaluated",Zt._`${Ft}.evaluated`),Pt.if(Zt._`${_t.evaluated}.dynamicProps`,(()=>Pt.assign(Zt._`${_t.evaluated}.props`,Zt._`undefined`))),Pt.if(Zt._`${_t.evaluated}.dynamicItems`,(()=>Pt.assign(Zt._`${_t.evaluated}.items`,Zt._`undefined`)))}(_t),o(_t),function(_t){const{gen:Pt,schemaEnv:Ft,validateName:Dt,ValidationError:Ut,opts:Lt}=_t;Ft.$async?Pt.if(Zt._`${ee.default.errors} === 0`,(()=>Pt.return(ee.default.data)),(()=>Pt.throw(Zt._`new ${Ut}(${ee.default.vErrors})`))):(Pt.assign(Zt._`${Dt}.errors`,ee.default.vErrors),Lt.unevaluated&&function({gen:_t,evaluated:Pt,props:Ft,items:Dt}){Ft instanceof Zt.Name&&_t.assign(Zt._`${Pt}.props`,Ft),Dt instanceof Zt.Name&&_t.assign(Zt._`${Pt}.items`,Dt)}(_t),Pt.return(Zt._`${ee.default.errors} === 0`))}(_t)}))}(_t):n(_t,(()=>ve.topBoolOrEmptySchema(_t)))},Pt.subschemaCode=function(_t,Pt){s(_t)&&(i(_t),r(_t))?function(_t,Pt){const{schema:Ft,gen:Dt,opts:Ut}=_t;Ut.$comment&&Ft.$comment&&p(_t),function(_t){_t.schema.$id&&(_t.baseId=ze.resolveUrl(_t.baseId,_t.schema.$id))}(_t),function(_t){if(_t.schema.$async&&!_t.schemaEnv.$async)throw new Error("async schema in sync schema")}(_t);const Lt=Dt.const("_errs",ee.default.errors);o(_t,Lt),Dt.var(Pt,Zt._`${Lt} === ${ee.default.errors}`)}(_t,Pt):ve.boolOrEmptySchema(_t,Pt)},Pt.schemaCxtHasRules=r,Pt.checkStrictMode=u}));r(De),De.checkStrictMode,De.schemaCxtHasRules,De.subschemaCode,De.validateFunctionCode;var Ue=s((function(_t,Pt){function n(_t,Pt=_t.schema){const{opts:Ft,self:Dt}=_t;if(!Ft.strict)return;if("boolean"==typeof Pt)return;const Ut=Dt.RULES.keywords;for(const Ft in Pt)Ut[Ft]||De.checkStrictMode(_t,`unknown keyword: "${Ft}"`)}function a(_t,Pt){if("boolean"==typeof _t)return!_t;for(const Ft in _t)if(Pt[Ft])return!0;return!1}function r(_t){return"number"==typeof _t?`${_t}`:_t.replace(/~/g,"~0").replace(/\//g,"~1")}function s(_t){return _t.replace(/~1/g,"/").replace(/~0/g,"~")}function i({mergeNames:_t,mergeToName:Pt,mergeValues:Ft,resultToName:Dt}){return(Ut,Lt,Kt,Yt)=>{const ee=void 0===Kt?Lt:Kt instanceof Zt.Name?(Lt instanceof Zt.Name?_t(Ut,Lt,Kt):Pt(Ut,Lt,Kt),Kt):Lt instanceof Zt.Name?(Pt(Ut,Kt,Lt),Lt):Ft(Lt,Kt);return Yt!==Zt.Name||ee instanceof Zt.Name?ee:Dt(Ut,ee)}}function o(_t,Pt){if(!0===Pt)return _t.var("props",!0);const Ft=_t.var("props",Zt._`{}`);return void 0!==Pt&&p(_t,Ft,Pt),Ft}function p(_t,Pt,Ft){Object.keys(Ft).forEach((Ft=>_t.assign(Zt._`${Pt}${Zt.getProperty(Ft)}`,!0)))}Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.func=Pt.setEvaluated=Pt.evaluatedPropsToName=Pt.mergeEvaluated=Pt.eachItem=Pt.unescapeJsonPointer=Pt.escapeJsonPointer=Pt.escapeFragment=Pt.unescapeFragment=Pt.schemaRefOrVal=Pt.schemaHasRulesButRef=Pt.schemaHasRules=Pt.checkUnknownRules=Pt.alwaysValidSchema=Pt.toHash=void 0,Pt.toHash=function(_t){const Pt={};for(const Ft of _t)Pt[Ft]=!0;return Pt},Pt.alwaysValidSchema=function(_t,Pt){return"boolean"==typeof Pt?Pt:0===Object.keys(Pt).length||(n(_t,Pt),!a(Pt,_t.self.RULES.all))},Pt.checkUnknownRules=n,Pt.schemaHasRules=a,Pt.schemaHasRulesButRef=function(_t,Pt){if("boolean"==typeof _t)return!_t;for(const Ft in _t)if("$ref"!==Ft&&Pt.all[Ft])return!0;return!1},Pt.schemaRefOrVal=function({topSchemaRef:_t,schemaPath:Pt},Ft,Dt,Ut){if(!Ut){if("number"==typeof Ft||"boolean"==typeof Ft)return Ft;if("string"==typeof Ft)return Zt._`${Ft}`}return Zt._`${_t}${Pt}${Zt.getProperty(Dt)}`},Pt.unescapeFragment=function(_t){return s(decodeURIComponent(_t))},Pt.escapeFragment=function(_t){return encodeURIComponent(r(_t))},Pt.escapeJsonPointer=r,Pt.unescapeJsonPointer=s,Pt.eachItem=function(_t,Pt){if(Array.isArray(_t))for(const Ft of _t)Pt(Ft);else Pt(_t)},Pt.mergeEvaluated={props:i({mergeNames:(_t,Pt,Ft)=>_t.if(Zt._`${Ft} !== true && ${Pt} !== undefined`,(()=>{_t.if(Zt._`${Pt} === true`,(()=>_t.assign(Ft,!0)),(()=>_t.assign(Ft,Zt._`${Ft} || {}`).code(Zt._`Object.assign(${Ft}, ${Pt})`)))})),mergeToName:(_t,Pt,Ft)=>_t.if(Zt._`${Ft} !== true`,(()=>{!0===Pt?_t.assign(Ft,!0):(_t.assign(Ft,Zt._`${Ft} || {}`),p(_t,Ft,Pt))})),mergeValues:(_t,Pt)=>!0===_t||{..._t,...Pt},resultToName:o}),items:i({mergeNames:(_t,Pt,Ft)=>_t.if(Zt._`${Ft} !== true && ${Pt} !== undefined`,(()=>_t.assign(Ft,Zt._`${Pt} === true ? true : ${Ft} > ${Pt} ? ${Ft} : ${Pt}`))),mergeToName:(_t,Pt,Ft)=>_t.if(Zt._`${Ft} !== true`,(()=>_t.assign(Ft,!0===Pt||Zt._`${Ft} > ${Pt} ? ${Ft} : ${Pt}`))),mergeValues:(_t,Pt)=>!0===_t||Math.max(_t,Pt),resultToName:(_t,Pt)=>_t.var("items",Pt)})},Pt.evaluatedPropsToName=o,Pt.setEvaluated=p,Pt.func=function(_t,Pt){return _t.scopeValue("func",{ref:Pt,code:Pt.code})}}));r(Ue),Ue.func,Ue.setEvaluated,Ue.evaluatedPropsToName,Ue.mergeEvaluated,Ue.eachItem,Ue.unescapeJsonPointer,Ue.escapeJsonPointer,Ue.escapeFragment,Ue.unescapeFragment,Ue.schemaRefOrVal,Ue.schemaHasRulesButRef,Ue.schemaHasRules,Ue.checkUnknownRules,Ue.alwaysValidSchema,Ue.toHash;var Le=s((function(_t,Pt){var Ft;function a(_t){const Pt=Array.isArray(_t)?_t:_t?[_t]:[];if(Pt.every(Ut.isJSONType))return Pt;throw new Error("type must be JSONType or JSONType[]: "+Pt.join(","))}Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.reportTypeError=Pt.checkDataTypes=Pt.checkDataType=Pt.coerceAndCheckDataType=Pt.getJSONTypes=Pt.getSchemaTypes=Pt.DataType=void 0,function(_t){_t[_t.Correct=0]="Correct",_t[_t.Wrong=1]="Wrong"}(Ft=Pt.DataType||(Pt.DataType={})),Pt.getSchemaTypes=function(_t){const Pt=a(_t.type);if(Pt.includes("null")){if(!1===_t.nullable)throw new Error("type: null contradicts nullable: false")}else{if(!Pt.length&&void 0!==_t.nullable)throw new Error('"nullable" cannot be used without "type"');!0===_t.nullable&&Pt.push("null")}return Pt},Pt.getJSONTypes=a,Pt.coerceAndCheckDataType=function(_t,Pt){const{gen:Ut,data:Kt,opts:Yt}=_t,ee=function(_t,Pt){return Pt?_t.filter((_t=>Dt.has(_t)||"array"===Pt&&"array"===_t)):[]}(Pt,Yt.coerceTypes),re=Pt.length>0&&!(0===ee.length&&1===Pt.length&&Lt.schemaHasRulesForType(_t,Pt[0]));if(re){const Lt=i(Pt,Kt,Yt.strict,Ft.Wrong);Ut.if(Lt,(()=>{ee.length?function(_t,Pt,Ft){const{gen:Ut,data:Lt,opts:Kt}=_t,Yt=Ut.let("dataType",Zt._`typeof ${Lt}`),ee=Ut.let("coerced",Zt._`undefined`);"array"===Kt.coerceTypes&&Ut.if(Zt._`${Yt} == 'object' && Array.isArray(${Lt}) && ${Lt}.length == 1`,(()=>Ut.assign(Lt,Zt._`${Lt}[0]`).assign(Yt,Zt._`typeof ${Lt}`).if(i(Pt,Lt,Kt.strict),(()=>Ut.assign(ee,Lt))))),Ut.if(Zt._`${ee} !== undefined`);for(const _t of Ft)(Dt.has(_t)||"array"===_t&&"array"===Kt.coerceTypes)&&c(_t);function c(_t){switch(_t){case"string":return void Ut.elseIf(Zt._`${Yt} == "number" || ${Yt} == "boolean"`).assign(ee,Zt._`"" + ${Lt}`).elseIf(Zt._`${Lt} === null`).assign(ee,Zt._`""`);case"number":return void Ut.elseIf(Zt._`${Yt} == "boolean" || ${Lt} === null
              || (${Yt} == "string" && ${Lt} && ${Lt} == +${Lt})`).assign(ee,Zt._`+${Lt}`);case"integer":return void Ut.elseIf(Zt._`${Yt} === "boolean" || ${Lt} === null
              || (${Yt} === "string" && ${Lt} && ${Lt} == +${Lt} && !(${Lt} % 1))`).assign(ee,Zt._`+${Lt}`);case"boolean":return void Ut.elseIf(Zt._`${Lt} === "false" || ${Lt} === 0 || ${Lt} === null`).assign(ee,!1).elseIf(Zt._`${Lt} === "true" || ${Lt} === 1`).assign(ee,!0);case"null":return Ut.elseIf(Zt._`${Lt} === "" || ${Lt} === 0 || ${Lt} === false`),void Ut.assign(ee,null);case"array":Ut.elseIf(Zt._`${Yt} === "string" || ${Yt} === "number"
              || ${Yt} === "boolean" || ${Lt} === null`).assign(ee,Zt._`[${Lt}]`)}}Ut.else(),d(_t),Ut.endIf(),Ut.if(Zt._`${ee} !== undefined`,(()=>{Ut.assign(Lt,ee),function({gen:_t,parentData:Pt,parentDataProperty:Ft},Dt){_t.if(Zt._`${Pt} !== undefined`,(()=>_t.assign(Zt._`${Pt}[${Ft}]`,Dt)))}(_t,ee)}))}(_t,Pt,ee):d(_t)}))}return re};const Dt=new Set(["string","number","integer","boolean","null"]);function s(_t,Pt,Dt,Ut=Ft.Correct){const Lt=Ut===Ft.Correct?Zt.operators.EQ:Zt.operators.NEQ;let Kt;switch(_t){case"null":return Zt._`${Pt} ${Lt} null`;case"array":Kt=Zt._`Array.isArray(${Pt})`;break;case"object":Kt=Zt._`${Pt} && typeof ${Pt} == "object" && !Array.isArray(${Pt})`;break;case"integer":Kt=o(Zt._`!(${Pt} % 1) && !isNaN(${Pt})`);break;case"number":Kt=o();break;default:return Zt._`typeof ${Pt} ${Lt} ${_t}`}return Ut===Ft.Correct?Kt:Zt.not(Kt);function o(_t=Zt.nil){return Zt.and(Zt._`typeof ${Pt} == "number"`,_t,Dt?Zt._`isFinite(${Pt})`:Zt.nil)}}function i(_t,Pt,Ft,Dt){if(1===_t.length)return s(_t[0],Pt,Ft,Dt);let Ut;const Lt=Ue.toHash(_t);if(Lt.array&&Lt.object){const _t=Zt._`typeof ${Pt} != "object"`;Ut=Lt.null?_t:Zt._`!${Pt} || ${_t}`,delete Lt.null,delete Lt.array,delete Lt.object}else Ut=Zt.nil;Lt.number&&delete Lt.integer;for(const _t in Lt)Ut=Zt.and(Ut,s(_t,Pt,Ft,Dt));return Ut}Pt.checkDataType=s,Pt.checkDataTypes=i;const Kt={message:({schema:_t})=>Zt.str`should be ${_t}`,params:({schema:_t,schemaValue:Pt})=>"string"==typeof _t?Zt._`{type: ${_t}}`:Zt._`{type: ${Pt}}`};function d(_t){const Pt=function(_t){const{gen:Pt,data:Ft,schema:Dt}=_t,Ut=Ue.schemaRefOrVal(_t,Dt,"type");return{gen:Pt,keyword:"type",data:Ft,schema:Dt.type,schemaCode:Ut,schemaValue:Ut,parentSchema:Dt,params:{},it:_t}}(_t);re.reportError(Pt,Kt)}Pt.reportTypeError=d}));r(Le),Le.reportTypeError,Le.checkDataTypes,Le.checkDataType,Le.coerceAndCheckDataType,Le.getJSONTypes,Le.getSchemaTypes,Le.DataType;var je=s((function(_t,Pt){Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.getData=void 0,Pt.default=class{constructor(_t,Pt,Ft){if(function({schema:_t,opts:Pt,self:Ft},Dt,Ut){if(Array.isArray(Dt.keyword)?!Dt.keyword.includes(Ut):Dt.keyword!==Ut)throw new Error("ajv implementation error");const Lt=Dt.dependencies;if(null==Lt?void 0:Lt.some((Pt=>!Object.prototype.hasOwnProperty.call(_t,Pt))))throw new Error(`parent schema must have dependencies of ${Ut}: ${Lt.join(",")}`);if(Dt.validateSchema&&!Dt.validateSchema(_t[Ut])){const _t="keyword value is invalid: "+Ft.errorsText(Dt.validateSchema.errors);if("log"!==Pt.validateSchema)throw new Error(_t);Ft.logger.error(_t)}}(_t,Pt,Ft),this.gen=_t.gen,this.allErrors=_t.allErrors,this.keyword=Ft,this.data=_t.data,this.schema=_t.schema[Ft],this.$data=Pt.$data&&_t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=Ue.schemaRefOrVal(_t,this.schema,Ft,this.$data),this.schemaType=Pt.schemaType,this.parentSchema=_t.schema,this.params={},this.it=_t,this.def=Pt,this.$data)this.schemaCode=_t.gen.const("vSchema",r(this.$data,_t));else if(this.schemaCode=this.schemaValue,!function(_t,Pt,Ft=!1){return!Pt.length||Pt.some((Pt=>"array"===Pt?Array.isArray(_t):"object"===Pt?_t&&"object"==typeof _t&&!Array.isArray(_t):typeof _t==Pt||Ft&&void 0===_t))}(this.schema,Pt.schemaType,Pt.allowUndefined))throw new Error(`${Ft} value must be ${JSON.stringify(Pt.schemaType)}`);("code"in Pt?Pt.trackErrors:!1!==Pt.errors)&&(this.errsCount=_t.gen.const("_errs",ee.default.errors))}result(_t,Pt,Ft){this.gen.if(Zt.not(_t)),Ft?Ft():this.error(),Pt?(this.gen.else(),Pt(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(_t,Pt){this.result(_t,void 0,Pt)}fail(_t){if(void 0===_t)return this.error(),void(this.allErrors||this.gen.if(!1));this.gen.if(_t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(_t){if(!this.$data)return this.fail(_t);const{schemaCode:Pt}=this;this.fail(Zt._`${Pt} !== undefined && (${Zt.or(this.invalid$data(),_t)})`)}error(_t){(_t?re.reportExtraError:re.reportError)(this,this.def.error)}$dataError(){re.reportError(this,this.def.$dataError||re.keyword$DataError)}reset(){if(void 0===this.errsCount)throw new Error('add "trackErrors" to keyword definition');re.resetErrorsCount(this.gen,this.errsCount)}ok(_t){this.allErrors||this.gen.if(_t)}setParams(_t,Pt){Pt?Object.assign(this.params,_t):this.params=_t}block$data(_t,Pt,Ft=Zt.nil){this.gen.block((()=>{this.check$data(_t,Ft),Pt()}))}check$data(_t=Zt.nil,Pt=Zt.nil){if(!this.$data)return;const{gen:Ft,schemaCode:Dt,schemaType:Ut,def:Lt}=this;Ft.if(Zt.or(Zt._`${Dt} === undefined`,Pt)),_t!==Zt.nil&&Ft.assign(_t,!0),(Ut.length||Lt.validateSchema)&&(Ft.elseIf(this.invalid$data()),this.$dataError(),_t!==Zt.nil&&Ft.assign(_t,!1)),Ft.else()}invalid$data(){const{gen:_t,schemaCode:Pt,schemaType:Ft,def:Dt,it:Ut}=this;return Zt.or(function(){if(Ft.length){if(!(Pt instanceof Zt.Name))throw new Error("ajv implementation error");const _t=Array.isArray(Ft)?Ft:[Ft];return Zt._`${Le.checkDataTypes(_t,Pt,Ut.opts.strict,Le.DataType.Wrong)}`}return Zt.nil}(),function(){if(Dt.validateSchema){const Ft=_t.scopeValue("validate$data",{ref:Dt.validateSchema});return Zt._`!${Ft}(${Pt})`}return Zt.nil}())}subschema(_t,Pt){return Se.applySubschema(this.it,_t,Pt)}mergeEvaluated(_t,Pt){const{it:Ft,gen:Dt}=this;Ft.opts.unevaluated&&(!0!==Ft.props&&void 0!==_t.props&&(Ft.props=Ue.mergeEvaluated.props(Dt,_t.props,Ft.props,Pt)),!0!==Ft.items&&void 0!==_t.items&&(Ft.items=Ue.mergeEvaluated.items(Dt,_t.items,Ft.items,Pt)))}mergeValidEvaluated(_t,Pt){const{it:Ft,gen:Dt}=this;if(Ft.opts.unevaluated&&(!0!==Ft.props||!0!==Ft.items))return Dt.if(Pt,(()=>this.mergeEvaluated(_t,Zt.Name))),!0}};const Ft=/^\/(?:[^~]|~0|~1)*$/,Dt=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function r(_t,{dataLevel:Pt,dataNames:Ut,dataPathArr:Lt}){let Kt,Yt;if(""===_t)return ee.default.rootData;if("/"===_t[0]){if(!Ft.test(_t))throw new Error(`Invalid JSON-pointer: ${_t}`);Kt=_t,Yt=ee.default.rootData}else{const Ft=Dt.exec(_t);if(!Ft)throw new Error(`Invalid JSON-pointer: ${_t}`);const Zt=+Ft[1];if(Kt=Ft[2],"#"===Kt){if(Zt>=Pt)throw new Error(d("property/index",Zt));return Lt[Pt-Zt]}if(Zt>Pt)throw new Error(d("data",Zt));if(Yt=Ut[Pt-Zt],!Kt)return Yt}let re=Yt;const ve=Kt.split("/");for(const _t of ve)_t&&(Yt=Zt._`${Yt}${Zt.getProperty(Ue.unescapeJsonPointer(_t))}`,re=Zt._`${re} && ${Yt}`);return re;function d(_t,Ft){return`Cannot access ${_t} ${Ft} levels up, current level is ${Pt}`}}Pt.getData=r}));r(je),je.getData;var He=s((function(_t,Pt){Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.MissingRefError=Pt.ValidationError=void 0;class n extends Error{constructor(_t){super("validation failed"),this.errors=_t,this.ajv=this.validation=!0}}Pt.ValidationError=n;class a extends Error{constructor(_t,Pt,Ft){super(Ft||`can't resolve reference ${Pt} from id ${_t}`),this.missingRef=ze.resolveUrl(_t,Pt),this.missingSchema=ze.normalizeId(ze.getFullPath(this.missingRef))}}Pt.MissingRefError=a,_t.exports={ValidationError:n,MissingRefError:a}}));r(He),He.MissingRefError,He.ValidationError;var Ve=s((function(_t,Pt){Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.resolveSchema=Pt.getCompilingSchema=Pt.resolveRef=Pt.compileSchema=Pt.SchemaEnv=void 0;class n{constructor(_t){var Pt;let Ft;this.refs={},this.dynamicAnchors={},"object"==typeof _t.schema&&(Ft=_t.schema),this.schema=_t.schema,this.root=_t.root||this,this.baseId=null!==(Pt=_t.baseId)&&void 0!==Pt?Pt:ze.normalizeId(null==Ft?void 0:Ft.$id),this.localRefs=_t.localRefs,this.meta=_t.meta,this.$async=null==Ft?void 0:Ft.$async,this.refs={}}}function a(_t){const Pt=s.call(this,_t);if(Pt)return Pt;const Ft=ze.getFullPath(_t.root.baseId),{es5:Dt,lines:Ut}=this.opts.code,{ownProperties:Lt}=this.opts,Kt=new Zt.CodeGen(this.scope,{es5:Dt,lines:Ut,ownProperties:Lt});let Yt;_t.$async&&(Yt=Kt.scopeValue("Error",{ref:He.ValidationError,code:Zt._`require("ajv/dist/compile/error_classes").ValidationError`}));const re=Kt.scopeName("validate");_t.validateName=re;const ve={gen:Kt,allErrors:this.opts.allErrors,data:ee.default.data,parentData:ee.default.parentData,parentDataProperty:ee.default.parentDataProperty,dataNames:[ee.default.data],dataPathArr:[Zt.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:Kt.scopeValue("schema",!0===this.opts.code.source?{ref:_t.schema,code:Zt.stringify(_t.schema)}:{ref:_t.schema}),validateName:re,ValidationError:Yt,schema:_t.schema,schemaEnv:_t,rootId:Ft,baseId:_t.baseId||Ft,schemaPath:Zt.nil,errSchemaPath:this.opts.jtd?"":"#",errorPath:Zt._`""`,opts:this.opts,self:this};let Me;try{this._compilations.add(_t),De.validateFunctionCode(ve),Kt.optimize(this.opts.code.optimize);const Pt=Kt.toString();Me=`${Kt.scopeRefs(ee.default.scope)}return ${Pt}`,this.opts.code.process&&(Me=this.opts.code.process(Me,_t));const Ft=new Function(`${ee.default.self}`,`${ee.default.scope}`,Me)(this,this.scope.get());if(this.scope.value(re,{ref:Ft}),Ft.errors=null,Ft.schema=_t.schema,Ft.schemaEnv=_t,_t.$async&&(Ft.$async=!0),!0===this.opts.code.source&&(Ft.source={validateName:re,validateCode:Pt,scopeValues:Kt._values}),this.opts.unevaluated){const{props:_t,items:Pt}=ve;Ft.evaluated={props:_t instanceof Zt.Name?void 0:_t,items:Pt instanceof Zt.Name?void 0:Pt,dynamicProps:_t instanceof Zt.Name,dynamicItems:Pt instanceof Zt.Name},Ft.source&&(Ft.source.evaluated=Zt.stringify(Ft.evaluated))}return _t.validate=Ft,_t}catch(Pt){throw delete _t.validate,delete _t.validateName,Me&&this.logger.error("Error compiling schema, function code:",Me),Pt}finally{this._compilations.delete(_t)}}function r(_t){return ze.inlineRef(_t.schema,this.opts.inlineRefs)?_t.schema:_t.validate?_t:a.call(this,_t)}function s(_t){for(const Dt of this._compilations)if(Ft=_t,(Pt=Dt).schema===Ft.schema&&Pt.root===Ft.root&&Pt.baseId===Ft.baseId)return Dt;var Pt,Ft}function i(_t,Pt){let Ft;for(;"string"==typeof(Ft=this.refs[Pt]);)Pt=Ft;return Ft||this.schemas[Pt]||o.call(this,_t,Pt)}function o(_t,Pt){const Ft=$e.parse(Pt),Dt=ze._getFullPath(Ft);let Ut=ze.getFullPath(_t.baseId);if(Object.keys(_t.schema).length>0&&Dt===Ut)return u.call(this,Ft,_t);const Lt=ze.normalizeId(Dt),Kt=this.refs[Lt]||this.schemas[Lt];if("string"==typeof Kt){const Pt=o.call(this,_t,Kt);if("object"!=typeof(null==Pt?void 0:Pt.schema))return;return u.call(this,Ft,Pt)}if("object"==typeof(null==Kt?void 0:Kt.schema)){if(Kt.validate||a.call(this,Kt),Lt===ze.normalizeId(Pt)){const{schema:Pt}=Kt;return Pt.$id&&(Ut=ze.resolveUrl(Ut,Pt.$id)),new n({schema:Pt,root:_t,baseId:Ut})}return u.call(this,Ft,Kt)}}Pt.SchemaEnv=n,Pt.compileSchema=a,Pt.resolveRef=function(_t,Pt,Ft){var Dt;Ft=ze.resolveUrl(Pt,Ft);const Ut=_t.refs[Ft];if(Ut)return Ut;let Lt=i.call(this,_t,Ft);if(void 0===Lt){const Ut=null===(Dt=_t.localRefs)||void 0===Dt?void 0:Dt[Ft];Ut&&(Lt=new n({schema:Ut,root:_t,baseId:Pt}))}return void 0!==Lt?_t.refs[Ft]=r.call(this,Lt):void 0},Pt.getCompilingSchema=s,Pt.resolveSchema=o;const Ft=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function u(_t,{baseId:Pt,schema:Dt,root:Ut}){var Lt;if("/"!==(null===(Lt=_t.fragment)||void 0===Lt?void 0:Lt[0]))return;for(const Ut of _t.fragment.slice(1).split("/")){if("boolean"==typeof Dt)return;if(void 0===(Dt=Dt[Ue.unescapeFragment(Ut)]))return;!Ft.has(Ut)&&"object"==typeof Dt&&Dt.$id&&(Pt=ze.resolveUrl(Pt,Dt.$id))}let Kt;if("boolean"!=typeof Dt&&Dt.$ref&&!Ue.schemaHasRulesButRef(Dt,this.RULES)){const _t=ze.resolveUrl(Pt,Dt.$ref);Kt=o.call(this,Ut,_t)}return Kt=Kt||new n({schema:Dt,root:Ut,baseId:Pt}),Kt.schema!==Kt.root.schema?Kt:void 0}}));r(Ve),Ve.resolveSchema,Ve.getCompilingSchema,Ve.resolveRef,Ve.compileSchema,Ve.SchemaEnv;var qe="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",Ge="Meta-schema for $data reference (JSON AnySchema extension proposal)",We="object",Ke=["$data"],Ye={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},Qe={$id:qe,description:Ge,type:We,required:Ke,properties:Ye,additionalProperties:!1},Ze=i(Object.freeze({__proto__:null,$id:qe,description:Ge,type:We,required:Ke,properties:Ye,additionalProperties:!1,default:Qe})),tn=s((function(_t,Pt){Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.CodeGen=Pt.Name=Pt.nil=Pt.stringify=Pt.str=Pt._=Pt.KeywordCxt=void 0,Pt.KeywordCxt=je.default,Object.defineProperty(Pt,"_",{enumerable:!0,get:function(){return Zt._}}),Object.defineProperty(Pt,"str",{enumerable:!0,get:function(){return Zt.str}}),Object.defineProperty(Pt,"stringify",{enumerable:!0,get:function(){return Zt.stringify}}),Object.defineProperty(Pt,"nil",{enumerable:!0,get:function(){return Zt.nil}}),Object.defineProperty(Pt,"Name",{enumerable:!0,get:function(){return Zt.Name}}),Object.defineProperty(Pt,"CodeGen",{enumerable:!0,get:function(){return Zt.CodeGen}});const Ft=Zt,Dt=["removeAdditional","useDefaults","coerceTypes"],Lt=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),Kt={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",schemaId:"JSON Schema draft-04 is not supported in Ajv v7.",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",strictNumbers:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key."},Yt={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'};function p(_t){var Pt,Ft,Dt,Ut,Lt,Kt,Yt,Zt,ee,re,ve,Me;const Se=null===(Pt=_t.strict)||void 0===Pt||Pt,Ie=!!Se&&"log",Re=null===(Ft=_t.code)||void 0===Ft?void 0:Ft.optimize,Ne=!0===Re||void 0===Re?1:Re||0;return{strict:Se,strictTypes:null!==(Dt=_t.strictTypes)&&void 0!==Dt?Dt:Ie,strictTuples:null!==(Ut=_t.strictTuples)&&void 0!==Ut?Ut:Ie,code:_t.code?{..._t.code,optimize:Ne}:{optimize:Ne},loopRequired:null!==(Lt=_t.loopRequired)&&void 0!==Lt?Lt:1/0,loopEnum:null!==(Kt=_t.loopEnum)&&void 0!==Kt?Kt:1/0,meta:null===(Yt=_t.meta)||void 0===Yt||Yt,messages:null===(Zt=_t.messages)||void 0===Zt||Zt,inlineRefs:null===(ee=_t.inlineRefs)||void 0===ee||ee,addUsedSchema:null===(re=_t.addUsedSchema)||void 0===re||re,validateSchema:null===(ve=_t.validateSchema)||void 0===ve||ve,validateFormats:null===(Me=_t.validateFormats)||void 0===Me||Me}}class u{constructor(_t={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,_t=this.opts={..._t,...p(_t)};const{es5:Pt,lines:Dt}=this.opts.code;this.scope=new Ft.ValueScope({scope:{},prefixes:Lt,es5:Pt,lines:Dt}),this.logger=function(_t){if(!1===_t)return ee;if(void 0===_t)return console;if(_t.log&&_t.warn&&_t.error)return _t;throw new Error("logger must implement log, warn and error methods")}(_t.logger);const Zt=_t.validateFormats;_t.validateFormats=!1,this.RULES=Ut.getRules(),d.call(this,Kt,_t,"NOT SUPPORTED"),d.call(this,Yt,_t,"DEPRECATED","warn"),this._metaOpts=h.call(this),_t.formats&&m.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),_t.keywords&&f.call(this,_t.keywords),"object"==typeof _t.meta&&this.addMetaSchema(_t.meta),y.call(this),_t.validateFormats=Zt}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:_t,meta:Pt}=this.opts;Pt&&_t&&this.addMetaSchema(Ze,Ze.$id,!1)}defaultMeta(){const{meta:_t}=this.opts;return this.opts.defaultMeta="object"==typeof _t?_t.$id||_t:void 0}validate(_t,Pt){let Ft;if("string"==typeof _t){if(Ft=this.getSchema(_t),!Ft)throw new Error(`no schema with key or ref "${_t}"`)}else Ft=this.compile(_t);const Dt=Ft(Pt);return"$async"in Ft||(this.errors=Ft.errors),Dt}compile(_t,Pt){const Ft=this._addSchema(_t,Pt);return Ft.validate||this._compileSchemaEnv(Ft)}compileAsync(_t,Pt){if("function"!=typeof this.opts.loadSchema)throw new Error("options.loadSchema should be a function");const{loadSchema:Ft}=this.opts;return a.call(this,_t,Pt);async function a(_t,Pt){await r.call(this,_t.$schema);const Ft=this._addSchema(_t,Pt);return Ft.validate||s.call(this,Ft)}async function r(_t){_t&&!this.getSchema(_t)&&await a.call(this,{$ref:_t},!0)}async function s(_t){try{return this._compileSchemaEnv(_t)}catch(Pt){if(!(Pt instanceof He.MissingRefError))throw Pt;return i.call(this,Pt),await o.call(this,Pt.missingSchema),s.call(this,_t)}}function i({missingSchema:_t,missingRef:Pt}){if(this.refs[_t])throw new Error(`AnySchema ${_t} is loaded but ${Pt} cannot be resolved`)}async function o(_t){const Ft=await p.call(this,_t);this.refs[_t]||await r.call(this,Ft.$schema),this.refs[_t]||this.addSchema(Ft,_t,Pt)}async function p(_t){const Pt=this._loading[_t];if(Pt)return Pt;try{return await(this._loading[_t]=Ft(_t))}finally{delete this._loading[_t]}}}addSchema(_t,Pt,Ft,Dt=this.opts.validateSchema){if(Array.isArray(_t)){for(const Pt of _t)this.addSchema(Pt,void 0,Ft,Dt);return this}let Ut;if("object"==typeof _t&&(Ut=_t.$id,void 0!==Ut&&"string"!=typeof Ut))throw new Error("schema id must be string");return Pt=ze.normalizeId(Pt||Ut),this._checkUnique(Pt),this.schemas[Pt]=this._addSchema(_t,Ft,Dt,!0),this}addMetaSchema(_t,Pt,Ft=this.opts.validateSchema){return this.addSchema(_t,Pt,!0,Ft),this}validateSchema(_t,Pt){if("boolean"==typeof _t)return!0;let Ft;if(Ft=_t.$schema,void 0!==Ft&&"string"!=typeof Ft)throw new Error("$schema must be a string");if(Ft=Ft||this.opts.defaultMeta||this.defaultMeta(),!Ft)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const Dt=this.validate(Ft,_t);if(!Dt&&Pt){const _t="schema is invalid: "+this.errorsText();if("log"!==this.opts.validateSchema)throw new Error(_t);this.logger.error(_t)}return Dt}getSchema(_t){let Pt;for(;"string"==typeof(Pt=c.call(this,_t));)_t=Pt;if(void 0===Pt){const Ft=new Ve.SchemaEnv({schema:{}});if(Pt=Ve.resolveSchema.call(this,Ft,_t),!Pt)return;this.refs[_t]=Pt}return Pt.validate||this._compileSchemaEnv(Pt)}removeSchema(_t){if(_t instanceof RegExp)return this._removeAllSchemas(this.schemas,_t),this._removeAllSchemas(this.refs,_t),this;switch(typeof _t){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const Pt=c.call(this,_t);return"object"==typeof Pt&&this._cache.delete(Pt.schema),delete this.schemas[_t],delete this.refs[_t],this}case"object":{const Pt=_t;this._cache.delete(Pt);let Ft=_t.$id;return Ft&&(Ft=ze.normalizeId(Ft),delete this.schemas[Ft],delete this.refs[Ft]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(_t){for(const Pt of _t)this.addKeyword(Pt);return this}addKeyword(_t,Pt){let Ft;if("string"==typeof _t)Ft=_t,"object"==typeof Pt&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),Pt.keyword=Ft);else{if("object"!=typeof _t||void 0!==Pt)throw new Error("invalid addKeywords parameters");if(Ft=(Pt=_t).keyword,Array.isArray(Ft)&&!Ft.length)throw new Error("addKeywords: keyword must be string or non-empty array")}if(g.call(this,Ft,Pt),!Pt)return Ue.eachItem(Ft,(_t=>_.call(this,_t))),this;w.call(this,Pt);const Dt={...Pt,type:Le.getJSONTypes(Pt.type),schemaType:Le.getJSONTypes(Pt.schemaType)};return Ue.eachItem(Ft,0===Dt.type.length?_t=>_.call(this,_t,Dt):_t=>Dt.type.forEach((Pt=>_.call(this,_t,Dt,Pt)))),this}getKeyword(_t){const Pt=this.RULES.all[_t];return"object"==typeof Pt?Pt.definition:!!Pt}removeKeyword(_t){const{RULES:Pt}=this;delete Pt.keywords[_t],delete Pt.all[_t];for(const Ft of Pt.rules){const Pt=Ft.rules.findIndex((Pt=>Pt.keyword===_t));Pt>=0&&Ft.rules.splice(Pt,1)}return this}addFormat(_t,Pt){return"string"==typeof Pt&&(Pt=new RegExp(Pt)),this.formats[_t]=Pt,this}errorsText(_t=this.errors,{separator:Pt=", ",dataVar:Ft="data"}={}){return _t&&0!==_t.length?_t.map((_t=>`${Ft}${_t.dataPath} ${_t.message}`)).reduce(((_t,Ft)=>_t+Pt+Ft)):"No errors"}$dataMetaSchema(_t,Pt){const Ft=this.RULES.all;_t=JSON.parse(JSON.stringify(_t));for(const Dt of Pt){const Pt=Dt.split("/").slice(1);let Ut=_t;for(const _t of Pt)Ut=Ut[_t];for(const _t in Ft){const Pt=Ft[_t];if("object"!=typeof Pt)continue;const{$data:Dt}=Pt.definition,Lt=Ut[_t];Dt&&Lt&&(Ut[_t]=A(Lt))}}return _t}_removeAllSchemas(_t,Pt){for(const Ft in _t){const Dt=_t[Ft];Pt&&!Pt.test(Ft)||("string"==typeof Dt?delete _t[Ft]:Dt&&!Dt.meta&&(this._cache.delete(Dt.schema),delete _t[Ft]))}}_addSchema(_t,Pt,Ft=this.opts.validateSchema,Dt=this.opts.addUsedSchema){if("object"!=typeof _t){if(this.opts.jtd)throw new Error("schema must be object");if("boolean"!=typeof _t)throw new Error("schema must be object or boolean")}let Ut=this._cache.get(_t);if(void 0!==Ut)return Ut;const Lt=ze.getSchemaRefs.call(this,_t);Ut=new Ve.SchemaEnv({schema:_t,meta:Pt,localRefs:Lt}),this._cache.set(Ut.schema,Ut);const Kt=Ut.baseId;return Dt&&!Kt.startsWith("#")&&(Kt&&this._checkUnique(Kt),this.refs[Kt]=Ut),Ft&&this.validateSchema(_t,!0),Ut}_checkUnique(_t){if(this.schemas[_t]||this.refs[_t])throw new Error(`schema with key or id "${_t}" already exists`)}_compileSchemaEnv(_t){if(_t.meta?this._compileMetaSchema(_t):Ve.compileSchema.call(this,_t),!_t.validate)throw new Error("ajv implementation error");return _t.validate}_compileMetaSchema(_t){const Pt=this.opts;this.opts=this._metaOpts;try{Ve.compileSchema.call(this,_t)}finally{this.opts=Pt}}}function d(_t,Pt,Ft,Dt="error"){for(const Ut in _t){const Lt=Ut;Lt in Pt&&this.logger[Dt](`${Ft}: option ${Ut}. ${_t[Lt]}`)}}function c(_t){return _t=ze.normalizeId(_t),this.schemas[_t]||this.refs[_t]}function y(){const _t=this.opts.schemas;if(_t)if(Array.isArray(_t))this.addSchema(_t);else for(const Pt in _t)this.addSchema(_t[Pt],Pt)}function m(){for(const _t in this.opts.formats){const Pt=this.opts.formats[_t];Pt&&this.addFormat(_t,Pt)}}function f(_t){if(Array.isArray(_t))this.addVocabulary(_t);else{this.logger.warn("keywords option as map is deprecated, pass array");for(const Pt in _t){const Ft=_t[Pt];Ft.keyword||(Ft.keyword=Pt),this.addKeyword(Ft)}}}function h(){const _t={...this.opts};for(const Pt of Dt)delete _t[Pt];return _t}Pt.default=u,u.ValidationError=He.ValidationError,u.MissingRefError=He.MissingRefError;const ee={log(){},warn(){},error(){}},re=/^[a-z_$][a-z0-9_$:-]*$/i;function g(_t,Pt){const{RULES:Ft}=this;if(Ue.eachItem(_t,(_t=>{if(Ft.keywords[_t])throw new Error(`Keyword ${_t} is already defined`);if(!re.test(_t))throw new Error(`Keyword ${_t} has invalid name`)})),Pt&&Pt.$data&&!("code"in Pt)&&!("validate"in Pt))throw new Error('$data keyword must have "code" or "validate" function')}function _(_t,Pt,Ft){var Dt;const Ut=null==Pt?void 0:Pt.post;if(Ft&&Ut)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:Lt}=this;let Kt=Ut?Lt.post:Lt.rules.find((({type:_t})=>_t===Ft));if(Kt||(Kt={type:Ft,rules:[]},Lt.rules.push(Kt)),Lt.keywords[_t]=!0,!Pt)return;const Yt={keyword:_t,definition:{...Pt,type:Le.getJSONTypes(Pt.type),schemaType:Le.getJSONTypes(Pt.schemaType)}};Pt.before?T.call(this,Kt,Yt,Pt.before):Kt.rules.push(Yt),Lt.all[_t]=Yt,null===(Dt=Pt.implements)||void 0===Dt||Dt.forEach((_t=>this.addKeyword(_t)))}function T(_t,Pt,Ft){const Dt=_t.rules.findIndex((_t=>_t.keyword===Ft));Dt>=0?_t.rules.splice(Dt,0,Pt):(_t.rules.push(Pt),this.logger.warn(`rule ${Ft} is not defined`))}function w(_t){let{metaSchema:Pt}=_t;void 0!==Pt&&(_t.$data&&this.opts.$data&&(Pt=A(Pt)),_t.validateSchema=this.compile(Pt,!0))}const ve={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function A(_t){return{anyOf:[_t,ve]}}}));r(tn),tn.CodeGen,tn.Name,tn.nil,tn.stringify,tn.str,tn._,tn.KeywordCxt;var en=s((function(_t,Pt){Object.defineProperty(Pt,"__esModule",{value:!0});const Ft={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};Pt.default=Ft}));r(en);var nn=s((function(_t,Pt){Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.callRef=Pt.getValidate=void 0;const Ft={keyword:"$ref",schemaType:"string",code(_t){const{gen:Pt,schema:Ft,it:Dt}=_t,{baseId:Ut,schemaEnv:Lt,validateName:Kt,opts:Yt,self:ee}=Dt;if("#"===Ft||"#/"===Ft)return function(){if(Lt===Lt.root)return r(_t,Kt,Lt,Lt.$async);const Ft=Pt.scopeValue("root",{ref:Lt.root});return r(_t,Zt._`${Ft}.validate`,Lt.root,Lt.root.$async)}();const re=Ve.resolveRef.call(ee,Lt.root,Ut,Ft);if(void 0===re)throw new He.MissingRefError(Ut,Ft);return re instanceof Ve.SchemaEnv?function(Pt){const Ft=a(_t,Pt);r(_t,Ft,Pt,Pt.$async)}(re):function(Dt){const Ut=Pt.scopeValue("schema",!0===Yt.code.source?{ref:Dt,code:Zt.stringify(Dt)}:{ref:Dt}),Lt=Pt.name("valid"),Kt=_t.subschema({schema:Dt,dataTypes:[],schemaPath:Zt.nil,topSchemaRef:Ut,errSchemaPath:Ft},Lt);_t.mergeEvaluated(Kt),_t.ok(Lt)}(re)}};function a(_t,Pt){const{gen:Ft}=_t;return Pt.validate?Ft.scopeValue("validate",{ref:Pt.validate}):Zt._`${Ft.scopeValue("wrapper",{ref:Pt})}.validate`}function r(_t,Pt,Ft,Dt){const{gen:Ut,it:Lt}=_t,{allErrors:Kt,schemaEnv:Yt,opts:re}=Lt,ve=re.passContext?ee.default.this:Zt.nil;function d(_t){const Pt=Zt._`${_t}.errors`;Ut.assign(ee.default.vErrors,Zt._`${ee.default.vErrors} === null ? ${Pt} : ${ee.default.vErrors}.concat(${Pt})`),Ut.assign(ee.default.errors,Zt._`${ee.default.vErrors}.length`)}function y(_t){var Pt;if(!Lt.opts.unevaluated)return;const Dt=null===(Pt=null==Ft?void 0:Ft.validate)||void 0===Pt?void 0:Pt.evaluated;if(!0!==Lt.props)if(Dt&&!Dt.dynamicProps)void 0!==Dt.props&&(Lt.props=Ue.mergeEvaluated.props(Ut,Dt.props,Lt.props));else{const Pt=Ut.var("props",Zt._`${_t}.evaluated.props`);Lt.props=Ue.mergeEvaluated.props(Ut,Pt,Lt.props,Zt.Name)}if(!0!==Lt.items)if(Dt&&!Dt.dynamicItems)void 0!==Dt.items&&(Lt.items=Ue.mergeEvaluated.items(Ut,Dt.items,Lt.items));else{const Pt=Ut.var("items",Zt._`${_t}.evaluated.items`);Lt.items=Ue.mergeEvaluated.items(Ut,Pt,Lt.items,Zt.Name)}}Dt?function(){if(!Yt.$async)throw new Error("async schema referenced by sync schema");const Ft=Ut.let("valid");Ut.try((()=>{Ut.code(Zt._`await ${Ie.callValidateCode(_t,Pt,ve)}`),y(Pt),Kt||Ut.assign(Ft,!0)}),(_t=>{Ut.if(Zt._`!(${_t} instanceof ${Lt.ValidationError})`,(()=>Ut.throw(_t))),d(_t),Kt||Ut.assign(Ft,!1)})),_t.ok(Ft)}():_t.result(Ie.callValidateCode(_t,Pt,ve),(()=>y(Pt)),(()=>d(Pt)))}Pt.getValidate=a,Pt.callRef=r,Pt.default=Ft}));r(nn),nn.callRef,nn.getValidate;var rn=s((function(_t,Pt){Object.defineProperty(Pt,"__esModule",{value:!0});const Ft=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",en.default,nn.default];Pt.default=Ft}));r(rn);var on=s((function(_t,Pt){Object.defineProperty(Pt,"__esModule",{value:!0});const Ft=Zt.operators,Dt={maximum:{okStr:"<=",ok:Ft.LTE,fail:Ft.GT},minimum:{okStr:">=",ok:Ft.GTE,fail:Ft.LT},exclusiveMaximum:{okStr:"<",ok:Ft.LT,fail:Ft.GTE},exclusiveMinimum:{okStr:">",ok:Ft.GT,fail:Ft.LTE}},Ut={message:({keyword:_t,schemaCode:Pt})=>Zt.str`should be ${Dt[_t].okStr} ${Pt}`,params:({keyword:_t,schemaCode:Pt})=>Zt._`{comparison: ${Dt[_t].okStr}, limit: ${Pt}}`},Lt={keyword:Object.keys(Dt),type:"number",schemaType:"number",$data:!0,error:Ut,code(_t){const{keyword:Pt,data:Ft,schemaCode:Ut}=_t;_t.fail$data(Zt._`${Ft} ${Dt[Pt].fail} ${Ut} || isNaN(${Ft})`)}};Pt.default=Lt}));r(on);var an=s((function(_t,Pt){Object.defineProperty(Pt,"__esModule",{value:!0});const Ft={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:_t})=>Zt.str`should be multiple of ${_t}`,params:({schemaCode:_t})=>Zt._`{multipleOf: ${_t}}`},code(_t){const{gen:Pt,data:Ft,schemaCode:Dt,it:Ut}=_t,Lt=Ut.opts.multipleOfPrecision,Kt=Pt.let("res"),Yt=Lt?Zt._`Math.abs(Math.round(${Kt}) - ${Kt}) > 1e-${Lt}`:Zt._`${Kt} !== parseInt(${Kt})`;_t.fail$data(Zt._`(${Dt} === 0 || (${Kt} = ${Ft}/${Dt}, ${Yt}))`)}};Pt.default=Ft}));r(an);var sn=s((function(_t,Pt){Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.default=function(_t){const Pt=_t.length;let Ft,Dt=0,Ut=0;for(;Ut<Pt;)Dt++,Ft=_t.charCodeAt(Ut++),Ft>=55296&&Ft<=56319&&Ut<Pt&&(Ft=_t.charCodeAt(Ut),56320==(64512&Ft)&&Ut++);return Dt}}));r(sn);var un=s((function(_t,Pt){Object.defineProperty(Pt,"__esModule",{value:!0});const Ft={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:_t,schemaCode:Pt}){const Ft="maxLength"===_t?"more":"fewer";return Zt.str`should NOT have ${Ft} than ${Pt} characters`},params:({schemaCode:_t})=>Zt._`{limit: ${_t}}`},code(_t){const{keyword:Pt,data:Ft,schemaCode:Dt,it:Ut}=_t,Lt="maxLength"===Pt?Zt.operators.GT:Zt.operators.LT;let Kt;if(!1===Ut.opts.unicode)Kt=Zt._`${Ft}.length`;else{const Pt=_t.gen.scopeValue("func",{ref:sn.default,code:Zt._`require("ajv/dist/compile/ucs2length").default`});Kt=Zt._`${Pt}(${Ft})`}_t.fail$data(Zt._`${Kt} ${Lt} ${Dt}`)}};Pt.default=Ft}));r(un);var pn=s((function(_t,Pt){Object.defineProperty(Pt,"__esModule",{value:!0});const Ft={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:_t})=>Zt.str`should match pattern "${_t}"`,params:({schemaCode:_t})=>Zt._`{pattern: ${_t}}`},code(_t){const{gen:Pt,data:Ft,$data:Dt,schema:Ut,schemaCode:Lt}=_t,Kt=Dt?Zt._`(new RegExp(${Lt}, "u"))`:Ie.usePattern(Pt,Ut);_t.fail$data(Zt._`!${Kt}.test(${Ft})`)}};Pt.default=Ft}));r(pn);var ln=s((function(_t,Pt){Object.defineProperty(Pt,"__esModule",{value:!0});const Ft={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:_t,schemaCode:Pt}){const Ft="maxProperties"===_t?"more":"fewer";return Zt.str`should NOT have ${Ft} than ${Pt} items`},params:({schemaCode:_t})=>Zt._`{limit: ${_t}}`},code(_t){const{keyword:Pt,data:Ft,schemaCode:Dt}=_t,Ut="maxProperties"===Pt?Zt.operators.GT:Zt.operators.LT;_t.fail$data(Zt._`Object.keys(${Ft}).length ${Ut} ${Dt}`)}};Pt.default=Ft}));r(ln);var dn=s((function(_t,Pt){Object.defineProperty(Pt,"__esModule",{value:!0});const Ft={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:_t}})=>Zt.str`should have required property '${_t}'`,params:({params:{missingProperty:_t}})=>Zt._`{missingProperty: ${_t}}`},code(_t){const{gen:Pt,schema:Ft,schemaCode:Dt,data:Ut,$data:Lt,it:Kt}=_t,{opts:Yt}=Kt;if(!Lt&&0===Ft.length)return;const ee=Ft.length>=Yt.loopRequired;if(Kt.allErrors?function(){if(ee||Lt)_t.block$data(Zt.nil,u);else for(const Pt of Ft)Ie.checkReportMissingProp(_t,Pt)}():function(){const Kt=Pt.let("missing");if(ee||Lt){const Ft=Pt.let("valid",!0);_t.block$data(Ft,(()=>function(Ft,Lt){_t.setParams({missingProperty:Ft}),Pt.forOf(Ft,Dt,(()=>{Pt.assign(Lt,Ie.propertyInData(Pt,Ut,Ft,Yt.ownProperties)),Pt.if(Zt.not(Lt),(()=>{_t.error(),Pt.break()}))}),Zt.nil)}(Kt,Ft))),_t.ok(Ft)}else Pt.if(Ie.checkMissingProp(_t,Ft,Kt)),Ie.reportMissingProp(_t,Kt),Pt.else()}(),Yt.strictRequired){const Pt=_t.parentSchema.properties,{definedProperties:Dt}=_t.it;for(const _t of Ft)if(void 0===(null==Pt?void 0:Pt[_t])&&!Dt.has(_t)){const Pt=`required property "${_t}" is not defined at "${Kt.schemaEnv.baseId+Kt.errSchemaPath}" (strictRequired)`;De.checkStrictMode(Kt,Pt,Kt.opts.strictRequired)}}function u(){Pt.forOf("prop",Dt,(Ft=>{_t.setParams({missingProperty:Ft}),Pt.if(Ie.noPropertyInData(Pt,Ut,Ft,Yt.ownProperties),(()=>_t.error()))}))}}};Pt.default=Ft}));r(dn);var yn=s((function(_t,Pt){Object.defineProperty(Pt,"__esModule",{value:!0});const Ft={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:_t,schemaCode:Pt}){const Ft="maxItems"===_t?"more":"fewer";return Zt.str`should NOT have ${Ft} than ${Pt} items`},params:({schemaCode:_t})=>Zt._`{limit: ${_t}}`},code(_t){const{keyword:Pt,data:Ft,schemaCode:Dt}=_t,Ut="maxItems"===Pt?Zt.operators.GT:Zt.operators.LT;_t.fail$data(Zt._`${Ft}.length ${Ut} ${Dt}`)}};Pt.default=Ft}));r(yn);var hn=s((function(_t,Pt){Object.defineProperty(Pt,"__esModule",{value:!0});const Ft={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:_t,j:Pt}})=>Zt.str`should NOT have duplicate items (items ## ${Pt} and ${_t} are identical)`,params:({params:{i:_t,j:Pt}})=>Zt._`{i: ${_t}, j: ${Pt}}`},code(_t){const{gen:Pt,data:Ft,$data:Dt,schema:Ut,parentSchema:Lt,schemaCode:Kt,it:Yt}=_t;if(!Dt&&!Ut)return;const ee=Pt.let("valid"),re=Lt.items?Le.getSchemaTypes(Lt.items):[];function d(Dt,Ut){const Lt=Pt.name("item"),Kt=Le.checkDataTypes(re,Lt,Yt.opts.strict,Le.DataType.Wrong),ve=Pt.const("indices",Zt._`{}`);Pt.for(Zt._`;${Dt}--;`,(()=>{Pt.let(Lt,Zt._`${Ft}[${Dt}]`),Pt.if(Kt,Zt._`continue`),re.length>1&&Pt.if(Zt._`typeof ${Lt} == "string"`,Zt._`${Lt} += "_"`),Pt.if(Zt._`typeof ${ve}[${Lt}] == "number"`,(()=>{Pt.assign(Ut,Zt._`${ve}[${Lt}]`),_t.error(),Pt.assign(ee,!1).break()})).code(Zt._`${ve}[${Lt}] = ${Dt}`)}))}function c(Dt,Ut){const Lt=_t.gen.scopeValue("func",{ref:Pe,code:Zt._`require("ajv/dist/compile/equal")`}),Kt=Pt.name("outer");Pt.label(Kt).for(Zt._`;${Dt}--;`,(()=>Pt.for(Zt._`${Ut} = ${Dt}; ${Ut}--;`,(()=>Pt.if(Zt._`${Lt}(${Ft}[${Dt}], ${Ft}[${Ut}])`,(()=>{_t.error(),Pt.assign(ee,!1).break(Kt)}))))))}_t.block$data(ee,(function(){const Dt=Pt.let("i",Zt._`${Ft}.length`),Ut=Pt.let("j");_t.setParams({i:Dt,j:Ut}),Pt.assign(ee,!0),Pt.if(Zt._`${Dt} > 1`,(()=>(re.length>0&&!re.some((_t=>"object"===_t||"array"===_t))?d:c)(Dt,Ut)))}),Zt._`${Kt} === false`),_t.ok(ee)}};Pt.default=Ft}));r(hn);var fn=s((function(_t,Pt){Object.defineProperty(Pt,"__esModule",{value:!0});const Ft={keyword:"const",$data:!0,error:{message:"should be equal to constant",params:({schemaCode:_t})=>Zt._`{allowedValue: ${_t}}`},code(_t){const Pt=_t.gen.scopeValue("func",{ref:Pe,code:Zt._`require("ajv/dist/compile/equal")`});_t.fail$data(Zt._`!${Pt}(${_t.data}, ${_t.schemaCode})`)}};Pt.default=Ft}));r(fn);var mn=s((function(_t,Pt){Object.defineProperty(Pt,"__esModule",{value:!0});const Ft={keyword:"enum",schemaType:"array",$data:!0,error:{message:"should be equal to one of the allowed values",params:({schemaCode:_t})=>Zt._`{allowedValues: ${_t}}`},code(_t){const{gen:Pt,data:Ft,$data:Dt,schema:Ut,schemaCode:Lt,it:Kt}=_t;if(!Dt&&0===Ut.length)throw new Error("enum must have non-empty array");const Yt=Ut.length>=Kt.opts.loopEnum,ee=_t.gen.scopeValue("func",{ref:Pe,code:Zt._`require("ajv/dist/compile/equal")`});let re;if(Yt||Dt)re=Pt.let("valid"),_t.block$data(re,(function(){Pt.assign(re,!1),Pt.forOf("v",Lt,(_t=>Pt.if(Zt._`${ee}(${Ft}, ${_t})`,(()=>Pt.assign(re,!0).break()))))}));else{if(!Array.isArray(Ut))throw new Error("ajv implementation error");const _t=Pt.const("vSchema",Lt);re=Zt.or(...Ut.map(((Pt,Dt)=>function(_t,Pt){const Dt=Ut[Pt];return Dt&&"object"==typeof Dt?Zt._`${ee}(${Ft}, ${_t}[${Pt}])`:Zt._`${Ft} === ${Dt}`}(_t,Dt))))}_t.pass(re)}};Pt.default=Ft}));r(mn);var vn=s((function(_t,Pt){Object.defineProperty(Pt,"__esModule",{value:!0});const Ft=[on.default,an.default,un.default,pn.default,ln.default,dn.default,yn.default,hn.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},fn.default,mn.default];Pt.default=Ft}));r(vn);var gn=s((function(_t,Pt){Object.defineProperty(Pt,"__esModule",{value:!0});const Ft={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:_t}})=>Zt.str`should NOT have more than ${_t} items`,params:({params:{len:_t}})=>Zt._`{limit: ${_t}}`},code(_t){const{gen:Pt,schema:Ft,parentSchema:Dt,data:Ut,it:Lt}=_t,{items:Kt}=Dt;if(!Array.isArray(Kt))return void De.checkStrictMode(Lt,'"additionalItems" is ignored when "items" is not an array of schemas');Lt.items=!0;const Yt=Pt.const("len",Zt._`${Ut}.length`);if(!1===Ft)_t.setParams({len:Kt.length}),_t.pass(Zt._`${Yt} <= ${Kt.length}`);else if("object"==typeof Ft&&!Ue.alwaysValidSchema(Lt,Ft)){const Ft=Pt.var("valid",Zt._`${Yt} <= ${Kt.length}`);Pt.if(Zt.not(Ft),(()=>function(Ft){Pt.forRange("i",Kt.length,Yt,(Dt=>{_t.subschema({keyword:"additionalItems",dataProp:Dt,dataPropType:Se.Type.Num},Ft),Lt.allErrors||Pt.if(Zt.not(Ft),(()=>Pt.break()))}))}(Ft))),_t.ok(Ft)}}};Pt.default=Ft}));r(gn);var bn=s((function(_t,Pt){Object.defineProperty(Pt,"__esModule",{value:!0});const Ft={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(_t){const{gen:Pt,schema:Ft,it:Dt}=_t;if(Array.isArray(Ft))Dt.opts.unevaluated&&Ft.length&&!0!==Dt.items&&(Dt.items=Ue.mergeEvaluated.items(Pt,Ft.length,Dt.items)),function(Ft){const{parentSchema:Ut,data:Lt}=_t;if(Dt.opts.strictTuples&&!function(_t,Pt){return _t===Pt.minItems&&(_t===Pt.maxItems||!1===Pt.additionalItems)}(Ft.length,Ut)){const _t=`"items" is ${Ft.length}-tuple, but minItems or maxItems/additionalItems are not specified or different`;De.checkStrictMode(Dt,_t,Dt.opts.strictTuples)}const Kt=Pt.name("valid"),Yt=Pt.const("len",Zt._`${Lt}.length`);Ft.forEach(((Ft,Ut)=>{Ue.alwaysValidSchema(Dt,Ft)||(Pt.if(Zt._`${Yt} > ${Ut}`,(()=>_t.subschema({keyword:"items",schemaProp:Ut,dataProp:Ut},Kt))),_t.ok(Kt))}))}(Ft);else{if(Dt.items=!0,Ue.alwaysValidSchema(Dt,Ft))return;_t.ok(Ie.validateArray(_t))}}};Pt.default=Ft}));r(bn);var _n=s((function(_t,Pt){Object.defineProperty(Pt,"__esModule",{value:!0});const Ft={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:_t,max:Pt}})=>void 0===Pt?Zt.str`should contain at least ${_t} valid item(s)`:Zt.str`should contain at least ${_t} and no more than ${Pt} valid item(s)`,params:({params:{min:_t,max:Pt}})=>void 0===Pt?Zt._`{minContains: ${_t}}`:Zt._`{minContains: ${_t}, maxContains: ${Pt}}`},code(_t){const{gen:Pt,schema:Ft,parentSchema:Dt,data:Ut,it:Lt}=_t;let Kt,Yt;const{minContains:ee,maxContains:re}=Dt;Lt.opts.next?(Kt=void 0===ee?1:ee,Yt=re):Kt=1;const ve=Pt.const("len",Zt._`${Ut}.length`);if(_t.setParams({min:Kt,max:Yt}),void 0===Yt&&0===Kt)return void De.checkStrictMode(Lt,'"minContains" == 0 without "maxContains": "contains" keyword ignored');if(void 0!==Yt&&Kt>Yt)return De.checkStrictMode(Lt,'"minContains" > "maxContains" is always invalid'),void _t.fail();if(Ue.alwaysValidSchema(Lt,Ft)){let Pt=Zt._`${ve} >= ${Kt}`;return void 0!==Yt&&(Pt=Zt._`${Pt} && ${ve} <= ${Yt}`),void _t.pass(Pt)}Lt.items=!0;const Me=Pt.name("valid");if(void 0===Yt&&1===Kt)y(Me,(()=>Pt.if(Me,(()=>Pt.break()))));else{Pt.let(Me,!1);const _t=Pt.name("_valid"),Ft=Pt.let("count",0);y(_t,(()=>Pt.if(_t,(()=>function(_t){Pt.code(Zt._`${_t}++`),void 0===Yt?Pt.if(Zt._`${_t} >= ${Kt}`,(()=>Pt.assign(Me,!0).break())):(Pt.if(Zt._`${_t} > ${Yt}`,(()=>Pt.assign(Me,!1).break())),1===Kt?Pt.assign(Me,!0):Pt.if(Zt._`${_t} >= ${Kt}`,(()=>Pt.assign(Me,!0))))}(Ft)))))}function y(Ft,Dt){Pt.forRange("i",0,ve,(Pt=>{_t.subschema({keyword:"contains",dataProp:Pt,dataPropType:Se.Type.Num,compositeRule:!0},Ft),Dt()}))}_t.result(Me,(()=>_t.reset()))}};Pt.default=Ft}));r(_n);var wn=s((function(_t,Pt){Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.validateSchemaDeps=Pt.validatePropertyDeps=Pt.error=void 0,Pt.error={message:({params:{property:_t,depsCount:Pt,deps:Ft}})=>{const Dt=1===Pt?"property":"properties";return Zt.str`should have ${Dt} ${Ft} when property ${_t} is present`},params:({params:{property:_t,depsCount:Pt,deps:Ft,missingProperty:Dt}})=>Zt._`{property: ${_t},
    missingProperty: ${Dt},
    depsCount: ${Pt},
    deps: ${Ft}}`};const Ft={keyword:"dependencies",type:"object",schemaType:"object",error:Pt.error,code(_t){const[Pt,Ft]=function({schema:_t}){const Pt={},Ft={};for(const Dt in _t)"__proto__"!==Dt&&((Array.isArray(_t[Dt])?Pt:Ft)[Dt]=_t[Dt]);return[Pt,Ft]}(_t);a(_t,Pt),r(_t,Ft)}};function a(_t,Pt=_t.schema){const{gen:Ft,data:Dt,it:Ut}=_t;if(0===Object.keys(Pt).length)return;const Lt=Ft.let("missing");for(const Kt in Pt){const Yt=Pt[Kt];if(0===Yt.length)continue;const ee=Ie.propertyInData(Ft,Dt,Kt,Ut.opts.ownProperties);_t.setParams({property:Kt,depsCount:Yt.length,deps:Yt.join(", ")}),Ut.allErrors?Ft.if(ee,(()=>{for(const Pt of Yt)Ie.checkReportMissingProp(_t,Pt)})):(Ft.if(Zt._`${ee} && (${Ie.checkMissingProp(_t,Yt,Lt)})`),Ie.reportMissingProp(_t,Lt),Ft.else())}}function r(_t,Pt=_t.schema){const{gen:Ft,data:Dt,keyword:Ut,it:Lt}=_t,Kt=Ft.name("valid");for(const Yt in Pt)Ue.alwaysValidSchema(Lt,Pt[Yt])||(Ft.if(Ie.propertyInData(Ft,Dt,Yt,Lt.opts.ownProperties),(()=>{const Pt=_t.subschema({keyword:Ut,schemaProp:Yt},Kt);_t.mergeValidEvaluated(Pt,Kt)}),(()=>Ft.var(Kt,!0))),_t.ok(Kt))}Pt.validatePropertyDeps=a,Pt.validateSchemaDeps=r,Pt.default=Ft}));r(wn),wn.validateSchemaDeps,wn.validatePropertyDeps,wn.error;var Tn=s((function(_t,Pt){Object.defineProperty(Pt,"__esModule",{value:!0});const Ft={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:({params:_t})=>Zt.str`property name '${_t.propertyName}' is invalid`,params:({params:_t})=>Zt._`{propertyName: ${_t.propertyName}}`},code(_t){const{gen:Pt,schema:Ft,data:Dt,it:Ut}=_t;if(Ue.alwaysValidSchema(Ut,Ft))return;const Lt=Pt.name("valid");Pt.forIn("key",Dt,(Ft=>{_t.setParams({propertyName:Ft}),_t.subschema({keyword:"propertyNames",data:Ft,dataTypes:["string"],propertyName:Ft,compositeRule:!0},Lt),Pt.if(Zt.not(Lt),(()=>{_t.error(!0),Ut.allErrors||Pt.break()}))})),_t.ok(Lt)}};Pt.default=Ft}));r(Tn);var En=s((function(_t,Pt){Object.defineProperty(Pt,"__esModule",{value:!0});const Ft={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"should NOT have additional properties",params:({params:_t})=>Zt._`{additionalProperty: ${_t.additionalProperty}}`},code(_t){const{gen:Pt,schema:Ft,parentSchema:Dt,data:Ut,errsCount:Lt,it:Kt}=_t;if(!Lt)throw new Error("ajv implementation error");const{allErrors:Yt,opts:re}=Kt;if(Kt.props=!0,"all"!==re.removeAdditional&&Ue.alwaysValidSchema(Kt,Ft))return;const ve=Ie.allSchemaProperties(Dt.properties),Me=Ie.allSchemaProperties(Dt.patternProperties);function y(_t){Pt.code(Zt._`delete ${Ut}[${_t}]`)}function m(Dt){if("all"===re.removeAdditional||re.removeAdditional&&!1===Ft)y(Dt);else{if(!1===Ft)return _t.setParams({additionalProperty:Dt}),_t.error(),void(Yt||Pt.break());if("object"==typeof Ft&&!Ue.alwaysValidSchema(Kt,Ft)){const Ft=Pt.name("valid");"failing"===re.removeAdditional?(f(Dt,Ft,!1),Pt.if(Zt.not(Ft),(()=>{_t.reset(),y(Dt)}))):(f(Dt,Ft),Yt||Pt.if(Zt.not(Ft),(()=>Pt.break())))}}}function f(Pt,Ft,Dt){const Ut={keyword:"additionalProperties",dataProp:Pt,dataPropType:Se.Type.Str};!1===Dt&&Object.assign(Ut,{compositeRule:!0,createErrors:!1,allErrors:!1}),_t.subschema(Ut,Ft)}Pt.forIn("key",Ut,(_t=>{ve.length||Me.length?Pt.if(function(_t){let Ft;if(ve.length>8){const Ut=Ue.schemaRefOrVal(Kt,Dt.properties,"properties");Ft=Ie.isOwnProperty(Pt,Ut,_t)}else Ft=ve.length?Zt.or(...ve.map((Pt=>Zt._`${_t} === ${Pt}`))):Zt.nil;return Me.length&&(Ft=Zt.or(Ft,...Me.map((Ft=>Zt._`${Ie.usePattern(Pt,Ft)}.test(${_t})`)))),Zt.not(Ft)}(_t),(()=>m(_t))):m(_t)})),_t.ok(Zt._`${Lt} === ${ee.default.errors}`)}};Pt.default=Ft}));r(En);var xn=s((function(_t,Pt){Object.defineProperty(Pt,"__esModule",{value:!0});const Ft={keyword:"properties",type:"object",schemaType:"object",code(_t){const{gen:Pt,schema:Ft,parentSchema:Dt,data:Ut,it:Lt}=_t;"all"===Lt.opts.removeAdditional&&void 0===Dt.additionalProperties&&En.default.code(new je.default(Lt,En.default,"additionalProperties"));const Kt=Ie.allSchemaProperties(Ft);for(const _t of Kt)Lt.definedProperties.add(_t);Lt.opts.unevaluated&&Kt.length&&!0!==Lt.props&&(Lt.props=Ue.mergeEvaluated.props(Pt,Ue.toHash(Kt),Lt.props));const Yt=Kt.filter((_t=>!Ue.alwaysValidSchema(Lt,Ft[_t])));if(0===Yt.length)return;const Zt=Pt.name("valid");for(const Ft of Yt)u(Ft)?d(Ft):(Pt.if(Ie.propertyInData(Pt,Ut,Ft,Lt.opts.ownProperties)),d(Ft),Lt.allErrors||Pt.else().var(Zt,!0),Pt.endIf()),_t.it.definedProperties.add(Ft),_t.ok(Zt);function u(_t){return Lt.opts.useDefaults&&!Lt.compositeRule&&void 0!==Ft[_t].default}function d(Pt){_t.subschema({keyword:"properties",schemaProp:Pt,dataProp:Pt},Zt)}}};Pt.default=Ft}));r(xn);var Cn=s((function(_t,Pt){Object.defineProperty(Pt,"__esModule",{value:!0});const Ft={keyword:"patternProperties",type:"object",schemaType:"object",code(_t){const{gen:Pt,schema:Ft,data:Dt,parentSchema:Ut,it:Lt}=_t,{opts:Kt}=Lt,Yt=Ie.schemaProperties(Lt,Ft);if(0===Yt.length)return;const ee=Kt.strict&&!Kt.allowMatchingProperties&&Ut.properties,re=Pt.name("valid");!0===Lt.props||Lt.props instanceof Zt.Name||(Lt.props=Ue.evaluatedPropsToName(Pt,Lt.props));const{props:ve}=Lt;function c(_t){for(const Pt in ee)new RegExp(_t).test(Pt)&&De.checkStrictMode(Lt,`property ${Pt} matches pattern ${_t} (use allowMatchingProperties)`)}function y(Ft){Pt.forIn("key",Dt,(Dt=>{Pt.if(Zt._`${Ie.usePattern(Pt,Ft)}.test(${Dt})`,(()=>{_t.subschema({keyword:"patternProperties",schemaProp:Ft,dataProp:Dt,dataPropType:Se.Type.Str},re),Lt.opts.unevaluated&&!0!==ve?Pt.assign(Zt._`${ve}[${Dt}]`,!0):Lt.allErrors||Pt.if(Zt.not(re),(()=>Pt.break()))}))}))}!function(){for(const _t of Yt)ee&&c(_t),Lt.allErrors?y(_t):(Pt.var(re,!0),y(_t),Pt.if(re))}()}};Pt.default=Ft}));r(Cn);var Mn=s((function(_t,Pt){Object.defineProperty(Pt,"__esModule",{value:!0});const Ft={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(_t){const{gen:Pt,schema:Ft,it:Dt}=_t;if(Ue.alwaysValidSchema(Dt,Ft))return void _t.fail();const Ut=Pt.name("valid");_t.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},Ut),_t.result(Ut,(()=>_t.error()),(()=>_t.reset()))},error:{message:"should NOT be valid"}};Pt.default=Ft}));r(Mn);var An=s((function(_t,Pt){Object.defineProperty(Pt,"__esModule",{value:!0});const Ft={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Ie.validateUnion,error:{message:"should match some schema in anyOf"}};Pt.default=Ft}));r(An);var Sn=s((function(_t,Pt){Object.defineProperty(Pt,"__esModule",{value:!0});const Ft={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"should match exactly one schema in oneOf",params:({params:_t})=>Zt._`{passingSchemas: ${_t.passing}}`},code(_t){const{gen:Pt,schema:Ft,it:Dt}=_t;if(!Array.isArray(Ft))throw new Error("ajv implementation error");const Ut=Ft,Lt=Pt.let("valid",!1),Kt=Pt.let("passing",null),Yt=Pt.name("_valid");_t.setParams({passing:Kt}),Pt.block((function(){Ut.forEach(((Ft,Ut)=>{let ee;Ue.alwaysValidSchema(Dt,Ft)?Pt.var(Yt,!0):ee=_t.subschema({keyword:"oneOf",schemaProp:Ut,compositeRule:!0},Yt),Ut>0&&Pt.if(Zt._`${Yt} && ${Lt}`).assign(Lt,!1).assign(Kt,Zt._`[${Kt}, ${Ut}]`).else(),Pt.if(Yt,(()=>{Pt.assign(Lt,!0),Pt.assign(Kt,Ut),ee&&_t.mergeEvaluated(ee,Zt.Name)}))}))})),_t.result(Lt,(()=>_t.reset()),(()=>_t.error(!0)))}};Pt.default=Ft}));r(Sn);var In=s((function(_t,Pt){Object.defineProperty(Pt,"__esModule",{value:!0});const Ft={keyword:"allOf",schemaType:"array",code(_t){const{gen:Pt,schema:Ft,it:Dt}=_t;if(!Array.isArray(Ft))throw new Error("ajv implementation error");const Ut=Pt.name("valid");Ft.forEach(((Pt,Ft)=>{if(Ue.alwaysValidSchema(Dt,Pt))return;const Lt=_t.subschema({keyword:"allOf",schemaProp:Ft},Ut);_t.ok(Ut),_t.mergeEvaluated(Lt)}))}};Pt.default=Ft}));r(In);var Rn=s((function(_t,Pt){Object.defineProperty(Pt,"__esModule",{value:!0});const Ft={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:_t})=>Zt.str`should match "${_t.ifClause}" schema`,params:({params:_t})=>Zt._`{failingKeyword: ${_t.ifClause}}`},code(_t){const{gen:Pt,parentSchema:Ft,it:Dt}=_t;void 0===Ft.then&&void 0===Ft.else&&De.checkStrictMode(Dt,'"if" without "then" and "else" is ignored');const Ut=a(Dt,"then"),Lt=a(Dt,"else");if(!Ut&&!Lt)return;const Kt=Pt.let("valid",!0),Yt=Pt.name("_valid");if(function(){const Pt=_t.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},Yt);_t.mergeEvaluated(Pt)}(),_t.reset(),Ut&&Lt){const Ft=Pt.let("ifClause");_t.setParams({ifClause:Ft}),Pt.if(Yt,u("then",Ft),u("else",Ft))}else Ut?Pt.if(Yt,u("then")):Pt.if(Zt.not(Yt),u("else"));function u(Ft,Dt){return()=>{const Ut=_t.subschema({keyword:Ft},Yt);Pt.assign(Kt,Yt),_t.mergeValidEvaluated(Ut,Kt),Dt?Pt.assign(Dt,Zt._`${Ft}`):_t.setParams({ifClause:Ft})}}_t.pass(Kt,(()=>_t.error(!0)))}};function a(_t,Pt){const Ft=_t.schema[Pt];return void 0!==Ft&&!Ue.alwaysValidSchema(_t,Ft)}Pt.default=Ft}));r(Rn);var Nn=s((function(_t,Pt){Object.defineProperty(Pt,"__esModule",{value:!0});const Ft={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:_t,parentSchema:Pt,it:Ft}){void 0===Pt.if&&De.checkStrictMode(Ft,`"${_t}" without "if" is ignored`)}};Pt.default=Ft}));r(Nn);var Pn=s((function(_t,Pt){Object.defineProperty(Pt,"__esModule",{value:!0});const Ft=[Mn.default,An.default,Sn.default,In.default,Rn.default,Nn.default,gn.default,bn.default,_n.default,Tn.default,En.default,wn.default,xn.default,Cn.default];Pt.default=Ft}));r(Pn);var On=s((function(_t,Pt){Object.defineProperty(Pt,"__esModule",{value:!0});const Ft={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:_t})=>Zt.str`should match format "${_t}"`,params:({schemaCode:_t})=>Zt._`{format: ${_t}}`},code(_t,Pt){const{gen:Ft,data:Dt,$data:Ut,schema:Lt,schemaCode:Kt,it:Yt}=_t,{opts:ee,errSchemaPath:re,schemaEnv:ve,self:Me}=Yt;ee.validateFormats&&(Ut?function(){const Ut=Ft.scopeValue("formats",{ref:Me.formats,code:ee.code.formats}),Lt=Ft.const("fDef",Zt._`${Ut}[${Kt}]`),Yt=Ft.let("fType"),re=Ft.let("format");Ft.if(Zt._`typeof ${Lt} == "object" && !(${Lt} instanceof RegExp)`,(()=>Ft.assign(Yt,Zt._`${Lt}.type || "string"`).assign(re,Zt._`${Lt}.validate`)),(()=>Ft.assign(Yt,Zt._`"string"`).assign(re,Lt))),_t.fail$data(Zt.or(!1===ee.strict?Zt.nil:Zt._`${Kt} && !${re}`,function(){const _t=ve.$async?Zt._`(${Lt}.async ? await ${re}(${Dt}) : ${re}(${Dt}))`:Zt._`${re}(${Dt})`,Ft=Zt._`(typeof ${re} == "function" ? ${_t} : ${re}.test(${Dt}))`;return Zt._`${re} && ${re} !== true && ${Yt} === ${Pt} && !${Ft}`}()))}():function(){const Ut=Me.formats[Lt];if(!Ut)return void function(){if(!1!==ee.strict)throw new Error(e());function e(){return`unknown format "${Lt}" ignored in schema at path "${re}"`}Me.logger.warn(e())}();if(!0===Ut)return;const[Kt,Yt,Se]=function(_t){const Pt=Ft.scopeValue("formats",{key:Lt,ref:_t,code:ee.code.formats?Zt._`${ee.code.formats}${Zt.getProperty(Lt)}`:void 0});return"object"!=typeof _t||_t instanceof RegExp?["string",_t,Pt]:[_t.type||"string",_t.validate,Zt._`${Pt}.validate`]}(Ut);Kt===Pt&&_t.pass(function(){if("object"==typeof Ut&&!(Ut instanceof RegExp)&&Ut.async){if(!ve.$async)throw new Error("async format in sync schema");return Zt._`await ${Se}(${Dt})`}return"function"==typeof Yt?Zt._`${Se}(${Dt})`:Zt._`${Se}.test(${Dt})`}())}())}};Pt.default=Ft}));r(On);var kn=s((function(_t,Pt){Object.defineProperty(Pt,"__esModule",{value:!0});const Ft=[On.default];Pt.default=Ft}));r(kn);var Fn=s((function(_t,Pt){Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.contentVocabulary=Pt.metadataVocabulary=void 0,Pt.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],Pt.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]}));r(Fn),Fn.contentVocabulary,Fn.metadataVocabulary;var $n=s((function(_t,Pt){Object.defineProperty(Pt,"__esModule",{value:!0});const Ft=[rn.default,vn.default,Pn.default,kn.default,Fn.metadataVocabulary,Fn.contentVocabulary];Pt.default=Ft}));r($n);var zn="http://json-schema.org/draft-07/schema#",Dn="http://json-schema.org/draft-07/schema#",Un="Core schema meta-schema",Bn={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},Ln=["object","boolean"],jn={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},Hn={$schema:zn,$id:Dn,title:Un,definitions:Bn,type:Ln,properties:jn,default:!0},Vn=i(Object.freeze({__proto__:null,$schema:zn,$id:Dn,title:Un,definitions:Bn,type:Ln,properties:jn,default:Hn})),qn=s((function(_t,Pt){Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.CodeGen=Pt.Name=Pt.nil=Pt.stringify=Pt.str=Pt._=Pt.KeywordCxt=void 0,Pt.KeywordCxt=je.default,Object.defineProperty(Pt,"_",{enumerable:!0,get:function(){return Zt._}}),Object.defineProperty(Pt,"str",{enumerable:!0,get:function(){return Zt.str}}),Object.defineProperty(Pt,"stringify",{enumerable:!0,get:function(){return Zt.stringify}}),Object.defineProperty(Pt,"nil",{enumerable:!0,get:function(){return Zt.nil}}),Object.defineProperty(Pt,"Name",{enumerable:!0,get:function(){return Zt.Name}}),Object.defineProperty(Pt,"CodeGen",{enumerable:!0,get:function(){return Zt.CodeGen}});const Ft=["/properties"],Dt="http://json-schema.org/draft-07/schema";class r extends tn.default{_addVocabularies(){super._addVocabularies(),$n.default.forEach((_t=>this.addVocabulary(_t)))}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const _t=this.opts.$data?this.$dataMetaSchema(Vn,Ft):Vn;this.addMetaSchema(_t,Dt,!1),this.refs["http://json-schema.org/schema"]=Dt}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(Dt)?Dt:void 0)}}Pt.default=r}));r(qn),qn.CodeGen,qn.Name,qn.nil,qn.stringify,qn.str,qn._,qn.KeywordCxt;var Gn=s((function(_t,Pt){var Ft=this&&this.__importDefault||function(_t){return _t&&_t.__esModule?_t:{default:_t}};Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.validateType=Pt.generateValidator=Pt.Ajv=void 0;const Dt=Ft(qn);Pt.Ajv=Dt.default,Pt.generateValidator=function(_t){return(new Dt.default).compile(_t)},Pt.validateType=function(_t,Pt){return _t.validate(Pt)}}));r(Gn),Gn.validateType,Gn.generateValidator,Gn.Ajv;var Wn=s((function(_t,Pt){var Ft;Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.getChainId=Pt.ChainName=void 0,function(_t){_t.ETHEREUM_MAINNET="MAINNET",_t.ETHEREUM_ROPSTEN="ROPSTEN",_t.ETHEREUM_RINKEBY="RINKEBY",_t.ETHEREUM_GOERLI="GOERLI",_t.ETHEREUM_KOVAN="KOVAN",_t.MATIC_MAINNET="MATIC",_t.MATIC_MUMBAI="MUMBAI"}(Ft=Pt.ChainName||(Pt.ChainName={})),Pt.getChainId=function(_t){switch(_t){case Ft.ETHEREUM_MAINNET:return Kn.ChainId.ETHEREUM_MAINNET;case Ft.ETHEREUM_ROPSTEN:return Kn.ChainId.ETHEREUM_ROPSTEN;case Ft.ETHEREUM_RINKEBY:return Kn.ChainId.ETHEREUM_RINKEBY;case Ft.ETHEREUM_GOERLI:return Kn.ChainId.ETHEREUM_GOERLI;case Ft.ETHEREUM_KOVAN:return Kn.ChainId.ETHEREUM_KOVAN;case Ft.MATIC_MAINNET:return Kn.ChainId.MATIC_MAINNET;case Ft.MATIC_MUMBAI:return Kn.ChainId.MATIC_MUMBAI;default:return null}},function(_t){_t.schema={type:"string",enum:Object.values(_t)},_t.validate=Gn.generateValidator(_t.schema)}(Ft=Pt.ChainName||(Pt.ChainName={}))}));r(Wn),Wn.getChainId,Wn.ChainName;var Kn=s((function(_t,Pt){var Ft;Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.getChainName=Pt.ChainId=void 0,function(_t){_t[_t.ETHEREUM_MAINNET=1]="ETHEREUM_MAINNET",_t[_t.ETHEREUM_ROPSTEN=3]="ETHEREUM_ROPSTEN",_t[_t.ETHEREUM_RINKEBY=4]="ETHEREUM_RINKEBY",_t[_t.ETHEREUM_GOERLI=5]="ETHEREUM_GOERLI",_t[_t.ETHEREUM_KOVAN=42]="ETHEREUM_KOVAN",_t[_t.MATIC_MAINNET=137]="MATIC_MAINNET",_t[_t.MATIC_MUMBAI=80001]="MATIC_MUMBAI"}(Ft=Pt.ChainId||(Pt.ChainId={})),Pt.getChainName=function(_t){switch(_t){case Ft.ETHEREUM_MAINNET:return Wn.ChainName.ETHEREUM_MAINNET;case Ft.ETHEREUM_ROPSTEN:return Wn.ChainName.ETHEREUM_ROPSTEN;case Ft.ETHEREUM_RINKEBY:return Wn.ChainName.ETHEREUM_RINKEBY;case Ft.ETHEREUM_GOERLI:return Wn.ChainName.ETHEREUM_GOERLI;case Ft.ETHEREUM_KOVAN:return Wn.ChainName.ETHEREUM_KOVAN;case Ft.MATIC_MAINNET:return Wn.ChainName.MATIC_MAINNET;case Ft.MATIC_MUMBAI:return Wn.ChainName.MATIC_MUMBAI;default:return null}},function(_t){_t.schema={type:"number",enum:Object.values(_t)},_t.validate=Gn.generateValidator(_t.schema)}(Ft=Pt.ChainId||(Pt.ChainId={}))}));r(Kn),Kn.getChainName,Kn.ChainId;var Jn=s((function(_t,Pt){var Ft;Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.Network=void 0,(Ft=Pt.Network||(Pt.Network={})).ETHEREUM="ETHEREUM",Ft.MATIC="MATIC",function(_t){_t.schema={type:"string",enum:Object.values(_t)},_t.validate=Gn.generateValidator(_t.schema)}(Pt.Network||(Pt.Network={}))}));r(Jn),Jn.Network;var Yn=s((function(_t,Pt){var Ft;Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.MetaTransaction=void 0,(Ft=Pt.MetaTransaction||(Pt.MetaTransaction={})).schema={type:"object",properties:{from:{type:"string"},params:{type:"array",items:[{type:"string"},{type:"string"}],additionalItems:!1,minItems:2}},additionalProperties:!1,required:["from","params"]},Ft.validate=Gn.generateValidator(Ft.schema)}));r(Yn),Yn.MetaTransaction;var Qn=s((function(_t,Pt){var Ft=this&&this.__createBinding||(Object.create?function(_t,Pt,Ft,Dt){void 0===Dt&&(Dt=Ft),Object.defineProperty(_t,Dt,{enumerable:!0,get:function(){return Pt[Ft]}})}:function(_t,Pt,Ft,Dt){void 0===Dt&&(Dt=Ft),_t[Dt]=Pt[Ft]}),Dt=this&&this.__exportStar||function(_t,Pt){for(var Dt in _t)"default"===Dt||Object.prototype.hasOwnProperty.call(Pt,Dt)||Ft(Pt,_t,Dt)};Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.MetaTransaction=Pt.Network=Pt.getChainId=Pt.ChainName=Pt.getChainName=Pt.ChainId=void 0,Dt(Gn,Pt),Object.defineProperty(Pt,"ChainId",{enumerable:!0,get:function(){return Kn.ChainId}}),Object.defineProperty(Pt,"getChainName",{enumerable:!0,get:function(){return Kn.getChainName}}),Object.defineProperty(Pt,"ChainName",{enumerable:!0,get:function(){return Wn.ChainName}}),Object.defineProperty(Pt,"getChainId",{enumerable:!0,get:function(){return Wn.getChainId}}),Object.defineProperty(Pt,"Network",{enumerable:!0,get:function(){return Jn.Network}}),Object.defineProperty(Pt,"MetaTransaction",{enumerable:!0,get:function(){return Yn.MetaTransaction}})}));r(Qn),Qn.MetaTransaction,Qn.Network,Qn.getChainId,Qn.ChainName,Qn.getChainName;var Zn=Qn.ChainId;const Xn={[_t.ContractName.Bid]:[{constant:!0,inputs:[{name:"_tokenAddress",type:"address"},{name:"_tokenId",type:"uint256"},{name:"_bidder",type:"address"}],name:"getBidByBidder",outputs:[{name:"bidIndex",type:"uint256"},{name:"bidId",type:"bytes32"},{name:"bidder",type:"address"},{name:"price",type:"uint256"},{name:"expiresAt",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"ERC721Composable_ValidateFingerprint",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"",type:"address"},{name:"_tokenId",type:"uint256"},{name:"_data",type:"bytes"}],name:"onERC721Received",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_ownerCutPerMillion",type:"uint256"}],name:"setOwnerCutPerMillion",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"",type:"address"},{name:"",type:"uint256"},{name:"",type:"address"}],name:"bidIdByTokenAndBidder",outputs:[{name:"",type:"bytes32"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"address"},{name:"",type:"uint256"}],name:"bidCounterByToken",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"ERC721_Interface",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_tokenAddress",type:"address"},{name:"_tokenId",type:"uint256"}],name:"cancelBid",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"unpause",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_tokenAddress",type:"address"},{name:"_tokenId",type:"uint256"},{name:"_index",type:"uint256"}],name:"getBidByToken",outputs:[{name:"",type:"bytes32"},{name:"",type:"address"},{name:"",type:"uint256"},{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"account",type:"address"}],name:"isPauser",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"ERC721_Received",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"paused",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"renouncePauser",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"renounceOwnership",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"manaToken",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_tokenAddress",type:"address"},{name:"_tokenId",type:"uint256"},{name:"_price",type:"uint256"},{name:"_duration",type:"uint256"}],name:"placeBid",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"account",type:"address"}],name:"addPauser",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"pause",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"owner",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"isOwner",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"ONE_MILLION",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"ownerCutPerMillion",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"MAX_BID_DURATION",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_tokenAddress",type:"address"},{name:"_tokenId",type:"uint256"},{name:"_price",type:"uint256"},{name:"_duration",type:"uint256"},{name:"_fingerprint",type:"bytes"}],name:"placeBid",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"",type:"bytes32"}],name:"bidIndexByBidId",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_tokenAddresses",type:"address[]"},{name:"_tokenIds",type:"uint256[]"},{name:"_bidders",type:"address[]"}],name:"removeExpiredBids",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"MIN_BID_DURATION",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{inputs:[{name:"_manaToken",type:"address"},{name:"_owner",type:"address"}],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,name:"_id",type:"bytes32"},{indexed:!0,name:"_tokenAddress",type:"address"},{indexed:!0,name:"_tokenId",type:"uint256"},{indexed:!0,name:"_bidder",type:"address"},{indexed:!1,name:"_price",type:"uint256"},{indexed:!1,name:"_expiresAt",type:"uint256"},{indexed:!1,name:"_fingerprint",type:"bytes"}],name:"BidCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"_id",type:"bytes32"},{indexed:!0,name:"_tokenAddress",type:"address"},{indexed:!0,name:"_tokenId",type:"uint256"},{indexed:!1,name:"_bidder",type:"address"},{indexed:!0,name:"_seller",type:"address"},{indexed:!1,name:"_price",type:"uint256"},{indexed:!1,name:"_fee",type:"uint256"}],name:"BidAccepted",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"_id",type:"bytes32"},{indexed:!0,name:"_tokenAddress",type:"address"},{indexed:!0,name:"_tokenId",type:"uint256"},{indexed:!0,name:"_bidder",type:"address"}],name:"BidCancelled",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"_ownerCutPerMillion",type:"uint256"}],name:"ChangedOwnerCutPerMillion",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"account",type:"address"}],name:"Paused",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"account",type:"address"}],name:"Unpaused",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"}],name:"PauserAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"}],name:"PauserRemoved",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"previousOwner",type:"address"},{indexed:!0,name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"}],[_t.ContractName.CollectionFactory]:[{inputs:[{internalType:"address",name:"_owner",type:"address"},{internalType:"address",name:"_implementation",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_implementation",type:"address"},{indexed:!1,internalType:"bytes32",name:"_codeHash",type:"bytes32"},{indexed:!1,internalType:"bytes",name:"_code",type:"bytes"}],name:"ImplementationSet",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_address",type:"address"},{indexed:!1,internalType:"bytes32",name:"_salt",type:"bytes32"}],name:"ProxyCreated",type:"event"},{inputs:[],name:"code",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[],name:"codeHash",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"collections",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"collectionsSize",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"_salt",type:"bytes32"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"createCollection",outputs:[{internalType:"address",name:"addr",type:"address"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"_salt",type:"bytes32"},{internalType:"address",name:"_address",type:"address"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"getAddress",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"implementation",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"isCollectionFromFactory",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"}],[_t.ContractName.CollectionManager]:[{inputs:[{internalType:"address",name:"_owner",type:"address"},{internalType:"contract IERC20",name:"_acceptedToken",type:"address"},{internalType:"address",name:"_committee",type:"address"},{internalType:"address",name:"_feesCollector",type:"address"},{internalType:"contract IRarities",name:"_rarities",type:"address"},{internalType:"bytes4[]",name:"_committeeMethods",type:"bytes4[]"},{internalType:"bool[]",name:"_committeeValues",type:"bool[]"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"contract IERC20",name:"_oldAcceptedToken",type:"address"},{indexed:!0,internalType:"contract IERC20",name:"_newAcceptedToken",type:"address"}],name:"AcceptedTokenSet",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes4",name:"_method",type:"bytes4"},{indexed:!1,internalType:"bool",name:"_isAllowed",type:"bool"}],name:"CommitteeMethodSet",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_oldCommittee",type:"address"},{indexed:!0,internalType:"address",name:"_newCommittee",type:"address"}],name:"CommitteeSet",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_oldFeesCollector",type:"address"},{indexed:!0,internalType:"address",name:"_newFeesCollector",type:"address"}],name:"FeesCollectorSet",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"userAddress",type:"address"},{indexed:!1,internalType:"address",name:"relayerAddress",type:"address"},{indexed:!1,internalType:"bytes",name:"functionSignature",type:"bytes"}],name:"MetaTransactionExecuted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"contract IRarities",name:"_oldRarities",type:"address"},{indexed:!0,internalType:"contract IRarities",name:"_newRarities",type:"address"}],name:"RaritiesSet",type:"event"},{inputs:[],name:"acceptedToken",outputs:[{internalType:"contract IERC20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"",type:"bytes4"}],name:"allowedCommitteeMethods",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"committee",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract IForwarder",name:"_forwarder",type:"address"},{internalType:"contract IERC721CollectionFactoryV2",name:"_factory",type:"address"},{internalType:"bytes32",name:"_salt",type:"bytes32"},{internalType:"string",name:"_name",type:"string"},{internalType:"string",name:"_symbol",type:"string"},{internalType:"string",name:"_baseURI",type:"string"},{internalType:"address",name:"_creator",type:"address"},{components:[{internalType:"string",name:"rarity",type:"string"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"address",name:"beneficiary",type:"address"},{internalType:"string",name:"metadata",type:"string"}],internalType:"struct IERC721CollectionV2.ItemParam[]",name:"_items",type:"tuple[]"}],name:"createCollection",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"domainSeparator",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"userAddress",type:"address"},{internalType:"bytes",name:"functionSignature",type:"bytes"},{internalType:"bytes32",name:"sigR",type:"bytes32"},{internalType:"bytes32",name:"sigS",type:"bytes32"},{internalType:"uint8",name:"sigV",type:"uint8"}],name:"executeMetaTransaction",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"payable",type:"function"},{inputs:[],name:"feesCollector",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getChainId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getNonce",outputs:[{internalType:"uint256",name:"nonce",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract IForwarder",name:"_forwarder",type:"address"},{internalType:"contract IERC721CollectionV2",name:"_collection",type:"address"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"manageCollection",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"pricePerItem",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"rarities",outputs:[{internalType:"contract IRarities",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IERC20",name:"_newAcceptedToken",type:"address"}],name:"setAcceptedToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_newCommittee",type:"address"}],name:"setCommittee",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4[]",name:"_methods",type:"bytes4[]"},{internalType:"bool[]",name:"_values",type:"bool[]"}],name:"setCommitteeMethods",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_newFeesCollector",type:"address"}],name:"setFeesCollector",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IRarities",name:"_newRarities",type:"address"}],name:"setRarities",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"}],[_t.ContractName.CollectionStore]:[{inputs:[{internalType:"address",name:"_owner",type:"address"},{internalType:"contract IERC20",name:"_acceptedToken",type:"address"},{internalType:"address",name:"_feeOwner",type:"address"},{internalType:"uint256",name:"_fee",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{components:[{internalType:"contract IERC721CollectionV2",name:"collection",type:"address"},{internalType:"uint256[]",name:"ids",type:"uint256[]"},{internalType:"uint256[]",name:"prices",type:"uint256[]"},{internalType:"address[]",name:"beneficiaries",type:"address[]"}],indexed:!1,internalType:"struct CollectionStore.ItemToBuy[]",name:"_itemsToBuy",type:"tuple[]"}],name:"Bought",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"userAddress",type:"address"},{indexed:!1,internalType:"address",name:"relayerAddress",type:"address"},{indexed:!1,internalType:"bytes",name:"functionSignature",type:"bytes"}],name:"MetaTransactionExecuted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"_oldFee",type:"uint256"},{indexed:!1,internalType:"uint256",name:"_newFee",type:"uint256"}],name:"SetFee",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_oldFeeOwner",type:"address"},{indexed:!0,internalType:"address",name:"_newFeeOwner",type:"address"}],name:"SetFeeOwner",type:"event"},{inputs:[],name:"BASE_FEE",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"acceptedToken",outputs:[{internalType:"contract IERC20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"contract IERC721CollectionV2",name:"collection",type:"address"},{internalType:"uint256[]",name:"ids",type:"uint256[]"},{internalType:"uint256[]",name:"prices",type:"uint256[]"},{internalType:"address[]",name:"beneficiaries",type:"address[]"}],internalType:"struct CollectionStore.ItemToBuy[]",name:"_itemsToBuy",type:"tuple[]"}],name:"buy",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"domainSeparator",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"userAddress",type:"address"},{internalType:"bytes",name:"functionSignature",type:"bytes"},{internalType:"bytes32",name:"sigR",type:"bytes32"},{internalType:"bytes32",name:"sigS",type:"bytes32"},{internalType:"uint8",name:"sigV",type:"uint8"}],name:"executeMetaTransaction",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"payable",type:"function"},{inputs:[],name:"fee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"feeOwner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getChainId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"contract IERC721CollectionV2",name:"_collection",type:"address"},{internalType:"uint256",name:"_itemId",type:"uint256"}],name:"getItemBuyData",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getNonce",outputs:[{internalType:"uint256",name:"nonce",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_newFee",type:"uint256"}],name:"setFee",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_newFeeOwner",type:"address"}],name:"setFeeOwner",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"}],[_t.ContractName.Committee]:[{inputs:[{internalType:"address",name:"_owner",type:"address"},{internalType:"address[]",name:"_members",type:"address[]"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_member",type:"address"},{indexed:!1,internalType:"bool",name:"_value",type:"bool"}],name:"MemberSet",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"userAddress",type:"address"},{indexed:!1,internalType:"address",name:"relayerAddress",type:"address"},{indexed:!1,internalType:"bytes",name:"functionSignature",type:"bytes"}],name:"MetaTransactionExecuted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[],name:"domainSeparator",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"userAddress",type:"address"},{internalType:"bytes",name:"functionSignature",type:"bytes"},{internalType:"bytes32",name:"sigR",type:"bytes32"},{internalType:"bytes32",name:"sigS",type:"bytes32"},{internalType:"uint8",name:"sigV",type:"uint8"}],name:"executeMetaTransaction",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"payable",type:"function"},{inputs:[],name:"getChainId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getNonce",outputs:[{internalType:"uint256",name:"nonce",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract ICollectionManager",name:"_collectionManager",type:"address"},{internalType:"address",name:"_forwarder",type:"address"},{internalType:"address",name:"_collection",type:"address"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"manageCollection",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"members",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address[]",name:"_members",type:"address[]"},{internalType:"bool[]",name:"_values",type:"bool[]"}],name:"setMembers",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"}],[_t.ContractName.ERC20]:[{constant:!0,inputs:[],name:"mintingFinished",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"unpause",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_amount",type:"uint256"}],name:"mint",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_value",type:"uint256"}],name:"burn",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"paused",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"finishMinting",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"pause",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"owner",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"remaining",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"to",type:"address"},{name:"amount",type:"uint256"}],name:"setBalance",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{anonymous:!1,inputs:[{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"amount",type:"uint256"}],name:"Mint",type:"event"},{anonymous:!1,inputs:[],name:"MintFinished",type:"event"},{anonymous:!1,inputs:[],name:"Pause",type:"event"},{anonymous:!1,inputs:[],name:"Unpause",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"burner",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Burn",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Transfer",type:"event"}],[_t.ContractName.ERC721]:[{constant:!0,inputs:[{name:"_interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_tokenId",type:"uint256"}],name:"getApproved",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_tokenId",type:"uint256"}],name:"approve",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"InterfaceId_ERC165",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_tokenId",type:"uint256"}],name:"transferFrom",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_tokenId",type:"uint256"}],name:"transfer",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_tokenId",type:"uint256"}],name:"exists",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_index",type:"uint256"}],name:"tokenByIndex",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_tokenId",type:"uint256"}],name:"ownerOf",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_approved",type:"bool"}],name:"setApprovalForAll",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_tokenId",type:"uint256"},{name:"_data",type:"bytes"}],name:"safeTransferFrom",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_tokenId",type:"uint256"}],name:"tokenURI",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_operator",type:"address"}],name:"isApprovedForAll",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{inputs:[{name:"_name",type:"string"},{name:"_symbol",type:"string"}],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,name:"_from",type:"address"},{indexed:!0,name:"_to",type:"address"},{indexed:!0,name:"_tokenId",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"_owner",type:"address"},{indexed:!0,name:"_approved",type:"address"},{indexed:!0,name:"_tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"_owner",type:"address"},{indexed:!0,name:"_operator",type:"address"},{indexed:!1,name:"_approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_tokenId",type:"uint256"},{name:"_tokenURI",type:"string"}],name:"mintUniqueTokenTo",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"}],[_t.ContractName.ERC721CollectionV2]:[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"_itemId",type:"uint256"},{components:[{internalType:"string",name:"rarity",type:"string"},{internalType:"uint256",name:"maxSupply",type:"uint256"},{internalType:"uint256",name:"totalSupply",type:"uint256"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"address",name:"beneficiary",type:"address"},{internalType:"string",name:"metadata",type:"string"},{internalType:"string",name:"contentHash",type:"string"}],indexed:!1,internalType:"struct ERC721BaseCollectionV2.Item",name:"_item",type:"tuple"}],name:"AddItem",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"_oldBaseURI",type:"string"},{indexed:!1,internalType:"string",name:"_newBaseURI",type:"string"}],name:"BaseURI",type:"event"},{anonymous:!1,inputs:[],name:"Complete",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_previousCreator",type:"address"},{indexed:!0,internalType:"address",name:"_newCreator",type:"address"}],name:"CreatorshipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_beneficiary",type:"address"},{indexed:!0,internalType:"uint256",name:"_tokenId",type:"uint256"},{indexed:!0,internalType:"uint256",name:"_itemId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"_issuedId",type:"uint256"},{indexed:!1,internalType:"address",name:"_caller",type:"address"}],name:"Issue",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"userAddress",type:"address"},{indexed:!1,internalType:"address",name:"relayerAddress",type:"address"},{indexed:!1,internalType:"bytes",name:"functionSignature",type:"bytes"}],name:"MetaTransactionExecuted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"_itemId",type:"uint256"},{indexed:!1,internalType:"string",name:"_contentHash",type:"string"},{indexed:!1,internalType:"string",name:"_metadata",type:"string"}],name:"RescueItem",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bool",name:"_previousValue",type:"bool"},{indexed:!1,internalType:"bool",name:"_newValue",type:"bool"}],name:"SetApproved",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bool",name:"_previousValue",type:"bool"},{indexed:!1,internalType:"bool",name:"_newValue",type:"bool"}],name:"SetEditable",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_manager",type:"address"},{indexed:!1,internalType:"bool",name:"_value",type:"bool"}],name:"SetGlobalManager",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_minter",type:"address"},{indexed:!1,internalType:"bool",name:"_value",type:"bool"}],name:"SetGlobalMinter",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"_itemId",type:"uint256"},{indexed:!0,internalType:"address",name:"_manager",type:"address"},{indexed:!1,internalType:"bool",name:"_value",type:"bool"}],name:"SetItemManager",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"_itemId",type:"uint256"},{indexed:!0,internalType:"address",name:"_minter",type:"address"},{indexed:!1,internalType:"uint256",name:"_value",type:"uint256"}],name:"SetItemMinter",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"_itemId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"_price",type:"uint256"},{indexed:!1,internalType:"address",name:"_beneficiary",type:"address"},{indexed:!1,internalType:"string",name:"_metadata",type:"string"}],name:"UpdateItemData",type:"event"},{inputs:[],name:"COLLECTION_HASH",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"ISSUED_ID_BITS",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"ITEM_ID_BITS",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"MAX_ISSUED_ID",outputs:[{internalType:"uint216",name:"",type:"uint216"}],stateMutability:"view",type:"function"},{inputs:[],name:"MAX_ITEM_ID",outputs:[{internalType:"uint40",name:"",type:"uint40"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"string",name:"rarity",type:"string"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"address",name:"beneficiary",type:"address"},{internalType:"string",name:"metadata",type:"string"}],internalType:"struct ERC721BaseCollectionV2.ItemParam[]",name:"_items",type:"tuple[]"}],name:"addItems",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"baseURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_from",type:"address"},{internalType:"address",name:"_to",type:"address"},{internalType:"uint256[]",name:"_tokenIds",type:"uint256[]"}],name:"batchTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"completeCollection",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"createdAt",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"creator",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_id",type:"uint256"}],name:"decodeTokenId",outputs:[{internalType:"uint256",name:"itemId",type:"uint256"},{internalType:"uint256",name:"issuedId",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[],name:"domainSeparator",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256[]",name:"_itemIds",type:"uint256[]"},{internalType:"uint256[]",name:"_prices",type:"uint256[]"},{internalType:"address[]",name:"_beneficiaries",type:"address[]"},{internalType:"string[]",name:"_metadatas",type:"string[]"}],name:"editItemsData",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_itemId",type:"uint256"},{internalType:"uint256",name:"_issuedId",type:"uint256"}],name:"encodeTokenId",outputs:[{internalType:"uint256",name:"id",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"userAddress",type:"address"},{internalType:"bytes",name:"functionSignature",type:"bytes"},{internalType:"bytes32",name:"sigR",type:"bytes32"},{internalType:"bytes32",name:"sigS",type:"bytes32"},{internalType:"uint8",name:"sigV",type:"uint8"}],name:"executeMetaTransaction",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getChainId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getNonce",outputs:[{internalType:"uint256",name:"nonce",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"globalManagers",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"globalMinters",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"initImplementation",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_name",type:"string"},{internalType:"string",name:"_symbol",type:"string"},{internalType:"string",name:"_baseURI",type:"string"},{internalType:"address",name:"_creator",type:"address"},{internalType:"bool",name:"_shouldComplete",type:"bool"},{internalType:"bool",name:"_isApproved",type:"bool"},{internalType:"contract IRarities",name:"_rarities",type:"address"},{components:[{internalType:"string",name:"rarity",type:"string"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"address",name:"beneficiary",type:"address"},{internalType:"string",name:"metadata",type:"string"}],internalType:"struct ERC721BaseCollectionV2.ItemParam[]",name:"_items",type:"tuple[]"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"isApproved",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"isCompleted",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"isEditable",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"isInitialized",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"isMintingAllowed",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address[]",name:"_beneficiaries",type:"address[]"},{internalType:"uint256[]",name:"_itemIds",type:"uint256[]"}],name:"issueTokens",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"address",name:"",type:"address"}],name:"itemManagers",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"address",name:"",type:"address"}],name:"itemMinters",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"items",outputs:[{internalType:"string",name:"rarity",type:"string"},{internalType:"uint256",name:"maxSupply",type:"uint256"},{internalType:"uint256",name:"totalSupply",type:"uint256"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"address",name:"beneficiary",type:"address"},{internalType:"string",name:"metadata",type:"string"},{internalType:"string",name:"contentHash",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"itemsCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"rarities",outputs:[{internalType:"contract IRarities",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"_itemIds",type:"uint256[]"},{internalType:"string[]",name:"_contentHashes",type:"string[]"},{internalType:"string[]",name:"_metadatas",type:"string[]"}],name:"rescueItems",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_from",type:"address"},{internalType:"address",name:"_to",type:"address"},{internalType:"uint256[]",name:"_tokenIds",type:"uint256[]"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"safeBatchTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bool",name:"_value",type:"bool"}],name:"setApproved",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_baseURI",type:"string"}],name:"setBaseURI",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bool",name:"_value",type:"bool"}],name:"setEditable",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"_itemIds",type:"uint256[]"},{internalType:"address[]",name:"_managers",type:"address[]"},{internalType:"bool[]",name:"_values",type:"bool[]"}],name:"setItemsManagers",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"_itemIds",type:"uint256[]"},{internalType:"address[]",name:"_minters",type:"address[]"},{internalType:"uint256[]",name:"_values",type:"uint256[]"}],name:"setItemsMinters",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address[]",name:"_managers",type:"address[]"},{internalType:"bool[]",name:"_values",type:"bool[]"}],name:"setManagers",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address[]",name:"_minters",type:"address[]"},{internalType:"bool[]",name:"_values",type:"bool[]"}],name:"setMinters",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_newCreator",type:"address"}],name:"transferCreatorship",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"}],[_t.ContractName.Forwarder]:[{inputs:[{internalType:"address",name:"_owner",type:"address"},{internalType:"address",name:"_caller",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_oldCaller",type:"address"},{indexed:!0,internalType:"address",name:"_newCaller",type:"address"}],name:"CallerSet",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[],name:"caller",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_target",type:"address"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"forwardCall",outputs:[{internalType:"bool",name:"",type:"bool"},{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"payable",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_newCaller",type:"address"}],name:"setCaller",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"}],[_t.ContractName.MANAToken]:[{type:"constructor",stateMutability:"nonpayable",inputs:[]},{type:"event",name:"Approval",inputs:[{type:"address",name:"owner",internalType:"address",indexed:!0},{type:"address",name:"spender",internalType:"address",indexed:!0},{type:"uint256",name:"value",internalType:"uint256",indexed:!1}],anonymous:!1},{type:"event",name:"MetaTransactionExecuted",inputs:[{type:"address",name:"userAddress",internalType:"address",indexed:!1},{type:"address",name:"relayerAddress",internalType:"address payable",indexed:!1},{type:"bytes",name:"functionSignature",internalType:"bytes",indexed:!1}],anonymous:!1},{type:"event",name:"RoleAdminChanged",inputs:[{type:"bytes32",name:"role",internalType:"bytes32",indexed:!0},{type:"bytes32",name:"previousAdminRole",internalType:"bytes32",indexed:!0},{type:"bytes32",name:"newAdminRole",internalType:"bytes32",indexed:!0}],anonymous:!1},{type:"event",name:"RoleGranted",inputs:[{type:"bytes32",name:"role",internalType:"bytes32",indexed:!0},{type:"address",name:"account",internalType:"address",indexed:!0},{type:"address",name:"sender",internalType:"address",indexed:!0}],anonymous:!1},{type:"event",name:"RoleRevoked",inputs:[{type:"bytes32",name:"role",internalType:"bytes32",indexed:!0},{type:"address",name:"account",internalType:"address",indexed:!0},{type:"address",name:"sender",internalType:"address",indexed:!0}],anonymous:!1},{type:"event",name:"Transfer",inputs:[{type:"address",name:"from",internalType:"address",indexed:!0},{type:"address",name:"to",internalType:"address",indexed:!0},{type:"uint256",name:"value",internalType:"uint256",indexed:!1}],anonymous:!1},{type:"function",stateMutability:"view",outputs:[{type:"uint256",name:"",internalType:"uint256"}],name:"CHILD_CHAIN_ID",inputs:[]},{type:"function",stateMutability:"view",outputs:[{type:"bytes",name:"",internalType:"bytes"}],name:"CHILD_CHAIN_ID_BYTES",inputs:[]},{type:"function",stateMutability:"view",outputs:[{type:"bytes32",name:"",internalType:"bytes32"}],name:"DEFAULT_ADMIN_ROLE",inputs:[]},{type:"function",stateMutability:"view",outputs:[{type:"bytes32",name:"",internalType:"bytes32"}],name:"DEPOSITOR_ROLE",inputs:[]},{type:"function",stateMutability:"view",outputs:[{type:"string",name:"",internalType:"string"}],name:"ERC712_VERSION",inputs:[]},{type:"function",stateMutability:"view",outputs:[{type:"uint256",name:"",internalType:"uint256"}],name:"ROOT_CHAIN_ID",inputs:[]},{type:"function",stateMutability:"view",outputs:[{type:"bytes",name:"",internalType:"bytes"}],name:"ROOT_CHAIN_ID_BYTES",inputs:[]},{type:"function",stateMutability:"view",outputs:[{type:"uint256",name:"",internalType:"uint256"}],name:"allowance",inputs:[{type:"address",name:"owner",internalType:"address"},{type:"address",name:"spender",internalType:"address"}]},{type:"function",stateMutability:"nonpayable",outputs:[{type:"bool",name:"",internalType:"bool"}],name:"approve",inputs:[{type:"address",name:"spender",internalType:"address"},{type:"uint256",name:"amount",internalType:"uint256"}]},{type:"function",stateMutability:"view",outputs:[{type:"uint256",name:"",internalType:"uint256"}],name:"balanceOf",inputs:[{type:"address",name:"account",internalType:"address"}]},{type:"function",stateMutability:"nonpayable",outputs:[],name:"changeName",inputs:[{type:"string",name:"name_",internalType:"string"}]},{type:"function",stateMutability:"view",outputs:[{type:"uint8",name:"",internalType:"uint8"}],name:"decimals",inputs:[]},{type:"function",stateMutability:"nonpayable",outputs:[{type:"bool",name:"",internalType:"bool"}],name:"decreaseAllowance",inputs:[{type:"address",name:"spender",internalType:"address"},{type:"uint256",name:"subtractedValue",internalType:"uint256"}]},{type:"function",stateMutability:"nonpayable",outputs:[],name:"deposit",inputs:[{type:"address",name:"user",internalType:"address"},{type:"bytes",name:"depositData",internalType:"bytes"}]},{type:"function",stateMutability:"payable",outputs:[{type:"bytes",name:"",internalType:"bytes"}],name:"executeMetaTransaction",inputs:[{type:"address",name:"userAddress",internalType:"address"},{type:"bytes",name:"functionSignature",internalType:"bytes"},{type:"bytes32",name:"sigR",internalType:"bytes32"},{type:"bytes32",name:"sigS",internalType:"bytes32"},{type:"uint8",name:"sigV",internalType:"uint8"}]},{type:"function",stateMutability:"pure",outputs:[{type:"uint256",name:"",internalType:"uint256"}],name:"getChainId",inputs:[]},{type:"function",stateMutability:"view",outputs:[{type:"bytes32",name:"",internalType:"bytes32"}],name:"getDomainSeperator",inputs:[]},{type:"function",stateMutability:"view",outputs:[{type:"uint256",name:"nonce",internalType:"uint256"}],name:"getNonce",inputs:[{type:"address",name:"user",internalType:"address"}]},{type:"function",stateMutability:"view",outputs:[{type:"bytes32",name:"",internalType:"bytes32"}],name:"getRoleAdmin",inputs:[{type:"bytes32",name:"role",internalType:"bytes32"}]},{type:"function",stateMutability:"view",outputs:[{type:"address",name:"",internalType:"address"}],name:"getRoleMember",inputs:[{type:"bytes32",name:"role",internalType:"bytes32"},{type:"uint256",name:"index",internalType:"uint256"}]},{type:"function",stateMutability:"view",outputs:[{type:"uint256",name:"",internalType:"uint256"}],name:"getRoleMemberCount",inputs:[{type:"bytes32",name:"role",internalType:"bytes32"}]},{type:"function",stateMutability:"nonpayable",outputs:[],name:"grantRole",inputs:[{type:"bytes32",name:"role",internalType:"bytes32"},{type:"address",name:"account",internalType:"address"}]},{type:"function",stateMutability:"view",outputs:[{type:"bool",name:"",internalType:"bool"}],name:"hasRole",inputs:[{type:"bytes32",name:"role",internalType:"bytes32"},{type:"address",name:"account",internalType:"address"}]},{type:"function",stateMutability:"nonpayable",outputs:[{type:"bool",name:"",internalType:"bool"}],name:"increaseAllowance",inputs:[{type:"address",name:"spender",internalType:"address"},{type:"uint256",name:"addedValue",internalType:"uint256"}]},{type:"function",stateMutability:"nonpayable",outputs:[],name:"initialize",inputs:[{type:"string",name:"name_",internalType:"string"},{type:"string",name:"symbol_",internalType:"string"},{type:"uint8",name:"decimals_",internalType:"uint8"},{type:"address",name:"childChainManager",internalType:"address"}]},{type:"function",stateMutability:"view",outputs:[{type:"string",name:"",internalType:"string"}],name:"name",inputs:[]},{type:"function",stateMutability:"nonpayable",outputs:[],name:"renounceRole",inputs:[{type:"bytes32",name:"role",internalType:"bytes32"},{type:"address",name:"account",internalType:"address"}]},{type:"function",stateMutability:"nonpayable",outputs:[],name:"revokeRole",inputs:[{type:"bytes32",name:"role",internalType:"bytes32"},{type:"address",name:"account",internalType:"address"}]},{type:"function",stateMutability:"view",outputs:[{type:"string",name:"",internalType:"string"}],name:"symbol",inputs:[]},{type:"function",stateMutability:"view",outputs:[{type:"uint256",name:"",internalType:"uint256"}],name:"totalSupply",inputs:[]},{type:"function",stateMutability:"nonpayable",outputs:[{type:"bool",name:"",internalType:"bool"}],name:"transfer",inputs:[{type:"address",name:"recipient",internalType:"address"},{type:"uint256",name:"amount",internalType:"uint256"}]},{type:"function",stateMutability:"nonpayable",outputs:[{type:"bool",name:"",internalType:"bool"}],name:"transferFrom",inputs:[{type:"address",name:"sender",internalType:"address"},{type:"address",name:"recipient",internalType:"address"},{type:"uint256",name:"amount",internalType:"uint256"}]},{type:"function",stateMutability:"nonpayable",outputs:[],name:"withdraw",inputs:[{type:"uint256",name:"amount",internalType:"uint256"}]}],[_t.ContractName.Marketplace]:[{inputs:[{internalType:"address",name:"_acceptedToken",type:"address"},{internalType:"uint256",name:"_ownerCutPerMillion",type:"uint256"},{internalType:"address",name:"_owner",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"ownerCutPerMillion",type:"uint256"}],name:"ChangedOwnerCutPerMillion",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"publicationFee",type:"uint256"}],name:"ChangedPublicationFee",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"userAddress",type:"address"},{indexed:!1,internalType:"address",name:"relayerAddress",type:"address"},{indexed:!1,internalType:"bytes",name:"functionSignature",type:"bytes"}],name:"MetaTransactionExecuted",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes32",name:"id",type:"bytes32"},{indexed:!0,internalType:"uint256",name:"assetId",type:"uint256"},{indexed:!0,internalType:"address",name:"seller",type:"address"},{indexed:!1,internalType:"address",name:"nftAddress",type:"address"}],name:"OrderCancelled",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes32",name:"id",type:"bytes32"},{indexed:!0,internalType:"uint256",name:"assetId",type:"uint256"},{indexed:!0,internalType:"address",name:"seller",type:"address"},{indexed:!1,internalType:"address",name:"nftAddress",type:"address"},{indexed:!1,internalType:"uint256",name:"priceInWei",type:"uint256"},{indexed:!1,internalType:"uint256",name:"expiresAt",type:"uint256"}],name:"OrderCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes32",name:"id",type:"bytes32"},{indexed:!0,internalType:"uint256",name:"assetId",type:"uint256"},{indexed:!0,internalType:"address",name:"seller",type:"address"},{indexed:!1,internalType:"address",name:"nftAddress",type:"address"},{indexed:!1,internalType:"uint256",name:"totalPrice",type:"uint256"},{indexed:!0,internalType:"address",name:"buyer",type:"address"}],name:"OrderSuccessful",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Paused",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Unpaused",type:"event"},{inputs:[],name:"ERC721_Interface",outputs:[{internalType:"bytes4",name:"",type:"bytes4"}],stateMutability:"view",type:"function"},{inputs:[],name:"InterfaceId_ValidateFingerprint",outputs:[{internalType:"bytes4",name:"",type:"bytes4"}],stateMutability:"view",type:"function"},{inputs:[],name:"acceptedToken",outputs:[{internalType:"contract ERC20Interface",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"nftAddress",type:"address"},{internalType:"uint256",name:"assetId",type:"uint256"}],name:"cancelOrder",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"nftAddress",type:"address"},{internalType:"uint256",name:"assetId",type:"uint256"},{internalType:"uint256",name:"priceInWei",type:"uint256"},{internalType:"uint256",name:"expiresAt",type:"uint256"}],name:"createOrder",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"domainSeparator",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"userAddress",type:"address"},{internalType:"bytes",name:"functionSignature",type:"bytes"},{internalType:"bytes32",name:"sigR",type:"bytes32"},{internalType:"bytes32",name:"sigS",type:"bytes32"},{internalType:"uint8",name:"sigV",type:"uint8"}],name:"executeMetaTransaction",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"nftAddress",type:"address"},{internalType:"uint256",name:"assetId",type:"uint256"},{internalType:"uint256",name:"price",type:"uint256"}],name:"executeOrder",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getChainId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getNonce",outputs:[{internalType:"uint256",name:"nonce",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"}],name:"orderByAssetId",outputs:[{internalType:"bytes32",name:"id",type:"bytes32"},{internalType:"address",name:"seller",type:"address"},{internalType:"address",name:"nftAddress",type:"address"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"uint256",name:"expiresAt",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"ownerCutPerMillion",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"paused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"publicationFeeInWei",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"nftAddress",type:"address"},{internalType:"uint256",name:"assetId",type:"uint256"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"bytes",name:"fingerprint",type:"bytes"}],name:"safeExecuteOrder",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_ownerCutPerMillion",type:"uint256"}],name:"setOwnerCutPerMillion",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_publicationFee",type:"uint256"}],name:"setPublicationFee",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"}],[_t.ContractName.Rarities]:[{inputs:[{internalType:"address",name:"_owner",type:"address"},{components:[{internalType:"string",name:"name",type:"string"},{internalType:"uint256",name:"maxSupply",type:"uint256"},{internalType:"uint256",name:"price",type:"uint256"}],internalType:"struct Rarities.Rarity[]",name:"_rarities",type:"tuple[]"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{components:[{internalType:"string",name:"name",type:"string"},{internalType:"uint256",name:"maxSupply",type:"uint256"},{internalType:"uint256",name:"price",type:"uint256"}],indexed:!1,internalType:"struct Rarities.Rarity",name:"_rarity",type:"tuple"}],name:"AddRarity",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"userAddress",type:"address"},{indexed:!1,internalType:"address",name:"relayerAddress",type:"address"},{indexed:!1,internalType:"bytes",name:"functionSignature",type:"bytes"}],name:"MetaTransactionExecuted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"_name",type:"string"},{indexed:!1,internalType:"uint256",name:"_price",type:"uint256"}],name:"UpdatePrice",type:"event"},{inputs:[{components:[{internalType:"string",name:"name",type:"string"},{internalType:"uint256",name:"maxSupply",type:"uint256"},{internalType:"uint256",name:"price",type:"uint256"}],internalType:"struct Rarities.Rarity[]",name:"_rarities",type:"tuple[]"}],name:"addRarities",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"domainSeparator",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"userAddress",type:"address"},{internalType:"bytes",name:"functionSignature",type:"bytes"},{internalType:"bytes32",name:"sigR",type:"bytes32"},{internalType:"bytes32",name:"sigS",type:"bytes32"},{internalType:"uint8",name:"sigV",type:"uint8"}],name:"executeMetaTransaction",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"payable",type:"function"},{inputs:[],name:"getChainId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getNonce",outputs:[{internalType:"uint256",name:"nonce",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"_rarity",type:"string"}],name:"getRarityByName",outputs:[{components:[{internalType:"string",name:"name",type:"string"},{internalType:"uint256",name:"maxSupply",type:"uint256"},{internalType:"uint256",name:"price",type:"uint256"}],internalType:"struct Rarities.Rarity",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"rarities",outputs:[{internalType:"string",name:"name",type:"string"},{internalType:"uint256",name:"maxSupply",type:"uint256"},{internalType:"uint256",name:"price",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"raritiesCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string[]",name:"_names",type:"string[]"},{internalType:"uint256[]",name:"_prices",type:"uint256[]"}],name:"updatePrices",outputs:[],stateMutability:"nonpayable",type:"function"}]},tr={[Zn.ETHEREUM_ROPSTEN]:{version:"1",abi:Xn.Bid,address:"0x250fa138c0a994799c7a49df3097dc71e37b3d6f",name:"Decentraland Bid",chainId:Zn.ETHEREUM_ROPSTEN},[Zn.ETHEREUM_MAINNET]:{version:"1",abi:Xn.Bid,address:"0xe479dfd9664c693b2e2992300930b00bfde08233",name:"Decentraland Bid",chainId:Zn.ETHEREUM_MAINNET}},er={[Zn.ETHEREUM_ROPSTEN]:{version:"2",abi:Xn.CollectionFactory,address:"0x16d8bac5b67a6b782a9081377bec413bc5bb56a6",name:"CollectionFactory",chainId:Zn.ETHEREUM_ROPSTEN},[Zn.MATIC_MUMBAI]:{version:"2",abi:Xn.CollectionFactory,address:"0x2A72Ec4241Ac4fBc915ae98aC5a5b01AdE721f4B",name:"CollectionFactory",chainId:Zn.MATIC_MUMBAI},[Zn.MATIC_MAINNET]:{version:"2",abi:Xn.CollectionFactory,address:"0xB549B2442b2BD0a53795BC5cDcBFE0cAF7ACA9f8",name:"CollectionFactory",chainId:Zn.MATIC_MAINNET}},nr={[Zn.MATIC_MUMBAI]:{version:"1",abi:Xn.CollectionManager,address:"0xe539E0AED3C1971560517D58277f8dd9aC296281",name:"Decentraland Collection Manager",chainId:Zn.MATIC_MUMBAI},[Zn.MATIC_MAINNET]:{version:"1",abi:Xn.CollectionManager,address:"0x9D32AaC179153A991e832550d9F96441Ea27763A",name:"Decentraland Collection Manager",chainId:Zn.MATIC_MAINNET}},rr={[Zn.MATIC_MUMBAI]:{version:"1",abi:Xn.CollectionStore,address:"0x6ddF1b1924DAD850AdBc1C02026535464Be06B0c",name:"Decentraland Collection Store",chainId:Zn.MATIC_MUMBAI},[Zn.MATIC_MAINNET]:{version:"1",abi:Xn.CollectionStore,address:"0x214ffC0f0103735728dc66b61A22e4F163e275ae",name:"Decentraland Collection Store",chainId:Zn.MATIC_MAINNET}},ir={[Zn.MATIC_MUMBAI]:{version:"1",abi:Xn.Committee,address:"0x4bb5ACe5ceB3Dd51ea35fa01a8f9B5507c234270",name:"Decentraland Collection Committee",chainId:Zn.MATIC_MUMBAI},[Zn.MATIC_MAINNET]:{version:"1",abi:Xn.Committee,address:"0x71d9350Ef44E1e451F00e447C0DfF2d1FB75510a",name:"Decentraland Collection Committee",chainId:Zn.MATIC_MAINNET}},or={[Zn.MATIC_MUMBAI]:{version:"2",abi:Xn.ERC20,address:"",name:"ERC20",chainId:Zn.MATIC_MUMBAI}},ar={[Zn.MATIC_MUMBAI]:{version:"2",abi:Xn.ERC721,address:"",name:"ERC271",chainId:Zn.MATIC_MUMBAI}},sr={[Zn.MATIC_MUMBAI]:{version:"2",abi:Xn.ERC721CollectionV2,address:"",name:"Decentraland Collection",chainId:Zn.MATIC_MUMBAI},[Zn.MATIC_MAINNET]:{version:"2",abi:Xn.ERC721CollectionV2,address:"",name:"Decentraland Collection",chainId:Zn.MATIC_MAINNET}},ur={[Zn.MATIC_MUMBAI]:{version:"2",abi:Xn.Forwarder,address:"0x71e56Ad57eca3fAAe5077b7F9ea731a25785fF92",name:"Forwarder",chainId:Zn.MATIC_MUMBAI},[Zn.MATIC_MAINNET]:{version:"2",abi:Xn.Forwarder,address:"0xBF6755A83C0dCDBB2933A96EA778E00b717d7004",name:"Forwarder",chainId:Zn.MATIC_MAINNET}},pr={[Zn.ETHEREUM_MAINNET]:{version:"1",abi:Xn.MANAToken,address:"0x0f5d2fb29fb7d3cfee444a200298f468908cc942",name:"MANAToken",chainId:Zn.ETHEREUM_MAINNET},[Zn.ETHEREUM_ROPSTEN]:{version:"1",abi:Xn.MANAToken,address:"0x2a8fd99c19271f4f04b1b7b9c4f7cf264b626edb",name:"MANAToken",chainId:Zn.ETHEREUM_ROPSTEN},[Zn.ETHEREUM_GOERLI]:{version:"1",abi:Xn.MANAToken,address:"0xe7fDae84ACaba2A5Ba817B6E6D8A2d415DBFEdbe",name:"MANAToken",chainId:Zn.ETHEREUM_GOERLI},[Zn.MATIC_MUMBAI]:{version:"1",abi:Xn.MANAToken,address:"0x882Da5967c435eA5cC6b09150d55E8304B838f45",name:"Decentraland MANA (PoS)",chainId:Zn.MATIC_MUMBAI},[Zn.MATIC_MAINNET]:{version:"1",abi:Xn.MANAToken,address:"0xA1c57f48F0Deb89f569dFbE6E2B7f46D33606fD4",name:"(PoS) Decentraland MANA",chainId:Zn.MATIC_MAINNET}},lr={[Zn.MATIC_MUMBAI]:{version:"1",abi:Xn.Marketplace,address:"0x2a09a000224f5dbe0E17214cA95CDe506DA7CB74",name:"Decentraland Marketplace",chainId:Zn.MATIC_MUMBAI},[Zn.ETHEREUM_ROPSTEN]:{version:"1",abi:Xn.Marketplace,address:"0x5424912699dabaa5f2998750c1c66e73d67ad219",name:"Decentraland Marketplace",chainId:Zn.ETHEREUM_ROPSTEN},[Zn.ETHEREUM_MAINNET]:{version:"1",abi:Xn.Marketplace,address:"0x8e5660b4ab70168b5a6feea0e0315cb49c8cd539",name:"Decentraland Marketplace",chainId:Zn.ETHEREUM_MAINNET},[Zn.MATIC_MAINNET]:{version:"1",abi:Xn.Marketplace,address:"0x02080031b45A3c67d338Dd4A2CC309D28756A160",name:"Decentraland Marketplace",chainId:Zn.MATIC_MAINNET}},cr={[Zn.MATIC_MUMBAI]:{version:"1",abi:Xn.Rarities,address:"0x8eabF06f6cf667915bfF30138be70543bCE2901A",name:"Decentraland Rarities",chainId:Zn.MATIC_MUMBAI},[Zn.MATIC_MAINNET]:{version:"1",abi:Xn.Rarities,address:"0x17113b44fdd661A156cc01b5031E3aCF72c32EB3",name:"Decentraland Rarities",chainId:Zn.MATIC_MAINNET}},dr={[_t.ContractName.Bid]:tr,[_t.ContractName.CollectionFactory]:er,[_t.ContractName.CollectionManager]:nr,[_t.ContractName.CollectionStore]:rr,[_t.ContractName.Committee]:ir,[_t.ContractName.ERC20]:or,[_t.ContractName.ERC721]:ar,[_t.ContractName.ERC721CollectionV2]:sr,[_t.ContractName.Forwarder]:ur,[_t.ContractName.MANAToken]:pr,[_t.ContractName.Marketplace]:lr,[_t.ContractName.Rarities]:cr};
/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */function Je(_t,Pt,Ft,Dt){return new(Ft||(Ft=Promise))((function(Ut,Lt){function i(_t){try{p(Dt.next(_t))}catch(_t){Lt(_t)}}function o(_t){try{p(Dt.throw(_t))}catch(_t){Lt(_t)}}function p(_t){var Pt;_t.done?Ut(_t.value):(Pt=_t.value,Pt instanceof Ft?Pt:new Ft((function(_t){_t(Pt)}))).then(i,o)}p((Dt=Dt.apply(_t,Pt||[])).next())}))}const yr="0c53c51c",hr=et("0x");let fr=0;function Xe(_t,Pt){return Je(this,void 0,void 0,(function*(){return!(et((yield function(_t,Pt){return nt(_t,"eth_getCode",[Pt.toLowerCase(),"latest"])}(_t,Pt)).toLowerCase())===hr)}))}function et(_t){if(!/^0x[0-9a-f]*$/gi.test(_t))throw new Error(`Not a valid hex string "${_t}"`);let Pt=_t.slice(2);for(;Pt.length<40;)Pt="0"+Pt;return"0x"+Pt}function tt(_t){return _t.toString().replace("0x","").padStart(64,"0")}function nt(_t,Pt,Ft){return Je(this,void 0,void 0,(function*(){let Dt,Ut={jsonrpc:"2.0",id:++fr,method:Pt,params:Ft};if(void 0!==_t.request?Dt=yield _t.request(Ut):void 0!==_t.sendAsync?Dt=yield _t.sendAsync(Ut):void 0!==_t.send&&(Dt=yield _t.send(Pt,Ft)),Dt)return Dt.result||Dt;throw new Error(`Could not send the transaction correcty. Either the provider does not support the method "${Pt}" or is missing a proper send/request.`)}))}var mr;_t.ErrorCode=void 0,(mr=_t.ErrorCode||(_t.ErrorCode={})).INVALID_ADDRESS="invalid_address",mr.CONTRACT_ACCOUNT="contract_account",mr.USER_DENIED="user_denied",mr.UNKNOWN="unknown";class rt extends Error{constructor(_t,Pt){super(_t),this.code=Pt,Object.setPrototypeOf(this,rt.prototype)}}_t.DOMAIN_TYPE=Ft,_t.META_TRANSACTION_TYPE=Dt,_t.MetaTransactionError=rt,_t.getContract=function(_t,Pt){const Ft=dr[_t];if(!Ft)throw new Error(`Could not get a valid contract for name: ${_t}`);if(!Ft[Pt])throw new Error(`Could not get a valid contract for ${_t} using chain ${Pt}`);return Ft[Pt]},_t.getContractName=function(_t){for(const Pt in dr)for(const Ft in dr[Pt])if(dr[Pt][Ft].address.toLowerCase()===_t.toLowerCase())return Pt;throw new Error(`Could not get a valid contract name for address ${_t}`)},_t.isContract=Xe,_t.sendMetaTransaction=function(Pt,Ut,Lt,Kt,Yt={}){return Je(this,void 0,void 0,(function*(){const Zt=Object.assign(Object.assign({},{serverURL:"https://transactions-api.decentraland.io/v1"}),Yt);if(!Kt.address.trim())throw new rt(`The contract address for ${Kt.name} is empty. You're probably trying to get a proxy contract. Try adding an address to the result of getContract`,_t.ErrorCode.INVALID_ADDRESS);try{const Yt=yield function(_t){return Je(this,void 0,void 0,(function*(){let Pt=[];try{Pt=yield nt(_t,"eth_requestAccounts",[])}catch(Ft){Pt=yield nt(_t,"eth_accounts",[])}if(0===Pt.length)throw new Error("Could not find a valid connected account");return Pt[0]}))}(Pt);if(yield Xe(Pt,Yt))throw new rt("Contract accounts are not supported",_t.ErrorCode.CONTRACT_ACCOUNT);const ee=yield function(_t,Pt,Ft){return Je(this,void 0,void 0,(function*(){const Dt=tt(Pt);return tt(yield nt(_t,"eth_call",[{data:`0x2d0335ab${Dt}`,to:Ft},"latest"]))}))}(Ut,Yt,Kt.address),re=function(_t,Pt){return{name:Pt.name,version:Pt.version,verifyingContract:Pt.address,salt:_t}}(function(_t){return"number"==typeof _t?`0x${tt(_t.toString(16))}`:`0x${tt(_t)}`}(Kt.chainId),Kt),ve=function(_t,Pt,Ut,Lt){return{types:{EIP712Domain:Ft,MetaTransaction:Dt},domain:Lt,primaryType:"MetaTransaction",message:{nonce:parseInt(Pt,16),from:_t,functionSignature:Ut}}}(Yt,ee,Lt,re),Me=function(_t,Pt,Ft){const Dt=Pt.replace("0x",""),Ut=Dt.substring(0,64),Lt=Dt.substring(64,128),Kt=function(_t){let Pt=parseInt(_t,16);if(Pt<27&&(Pt+=27),27!==Pt&&28!==Pt)throw Error(`Invalid signature version "${_t}" (parsed: ${Pt})`);return Pt.toString(16)}(Dt.substring(128,130)),Yt=Ft.replace("0x",""),Zt=(Yt.length/2).toString(16),ee=Math.ceil(Yt.length/64);return["0x",yr,tt(_t),tt("a0"),Ut,Lt,tt(Kt),tt(Zt),Yt.padEnd(64*ee,"0")].join("")}(Yt,yield function(_t,Pt,Ft){return Je(this,void 0,void 0,(function*(){return nt(_t,"eth_signTypedData_v4",[Pt,Ft])}))}(Pt,Yt,JSON.stringify(ve)),Lt),Se=yield fetch(`${Zt.serverURL}/transactions`,{headers:{"Content-Type":"application/json"},body:JSON.stringify({transactionData:{from:Yt,params:[Kt.address,Me]}}),method:"POST"});if(!Se.ok)throw new Error(Se.statusText);const{txHash:Ie}=yield Se.json();return Ie}catch(Pt){if(-1!==Pt.message.indexOf("User denied message signature"))throw new rt(Pt.message,_t.ErrorCode.USER_DENIED);throw Pt instanceof rt?Pt:(console.warn("An error occurred trying to send the meta transaction. Error:",Pt.message),new rt(Pt.message,_t.ErrorCode.UNKNOWN))}}))},Object.defineProperty(_t,"__esModule",{value:!0})})),function(_t,Pt){"object"==typeof exports&&"undefined"!=typeof module?Pt(exports):"function"==typeof define&&define.amd?define("eth-connect",["exports"],Pt):Pt((_t="undefined"!=typeof globalThis?globalThis:_t||self).ethconnect={})}(this,(function(_t){function e(_t){if(_t.jsonrpc="2.0",!_t.id||"number"!=typeof _t.id||Math.floor(_t.id)!==_t.id)throw new Error(`Invalid RPC message(invalid id) message: ${JSON.stringify(_t)}`);if(!_t.method||"string"!=typeof _t.method||0===_t.method.trim().length)throw new Error(`Invalid RPC message(invalid method) message: ${JSON.stringify(_t)}`);if(!_t.params||"object"!=typeof _t.params)throw new Error(`Invalid RPC message(invalid params) message: ${JSON.stringify(_t)}`);return _t}function n(_t,Pt){return _t(Pt={exports:{}},Pt.exports),Pt.exports}var Pt,Ft=n((function(_t,Pt){function n(){let _t,Pt;const Ft=new Promise(((Dt,Ut)=>{_t=_t=>{Dt(_t),Ft.isPending=!1},Pt=_t=>{Ut(_t),Ft.isPending=!1}})).catch((_t=>Promise.reject(_t)));return Ft.resolve=_t,Ft.reject=Pt,"finally"in Ft||(Ft.finally=_t=>{Ft.then(_t),Ft.catch(_t)}),Ft.isPending=!0,Ft}Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.future=n,Pt.default=n}));(Pt=Ft)&&Pt.__esModule&&Object.prototype.hasOwnProperty.call(Pt,"default")&&Pt.default;var Dt=Ft.future,Ut="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function a(){throw new Error("setTimeout has not been defined")}function c(){throw new Error("clearTimeout has not been defined")}var Lt=a,Kt=c;function h(_t){if(Lt===setTimeout)return setTimeout(_t,0);if((Lt===a||!Lt)&&setTimeout)return Lt=setTimeout,setTimeout(_t,0);try{return Lt(_t,0)}catch(Pt){try{return Lt.call(null,_t,0)}catch(Pt){return Lt.call(this,_t,0)}}}"function"==typeof Ut.setTimeout&&(Lt=setTimeout),"function"==typeof Ut.clearTimeout&&(Kt=clearTimeout);var Yt,Zt=[],ee=!1,re=-1;function m(){ee&&Yt&&(ee=!1,Yt.length?Zt=Yt.concat(Zt):re=-1,Zt.length&&y())}function y(){if(!ee){var _t=h(m);ee=!0;for(var Pt=Zt.length;Pt;){for(Yt=Zt,Zt=[];++re<Pt;)Yt&&Yt[re].run();re=-1,Pt=Zt.length}Yt=null,ee=!1,function(_t){if(Kt===clearTimeout)return clearTimeout(_t);if((Kt===c||!Kt)&&clearTimeout)return Kt=clearTimeout,clearTimeout(_t);try{Kt(_t)}catch(Pt){try{return Kt.call(null,_t)}catch(Pt){return Kt.call(this,_t)}}}(_t)}}function w(_t,Pt){this.fun=_t,this.array=Pt}function v(){}w.prototype.run=function(){this.fun.apply(null,this.array)};var ve=v,Me=v,Se=v,Ie=v,Re=v,Ne=v,Pe=v,Fe=Ut.performance||{},$e=Fe.now||Fe.mozNow||Fe.msNow||Fe.oNow||Fe.webkitNow||function(){return(new Date).getTime()},ze=new Date,De={nextTick:function(_t){var Pt=new Array(arguments.length-1);if(arguments.length>1)for(var Ft=1;Ft<arguments.length;Ft++)Pt[Ft-1]=arguments[Ft];Zt.push(new w(_t,Pt)),1!==Zt.length||ee||h(y)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:ve,addListener:Me,once:Se,off:Ie,removeListener:Re,removeAllListeners:Ne,emit:Pe,binding:function(_t){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(_t){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(_t){var Pt=.001*$e.call(Fe),Ft=Math.floor(Pt),Dt=Math.floor(Pt%1*1e9);return _t&&(Ft-=_t[0],(Dt-=_t[1])<0&&(Ft--,Dt+=1e9)),[Ft,Dt]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-ze)/1e3}},Ue=n((function(_t){!function(){var Pt="input is invalid type",Ft="object"==typeof window,Dt=Ft?window:{};Dt.JS_SHA3_NO_WINDOW&&(Ft=!1);var Lt=!Ft&&"object"==typeof self;!Dt.JS_SHA3_NO_NODE_JS&&"object"==typeof De&&De.versions&&De.versions.node?Dt=Ut:Lt&&(Dt=self);var Kt=!Dt.JS_SHA3_NO_COMMON_JS&&_t.exports,Yt=!Dt.JS_SHA3_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,Zt="0123456789abcdef".split(""),ee=[4,1024,262144,67108864],re=[0,8,16,24],ve=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],Me=[224,256,384,512],Se=[128,256],Ie=["hex","buffer","arrayBuffer","array","digest"],Re={128:168,256:136};!Dt.JS_SHA3_NO_NODE_JS&&Array.isArray||(Array.isArray=function(_t){return"[object Array]"===Object.prototype.toString.call(_t)}),!Yt||!Dt.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(_t){return"object"==typeof _t&&_t.buffer&&_t.buffer.constructor===ArrayBuffer});for(var m=function(_t,Pt,Ft){return function(Dt){return new C(_t,Pt,_t).update(Dt)[Ft]()}},y=function(_t,Pt,Ft){return function(Dt,Ut){return new C(_t,Pt,Ut).update(Dt)[Ft]()}},w=function(_t,Pt,Ft){return function(Pt,Dt,Ut,Lt){return Pe["cshake"+_t].update(Pt,Dt,Ut,Lt)[Ft]()}},v=function(_t,Pt,Ft){return function(Pt,Dt,Ut,Lt){return Pe["kmac"+_t].update(Pt,Dt,Ut,Lt)[Ft]()}},b=function(_t,Pt,Ft,Dt){for(var Ut=0;Ut<Ie.length;++Ut){var Lt=Ie[Ut];_t[Lt]=Pt(Ft,Dt,Lt)}return _t},_=function(_t,Pt){var Ft=m(_t,Pt,"hex");return Ft.create=function(){return new C(_t,Pt,_t)},Ft.update=function(_t){return Ft.create().update(_t)},b(Ft,m,_t,Pt)},Ne=[{name:"keccak",padding:[1,256,65536,16777216],bits:Me,createMethod:_},{name:"sha3",padding:[6,1536,393216,100663296],bits:Me,createMethod:_},{name:"shake",padding:[31,7936,2031616,520093696],bits:Se,createMethod:function(_t,Pt){var Ft=y(_t,Pt,"hex");return Ft.create=function(Ft){return new C(_t,Pt,Ft)},Ft.update=function(_t,Pt){return Ft.create(Pt).update(_t)},b(Ft,y,_t,Pt)}},{name:"cshake",padding:ee,bits:Se,createMethod:function(_t,Pt){var Ft=Re[_t],Dt=w(_t,0,"hex");return Dt.create=function(Dt,Ut,Lt){return Ut||Lt?new C(_t,Pt,Dt).bytepad([Ut,Lt],Ft):Pe["shake"+_t].create(Dt)},Dt.update=function(_t,Pt,Ft,Ut){return Dt.create(Pt,Ft,Ut).update(_t)},b(Dt,w,_t,Pt)}},{name:"kmac",padding:ee,bits:Se,createMethod:function(_t,Pt){var Ft=Re[_t],Dt=v(_t,0,"hex");return Dt.create=function(Dt,Ut,Lt){return new I(_t,Pt,Ut).bytepad(["KMAC",Lt],Ft).bytepad([Dt],Ft)},Dt.update=function(_t,Pt,Ft,Ut){return Dt.create(_t,Ft,Ut).update(Pt)},b(Dt,v,_t,Pt)}}],Pe={},Fe=[],$e=0;$e<Ne.length;++$e)for(var ze=Ne[$e],Ue=ze.bits,Le=0;Le<Ue.length;++Le){var je=ze.name+"_"+Ue[Le];if(Fe.push(je),Pe[je]=ze.createMethod(Ue[Le],ze.padding),"sha3"!==ze.name){var He=ze.name+Ue[Le];Fe.push(He),Pe[He]=Pe[je]}}function C(_t,Pt,Ft){this.blocks=[],this.s=[],this.padding=Pt,this.outputBits=Ft,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(_t<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=Ft>>5,this.extraBytes=(31&Ft)>>3;for(var Dt=0;Dt<50;++Dt)this.s[Dt]=0}function I(_t,Pt,Ft){C.call(this,_t,Pt,Ft)}C.prototype.update=function(_t){if(this.finalized)throw new Error("finalize already called");var Ft,Dt=typeof _t;if("string"!==Dt){if("object"!==Dt)throw new Error(Pt);if(null===_t)throw new Error(Pt);if(Yt&&_t.constructor===ArrayBuffer)_t=new Uint8Array(_t);else if(!(Array.isArray(_t)||Yt&&ArrayBuffer.isView(_t)))throw new Error(Pt);Ft=!0}for(var Ut,Lt,Kt=this.blocks,Zt=this.byteCount,ee=_t.length,ve=this.blockCount,Me=0,Se=this.s;Me<ee;){if(this.reset)for(this.reset=!1,Kt[0]=this.block,Ut=1;Ut<ve+1;++Ut)Kt[Ut]=0;if(Ft)for(Ut=this.start;Me<ee&&Ut<Zt;++Me)Kt[Ut>>2]|=_t[Me]<<re[3&Ut++];else for(Ut=this.start;Me<ee&&Ut<Zt;++Me)(Lt=_t.charCodeAt(Me))<128?Kt[Ut>>2]|=Lt<<re[3&Ut++]:Lt<2048?(Kt[Ut>>2]|=(192|Lt>>6)<<re[3&Ut++],Kt[Ut>>2]|=(128|63&Lt)<<re[3&Ut++]):Lt<55296||Lt>=57344?(Kt[Ut>>2]|=(224|Lt>>12)<<re[3&Ut++],Kt[Ut>>2]|=(128|Lt>>6&63)<<re[3&Ut++],Kt[Ut>>2]|=(128|63&Lt)<<re[3&Ut++]):(Lt=65536+((1023&Lt)<<10|1023&_t.charCodeAt(++Me)),Kt[Ut>>2]|=(240|Lt>>18)<<re[3&Ut++],Kt[Ut>>2]|=(128|Lt>>12&63)<<re[3&Ut++],Kt[Ut>>2]|=(128|Lt>>6&63)<<re[3&Ut++],Kt[Ut>>2]|=(128|63&Lt)<<re[3&Ut++]);if(this.lastByteIndex=Ut,Ut>=Zt){for(this.start=Ut-Zt,this.block=Kt[ve],Ut=0;Ut<ve;++Ut)Se[Ut]^=Kt[Ut];P(Se),this.reset=!0}else this.start=Ut}return this},C.prototype.encode=function(_t,Pt){var Ft=255&_t,Dt=1,Ut=[Ft];for(Ft=255&(_t>>=8);Ft>0;)Ut.unshift(Ft),Ft=255&(_t>>=8),++Dt;return Pt?Ut.push(Dt):Ut.unshift(Dt),this.update(Ut),Ut.length},C.prototype.encodeString=function(_t){var Ft,Dt=typeof _t;if("string"!==Dt){if("object"!==Dt)throw new Error(Pt);if(null===_t)throw new Error(Pt);if(Yt&&_t.constructor===ArrayBuffer)_t=new Uint8Array(_t);else if(!(Array.isArray(_t)||Yt&&ArrayBuffer.isView(_t)))throw new Error(Pt);Ft=!0}var Ut=0,Lt=_t.length;if(Ft)Ut=Lt;else for(var Kt=0;Kt<_t.length;++Kt){var Zt=_t.charCodeAt(Kt);Zt<128?Ut+=1:Zt<2048?Ut+=2:Zt<55296||Zt>=57344?Ut+=3:(Zt=65536+((1023&Zt)<<10|1023&_t.charCodeAt(++Kt)),Ut+=4)}return Ut+=this.encode(8*Ut),this.update(_t),Ut},C.prototype.bytepad=function(_t,Pt){for(var Ft=this.encode(Pt),Dt=0;Dt<_t.length;++Dt)Ft+=this.encodeString(_t[Dt]);var Ut=Pt-Ft%Pt,Lt=[];return Lt.length=Ut,this.update(Lt),this},C.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var _t=this.blocks,Pt=this.lastByteIndex,Ft=this.blockCount,Dt=this.s;if(_t[Pt>>2]|=this.padding[3&Pt],this.lastByteIndex===this.byteCount)for(_t[0]=_t[Ft],Pt=1;Pt<Ft+1;++Pt)_t[Pt]=0;for(_t[Ft-1]|=2147483648,Pt=0;Pt<Ft;++Pt)Dt[Pt]^=_t[Pt];P(Dt)}},C.prototype.toString=C.prototype.hex=function(){this.finalize();for(var _t,Pt=this.blockCount,Ft=this.s,Dt=this.outputBlocks,Ut=this.extraBytes,Lt=0,Kt=0,Yt="";Kt<Dt;){for(Lt=0;Lt<Pt&&Kt<Dt;++Lt,++Kt)_t=Ft[Lt],Yt+=Zt[_t>>4&15]+Zt[15&_t]+Zt[_t>>12&15]+Zt[_t>>8&15]+Zt[_t>>20&15]+Zt[_t>>16&15]+Zt[_t>>28&15]+Zt[_t>>24&15];Kt%Pt==0&&(P(Ft),Lt=0)}return Ut&&(_t=Ft[Lt],Yt+=Zt[_t>>4&15]+Zt[15&_t],Ut>1&&(Yt+=Zt[_t>>12&15]+Zt[_t>>8&15]),Ut>2&&(Yt+=Zt[_t>>20&15]+Zt[_t>>16&15])),Yt},C.prototype.arrayBuffer=function(){this.finalize();var _t,Pt=this.blockCount,Ft=this.s,Dt=this.outputBlocks,Ut=this.extraBytes,Lt=0,Kt=0,Yt=this.outputBits>>3;_t=Ut?new ArrayBuffer(Dt+1<<2):new ArrayBuffer(Yt);for(var Zt=new Uint32Array(_t);Kt<Dt;){for(Lt=0;Lt<Pt&&Kt<Dt;++Lt,++Kt)Zt[Kt]=Ft[Lt];Kt%Pt==0&&P(Ft)}return Ut&&(Zt[Lt]=Ft[Lt],_t=_t.slice(0,Yt)),_t},C.prototype.buffer=C.prototype.arrayBuffer,C.prototype.digest=C.prototype.array=function(){this.finalize();for(var _t,Pt,Ft=this.blockCount,Dt=this.s,Ut=this.outputBlocks,Lt=this.extraBytes,Kt=0,Yt=0,Zt=[];Yt<Ut;){for(Kt=0;Kt<Ft&&Yt<Ut;++Kt,++Yt)_t=Yt<<2,Pt=Dt[Kt],Zt[_t]=255&Pt,Zt[_t+1]=Pt>>8&255,Zt[_t+2]=Pt>>16&255,Zt[_t+3]=Pt>>24&255;Yt%Ft==0&&P(Dt)}return Lt&&(_t=Yt<<2,Pt=Dt[Kt],Zt[_t]=255&Pt,Lt>1&&(Zt[_t+1]=Pt>>8&255),Lt>2&&(Zt[_t+2]=Pt>>16&255)),Zt},I.prototype=new C,I.prototype.finalize=function(){return this.encode(this.outputBits,!0),C.prototype.finalize.call(this)};var P=function(_t){var Pt,Ft,Dt,Ut,Lt,Kt,Yt,Zt,ee,re,Me,Se,Ie,Re,Ne,Pe,Fe,$e,ze,De,Ue,Le,je,He,Ve,qe,Ge,We,Ke,Ye,Qe,Ze,tn,en,nn,rn,on,an,sn,un,pn,ln,dn,yn,hn,fn,mn,vn,gn,bn,_n,wn,Tn,En,xn,Cn,Mn,An,Sn,In,Rn,Nn,Pn;for(Dt=0;Dt<48;Dt+=2)Ut=_t[0]^_t[10]^_t[20]^_t[30]^_t[40],Lt=_t[1]^_t[11]^_t[21]^_t[31]^_t[41],Kt=_t[2]^_t[12]^_t[22]^_t[32]^_t[42],Yt=_t[3]^_t[13]^_t[23]^_t[33]^_t[43],Zt=_t[4]^_t[14]^_t[24]^_t[34]^_t[44],ee=_t[5]^_t[15]^_t[25]^_t[35]^_t[45],re=_t[6]^_t[16]^_t[26]^_t[36]^_t[46],Me=_t[7]^_t[17]^_t[27]^_t[37]^_t[47],Pt=(Se=_t[8]^_t[18]^_t[28]^_t[38]^_t[48])^(Kt<<1|Yt>>>31),Ft=(Ie=_t[9]^_t[19]^_t[29]^_t[39]^_t[49])^(Yt<<1|Kt>>>31),_t[0]^=Pt,_t[1]^=Ft,_t[10]^=Pt,_t[11]^=Ft,_t[20]^=Pt,_t[21]^=Ft,_t[30]^=Pt,_t[31]^=Ft,_t[40]^=Pt,_t[41]^=Ft,Pt=Ut^(Zt<<1|ee>>>31),Ft=Lt^(ee<<1|Zt>>>31),_t[2]^=Pt,_t[3]^=Ft,_t[12]^=Pt,_t[13]^=Ft,_t[22]^=Pt,_t[23]^=Ft,_t[32]^=Pt,_t[33]^=Ft,_t[42]^=Pt,_t[43]^=Ft,Pt=Kt^(re<<1|Me>>>31),Ft=Yt^(Me<<1|re>>>31),_t[4]^=Pt,_t[5]^=Ft,_t[14]^=Pt,_t[15]^=Ft,_t[24]^=Pt,_t[25]^=Ft,_t[34]^=Pt,_t[35]^=Ft,_t[44]^=Pt,_t[45]^=Ft,Pt=Zt^(Se<<1|Ie>>>31),Ft=ee^(Ie<<1|Se>>>31),_t[6]^=Pt,_t[7]^=Ft,_t[16]^=Pt,_t[17]^=Ft,_t[26]^=Pt,_t[27]^=Ft,_t[36]^=Pt,_t[37]^=Ft,_t[46]^=Pt,_t[47]^=Ft,Pt=re^(Ut<<1|Lt>>>31),Ft=Me^(Lt<<1|Ut>>>31),_t[8]^=Pt,_t[9]^=Ft,_t[18]^=Pt,_t[19]^=Ft,_t[28]^=Pt,_t[29]^=Ft,_t[38]^=Pt,_t[39]^=Ft,_t[48]^=Pt,_t[49]^=Ft,Re=_t[0],Ne=_t[1],fn=_t[11]<<4|_t[10]>>>28,mn=_t[10]<<4|_t[11]>>>28,We=_t[20]<<3|_t[21]>>>29,Ke=_t[21]<<3|_t[20]>>>29,In=_t[31]<<9|_t[30]>>>23,Rn=_t[30]<<9|_t[31]>>>23,ln=_t[40]<<18|_t[41]>>>14,dn=_t[41]<<18|_t[40]>>>14,en=_t[2]<<1|_t[3]>>>31,nn=_t[3]<<1|_t[2]>>>31,Pe=_t[13]<<12|_t[12]>>>20,Fe=_t[12]<<12|_t[13]>>>20,vn=_t[22]<<10|_t[23]>>>22,gn=_t[23]<<10|_t[22]>>>22,Ye=_t[33]<<13|_t[32]>>>19,Qe=_t[32]<<13|_t[33]>>>19,Nn=_t[42]<<2|_t[43]>>>30,Pn=_t[43]<<2|_t[42]>>>30,En=_t[5]<<30|_t[4]>>>2,xn=_t[4]<<30|_t[5]>>>2,rn=_t[14]<<6|_t[15]>>>26,on=_t[15]<<6|_t[14]>>>26,$e=_t[25]<<11|_t[24]>>>21,ze=_t[24]<<11|_t[25]>>>21,bn=_t[34]<<15|_t[35]>>>17,_n=_t[35]<<15|_t[34]>>>17,Ze=_t[45]<<29|_t[44]>>>3,tn=_t[44]<<29|_t[45]>>>3,He=_t[6]<<28|_t[7]>>>4,Ve=_t[7]<<28|_t[6]>>>4,Cn=_t[17]<<23|_t[16]>>>9,Mn=_t[16]<<23|_t[17]>>>9,an=_t[26]<<25|_t[27]>>>7,sn=_t[27]<<25|_t[26]>>>7,De=_t[36]<<21|_t[37]>>>11,Ue=_t[37]<<21|_t[36]>>>11,wn=_t[47]<<24|_t[46]>>>8,Tn=_t[46]<<24|_t[47]>>>8,yn=_t[8]<<27|_t[9]>>>5,hn=_t[9]<<27|_t[8]>>>5,qe=_t[18]<<20|_t[19]>>>12,Ge=_t[19]<<20|_t[18]>>>12,An=_t[29]<<7|_t[28]>>>25,Sn=_t[28]<<7|_t[29]>>>25,un=_t[38]<<8|_t[39]>>>24,pn=_t[39]<<8|_t[38]>>>24,Le=_t[48]<<14|_t[49]>>>18,je=_t[49]<<14|_t[48]>>>18,_t[0]=Re^~Pe&$e,_t[1]=Ne^~Fe&ze,_t[10]=He^~qe&We,_t[11]=Ve^~Ge&Ke,_t[20]=en^~rn&an,_t[21]=nn^~on&sn,_t[30]=yn^~fn&vn,_t[31]=hn^~mn&gn,_t[40]=En^~Cn&An,_t[41]=xn^~Mn&Sn,_t[2]=Pe^~$e&De,_t[3]=Fe^~ze&Ue,_t[12]=qe^~We&Ye,_t[13]=Ge^~Ke&Qe,_t[22]=rn^~an&un,_t[23]=on^~sn&pn,_t[32]=fn^~vn&bn,_t[33]=mn^~gn&_n,_t[42]=Cn^~An&In,_t[43]=Mn^~Sn&Rn,_t[4]=$e^~De&Le,_t[5]=ze^~Ue&je,_t[14]=We^~Ye&Ze,_t[15]=Ke^~Qe&tn,_t[24]=an^~un&ln,_t[25]=sn^~pn&dn,_t[34]=vn^~bn&wn,_t[35]=gn^~_n&Tn,_t[44]=An^~In&Nn,_t[45]=Sn^~Rn&Pn,_t[6]=De^~Le&Re,_t[7]=Ue^~je&Ne,_t[16]=Ye^~Ze&He,_t[17]=Qe^~tn&Ve,_t[26]=un^~ln&en,_t[27]=pn^~dn&nn,_t[36]=bn^~wn&yn,_t[37]=_n^~Tn&hn,_t[46]=In^~Nn&En,_t[47]=Rn^~Pn&xn,_t[8]=Le^~Re&Pe,_t[9]=je^~Ne&Fe,_t[18]=Ze^~He&qe,_t[19]=tn^~Ve&Ge,_t[28]=ln^~en&rn,_t[29]=dn^~nn&on,_t[38]=wn^~yn&fn,_t[39]=Tn^~hn&mn,_t[48]=Nn^~En&Cn,_t[49]=Pn^~xn&Mn,_t[0]^=ve[Dt],_t[1]^=ve[Dt+1]};if(Kt)_t.exports=Pe;else for($e=0;$e<Fe.length;++$e)Dt[Fe[$e]]=Pe[Fe[$e]]}()}));Ue.keccak_224,Ue.keccak224,Ue.keccak_256;var Le=Ue.keccak256;Ue.keccak_384,Ue.keccak384,Ue.keccak_512,Ue.keccak512,Ue.sha3_224,Ue.sha3_256,Ue.sha3_384,Ue.sha3_512,Ue.shake_128,Ue.shake128,Ue.shake_256,Ue.shake256,Ue.cshake_128,Ue.cshake128,Ue.cshake_256,Ue.cshake256,Ue.kmac_128,Ue.kmac128,Ue.kmac_256,Ue.kmac256;var je=n((function(_t){!function(Pt){var Ft,Dt=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,Ut=Math.ceil,Lt=Math.floor,Kt="[BigNumber Error] ",Yt=Kt+"Number primitive has more than 15 significant digits: ",Zt=1e14,ee=14,re=9007199254740991,ve=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],Me=1e7,Se=1e9;function d(_t){var Pt=0|_t;return _t>0||_t===Pt?Pt:Pt-1}function g(_t){for(var Pt,Ft,Dt=1,Ut=_t.length,Lt=_t[0]+"";Dt<Ut;){for(Pt=_t[Dt++]+"",Ft=ee-Pt.length;Ft--;Pt="0"+Pt);Lt+=Pt}for(Ut=Lt.length;48===Lt.charCodeAt(--Ut););return Lt.slice(0,Ut+1||1)}function m(_t,Pt){var Ft,Dt,Ut=_t.c,Lt=Pt.c,Kt=_t.s,Yt=Pt.s,Zt=_t.e,ee=Pt.e;if(!Kt||!Yt)return null;if(Ft=Ut&&!Ut[0],Dt=Lt&&!Lt[0],Ft||Dt)return Ft?Dt?0:-Yt:Kt;if(Kt!=Yt)return Kt;if(Ft=Kt<0,Dt=Zt==ee,!Ut||!Lt)return Dt?0:!Ut^Ft?1:-1;if(!Dt)return Zt>ee^Ft?1:-1;for(Yt=(Zt=Ut.length)<(ee=Lt.length)?Zt:ee,Kt=0;Kt<Yt;Kt++)if(Ut[Kt]!=Lt[Kt])return Ut[Kt]>Lt[Kt]^Ft?1:-1;return Zt==ee?0:Zt>ee^Ft?1:-1}function y(_t,Pt,Ft,Dt){if(_t<Pt||_t>Ft||_t!==Lt(_t))throw Error(Kt+(Dt||"Argument")+("number"==typeof _t?_t<Pt||_t>Ft?" out of range: ":" not an integer: ":" not a primitive number: ")+String(_t))}function w(_t){var Pt=_t.c.length-1;return d(_t.e/ee)==Pt&&_t.c[Pt]%2!=0}function v(_t,Pt){return(_t.length>1?_t.charAt(0)+"."+_t.slice(1):_t)+(Pt<0?"e":"e+")+Pt}function b(_t,Pt,Ft){var Dt,Ut;if(Pt<0){for(Ut=Ft+".";++Pt;Ut+=Ft);_t=Ut+_t}else if(++Pt>(Dt=_t.length)){for(Ut=Ft,Pt-=Dt;--Pt;Ut+=Ft);_t+=Ut}else Pt<Dt&&(_t=_t.slice(0,Pt)+"."+_t.slice(Pt));return _t}(Ft=function t(_t){var Pt,Ft,Ie,Re,Ne,Pe,Fe,$e,ze,De,Ue=H.prototype={constructor:H,toString:null,valueOf:null},Le=new H(1),je=20,He=4,Ve=-7,qe=21,Ge=-1e7,We=1e7,Ke=!1,Ye=1,Qe=0,Ze={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},tn="0123456789abcdefghijklmnopqrstuvwxyz";function H(_t,Pt){var Ut,Kt,Zt,ve,Me,Se,Re,Ne,Pe=this;if(!(Pe instanceof H))return new H(_t,Pt);if(null==Pt){if(_t&&!0===_t._isBigNumber)return Pe.s=_t.s,void(!_t.c||_t.e>We?Pe.c=Pe.e=null:_t.e<Ge?Pe.c=[Pe.e=0]:(Pe.e=_t.e,Pe.c=_t.c.slice()));if((Se="number"==typeof _t)&&0*_t==0){if(Pe.s=1/_t<0?(_t=-_t,-1):1,_t===~~_t){for(ve=0,Me=_t;Me>=10;Me/=10,ve++);return void(ve>We?Pe.c=Pe.e=null:(Pe.e=ve,Pe.c=[_t]))}Ne=String(_t)}else{if(!Dt.test(Ne=String(_t)))return Ie(Pe,Ne,Se);Pe.s=45==Ne.charCodeAt(0)?(Ne=Ne.slice(1),-1):1}(ve=Ne.indexOf("."))>-1&&(Ne=Ne.replace(".","")),(Me=Ne.search(/e/i))>0?(ve<0&&(ve=Me),ve+=+Ne.slice(Me+1),Ne=Ne.substring(0,Me)):ve<0&&(ve=Ne.length)}else{if(y(Pt,2,tn.length,"Base"),10==Pt)return W(Pe=new H(_t),je+Pe.e+1,He);if(Ne=String(_t),Se="number"==typeof _t){if(0*_t!=0)return Ie(Pe,Ne,Se,Pt);if(Pe.s=1/_t<0?(Ne=Ne.slice(1),-1):1,H.DEBUG&&Ne.replace(/^0\.0*|\./,"").length>15)throw Error(Yt+_t)}else Pe.s=45===Ne.charCodeAt(0)?(Ne=Ne.slice(1),-1):1;for(Ut=tn.slice(0,Pt),ve=Me=0,Re=Ne.length;Me<Re;Me++)if(Ut.indexOf(Kt=Ne.charAt(Me))<0){if("."==Kt){if(Me>ve){ve=Re;continue}}else if(!Zt&&(Ne==Ne.toUpperCase()&&(Ne=Ne.toLowerCase())||Ne==Ne.toLowerCase()&&(Ne=Ne.toUpperCase()))){Zt=!0,Me=-1,ve=0;continue}return Ie(Pe,String(_t),Se,Pt)}Se=!1,(ve=(Ne=Ft(Ne,Pt,10,Pe.s)).indexOf("."))>-1?Ne=Ne.replace(".",""):ve=Ne.length}for(Me=0;48===Ne.charCodeAt(Me);Me++);for(Re=Ne.length;48===Ne.charCodeAt(--Re););if(Ne=Ne.slice(Me,++Re)){if(Re-=Me,Se&&H.DEBUG&&Re>15&&(_t>re||_t!==Lt(_t)))throw Error(Yt+Pe.s*_t);if((ve=ve-Me-1)>We)Pe.c=Pe.e=null;else if(ve<Ge)Pe.c=[Pe.e=0];else{if(Pe.e=ve,Pe.c=[],Me=(ve+1)%ee,ve<0&&(Me+=ee),Me<Re){for(Me&&Pe.c.push(+Ne.slice(0,Me)),Re-=ee;Me<Re;)Pe.c.push(+Ne.slice(Me,Me+=ee));Me=ee-(Ne=Ne.slice(Me)).length}else Me-=Re;for(;Me--;Ne+="0");Pe.c.push(+Ne)}}else Pe.c=[Pe.e=0]}function G(_t,Pt,Ft,Dt){var Ut,Lt,Kt,Yt,Zt;if(null==Ft?Ft=He:y(Ft,0,8),!_t.c)return _t.toString();if(Ut=_t.c[0],Kt=_t.e,null==Pt)Zt=g(_t.c),Zt=1==Dt||2==Dt&&(Kt<=Ve||Kt>=qe)?v(Zt,Kt):b(Zt,Kt,"0");else if(Lt=(_t=W(new H(_t),Pt,Ft)).e,Yt=(Zt=g(_t.c)).length,1==Dt||2==Dt&&(Pt<=Lt||Lt<=Ve)){for(;Yt<Pt;Zt+="0",Yt++);Zt=v(Zt,Lt)}else if(Pt-=Kt,Zt=b(Zt,Lt,"0"),Lt+1>Yt){if(--Pt>0)for(Zt+=".";Pt--;Zt+="0");}else if((Pt+=Lt-Yt)>0)for(Lt+1==Yt&&(Zt+=".");Pt--;Zt+="0");return _t.s<0&&Ut?"-"+Zt:Zt}function z(_t,Pt){for(var Ft,Dt=1,Ut=new H(_t[0]);Dt<_t.length;Dt++){if(!(Ft=new H(_t[Dt])).s){Ut=Ft;break}Pt.call(Ut,Ft)&&(Ut=Ft)}return Ut}function J(_t,Pt,Ft){for(var Dt=1,Ut=Pt.length;!Pt[--Ut];Pt.pop());for(Ut=Pt[0];Ut>=10;Ut/=10,Dt++);return(Ft=Dt+Ft*ee-1)>We?_t.c=_t.e=null:Ft<Ge?_t.c=[_t.e=0]:(_t.e=Ft,_t.c=Pt),_t}function W(_t,Pt,Ft,Dt){var Kt,Yt,re,Me,Se,Ie,Re,Ne=_t.c,Pe=ve;if(Ne){t:{for(Kt=1,Me=Ne[0];Me>=10;Me/=10,Kt++);if((Yt=Pt-Kt)<0)Yt+=ee,re=Pt,Re=(Se=Ne[Ie=0])/Pe[Kt-re-1]%10|0;else if((Ie=Ut((Yt+1)/ee))>=Ne.length){if(!Dt)break t;for(;Ne.length<=Ie;Ne.push(0));Se=Re=0,Kt=1,re=(Yt%=ee)-ee+1}else{for(Se=Me=Ne[Ie],Kt=1;Me>=10;Me/=10,Kt++);Re=(re=(Yt%=ee)-ee+Kt)<0?0:Se/Pe[Kt-re-1]%10|0}if(Dt=Dt||Pt<0||null!=Ne[Ie+1]||(re<0?Se:Se%Pe[Kt-re-1]),Dt=Ft<4?(Re||Dt)&&(0==Ft||Ft==(_t.s<0?3:2)):Re>5||5==Re&&(4==Ft||Dt||6==Ft&&(Yt>0?re>0?Se/Pe[Kt-re]:0:Ne[Ie-1])%10&1||Ft==(_t.s<0?8:7)),Pt<1||!Ne[0])return Ne.length=0,Dt?(Pt-=_t.e+1,Ne[0]=Pe[(ee-Pt%ee)%ee],_t.e=-Pt||0):Ne[0]=_t.e=0,_t;if(0==Yt?(Ne.length=Ie,Me=1,Ie--):(Ne.length=Ie+1,Me=Pe[ee-Yt],Ne[Ie]=re>0?Lt(Se/Pe[Kt-re]%Pe[re])*Me:0),Dt)for(;;){if(0==Ie){for(Yt=1,re=Ne[0];re>=10;re/=10,Yt++);for(re=Ne[0]+=Me,Me=1;re>=10;re/=10,Me++);Yt!=Me&&(_t.e++,Ne[0]==Zt&&(Ne[0]=1));break}if(Ne[Ie]+=Me,Ne[Ie]!=Zt)break;Ne[Ie--]=0,Me=1}for(Yt=Ne.length;0===Ne[--Yt];Ne.pop());}_t.e>We?_t.c=_t.e=null:_t.e<Ge&&(_t.c=[_t.e=0])}return _t}function V(_t){var Pt,Ft=_t.e;return null===Ft?_t.toString():(Pt=g(_t.c),Pt=Ft<=Ve||Ft>=qe?v(Pt,Ft):b(Pt,Ft,"0"),_t.s<0?"-"+Pt:Pt)}return H.clone=t,H.ROUND_UP=0,H.ROUND_DOWN=1,H.ROUND_CEIL=2,H.ROUND_FLOOR=3,H.ROUND_HALF_UP=4,H.ROUND_HALF_DOWN=5,H.ROUND_HALF_EVEN=6,H.ROUND_HALF_CEIL=7,H.ROUND_HALF_FLOOR=8,H.EUCLID=9,H.config=H.set=function(_t){var Pt,Ft;if(null!=_t){if("object"!=typeof _t)throw Error(Kt+"Object expected: "+_t);if(_t.hasOwnProperty(Pt="DECIMAL_PLACES")&&(y(Ft=_t[Pt],0,Se,Pt),je=Ft),_t.hasOwnProperty(Pt="ROUNDING_MODE")&&(y(Ft=_t[Pt],0,8,Pt),He=Ft),_t.hasOwnProperty(Pt="EXPONENTIAL_AT")&&((Ft=_t[Pt])&&Ft.pop?(y(Ft[0],-Se,0,Pt),y(Ft[1],0,Se,Pt),Ve=Ft[0],qe=Ft[1]):(y(Ft,-Se,Se,Pt),Ve=-(qe=Ft<0?-Ft:Ft))),_t.hasOwnProperty(Pt="RANGE"))if((Ft=_t[Pt])&&Ft.pop)y(Ft[0],-Se,-1,Pt),y(Ft[1],1,Se,Pt),Ge=Ft[0],We=Ft[1];else{if(y(Ft,-Se,Se,Pt),!Ft)throw Error(Kt+Pt+" cannot be zero: "+Ft);Ge=-(We=Ft<0?-Ft:Ft)}if(_t.hasOwnProperty(Pt="CRYPTO")){if((Ft=_t[Pt])!==!!Ft)throw Error(Kt+Pt+" not true or false: "+Ft);if(Ft){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Ke=!Ft,Error(Kt+"crypto unavailable");Ke=Ft}else Ke=Ft}if(_t.hasOwnProperty(Pt="MODULO_MODE")&&(y(Ft=_t[Pt],0,9,Pt),Ye=Ft),_t.hasOwnProperty(Pt="POW_PRECISION")&&(y(Ft=_t[Pt],0,Se,Pt),Qe=Ft),_t.hasOwnProperty(Pt="FORMAT")){if("object"!=typeof(Ft=_t[Pt]))throw Error(Kt+Pt+" not an object: "+Ft);Ze=Ft}if(_t.hasOwnProperty(Pt="ALPHABET")){if("string"!=typeof(Ft=_t[Pt])||/^.?$|[+\-.\s]|(.).*\1/.test(Ft))throw Error(Kt+Pt+" invalid: "+Ft);tn=Ft}}return{DECIMAL_PLACES:je,ROUNDING_MODE:He,EXPONENTIAL_AT:[Ve,qe],RANGE:[Ge,We],CRYPTO:Ke,MODULO_MODE:Ye,POW_PRECISION:Qe,FORMAT:Ze,ALPHABET:tn}},H.isBigNumber=function(_t){if(!_t||!0!==_t._isBigNumber)return!1;if(!H.DEBUG)return!0;var Pt,Ft,Dt=_t.c,Ut=_t.e,Yt=_t.s;t:if("[object Array]"=={}.toString.call(Dt)){if((1===Yt||-1===Yt)&&Ut>=-Se&&Ut<=Se&&Ut===Lt(Ut)){if(0===Dt[0]){if(0===Ut&&1===Dt.length)return!0;break t}if((Pt=(Ut+1)%ee)<1&&(Pt+=ee),String(Dt[0]).length==Pt){for(Pt=0;Pt<Dt.length;Pt++)if((Ft=Dt[Pt])<0||Ft>=Zt||Ft!==Lt(Ft))break t;if(0!==Ft)return!0}}}else if(null===Dt&&null===Ut&&(null===Yt||1===Yt||-1===Yt))return!0;throw Error(Kt+"Invalid BigNumber: "+_t)},H.maximum=H.max=function(){return z(arguments,Ue.lt)},H.minimum=H.min=function(){return z(arguments,Ue.gt)},H.random=(Re=9007199254740992,Ne=Math.random()*Re&2097151?function(){return Lt(Math.random()*Re)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(_t){var Pt,Ft,Dt,Yt,Zt,re=0,Me=[],Ie=new H(Le);if(null==_t?_t=je:y(_t,0,Se),Yt=Ut(_t/ee),Ke)if(crypto.getRandomValues){for(Pt=crypto.getRandomValues(new Uint32Array(Yt*=2));re<Yt;)(Zt=131072*Pt[re]+(Pt[re+1]>>>11))>=9e15?(Ft=crypto.getRandomValues(new Uint32Array(2)),Pt[re]=Ft[0],Pt[re+1]=Ft[1]):(Me.push(Zt%1e14),re+=2);re=Yt/2}else{if(!crypto.randomBytes)throw Ke=!1,Error(Kt+"crypto unavailable");for(Pt=crypto.randomBytes(Yt*=7);re<Yt;)(Zt=281474976710656*(31&Pt[re])+1099511627776*Pt[re+1]+4294967296*Pt[re+2]+16777216*Pt[re+3]+(Pt[re+4]<<16)+(Pt[re+5]<<8)+Pt[re+6])>=9e15?crypto.randomBytes(7).copy(Pt,re):(Me.push(Zt%1e14),re+=7);re=Yt/7}if(!Ke)for(;re<Yt;)(Zt=Ne())<9e15&&(Me[re++]=Zt%1e14);for(Yt=Me[--re],_t%=ee,Yt&&_t&&(Zt=ve[ee-_t],Me[re]=Lt(Yt/Zt)*Zt);0===Me[re];Me.pop(),re--);if(re<0)Me=[Dt=0];else{for(Dt=-1;0===Me[0];Me.splice(0,1),Dt-=ee);for(re=1,Zt=Me[0];Zt>=10;Zt/=10,re++);re<ee&&(Dt-=ee-re)}return Ie.e=Dt,Ie.c=Me,Ie}),H.sum=function(){for(var _t=1,Pt=arguments,Ft=new H(Pt[0]);_t<Pt.length;)Ft=Ft.plus(Pt[_t++]);return Ft},Ft=function(){var _t="0123456789";function e(_t,Pt,Ft,Dt){for(var Ut,Lt,Kt=[0],Yt=0,Zt=_t.length;Yt<Zt;){for(Lt=Kt.length;Lt--;Kt[Lt]*=Pt);for(Kt[0]+=Dt.indexOf(_t.charAt(Yt++)),Ut=0;Ut<Kt.length;Ut++)Kt[Ut]>Ft-1&&(null==Kt[Ut+1]&&(Kt[Ut+1]=0),Kt[Ut+1]+=Kt[Ut]/Ft|0,Kt[Ut]%=Ft)}return Kt.reverse()}return function(Ft,Dt,Ut,Lt,Kt){var Yt,Zt,ee,re,ve,Me,Se,Ie,Re=Ft.indexOf("."),Ne=je,Pe=He;for(Re>=0&&(re=Qe,Qe=0,Ft=Ft.replace(".",""),Me=(Ie=new H(Dt)).pow(Ft.length-Re),Qe=re,Ie.c=e(b(g(Me.c),Me.e,"0"),10,Ut,_t),Ie.e=Ie.c.length),ee=re=(Se=e(Ft,Dt,Ut,Kt?(Yt=tn,_t):(Yt=_t,tn))).length;0==Se[--re];Se.pop());if(!Se[0])return Yt.charAt(0);if(Re<0?--ee:(Me.c=Se,Me.e=ee,Me.s=Lt,Se=(Me=Pt(Me,Ie,Ne,Pe,Ut)).c,ve=Me.r,ee=Me.e),Re=Se[Zt=ee+Ne+1],re=Ut/2,ve=ve||Zt<0||null!=Se[Zt+1],ve=Pe<4?(null!=Re||ve)&&(0==Pe||Pe==(Me.s<0?3:2)):Re>re||Re==re&&(4==Pe||ve||6==Pe&&1&Se[Zt-1]||Pe==(Me.s<0?8:7)),Zt<1||!Se[0])Ft=ve?b(Yt.charAt(1),-Ne,Yt.charAt(0)):Yt.charAt(0);else{if(Se.length=Zt,ve)for(--Ut;++Se[--Zt]>Ut;)Se[Zt]=0,Zt||(++ee,Se=[1].concat(Se));for(re=Se.length;!Se[--re];);for(Re=0,Ft="";Re<=re;Ft+=Yt.charAt(Se[Re++]));Ft=b(Ft,ee,Yt.charAt(0))}return Ft}}(),Pt=function(){function t(_t,Pt,Ft){var Dt,Ut,Lt,Kt,Yt=0,Zt=_t.length,ee=Pt%Me,re=Pt/Me|0;for(_t=_t.slice();Zt--;)Yt=((Ut=ee*(Lt=_t[Zt]%Me)+(Dt=re*Lt+(Kt=_t[Zt]/Me|0)*ee)%Me*Me+Yt)/Ft|0)+(Dt/Me|0)+re*Kt,_t[Zt]=Ut%Ft;return Yt&&(_t=[Yt].concat(_t)),_t}function e(_t,Pt,Ft,Dt){var Ut,Lt;if(Ft!=Dt)Lt=Ft>Dt?1:-1;else for(Ut=Lt=0;Ut<Ft;Ut++)if(_t[Ut]!=Pt[Ut]){Lt=_t[Ut]>Pt[Ut]?1:-1;break}return Lt}function n(_t,Pt,Ft,Dt){for(var Ut=0;Ft--;)_t[Ft]-=Ut,Ut=_t[Ft]<Pt[Ft]?1:0,_t[Ft]=Ut*Dt+_t[Ft]-Pt[Ft];for(;!_t[0]&&_t.length>1;_t.splice(0,1));}return function(_t,Pt,Ft,Dt,Ut){var Kt,Yt,re,ve,Me,Se,Ie,Re,Ne,Pe,Fe,$e,ze,De,Ue,Le,je,He=_t.s==Pt.s?1:-1,Ve=_t.c,qe=Pt.c;if(!(Ve&&Ve[0]&&qe&&qe[0]))return new H(_t.s&&Pt.s&&(Ve?!qe||Ve[0]!=qe[0]:qe)?Ve&&0==Ve[0]||!qe?0*He:He/0:NaN);for(Ne=(Re=new H(He)).c=[],He=Ft+(Yt=_t.e-Pt.e)+1,Ut||(Ut=Zt,Yt=d(_t.e/ee)-d(Pt.e/ee),He=He/ee|0),re=0;qe[re]==(Ve[re]||0);re++);if(qe[re]>(Ve[re]||0)&&Yt--,He<0)Ne.push(1),ve=!0;else{for(De=Ve.length,Le=qe.length,re=0,He+=2,(Me=Lt(Ut/(qe[0]+1)))>1&&(qe=t(qe,Me,Ut),Ve=t(Ve,Me,Ut),Le=qe.length,De=Ve.length),ze=Le,Fe=(Pe=Ve.slice(0,Le)).length;Fe<Le;Pe[Fe++]=0);je=qe.slice(),je=[0].concat(je),Ue=qe[0],qe[1]>=Ut/2&&Ue++;do{if(Me=0,(Kt=e(qe,Pe,Le,Fe))<0){if($e=Pe[0],Le!=Fe&&($e=$e*Ut+(Pe[1]||0)),(Me=Lt($e/Ue))>1)for(Me>=Ut&&(Me=Ut-1),Ie=(Se=t(qe,Me,Ut)).length,Fe=Pe.length;1==e(Se,Pe,Ie,Fe);)Me--,n(Se,Le<Ie?je:qe,Ie,Ut),Ie=Se.length,Kt=1;else 0==Me&&(Kt=Me=1),Ie=(Se=qe.slice()).length;if(Ie<Fe&&(Se=[0].concat(Se)),n(Pe,Se,Fe,Ut),Fe=Pe.length,-1==Kt)for(;e(qe,Pe,Le,Fe)<1;)Me++,n(Pe,Le<Fe?je:qe,Fe,Ut),Fe=Pe.length}else 0===Kt&&(Me++,Pe=[0]);Ne[re++]=Me,Pe[0]?Pe[Fe++]=Ve[ze]||0:(Pe=[Ve[ze]],Fe=1)}while((ze++<De||null!=Pe[0])&&He--);ve=null!=Pe[0],Ne[0]||Ne.splice(0,1)}if(Ut==Zt){for(re=1,He=Ne[0];He>=10;He/=10,re++);W(Re,Ft+(Re.e=re+Yt*ee-1)+1,Dt,ve)}else Re.e=Yt,Re.r=+ve;return Re}}(),Pe=/^(-?)0([xbo])(?=\w[\w.]*$)/i,Fe=/^([^.]+)\.$/,$e=/^\.([^.]+)$/,ze=/^-?(Infinity|NaN)$/,De=/^\s*\+(?=[\w.])|^\s+|\s+$/g,Ie=function(_t,Pt,Ft,Dt){var Ut,Lt=Ft?Pt:Pt.replace(De,"");if(ze.test(Lt))_t.s=isNaN(Lt)?null:Lt<0?-1:1;else{if(!Ft&&(Lt=Lt.replace(Pe,(function(_t,Pt,Ft){return Ut="x"==(Ft=Ft.toLowerCase())?16:"b"==Ft?2:8,Dt&&Dt!=Ut?_t:Pt})),Dt&&(Ut=Dt,Lt=Lt.replace(Fe,"$1").replace($e,"0.$1")),Pt!=Lt))return new H(Lt,Ut);if(H.DEBUG)throw Error(Kt+"Not a"+(Dt?" base "+Dt:"")+" number: "+Pt);_t.s=null}_t.c=_t.e=null},Ue.absoluteValue=Ue.abs=function(){var _t=new H(this);return _t.s<0&&(_t.s=1),_t},Ue.comparedTo=function(_t,Pt){return m(this,new H(_t,Pt))},Ue.decimalPlaces=Ue.dp=function(_t,Pt){var Ft,Dt,Ut,Lt=this;if(null!=_t)return y(_t,0,Se),null==Pt?Pt=He:y(Pt,0,8),W(new H(Lt),_t+Lt.e+1,Pt);if(!(Ft=Lt.c))return null;if(Dt=((Ut=Ft.length-1)-d(this.e/ee))*ee,Ut=Ft[Ut])for(;Ut%10==0;Ut/=10,Dt--);return Dt<0&&(Dt=0),Dt},Ue.dividedBy=Ue.div=function(_t,Ft){return Pt(this,new H(_t,Ft),je,He)},Ue.dividedToIntegerBy=Ue.idiv=function(_t,Ft){return Pt(this,new H(_t,Ft),0,1)},Ue.exponentiatedBy=Ue.pow=function(_t,Pt){var Ft,Dt,Yt,Zt,re,ve,Me,Se,Ie=this;if((_t=new H(_t)).c&&!_t.isInteger())throw Error(Kt+"Exponent not an integer: "+V(_t));if(null!=Pt&&(Pt=new H(Pt)),re=_t.e>14,!Ie.c||!Ie.c[0]||1==Ie.c[0]&&!Ie.e&&1==Ie.c.length||!_t.c||!_t.c[0])return Se=new H(Math.pow(+V(Ie),re?2-w(_t):+V(_t))),Pt?Se.mod(Pt):Se;if(ve=_t.s<0,Pt){if(Pt.c?!Pt.c[0]:!Pt.s)return new H(NaN);(Dt=!ve&&Ie.isInteger()&&Pt.isInteger())&&(Ie=Ie.mod(Pt))}else{if(_t.e>9&&(Ie.e>0||Ie.e<-1||(0==Ie.e?Ie.c[0]>1||re&&Ie.c[1]>=24e7:Ie.c[0]<8e13||re&&Ie.c[0]<=9999975e7)))return Zt=Ie.s<0&&w(_t)?-0:0,Ie.e>-1&&(Zt=1/Zt),new H(ve?1/Zt:Zt);Qe&&(Zt=Ut(Qe/ee+2))}for(re?(Ft=new H(.5),ve&&(_t.s=1),Me=w(_t)):Me=(Yt=Math.abs(+V(_t)))%2,Se=new H(Le);;){if(Me){if(!(Se=Se.times(Ie)).c)break;Zt?Se.c.length>Zt&&(Se.c.length=Zt):Dt&&(Se=Se.mod(Pt))}if(Yt){if(0===(Yt=Lt(Yt/2)))break;Me=Yt%2}else if(W(_t=_t.times(Ft),_t.e+1,1),_t.e>14)Me=w(_t);else{if(0==(Yt=+V(_t)))break;Me=Yt%2}Ie=Ie.times(Ie),Zt?Ie.c&&Ie.c.length>Zt&&(Ie.c.length=Zt):Dt&&(Ie=Ie.mod(Pt))}return Dt?Se:(ve&&(Se=Le.div(Se)),Pt?Se.mod(Pt):Zt?W(Se,Qe,He,void 0):Se)},Ue.integerValue=function(_t){var Pt=new H(this);return null==_t?_t=He:y(_t,0,8),W(Pt,Pt.e+1,_t)},Ue.isEqualTo=Ue.eq=function(_t,Pt){return 0===m(this,new H(_t,Pt))},Ue.isFinite=function(){return!!this.c},Ue.isGreaterThan=Ue.gt=function(_t,Pt){return m(this,new H(_t,Pt))>0},Ue.isGreaterThanOrEqualTo=Ue.gte=function(_t,Pt){return 1===(Pt=m(this,new H(_t,Pt)))||0===Pt},Ue.isInteger=function(){return!!this.c&&d(this.e/ee)>this.c.length-2},Ue.isLessThan=Ue.lt=function(_t,Pt){return m(this,new H(_t,Pt))<0},Ue.isLessThanOrEqualTo=Ue.lte=function(_t,Pt){return-1===(Pt=m(this,new H(_t,Pt)))||0===Pt},Ue.isNaN=function(){return!this.s},Ue.isNegative=function(){return this.s<0},Ue.isPositive=function(){return this.s>0},Ue.isZero=function(){return!!this.c&&0==this.c[0]},Ue.minus=function(_t,Pt){var Ft,Dt,Ut,Lt,Kt=this,Yt=Kt.s;if(Pt=(_t=new H(_t,Pt)).s,!Yt||!Pt)return new H(NaN);if(Yt!=Pt)return _t.s=-Pt,Kt.plus(_t);var re=Kt.e/ee,ve=_t.e/ee,Me=Kt.c,Se=_t.c;if(!re||!ve){if(!Me||!Se)return Me?(_t.s=-Pt,_t):new H(Se?Kt:NaN);if(!Me[0]||!Se[0])return Se[0]?(_t.s=-Pt,_t):new H(Me[0]?Kt:3==He?-0:0)}if(re=d(re),ve=d(ve),Me=Me.slice(),Yt=re-ve){for((Lt=Yt<0)?(Yt=-Yt,Ut=Me):(ve=re,Ut=Se),Ut.reverse(),Pt=Yt;Pt--;Ut.push(0));Ut.reverse()}else for(Dt=(Lt=(Yt=Me.length)<(Pt=Se.length))?Yt:Pt,Yt=Pt=0;Pt<Dt;Pt++)if(Me[Pt]!=Se[Pt]){Lt=Me[Pt]<Se[Pt];break}if(Lt&&(Ut=Me,Me=Se,Se=Ut,_t.s=-_t.s),(Pt=(Dt=Se.length)-(Ft=Me.length))>0)for(;Pt--;Me[Ft++]=0);for(Pt=Zt-1;Dt>Yt;){if(Me[--Dt]<Se[Dt]){for(Ft=Dt;Ft&&!Me[--Ft];Me[Ft]=Pt);--Me[Ft],Me[Dt]+=Zt}Me[Dt]-=Se[Dt]}for(;0==Me[0];Me.splice(0,1),--ve);return Me[0]?J(_t,Me,ve):(_t.s=3==He?-1:1,_t.c=[_t.e=0],_t)},Ue.modulo=Ue.mod=function(_t,Ft){var Dt,Ut,Lt=this;return _t=new H(_t,Ft),!Lt.c||!_t.s||_t.c&&!_t.c[0]?new H(NaN):!_t.c||Lt.c&&!Lt.c[0]?new H(Lt):(9==Ye?(Ut=_t.s,_t.s=1,Dt=Pt(Lt,_t,0,3),_t.s=Ut,Dt.s*=Ut):Dt=Pt(Lt,_t,0,Ye),(_t=Lt.minus(Dt.times(_t))).c[0]||1!=Ye||(_t.s=Lt.s),_t)},Ue.multipliedBy=Ue.times=function(_t,Pt){var Ft,Dt,Ut,Lt,Kt,Yt,re,ve,Se,Ie,Re,Ne,Pe,Fe,$e,ze=this,De=ze.c,Ue=(_t=new H(_t,Pt)).c;if(!(De&&Ue&&De[0]&&Ue[0]))return!ze.s||!_t.s||De&&!De[0]&&!Ue||Ue&&!Ue[0]&&!De?_t.c=_t.e=_t.s=null:(_t.s*=ze.s,De&&Ue?(_t.c=[0],_t.e=0):_t.c=_t.e=null),_t;for(Dt=d(ze.e/ee)+d(_t.e/ee),_t.s*=ze.s,(re=De.length)<(Ie=Ue.length)&&(Pe=De,De=Ue,Ue=Pe,Ut=re,re=Ie,Ie=Ut),Ut=re+Ie,Pe=[];Ut--;Pe.push(0));for(Fe=Zt,$e=Me,Ut=Ie;--Ut>=0;){for(Ft=0,Re=Ue[Ut]%$e,Ne=Ue[Ut]/$e|0,Lt=Ut+(Kt=re);Lt>Ut;)Ft=((ve=Re*(ve=De[--Kt]%$e)+(Yt=Ne*ve+(Se=De[Kt]/$e|0)*Re)%$e*$e+Pe[Lt]+Ft)/Fe|0)+(Yt/$e|0)+Ne*Se,Pe[Lt--]=ve%Fe;Pe[Lt]=Ft}return Ft?++Dt:Pe.splice(0,1),J(_t,Pe,Dt)},Ue.negated=function(){var _t=new H(this);return _t.s=-_t.s||null,_t},Ue.plus=function(_t,Pt){var Ft,Dt=this,Ut=Dt.s;if(Pt=(_t=new H(_t,Pt)).s,!Ut||!Pt)return new H(NaN);if(Ut!=Pt)return _t.s=-Pt,Dt.minus(_t);var Lt=Dt.e/ee,Kt=_t.e/ee,Yt=Dt.c,re=_t.c;if(!Lt||!Kt){if(!Yt||!re)return new H(Ut/0);if(!Yt[0]||!re[0])return re[0]?_t:new H(Yt[0]?Dt:0*Ut)}if(Lt=d(Lt),Kt=d(Kt),Yt=Yt.slice(),Ut=Lt-Kt){for(Ut>0?(Kt=Lt,Ft=re):(Ut=-Ut,Ft=Yt),Ft.reverse();Ut--;Ft.push(0));Ft.reverse()}for((Ut=Yt.length)-(Pt=re.length)<0&&(Ft=re,re=Yt,Yt=Ft,Pt=Ut),Ut=0;Pt;)Ut=(Yt[--Pt]=Yt[Pt]+re[Pt]+Ut)/Zt|0,Yt[Pt]=Zt===Yt[Pt]?0:Yt[Pt]%Zt;return Ut&&(Yt=[Ut].concat(Yt),++Kt),J(_t,Yt,Kt)},Ue.precision=Ue.sd=function(_t,Pt){var Ft,Dt,Ut,Lt=this;if(null!=_t&&_t!==!!_t)return y(_t,1,Se),null==Pt?Pt=He:y(Pt,0,8),W(new H(Lt),_t,Pt);if(!(Ft=Lt.c))return null;if(Dt=(Ut=Ft.length-1)*ee+1,Ut=Ft[Ut]){for(;Ut%10==0;Ut/=10,Dt--);for(Ut=Ft[0];Ut>=10;Ut/=10,Dt++);}return _t&&Lt.e+1>Dt&&(Dt=Lt.e+1),Dt},Ue.shiftedBy=function(_t){return y(_t,-9007199254740991,re),this.times("1e"+_t)},Ue.squareRoot=Ue.sqrt=function(){var _t,Ft,Dt,Ut,Lt,Kt=this,Yt=Kt.c,Zt=Kt.s,ee=Kt.e,re=je+4,ve=new H("0.5");if(1!==Zt||!Yt||!Yt[0])return new H(!Zt||Zt<0&&(!Yt||Yt[0])?NaN:Yt?Kt:1/0);if(0==(Zt=Math.sqrt(+V(Kt)))||Zt==1/0?(((Ft=g(Yt)).length+ee)%2==0&&(Ft+="0"),Zt=Math.sqrt(+Ft),ee=d((ee+1)/2)-(ee<0||ee%2),Dt=new H(Ft=Zt==1/0?"5e"+ee:(Ft=Zt.toExponential()).slice(0,Ft.indexOf("e")+1)+ee)):Dt=new H(Zt+""),Dt.c[0])for((Zt=(ee=Dt.e)+re)<3&&(Zt=0);;)if(Lt=Dt,Dt=ve.times(Lt.plus(Pt(Kt,Lt,re,1))),g(Lt.c).slice(0,Zt)===(Ft=g(Dt.c)).slice(0,Zt)){if(Dt.e<ee&&--Zt,"9999"!=(Ft=Ft.slice(Zt-3,Zt+1))&&(Ut||"4999"!=Ft)){+Ft&&(+Ft.slice(1)||"5"!=Ft.charAt(0))||(W(Dt,Dt.e+je+2,1),_t=!Dt.times(Dt).eq(Kt));break}if(!Ut&&(W(Lt,Lt.e+je+2,0),Lt.times(Lt).eq(Kt))){Dt=Lt;break}re+=4,Zt+=4,Ut=1}return W(Dt,Dt.e+je+1,He,_t)},Ue.toExponential=function(_t,Pt){return null!=_t&&(y(_t,0,Se),_t++),G(this,_t,Pt,1)},Ue.toFixed=function(_t,Pt){return null!=_t&&(y(_t,0,Se),_t=_t+this.e+1),G(this,_t,Pt)},Ue.toFormat=function(_t,Pt,Ft){var Dt,Ut=this;if(null==Ft)null!=_t&&Pt&&"object"==typeof Pt?(Ft=Pt,Pt=null):_t&&"object"==typeof _t?(Ft=_t,_t=Pt=null):Ft=Ze;else if("object"!=typeof Ft)throw Error(Kt+"Argument not an object: "+Ft);if(Dt=Ut.toFixed(_t,Pt),Ut.c){var Lt,Yt=Dt.split("."),Zt=+Ft.groupSize,ee=+Ft.secondaryGroupSize,re=Ft.groupSeparator||"",ve=Yt[0],Me=Yt[1],Se=Ut.s<0,Ie=Se?ve.slice(1):ve,Re=Ie.length;if(ee&&(Lt=Zt,Zt=ee,ee=Lt,Re-=Lt),Zt>0&&Re>0){for(Lt=Re%Zt||Zt,ve=Ie.substr(0,Lt);Lt<Re;Lt+=Zt)ve+=re+Ie.substr(Lt,Zt);ee>0&&(ve+=re+Ie.slice(Lt)),Se&&(ve="-"+ve)}Dt=Me?ve+(Ft.decimalSeparator||"")+((ee=+Ft.fractionGroupSize)?Me.replace(new RegExp("\\d{"+ee+"}\\B","g"),"$&"+(Ft.fractionGroupSeparator||"")):Me):ve}return(Ft.prefix||"")+Dt+(Ft.suffix||"")},Ue.toFraction=function(_t){var Ft,Dt,Ut,Lt,Yt,Zt,re,Me,Se,Ie,Re,Ne,Pe=this,Fe=Pe.c;if(null!=_t&&(!(re=new H(_t)).isInteger()&&(re.c||1!==re.s)||re.lt(Le)))throw Error(Kt+"Argument "+(re.isInteger()?"out of range: ":"not an integer: ")+V(re));if(!Fe)return new H(Pe);for(Ft=new H(Le),Se=Dt=new H(Le),Ut=Me=new H(Le),Ne=g(Fe),Yt=Ft.e=Ne.length-Pe.e-1,Ft.c[0]=ve[(Zt=Yt%ee)<0?ee+Zt:Zt],_t=!_t||re.comparedTo(Ft)>0?Yt>0?Ft:Se:re,Zt=We,We=1/0,re=new H(Ne),Me.c[0]=0;Ie=Pt(re,Ft,0,1),1!=(Lt=Dt.plus(Ie.times(Ut))).comparedTo(_t);)Dt=Ut,Ut=Lt,Se=Me.plus(Ie.times(Lt=Se)),Me=Lt,Ft=re.minus(Ie.times(Lt=Ft)),re=Lt;return Lt=Pt(_t.minus(Dt),Ut,0,1),Me=Me.plus(Lt.times(Se)),Dt=Dt.plus(Lt.times(Ut)),Me.s=Se.s=Pe.s,Re=Pt(Se,Ut,Yt*=2,He).minus(Pe).abs().comparedTo(Pt(Me,Dt,Yt,He).minus(Pe).abs())<1?[Se,Ut]:[Me,Dt],We=Zt,Re},Ue.toNumber=function(){return+V(this)},Ue.toPrecision=function(_t,Pt){return null!=_t&&y(_t,1,Se),G(this,_t,Pt,2)},Ue.toString=function(_t){var Pt,Dt=this,Ut=Dt.s,Lt=Dt.e;return null===Lt?Ut?(Pt="Infinity",Ut<0&&(Pt="-"+Pt)):Pt="NaN":(null==_t?Pt=Lt<=Ve||Lt>=qe?v(g(Dt.c),Lt):b(g(Dt.c),Lt,"0"):10===_t?Pt=b(g((Dt=W(new H(Dt),je+Lt+1,He)).c),Dt.e,"0"):(y(_t,2,tn.length,"Base"),Pt=Ft(b(g(Dt.c),Lt,"0"),10,_t,Ut,!0)),Ut<0&&Dt.c[0]&&(Pt="-"+Pt)),Pt},Ue.valueOf=Ue.toJSON=function(){return V(this)},Ue._isBigNumber=!0,null!=_t&&H.set(_t),H}()).default=Ft.BigNumber=Ft,_t.exports?_t.exports=Ft:(Pt||(Pt="undefined"!=typeof self&&self?self:window),Pt.BigNumber=Ft)}(this)})).BigNumber;const He={ROUNDING_MODE:je.ROUND_DOWN};function M(_t){return(new TextEncoder).encode(_t)}function R(_t){return"string"==typeof _t?R(D(_t)):(new TextDecoder).decode(_t)}je.config(He);const Ve="INVALID_ARGUMENT";function U(_t,Pt="UNKNOWN_ERROR",Ft={}){let Dt=[];Object.keys(Ft).forEach((_t=>{try{Dt.push(_t+"="+JSON.stringify(Ft[_t]))}catch(Pt){Dt.push(_t+"="+JSON.stringify(Ft[_t].toString()))}}));let Ut=_t;Dt.length&&(_t+=" ("+Dt.join(", ")+")");let Lt=new Error(_t);return Lt.reason=Ut,Lt.code=Pt,Object.keys(Ft).forEach((function(_t){Lt[_t]=Ft[_t]})),Lt}function D(_t){if("string"!=typeof _t)throw new Error("hexToBytes only accept strings, got: "+typeof _t);if("0x"===_t.substr(0,2))return D(_t.substr(2));const Pt=new Uint8Array(Math.ceil(_t.length/2));let Ft=0;for(let Dt=0;Dt<_t.length;Dt+=2){const Ut=parseInt(_t.substr(Dt,2),16);if(isNaN(Ut))throw new Error("Cannot read hex string:"+JSON.stringify(_t));Pt[Ft]=Ut,Ft++}return Pt}function q(_t){return Array.from(_t).map((_t=>_t.toString(16).padStart(2,"0"))).join("")}function $(_t,Pt){if("string"==typeof _t){if(Pt&&"hex"===Pt.encoding&&"string"==typeof _t){let Pt=_t;Pt.length>2&&"0x"===Pt.substr(0,2)&&(Pt=Pt.substr(2));const Ft=D(Pt);return Le(Ft)}return Le(M(_t))}return Le(_t)}let qe={noether:"0",wei:"1",kwei:"1000",Kwei:"1000",babbage:"1000",femtoether:"1000",mwei:"1000000",Mwei:"1000000",lovelace:"1000000",picoether:"1000000",gwei:"1000000000",Gwei:"1000000000",shannon:"1000000000",nanoether:"1000000000",nano:"1000000000",szabo:"1000000000000",microether:"1000000000000",micro:"1000000000000",finney:"1000000000000000",milliether:"1000000000000000",milli:"1000000000000000",ether:"1000000000000000000",kether:"1000000000000000000000",grand:"1000000000000000000000",mether:"1000000000000000000000000",gether:"1000000000000000000000000000",tether:"1000000000000000000000000000000"};function H(_t,Pt,Ft){return new Array(Pt-_t.length+1).join(Ft||"0")+_t}function G(_t){return wt(_t)&&_t.name&&-1!==_t.name.indexOf("(")?_t.name:_t.name+"("+J(!1,_t.inputs||[]).join(",")+")"}function z(..._t){const Pt=_t.reduce(((_t,Pt)=>_t+Pt.length),0);var Ft=new Uint8Array(Pt);let Dt=0;for(let Pt of _t)Ft.set(Pt,Dt),Dt+=Pt.length;return Ft}function J(_t,Pt){const Ft=[];return Pt.forEach((function(Pt){if("object"==typeof Pt.components){if("tuple"!==Pt.type.substring(0,5))throw new Error("components found but type is not tuple; report on GitHub");var Dt="",Ut=Pt.type.indexOf("[");Ut>=0&&(Dt=Pt.type.substring(Ut));var Lt=J(_t,Pt.components);bt(Lt)&&_t?Ft.push("tuple("+Lt.join(",")+")"+Dt):_t?Ft.push("("+Lt+")"):Ft.push("("+Lt.join(",")+")"+Dt)}else Ft.push(Pt.type)})),Ft}function W(_t){let Pt=_t.indexOf("("),Ft=_t.indexOf(")");return-1!==Pt&&-1!==Ft?_t.substr(0,Pt):_t}function V(_t){let Pt=_t.indexOf("("),Ft=_t.indexOf(")");return-1!==Pt&&-1!==Ft?_t.substr(Pt+1,Ft-Pt-1).replace(" ",""):""}function K(_t){return null==_t?_t:ot(_t).toNumber()}function Z(_t){return ot(_t).toNumber()}function Y(_t){return mt(_t)?_t.toString(10):""+_t}function X(_t){return"string"==typeof _t&&!_t.startsWith("0x")&&/^[A-Za-z0-9]+$/.test(_t)?"0x"+_t:nt(_t)}function Q(_t){if("string"==typeof _t)return _t.startsWith("0x")&&/^[A-Za-z0-9]+$/.test(_t)?nt(_t):"0x"+q(M(_t));if(_t instanceof Uint8Array)return"0x"+q(_t);throw new Error(`toStringData: Error trying to convert ${_t} (${typeof _t}) to a hex string.`)}function tt(_t){return"boolean"==typeof _t?_t:0!==ot(_t).toNumber()}function et(_t){let Pt=ot(_t),Ft=Pt.toString(16);return Pt.isLessThan(0)?"-0x"+Ft.substr(1):"0x"+Ft}function nt(_t){if(vt(_t))return et(+_t);if(mt(_t))return et(_t);if(yt(_t)){const Pt=_t;if(0===Pt.indexOf("-0x"))return et(Pt);if(0===Pt.indexOf("0x"))return Pt;if(!isFinite(Pt))return q(M(Pt))}if(_t instanceof Uint8Array)return"0x"+q(_t);if(bt(_t)||wt(_t))throw new Error("toHex can only be called with scalar values, not objects or arrays");return et(_t)}function rt(_t){let Pt=_t?_t.toLowerCase():"ether",Ft=qe[Pt];if(void 0===Ft)throw new Error("This unit doesn't exists, please use the one of the following units"+JSON.stringify(qe,null,2));return new je(Ft,10)}function ot(_t){let Pt=_t||0;return mt(Pt)?Pt:("string"==typeof Pt&&(Pt=Pt.trim()),"string"!=typeof Pt||0!==Pt.indexOf("0x")&&0!==Pt.indexOf("-0x")?Pt instanceof Uint8Array?new je(q(Pt),16):new je(Pt,10):new je(Pt.replace("0x","").toLowerCase(),16))}function it(_t){return new je(new Array(_t).fill("1").join(""),2)}function st(_t,Pt=256){let Ft=ot(_t).integerValue();return Ft.isLessThan(0)?it(Pt).plus(Ft).plus(1):Ft}function at(_t,Pt){return"1"==H(_t.toString(2),Pt,"0")[0]}function ct(_t){if("string"!=typeof _t)throw U("invalid address",Ve,{arg:"address",value:_t});if(_t.trim().match(/^(0x)?[0-9a-fA-F]{40}$/))return"0x"!==_t.trim().substring(0,2)&&(_t="0x"+_t),ft(_t);throw U("invalid address",Ve,{arg:"address",value:_t})}function ut(_t,Pt=256){if(at(_t,Pt)){const Ft=it(Pt);return _t.minus(Ft).minus(1)}return _t}function lt(_t){return/^0x[0-9a-f]{40}$/i.test(_t)}function ht(_t){return!!/^(0x)?[0-9a-f]{40}$/i.test(_t)&&(!(!/^(0x)?[0-9a-f]{40}$/.test(_t)&&!/^(0x)?[0-9A-F]{40}$/.test(_t))||pt(_t))}function pt(_t){const Pt=_t.replace("0x","");let Ft=$(Pt.toLowerCase());for(let _t=0;_t<40;_t++)if(parseInt(Ft[_t],16)>7&&Pt[_t].toUpperCase()!==Pt[_t]||parseInt(Ft[_t],16)<=7&&Pt[_t].toLowerCase()!==Pt[_t])return!1;return!0}function ft(_t){if(void 0===_t)return"";const Pt=_t.toLowerCase().replace("0x",""),Ft=$(Pt);let Dt="0x";for(let _t=0;_t<Pt.length;_t++)parseInt(Ft[_t],16)>7?Dt+=Pt[_t].toUpperCase():Dt+=Pt[_t];return Dt}function dt(_t){if(!Array.isArray(_t))throw new Error(`Value was not an array: ${JSON.stringify(_t)}`);return _t}function gt(_t){return lt(_t)?_t:/^[0-9a-f]{40}$/.test(_t)?"0x"+_t:"0x"+H(nt(_t).substr(2),40)}function mt(_t){return _t instanceof je}function yt(_t){return"string"==typeof _t||_t&&_t.constructor&&"String"===_t.constructor.name}function wt(_t){return null!==_t&&!Array.isArray(_t)&&"object"==typeof _t}function vt(_t){return"boolean"==typeof _t}function bt(_t){return Array.isArray(_t)}var Ge,We,Ke;function Nt(Pt,Ft){if(!Pt)throw new Error("jsonrpc method should be specified!");if("string"!=typeof Pt)throw new Error(`jsonrpc must be a string, got ${typeof Pt}!`);return _t.messageId++,{jsonrpc:"2.0",id:_t.messageId,method:Pt,params:Ft||[]}}function xt(_t){return Array.isArray(_t)?_t.every(e):e(_t);function e(_t){return!(!_t||"error"in _t||"2.0"!==_t.jsonrpc||"number"!=typeof _t.id||null==_t.result&&void 0===_t.result)}}
/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */function kt(_t,Pt,Ft,Dt){var Ut,Lt=arguments.length,Kt=Lt<3?Pt:null===Dt?Dt=Object.getOwnPropertyDescriptor(Pt,Ft):Dt;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Kt=Reflect.decorate(_t,Pt,Ft,Dt);else for(var Yt=_t.length-1;Yt>=0;Yt--)(Ut=_t[Yt])&&(Kt=(Lt<3?Ut(Kt):Lt>3?Ut(Pt,Ft,Kt):Ut(Pt,Ft))||Kt);return Lt>3&&Kt&&Object.defineProperty(Pt,Ft,Kt),Kt}function Tt(_t,Pt){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(_t,Pt)}function At(_t){return ot(_t)}function Et(_t){return void 0===_t?"latest":Bt(_t)}function Bt(_t){return void 0===_t||null==_t?null:function(_t){return"latest"===_t||"pending"===_t||"earliest"===_t}(_t)?_t:nt(_t)}function Ot(_t){return _t.from=_t.from,_t.from&&(_t.from=jt(_t.from)),_t.to&&(_t.to=jt(_t.to)),void 0!==_t.gasPrice&&(_t.gasPrice=et(_t.gasPrice)),void 0!==_t.gas&&(_t.gas=et(_t.gas)),void 0!==_t.value&&(_t.value=et(_t.value)),void 0!==_t.nonce&&(_t.nonce=et(_t.nonce)),_t.data&&!_t.data.startsWith("0x")&&/^[A-Za-z0-9]+$/.test(_t.data)&&(_t.data="0x"+_t.data),_t}function St(_t){if("string"!=typeof _t)throw new Error("The provided input for transactionId is not a string, got: "+JSON.stringify(_t));if(0!==_t.indexOf("0x"))throw new Error("TransactionID must start with 0x, got: "+JSON.stringify(_t));if(66!==_t.length)throw new Error("TransactionID must be a 32 byte hex, got: "+JSON.stringify(_t));return _t}function Ct(_t){if("object"!=typeof _t)throw new Error("Did not provide transaction options");if(!_t.from)throw new Error('Missing "from" in transaction options');return _t.from=jt(_t.from),_t.to&&(_t.to=jt(_t.to)),void 0!==_t.gasPrice&&(_t.gasPrice=et(_t.gasPrice)),void 0!==_t.gas&&(_t.gas=et(_t.gas)),void 0!==_t.value&&(_t.value=et(_t.value)),void 0!==_t.nonce&&(_t.nonce=et(_t.nonce)),_t.data&&!_t.data.startsWith("0x")&&/^[A-Za-z0-9]+$/.test(_t.data)&&(_t.data="0x"+_t.data),_t}function It(_t){return _t?(null!==_t.blockNumber&&(_t.blockNumber=Z(_t.blockNumber)),null!==_t.transactionIndex&&(_t.transactionIndex=Z(_t.transactionIndex)),_t.nonce=Z(_t.nonce),_t.gas=Z(_t.gas),_t.gasPrice=ot(_t.gasPrice),_t.value=ot(_t.value),_t):null}function Mt(_t){return _t?(_t.gasLimit=Z(_t.gasLimit),_t.gasUsed=Z(_t.gasUsed),_t.size=Z(_t.size),_t.timestamp=Z(_t.timestamp),null!==_t.number&&(_t.number=Z(_t.number)),_t.difficulty=ot(_t.difficulty),_t.totalDifficulty=ot(_t.totalDifficulty),bt(_t.transactions)&&_t.transactions.forEach((function(Pt,Ft){yt(Pt)||(_t.transactions[Ft]=It(Pt)||_t.transactions[Ft])})),_t):null}function Rt(_t){return _t?(_t.blockNumber&&(_t.blockNumber=Z(_t.blockNumber)),_t.transactionIndex&&(_t.transactionIndex=Z(_t.transactionIndex)),_t.logIndex&&(_t.logIndex=Z(_t.logIndex)),_t):_t}function jt(_t){if(lt(_t))return _t;if(ht(_t))return"0x"+_t;throw new Error(`Invalid address: ${JSON.stringify(_t)}`)}_t.TransactionStatus=void 0,(Ge=_t.TransactionStatus||(_t.TransactionStatus={})).pending="pending",Ge.confirmed="confirmed",Ge.failed="failed",_t.TransactionType=void 0,(We=_t.TransactionType||(_t.TransactionType={})).queued="queued",We.dropped="dropped",We.replaced="replaced",We.pending="pending",We.reverted="reverted",We.confirmed="confirmed",_t.messageId=0;class qt{constructor(_t){this.callName=_t.callName,this.params=_t.params||0,this.inputFormatter=_t.inputFormatter||null,this.outputFormatter=_t.outputFormatter}validateArgs(_t){if(_t.length!==this.params)throw Pt=this.callName,Ft=_t.length,Dt=this.params,new Error(`Invalid number of input parameters to RPC method "${Pt}" given: ${Ft}, expected: ${Dt}`);var Pt,Ft,Dt}formatInput(_t){return this.inputFormatter?this.inputFormatter.map((function(Pt,Ft){return Pt?Pt(_t[Ft]):_t[Ft]})):_t}formatOutput(_t){return null!==_t?this.outputFormatter(_t):null}toPayload(_t){let Pt=this.formatInput(_t);return this.validateArgs(Pt),{method:this.callName,params:Pt}}async execute(_t,...Pt){let Ft=this.toPayload(Pt);if(!_t)throw new Error("Missing RequestManager in method#exec");const Dt=await _t.sendAsync(Ft);return this.formatOutput(Dt)}}class $t{constructor(_t){this.getter=_t.getter,this.outputFormatter=_t.outputFormatter}formatOutput(_t){return this.outputFormatter(_t)}async execute(_t,...Pt){const Ft=await _t.sendAsync({method:this.getter,params:[]});return this.formatOutput(Ft)}}function Ht(_t){return new Promise((Pt=>setTimeout(Pt,_t)))}function Gt(Pt,Ft){const Dt=_t.eth[Ft];if(!Dt)throw new Error(`Could not find the method/property named ${Ft.toString()}`);Object.defineProperty(Pt,Ft,{value:function(){return Dt.execute(this,...arguments)}})}_t.eth=void 0,(Ke=_t.eth||(_t.eth={})).eth_getBalance=new qt({callName:"eth_getBalance",params:2,inputFormatter:[jt,Et],outputFormatter:At}),Ke.eth_getStorageAt=new qt({callName:"eth_getStorageAt",params:3,inputFormatter:[jt,nt,Et],outputFormatter:X}),Ke.eth_getCode=new qt({callName:"eth_getCode",params:2,inputFormatter:[jt,Et],outputFormatter:X}),Ke.eth_getBlockByHash=new qt({callName:"eth_getBlockByHash",params:2,inputFormatter:[Bt,function(_t){return!!_t}],outputFormatter:Mt}),Ke.eth_getBlockByNumber=new qt({callName:"eth_getBlockByNumber",params:2,inputFormatter:[Bt,function(_t){return!!_t}],outputFormatter:Mt}),Ke.eth_getUncleByBlockHashAndIndex=new qt({callName:"eth_getUncleByBlockHashAndIndex",params:2,inputFormatter:[Bt,nt],outputFormatter:Mt}),Ke.eth_getUncleByBlockNumberAndIndex=new qt({callName:"eth_getUncleByBlockNumberAndIndex",params:2,inputFormatter:[Bt,nt],outputFormatter:Mt}),Ke.eth_getBlockTransactionCountByHash=new qt({callName:"eth_getBlockTransactionCountByHash",params:1,inputFormatter:[Bt],outputFormatter:Z}),Ke.eth_getBlockTransactionCountByNumber=new qt({callName:"eth_getBlockTransactionCountByNumber",params:1,inputFormatter:[Bt],outputFormatter:Z}),Ke.eth_getUncleCountByBlockHash=new qt({callName:"eth_getUncleCountByBlockHash",params:1,inputFormatter:[Bt],outputFormatter:Z}),Ke.eth_getUncleCountByBlockNumber=new qt({callName:"eth_getUncleCountByBlockNumber",params:1,inputFormatter:[Bt],outputFormatter:Z}),Ke.eth_getTransactionByHash=new qt({callName:"eth_getTransactionByHash",params:1,inputFormatter:[St],outputFormatter:It}),Ke.eth_getTransactionByBlockHashAndIndex=new qt({callName:"eth_getTransactionByBlockHashAndIndex",params:2,inputFormatter:[Bt,nt],outputFormatter:It}),Ke.eth_getTransactionByBlockNumberAndIndex=new qt({callName:"eth_getTransactionByBlockNumberAndIndex",params:2,inputFormatter:[Bt,nt],outputFormatter:It}),Ke.eth_getTransactionReceipt=new qt({callName:"eth_getTransactionReceipt",params:1,inputFormatter:[St],outputFormatter:function(_t){return _t?(null!==_t.blockNumber&&(_t.blockNumber=Z(_t.blockNumber)),null!==_t.transactionIndex&&(_t.transactionIndex=Z(_t.transactionIndex)),_t.cumulativeGasUsed=Z(_t.cumulativeGasUsed),_t.gasUsed=Z(_t.gasUsed),_t.logs&&bt(_t.logs)&&(_t.logs=_t.logs.map((function(_t){return Rt(_t)}))),_t.status=Z(_t.status||""),_t):null}}),Ke.eth_getTransactionCount=new qt({callName:"eth_getTransactionCount",params:2,inputFormatter:[jt,Et],outputFormatter:Z}),Ke.eth_sendRawTransaction=new qt({callName:"eth_sendRawTransaction",params:1,inputFormatter:[null],outputFormatter:X}),Ke.web3_sha3=new qt({callName:"web3_sha3",params:1,inputFormatter:[null],outputFormatter:X}),Ke.eth_sendTransaction=new qt({callName:"eth_sendTransaction",params:1,inputFormatter:[Ct],outputFormatter:X}),Ke.eth_sign=new qt({callName:"eth_sign",params:2,inputFormatter:[jt,null],outputFormatter:X}),Ke.eth_call=new qt({callName:"eth_call",params:2,inputFormatter:[Ot,Et],outputFormatter:X}),Ke.eth_estimateGas=new qt({callName:"eth_estimateGas",params:1,inputFormatter:[Ot],outputFormatter:Z}),Ke.eth_submitWork=new qt({callName:"eth_submitWork",params:3,inputFormatter:[null,null,null],outputFormatter:tt}),Ke.eth_getWork=new qt({callName:"eth_getWork",params:0,inputFormatter:[],outputFormatter:dt}),Ke.eth_coinbase=new $t({getter:"eth_coinbase",outputFormatter:gt}),Ke.eth_mining=new $t({getter:"eth_mining",outputFormatter:tt}),Ke.eth_hashrate=new $t({getter:"eth_hashrate",outputFormatter:Z}),Ke.eth_syncing=new $t({getter:"eth_syncing",outputFormatter:function(_t){return _t?(_t.startingBlock=Z(_t.startingBlock),_t.currentBlock=Z(_t.currentBlock),_t.highestBlock=Z(_t.highestBlock),_t.knownStates&&(_t.knownStates=Z(_t.knownStates),_t.pulledStates=Z(_t.pulledStates)),_t):_t}}),Ke.eth_gasPrice=new $t({getter:"eth_gasPrice",outputFormatter:At}),Ke.eth_accounts=new $t({getter:"eth_accounts",outputFormatter:dt}),Ke.eth_blockNumber=new $t({getter:"eth_blockNumber",outputFormatter:Z}),Ke.eth_protocolVersion=new $t({getter:"eth_protocolVersion",outputFormatter:Z}),Ke.web3_clientVersion=new $t({getter:"web3_clientVersion",outputFormatter:Y}),Ke.net_version=new $t({getter:"net_version",outputFormatter:Y}),Ke.shh_version=new qt({callName:"shh_version",params:0,inputFormatter:[],outputFormatter:Z}),Ke.shh_post=new qt({callName:"shh_post",params:1,inputFormatter:[null],outputFormatter:tt}),Ke.personal_newAccount=new qt({callName:"personal_newAccount",params:1,inputFormatter:[null],outputFormatter:gt}),Ke.personal_importRawKey=new qt({callName:"personal_importRawKey",params:2,inputFormatter:[null,null],outputFormatter:gt}),Ke.personal_sign=new qt({callName:"personal_sign",params:3,inputFormatter:[Q,jt,null],outputFormatter:X}),Ke.personal_ecRecover=new qt({callName:"personal_ecRecover",params:2,inputFormatter:[Q,null],outputFormatter:gt}),Ke.personal_unlockAccount=new qt({callName:"personal_unlockAccount",params:3,inputFormatter:[jt,null,K],outputFormatter:tt}),Ke.personal_sendTransaction=new qt({callName:"personal_sendTransaction",params:2,inputFormatter:[Ct,null],outputFormatter:X}),Ke.personal_lockAccount=new qt({callName:"personal_lockAccount",params:1,inputFormatter:[jt],outputFormatter:tt}),Ke.personal_listAccounts=new $t({getter:"personal_listAccounts",outputFormatter:dt}),Ke.net_listening=new $t({getter:"net_listening",outputFormatter:tt}),Ke.net_peerCount=new $t({getter:"net_peerCount",outputFormatter:Z}),Ke.eth_newFilter=new qt({callName:"eth_newFilter",params:1,inputFormatter:[function(_t){return _t}],outputFormatter:nt}),Ke.eth_getLogs=new qt({callName:"eth_getLogs",params:1,inputFormatter:[nt],outputFormatter:dt}),Ke.eth_newBlockFilter=new qt({callName:"eth_newBlockFilter",params:0,inputFormatter:[],outputFormatter:nt}),Ke.eth_newPendingTransactionFilter=new qt({callName:"eth_newPendingTransactionFilter",params:0,inputFormatter:[],outputFormatter:nt}),Ke.eth_uninstallFilter=new qt({callName:"eth_uninstallFilter",params:1,inputFormatter:[nt],outputFormatter:tt}),Ke.eth_getFilterLogs=new qt({callName:"eth_getFilterLogs",params:1,inputFormatter:[nt],outputFormatter:dt}),Ke.eth_getFilterChanges=new qt({callName:"eth_getFilterChanges",params:1,inputFormatter:[nt],outputFormatter:dt}),Ke.eth_submitHashrate=new qt({callName:"eth_submitHashrate",params:2,inputFormatter:[null,null],outputFormatter:tt}),Ke.shh_newIdentity=new qt({callName:"shh_newIdentity",params:0,inputFormatter:[],outputFormatter:X}),Ke.shh_hasIdentity=new qt({callName:"shh_hasIdentity",params:1,inputFormatter:[null],outputFormatter:tt}),Ke.shh_newGroup=new qt({callName:"shh_newGroup",params:0,inputFormatter:[],outputFormatter:X}),Ke.shh_addToGroup=new qt({callName:"shh_addToGroup",params:1,inputFormatter:[null],outputFormatter:tt}),Ke.shh_newFilter=new qt({callName:"shh_newFilter",params:1,inputFormatter:[null],outputFormatter:nt}),Ke.shh_uninstallFilter=new qt({callName:"shh_uninstallFilter",params:1,inputFormatter:[null],outputFormatter:tt}),Ke.shh_getLogs=new qt({callName:"shh_getLogs",params:1,inputFormatter:[null],outputFormatter:dt}),Ke.shh_getFilterMessages=new qt({callName:"shh_getFilterMessages",params:1,inputFormatter:[null],outputFormatter:dt}),Ke.shh_getFilterChanges=new qt({callName:"shh_getFilterChanges",params:1,inputFormatter:[null],outputFormatter:dt}),Ke.shh_getMessages=new qt({callName:"shh_getMessages",params:1,inputFormatter:[null],outputFormatter:dt});class zt{constructor(_t){this.provider=_t,this.requests=new Map}async sendAsync(_t){const Pt=await this.provider;if(!Pt)throw new Error("Provider not set or invalid");let Ft=Nt(_t.method,_t.params);const Ut=Dt();return this.requests.set(Ft.id,Ut),Pt.sendAsync(Ft,((_t,Pt)=>{this.requests.delete(Ft.id),_t?Ut.reject(_t):xt(Pt)?Ut.resolve(Pt.result):Ut.reject(function(_t){let Pt=_t&&_t.error&&_t.error.message?_t.error.message:"Invalid JSON RPC response: "+JSON.stringify(_t);return new Error(Pt)}(Pt))})),Ut}setProvider(_t){this.provider=_t}async getConfirmedTransaction(_t){const Pt=await this.waitForCompletion(_t);if(this.isFailure(Pt))throw new Error(`Transaction "${_t}" failed`);return Pt}async waitForCompletion(Pt,Ft){const Dt=St(Pt);if(await this.isTxDropped(Dt,Ft)){const Pt=await this.getTransactionAndReceipt(Dt);return Object.assign(Object.assign({},Pt),{status:_t.TransactionStatus.failed})}for(;;){const Pt=await this.getTransactionAndReceipt(Dt);if(!this.isPending(Pt)&&Pt.receipt)return Object.assign(Object.assign({},Pt),{status:this.isFailure(Pt)?_t.TransactionStatus.failed:_t.TransactionStatus.confirmed});await Ht(2e3)}}async getTransaction(Pt){let Ft,Dt=null;const Ut=St(Pt);try{const _t=(await this.eth_accounts())[0];_t&&(Dt=await this.eth_getTransactionCount(_t,"latest"))}catch(_t){Dt=null}try{if(Ft=await this.eth_getTransactionByHash(Ut),null==Ft)return null}catch(_t){return null}if(null==Ft.blockNumber){if(null!=Dt){if(Ft.nonce<Dt)return{hash:Ut,type:_t.TransactionType.replaced,nonce:Ft.nonce};if(Ft.nonce>Dt)return{hash:Ut,type:_t.TransactionType.queued,nonce:Ft.nonce}}return Object.assign({type:_t.TransactionType.pending},Ft)}let Lt;try{if(Lt=await this.eth_getTransactionReceipt(Ut),null==Lt||0===Lt.status)return Object.assign({type:_t.TransactionType.reverted},Ft)}catch(_t){return null}return Object.assign(Object.assign({type:_t.TransactionType.confirmed},Ft),{receipt:Lt})}async isTxDropped(_t,Pt=15){let Ft=Pt;for(;Ft>0;){if(null!==await this.getTransactionAndReceipt(_t))return!1;Ft-=1,await Ht(2e3)}return!0}async getTransactionAndReceipt(_t){_t=St(_t);const[Pt,Ft]=await Promise.all([this.eth_getTransactionByHash(_t),this.eth_getTransactionReceipt(_t)]);return Object.assign(Object.assign({},Pt),{receipt:Ft})}isPending(_t){return _t&&null===_t.blockNumber}isFailure(_t){return _t&&(!_t.receipt||0===_t.receipt.status)}}function Jt(_t){return"slice"in _t&&_t.slice||(_t.slice=function(){var Pt=Array.prototype.slice.call(arguments);return new Uint8Array(Array.prototype.slice.apply(_t,Pt))}),_t}function Wt(_t){if(null==_t)throw U("cannot convert null value to array",Ve,{arg:"value",value:_t});if(_t instanceof Uint8Array)return Jt(new Uint8Array(_t));if("string"==typeof _t){let Dt=_t.match(/^(0x)?[0-9a-fA-F]*$/);if(!Dt)throw U("invalid hexidecimal string",Ve,{arg:"value",value:_t});if("0x"!==Dt[1])throw U("hex string must have 0x prefix",Ve,{arg:"value",value:_t});(_t=_t.substring(2)).length%2&&(_t="0"+_t);for(var Pt=[],Ft=0;Ft<_t.length;Ft+=2)Pt.push(parseInt(_t.substr(Ft,2),16));return Jt(new Uint8Array(Pt))}if(function(_t){if(!_t||parseInt(String(_t.length))!=_t.length||"string"==typeof _t)return!1;for(var Pt=0;Pt<_t.length;Pt++){var Ft=_t[Pt];if(Ft<0||Ft>=256||parseInt(String(Ft))!=Ft)return!1}return!0}(_t))return Jt(new Uint8Array(_t));throw U("invalid arrayify value",void 0,{arg:"value",value:_t,type:typeof _t})}function Vt(_t,Pt,Ft){Object.defineProperty(_t,Pt,{enumerable:!0,value:Ft,writable:!1})}kt([Gt,Tt("design:type",Function)],zt.prototype,"web3_clientVersion",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"web3_sha3",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"net_version",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"net_peerCount",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"net_listening",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_protocolVersion",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_syncing",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_coinbase",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_mining",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_hashrate",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_gasPrice",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_accounts",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_blockNumber",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getBalance",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getStorageAt",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getTransactionCount",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getBlockTransactionCountByHash",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getBlockTransactionCountByNumber",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getUncleCountByBlockHash",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getUncleCountByBlockNumber",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getCode",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_sign",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_sendTransaction",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_sendRawTransaction",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_call",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_estimateGas",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getBlockByHash",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getBlockByNumber",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getTransactionByHash",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getTransactionByBlockHashAndIndex",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getTransactionByBlockNumberAndIndex",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getTransactionReceipt",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getUncleByBlockHashAndIndex",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getUncleByBlockNumberAndIndex",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_newFilter",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_newBlockFilter",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_newPendingTransactionFilter",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_uninstallFilter",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getFilterChanges",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getFilterLogs",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getLogs",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getWork",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_submitWork",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_submitHashrate",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"shh_post",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"shh_version",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"shh_newIdentity",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"shh_hasIdentity",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"shh_newGroup",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"shh_addToGroup",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"shh_newFilter",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"shh_uninstallFilter",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"shh_getFilterChanges",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"shh_getMessages",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"personal_unlockAccount",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"personal_newAccount",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"personal_listAccounts",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"personal_lockAccount",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"personal_importRawKey",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"personal_sendTransaction",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"personal_sign",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"personal_ecRecover",void 0);const Ye=new je(-1),Qe=new je(0),Ze=new je(1),tn=new je("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function Qt(_t){return function(_t,Pt){function n(Pt){return new Error('unexpected character "'+_t[Pt]+'" at position '+Pt+' in "'+_t+'"')}for(var Ft={type:"",name:"",state:{allowType:!0}},Dt=Ft,Ut=0;Ut<_t.length;Ut++){var Lt=_t[Ut];switch(Lt){case"(":if(!Dt.state.allowParams)throw n(Ut);Dt.state.allowType=!1,Dt.type=te(Dt.type),Dt.components=[{type:"",name:"",parent:Dt,state:{allowType:!0}}],Dt=Dt.components[0];break;case")":delete Dt.state,"indexed"===Dt.name&&(Dt.indexed=!0,Dt.name=""),Dt.type=te(Dt.type);var Kt=Dt;if(!(Dt=Dt.parent))throw n(Ut);delete Kt.parent,Dt.state.allowParams=!1,Dt.state.allowName=!0,Dt.state.allowArray=!0;break;case",":delete Dt.state,"indexed"===Dt.name&&(Dt.indexed=!0,Dt.name=""),Dt.type=te(Dt.type);var Yt={type:"",name:"",parent:Dt.parent,state:{allowType:!0}};Dt.parent.components.push(Yt),delete Dt.parent,Dt=Yt;break;case" ":Dt.state.allowType&&""!==Dt.type&&(Dt.type=te(Dt.type),delete Dt.state.allowType,Dt.state.allowName=!0,Dt.state.allowParams=!0),Dt.state.allowName&&""!==Dt.name&&("indexed"===Dt.name?(Dt.indexed=!0,Dt.name=""):Dt.state.allowName=!1);break;case"[":if(!Dt.state.allowArray)throw n(Ut);Dt.type+=Lt,Dt.state.allowArray=!1,Dt.state.allowName=!1,Dt.state.readArray=!0;break;case"]":if(!Dt.state.readArray)throw n(Ut);Dt.type+=Lt,Dt.state.readArray=!1,Dt.state.allowArray=!0,Dt.state.allowName=!0;break;default:if(Dt.state.allowType)Dt.type+=Lt,Dt.state.allowParams=!0,Dt.state.allowArray=!0;else if(Dt.state.allowName)Dt.name+=Lt,delete Dt.state.allowArray;else{if(!Dt.state.readArray)throw n(Ut);Dt.type+=Lt}}}if(Dt.parent)throw new Error("unexpected eof");return delete Ft.state,"indexed"===Dt.name&&(Dt.indexed=!0,Dt.name=""),Ft.type=te(Ft.type),Ft}(_t)}function te(_t){return _t.match(/^uint($|[^1-9])/)?_t="uint256"+_t.substring(4):_t.match(/^int($|[^1-9])/)&&(_t="int256"+_t.substring(3)),_t}const en=new RegExp(/^bytes([0-9]*)$/),nn=new RegExp(/^(u?int)([0-9]*)$/),rn=new RegExp(/^(.*)\[([0-9]*)\]$/),oe=function(_t,Pt){var Ft=_t.match(nn);return Ft&&parseInt(Ft[2])<=48?Pt.toNumber():Pt};class ie{constructor(_t,Pt,Ft,Dt="",Ut){this.coerceFunc=_t,this.name=Pt,this.type=Ft,this.localName=Dt,this.dynamic=Ut}}class se extends ie{constructor(_t){super(_t.coerceFunc,_t.name,_t.type,void 0,_t.dynamic),Vt(this,"coder",_t)}encode(_t){return this.coder.encode(_t)}decode(_t,Pt){return this.coder.decode(_t,Pt)}}class ae extends ie{constructor(_t,Pt){super(_t,"null","",Pt,!1)}encode(_t){return Wt([])}decode(_t,Pt){if(Pt>_t.length)throw new Error("invalid null");return{consumed:0,value:this.coerceFunc("null",void 0)}}}function ce(_t,Pt){return new je(_t.toString(2).substr(-Pt),2)}class ue extends ie{constructor(_t,Pt,Ft,Dt){const Ut=(Ft?"int":"uint")+8*Pt;super(_t,Ut,Ut,Dt,!1),this.size=Pt,this.signed=Ft}encode(_t){try{let Pt=ot(_t);if(this.signed){let _t=ce(tn,8*this.size-1);if(Pt.gt(_t))throw new Error("out-of-bounds");if(_t=_t.plus(Ze).multipliedBy(Ye),Pt.lt(_t))throw new Error("out-of-bounds")}else if(Pt.lt(Qe)||Pt.gt(ce(tn,8*this.size)))throw new Error("out-of-bounds");Pt=ce(st(Pt,8*this.size),8*this.size),this.signed&&(Pt=st(ut(Pt,8*this.size),256));let Ft=H(st(Pt).toString(16),64);if(-1!=Ft.indexOf("NaN"))throw U("invalid number value, NaN",Ve,{arg:this.localName,coderType:this.name,value:_t,v:Pt,twosComplement:st(Pt),twosComplement16:st(Pt).toString(16),pad:H(st(Pt).toString(16),64),size:this.size});return D(Ft)}catch(Pt){throw U("invalid number value",Ve,{arg:this.localName,coderType:this.name,value:_t,message:Pt.toString()})}}decode(_t,Pt){if(_t.length<Pt+32)throw U("insufficient data for "+this.name+" type",Ve,{arg:this.localName,coderType:this.name,value:nt(_t.slice(Pt,Pt+32))});var Ft=32-this.size,Dt=new je(q(_t.slice(Pt+Ft,Pt+32)),16);return Dt=this.signed?ut(Dt,8*this.size):ce(Dt,8*this.size),{consumed:32,value:this.coerceFunc(this.name,Dt)}}}var on=new ue((function(_t,Pt){return Pt}),32,!1,"none");class he extends ie{constructor(_t,Pt,Ft){const Dt="bytes"+Pt;super(_t,Dt,Dt,Ft,!1),this.length=Pt}encode(_t){var Pt=new Uint8Array(32);try{if("string"==typeof _t&&_t.length%2!=0)throw new Error("hex string cannot be odd-length");let Ft=Wt(_t);if(Ft.length>this.length)throw new Error("incorrect data length");Pt.set(Ft)}catch(Pt){throw U("invalid "+this.name+" value. Use hex strings or Uint8Array",Ve,{arg:this.localName,coderType:this.name,value:Pt.value||_t,details:Pt.message})}return Pt}decode(_t,Pt){if(_t.length<Pt+32)throw U("insufficient data for "+this.name+" type",Ve,{arg:this.localName,coderType:this.name,value:nt(_t.slice(Pt,Pt+32))});return{consumed:32,value:this.coerceFunc(this.name,_t.slice(Pt,Pt+this.length))}}}function pe(_t){var Pt=32*Math.ceil(_t.length/32),Ft=new Uint8Array(Pt-_t.length);return z(on.encode(_t.length),_t,Ft)}function fe(_t,Pt,Ft){if(_t.length<Pt+32)throw U("insufficient data for dynamicBytes length",Ve,{arg:Ft,coderType:"dynamicBytes",value:nt(_t.slice(Pt,Pt+32))});var Dt=on.decode(_t,Pt).value;try{Dt=Dt.toNumber()}catch(_t){throw _t("dynamic bytes count too large",Ve,{arg:Ft,coderType:"dynamicBytes",value:Dt.toString()})}if(_t.length<Pt+32+Dt)throw U("insufficient data for dynamicBytes type",Ve,{arg:Ft,coderType:"dynamicBytes",value:nt(_t.slice(Pt,Pt+32+Dt))});return{consumed:32+32*Math.ceil(Dt/32),value:_t.slice(Pt+32,Pt+32+Dt)}}function de(_t){return 32*Math.ceil(_t/32)}function ge(_t,Pt){if(Array.isArray(Pt));else{if(!Pt||"object"!=typeof Pt)throw U("invalid tuple value",Ve,{coderType:"tuple",value:Pt});var Ft=[];_t.forEach((function(_t){Ft.push(Pt[_t.localName])})),Pt=Ft}if(_t.length!==Pt.length)throw U("types/value length mismatch",Ve,{coderType:"tuple",value:Pt});var Dt=[];_t.forEach((function(_t,Ft){Dt.push({dynamic:_t.dynamic,value:_t.encode(Pt[Ft])})}));var Ut=0,Lt=0;Dt.forEach((function(_t){_t.dynamic?(Ut+=32,Lt+=de(_t.value.length)):Ut+=de(_t.value.length)}));var Kt=0,Yt=Ut,Zt=new Uint8Array(Ut+Lt);return Dt.forEach((function(_t){_t.dynamic?(Zt.set(on.encode(Yt),Kt),Kt+=32,Zt.set(_t.value,Yt),Yt+=de(_t.value.length)):(Zt.set(_t.value,Kt),Kt+=de(_t.value.length))})),Zt}class me extends Array{}class ye extends ie{constructor(_t,Pt,Ft,Dt){super(_t,"array",Pt.type+"["+(Ft>=0?Ft:"")+"]",Dt,-1===Ft||Pt.dynamic),this.coder=Pt,this.length=Ft}encode(_t){if(!Array.isArray(_t))throw U("expected array value",Ve,{arg:this.localName,coderType:"array",value:_t});var Pt=this.length,Ft=new Uint8Array(0);-1===Pt&&(Pt=_t.length,Ft=on.encode(Pt)),function(_t,Pt,Ft){if(Ft||(Ft=""),_t<Pt)throw U("missing argument"+Ft,"MISSING_ARGUMENT",{count:_t,expectedCount:Pt});if(_t>Pt)throw U("too many arguments"+Ft,"UNEXPECTED_ARGUMENT",{count:_t,expectedCount:Pt})}(Pt,_t.length,"in coder array"+(this.localName?" "+this.localName:""));for(var Dt=[],Ut=0;Ut<_t.length;Ut++)Dt.push(this.coder);return z(Ft,ge(Dt,_t))}decode(_t,Pt){var Ft=0,Dt=this.length;if(-1===Dt){try{var Ut=on.decode(_t,Pt)}catch(_t){throw _t("insufficient data for dynamic array length",Ve,{arg:this.localName,coderType:"array",value:_t.value})}try{Dt=Ut.value.toNumber()}catch(_t){throw _t("array count too large",Ve,{arg:this.localName,coderType:"array",value:Ut.value.toString()})}Ft+=Ut.consumed,Pt+=Ut.consumed}for(var Lt=[],Kt=0;Kt<Dt;Kt++)Lt.push(new se(this.coder));var Yt=function(_t,Pt,Ft){var Dt=Ft,Ut=0,Lt=[];return _t.forEach((function(_t){if(_t.dynamic){var Kt=on.decode(Pt,Ft);(Yt=_t.decode(Pt,Dt+Kt.value.toNumber())).consumed=Kt.consumed}else var Yt=_t.decode(Pt,Ft);null!=Yt.value&&Lt.push(Yt.value),Ft+=Yt.consumed,Ut+=Yt.consumed})),{value:Lt,consumed:Ut}}(Lt,_t,Pt);return Yt.consumed+=Ft,Yt.value=this.coerceFunc(this.type,Yt.value),Yt}}class we extends ie{constructor(_t,Pt,Ft){var Dt=!1,Ut=[];Pt.forEach((function(_t){_t.dynamic&&(Dt=!0),Ut.push(_t.type)})),super(_t,"tuple","tuple("+Ut.join(",")+")",Ft,Dt),this.coders=Pt}encode(_t){return ge(this.coders,_t)}decode(_t,Pt){var Ft=function(_t,Pt,Ft){var Dt=Ft,Ut=0,Lt=new me;return _t.forEach((function(_t){if(_t.dynamic){var Kt=on.decode(Pt,Ft);(Yt=_t.decode(Pt,Dt+Kt.value.toNumber())).consumed=Kt.consumed}else var Yt=_t.decode(Pt,Ft);null!=Yt.value&&Lt.push(Yt.value),Ft+=Yt.consumed,Ut+=Yt.consumed})),_t.forEach((function(_t,Pt){let Ft=_t.localName;Ft&&("length"===Ft&&(Ft="_length"),null==Lt[Ft]&&(Lt[Ft]=Lt[Pt]))})),{value:Lt,consumed:Ut}}(this.coders,_t,Pt);return Ft.value=this.coerceFunc(this.type,Ft.value),Ft}}const an={address:class extends ie{constructor(_t,Pt){super(_t,"address","address",Pt,!1)}encode(_t){let Pt=new Uint8Array(32);const Ft=_t.trim();if(!ht(Ft))throw U("invalid address format",Ve,{arg:this.localName,coderType:"address",value:_t});try{Pt.set(D(jt(Ft)),12)}catch(Pt){throw U(`invalid address (${Pt.message})`,Ve,{arg:this.localName,coderType:"address",value:_t})}return Pt}decode(_t,Pt){if(_t.length<Pt+32)throw U("insufficuent data for address type",Ve,{arg:this.localName,coderType:"address",value:nt(_t.slice(Pt,Pt+32)),missingBytes:Pt+32-_t.length});return{consumed:32,value:this.coerceFunc("address",ct(nt(_t.slice(Pt+12,Pt+32))))}}},bool:class extends ie{constructor(_t,Pt){super(_t,"bool","bool",Pt,!1)}encode(_t){return on.encode(_t?1:0)}decode(_t,Pt){try{var Ft=on.decode(_t,Pt)}catch(_t){if("insufficient data for uint256 type"===_t.reason)throw U("insufficient data for boolean type",Ve,{arg:this.localName,coderType:"boolean",value:_t.value});throw _t}return{consumed:Ft.consumed,value:this.coerceFunc("bool",!Ft.value.isZero())}}},string:class extends ie{constructor(_t,Pt){super(_t,"string","string",Pt,!0)}encode(_t){if("string"!=typeof _t)throw U("invalid string value",Ve,{arg:this.localName,coderType:"string",value:_t});return pe(M(_t))}decode(_t,Pt){var Ft=fe(_t,Pt,this.localName);return Ft.value=this.coerceFunc("string",R(Ft.value)),Ft}},bytes:class extends ie{constructor(_t,Pt){super(_t,"bytes","bytes",Pt,!0)}encode(_t){try{return pe(Wt(_t))}catch(_t){throw _t("invalid bytes value",Ve,{arg:this.localName,coderType:"bytes",value:_t.value})}}decode(_t,Pt){var Ft=fe(_t,Pt,this.localName);return Ft.value=this.coerceFunc("bytes",Ft.value),Ft}},function:class extends he{constructor(_t,Pt){super(_t,24,Pt)}}};function be(_t,Pt){var Ft,Dt=an[Pt.type];if(Dt)return new Dt(_t,Pt.name);if(Ft=Pt.type.match(nn)){let Dt=parseInt(Ft[2]||"256");if(0===Dt||Dt>256||Dt%8!=0)throw U("invalid "+Ft[1]+" bit length",Ve,{arg:"param",value:Pt});return new ue(_t,Dt/8,"int"===Ft[1],Pt.name)}if(Ft=Pt.type.match(en)){let Dt=parseInt(Ft[1]);if(0===Dt||Dt>32)throw U("invalid bytes length",Ve,{arg:"param",value:Pt});return new he(_t,Dt,Pt.name)}if(Ft=Pt.type.match(rn)){const Dt=Object.assign({},Pt);let Ut=parseInt(Ft[2]||"-1");return Dt.type=Ft[1],new ye(_t,be(_t,Dt),Ut,Pt.name)}if("tuple"===Pt.type.substring(0,5))return function(_t,Pt,Ft){Pt||(Pt=[]);var Dt=Pt.map((Pt=>be(_t,Pt)));return new we(_t,Dt,Ft)}(_t,Pt.components,Pt.name);if(""===Pt.type)return new ae(_t,Pt.name);throw U("invalid type",Ve,{arg:"type",value:Pt.type,fullType:Pt})}class _e{constructor(_t){!function(_t,Pt){if(!(_t instanceof Pt))throw U("missing new","MISSING_NEW",{name:Pt.name})}(this,_e),_t||(_t=oe),Vt(this,"coerceFunc",_t)}encode(_t,Pt){if(_t.length!==Pt.length)throw U("types/values length mismatch",Ve,{count:{types:_t.length,values:Pt.length},value:{types:_t,values:Pt}});const Ft=_t.map((_t=>"string"==typeof _t?Qt(_t):_t)).map((_t=>be(this.coerceFunc,_t)));return new we(this.coerceFunc,Ft,"_").encode(Pt)}decode(_t,Pt){const Ft=_t.map((_t=>"string"==typeof _t?Qt(_t):_t)).map((_t=>be(this.coerceFunc,_t)));return new we(this.coerceFunc,Ft,"_").decode(Pt,0).value}}const sn=new _e;var un;!function(_t){_t.encodeParams=function(_t,Pt){return q(sn.encode(_t,Pt))},_t.decodeParams=function(_t,Pt){if(_t.length>0&&(!Pt||"0x"===Pt||"0X"===Pt))throw new Error("Returned values aren't valid, did it run Out of Gas? You might also see this error if you are not using the correct ABI for the contract you are retrieving data from, requesting data from a block number that does not exist, or querying a node which is not fully synced.");return sn.decode(_t,D("0x"+Pt.replace(/0x/i,"")))}}(un||(un={}));class xe{constructor(_t){this.json=_t,this._inputTypes=_t.inputs||[],this._outputTypes=_t.outputs||[],this._constant=!!_t.constant,this._payable=!!_t.payable||"payable"===_t.stateMutability,this.needsToBeTransaction=this._payable||"constant"in _t&&!_t.constant||"nonpayable"===_t.stateMutability,this._name=G(_t)}extractDefaultBlock(_t){return _t.length>this._inputTypes.length&&!wt(_t[_t.length-1])&&Et(_t.pop())||"latest"}validateArgs(_t){if(_t.some((_t=>void 0===_t)))throw new Error("Invalid call, some arguments are undefined");let Pt=_t.filter((function(_t){return!(!0===wt(_t)&&!1===bt(_t)&&!1===mt(_t)&&!(_t instanceof Uint8Array))}));if(Pt.length!==this._inputTypes.length)throw Ft=Pt.length,Dt=this._inputTypes.length,new Error(`Invalid number of arguments to Solidity function. given: ${Ft}, expected: ${Dt}`);var Ft,Dt}toPayload(_t){let Pt={to:void 0,data:void 0,value:void 0,from:void 0};_t.length>this._inputTypes.length&&wt(_t[_t.length-1])&&(Pt=_t.pop()),this.validateArgs(_t);const Ft=this.signature();let Dt=un.encodeParams(this._inputTypes,_t);return 0==Dt.indexOf("0x")&&(Dt=Dt.substr(2)),Pt.data="0x"+Ft+Dt,Pt}signature(){return $(this._name).slice(0,8)}unpackOutput(_t){if(!_t)return;const Pt=_t.length>=2?_t.slice(2):_t;let Ft=un.decodeParams(this._outputTypes,Pt);return 1===Ft.length?Ft[0]:Ft}async execute(_t,Pt,...Ft){if(!_t)throw new Error(`Cannot call function ${this.displayName()} because there is no requestManager`);if(this.needsToBeTransaction){const Dt=this.toPayload(Ft);if(Dt.to=Pt,Dt.value>0&&!this._payable)throw new Error("Cannot send value to non-payable function");if(!Dt.from)throw new Error('Missing "from" in transaction options');return await _t.eth_sendTransaction(Dt)}{const Dt=this.extractDefaultBlock(Ft),Ut=this.toPayload(Ft);Ut.to=Pt;const Lt=await _t.eth_call(Ut,Dt);return this.unpackOutput(Lt)}}estimateGas(_t,Pt,...Ft){if(!(_t instanceof zt))throw new Error("estimateGas needs to receive a RequestManager as first argument");let Dt=this.toPayload(Ft);return Dt.to=Pt,_t.eth_estimateGas(Dt)}displayName(){return W(this._name)}typeName(){return V(this._name)||"void"}attachToContract(_t){let Pt=this.displayName();const Ft=Object.assign(((...Pt)=>this.execute(_t.requestManager,_t.address,...Pt)),{estimateGas:this.estimateGas.bind(this,_t.requestManager,_t.address),toPayload:(..._t)=>this.toPayload(_t)});_t[Pt]||(_t[Pt]=Ft),_t[Pt][this.typeName()]=Ft}}function ke(_t){if(null==_t)return null;const Pt=String(_t).toString();return 0===Pt.indexOf("0x")?Pt:q(M(Pt))}class Te{constructor(_t){this.requestManager=_t,this.isStarted=!1,this.isDisposed=!1,this.formatter=_t=>_t,this.filterId=Dt(),this.callbacks=[],this.stopSemaphore=Dt()}async watch(_t){if(this.isDisposed)throw new Error("The filter was disposed");_t&&(this.callbacks.push(_t),this.isStarted||await this.start())}async start(){if(this.isDisposed)throw new Error("The filter was disposed");if(!this.isStarted){this.isStarted=!0;try{const _t=await this.getNewFilter();if(!_t)throw new Error("Could not create a filter, response: "+JSON.stringify(_t));this.filterId.resolve(_t)}catch(_t){throw _t}this.stopSemaphore=Dt(),await this.poll()}}async stop(){if(!this.isStarted)return;if(this.isDisposed)return;this.isDisposed=!0;const _t=await this.filterId;if(this.isStarted=!1,this.stopSemaphore&&await this.stopSemaphore,!0!==await this.uninstall())throw new Error(`Couldn't stop the eth filter: ${_t}`)}async poll(){if(this.isStarted){if(this.callbacks.length){const _t=await this.getChanges();this.callbacks.forEach((Pt=>{this.formatter?_t.forEach((_t=>{Pt(this.formatter(_t))})):_t.forEach((_t=>Pt(_t)))}))}this.stopSemaphore.resolve(1),this.isStarted&&(this.stopSemaphore=Dt(),setTimeout((_t=()=>this.poll(),function(){_t().catch((_t=>console.error(_t)))}),500))}else this.stopSemaphore.resolve(1);var _t}}class Ae extends Te{constructor(_t,Pt,Ft=(_t=>_t)){super(_t),this.requestManager=_t,this.options=Pt,this.formatter=Ft,this.options=this.options||{},this.options.topics=this.options.topics||[],this.options.topics=this.options.topics.map((function(_t){return ke(_t)})),this.options={topics:this.options.topics,address:this.options.address?this.options.address:void 0,fromBlock:"number"==typeof this.options.fromBlock||"string"==typeof this.options.fromBlock?Bt(this.options.fromBlock)||void 0:"latest",toBlock:"number"==typeof this.options.toBlock||"string"==typeof this.options.toBlock?Bt(this.options.toBlock)||void 0:"latest"}}async getLogs(){this.isStarted||await this.start();const _t=await this.filterId;return this.requestManager.eth_getFilterLogs(_t)}async getNewFilter(){return this.requestManager.eth_newFilter(this.options)}async getChanges(){const _t=await this.filterId;return this.requestManager.eth_getFilterChanges(_t)}async uninstall(){const _t=await this.filterId;return this.requestManager.eth_uninstallFilter(_t)}}class Ee{constructor(_t,Pt,Ft){this.requestManager=_t,this.address=Ft,this._anonymous=!1,this._params=Pt.inputs||[],this._name=G(Pt),this._anonymous=Pt.anonymous||!1}types(_t){return this._params.filter((function(Pt){return Pt.indexed===_t}))}displayName(){return W(this._name)}typeName(){return V(this._name)||"void"}signature(){return $(this._name)}encode(_t={},Pt={}){let Ft={topics:[],address:this.address};void 0!==Pt.fromBlock&&(Ft.fromBlock=Bt(Pt.fromBlock)||void 0),void 0!==Pt.toBlock&&(Ft.toBlock=Bt(Pt.toBlock)||void 0),Ft.topics=Ft.topics||[],this._anonymous||Ft.topics.push("0x"+this.signature());let Dt=this._params.filter((function(_t){return!0===_t.indexed})).map((function(Pt){let Ft=_t[Pt.name];return null==Ft?null:bt(Ft)?Ft.map((function(_t){return"0x"+un.encodeParams([Pt],[_t])})):"0x"+un.encodeParams([Pt],[Ft])}));return Ft.topics=Ft.topics.concat(Dt),Ft}decode(_t){_t.data=_t.data||"",_t.topics=_t.topics||[];let Pt=(this._anonymous?_t.topics:_t.topics.slice(1)).map((function(_t){return _t.slice(2)})).join(""),Ft=un.decodeParams(this.types(!0),Pt),Dt=_t.data.slice(2),Ut=un.decodeParams(this.types(!1),Dt);const Lt=this._params.reduce((function(_t,Pt){return _t[Pt.name]=Pt.indexed?Ft.shift():Ut.shift(),_t}),{});return Object.assign(Object.assign({},Rt(_t)),{event:this.displayName(),address:_t.address,args:Lt})}async execute(_t,Pt){let Ft=this.encode(_t,Pt),Dt=this.decode.bind(this);return new Ae(this.requestManager,Ft,Dt)}attachToContract(_t){let Pt=this.execute.bind(this),Ft=this.displayName();_t.events[Ft]||(_t.events[Ft]=Pt),_t.events[Ft][this.typeName()]=this.execute.bind(this,_t)}}class Be{constructor(_t,Pt,Ft){this._requestManager=_t,this._json=Pt,this._address=Ft}encode(_t={}){let Pt={address:this._address};return void 0!==_t.fromBlock&&(Pt.fromBlock=Bt(_t.fromBlock)||void 0),void 0!==_t.toBlock&&(Pt.toBlock=Bt(_t.toBlock)||void 0),Pt}decode(_t){_t.data=_t.data||"";let Pt=bt(_t.topics)&&yt(_t.topics[0])?_t.topics[0].slice(2):"",Ft=this._json.filter((function(_t){return Pt===$(G(_t))}))[0];return Ft?new Ee(this._requestManager,Ft,this._address).decode(_t):Rt(_t)}async execute(_t){let Pt=this.encode(_t),Ft=this.decode.bind(this);return new Ae(this._requestManager,Pt,Ft)}getAllEventsFunction(){return this.execute.bind(this)}}class Oe{constructor(_t,Pt,Ft){var Dt;this.requestManager=_t,this.abi=Pt,this.address=Ft,this.events={},this.transactionHash=null,this.address=Ft,this.abi=Pt,(Dt=this).abi.filter((function(_t){return"function"===_t.type})).map((function(_t){return new xe(_t)})).forEach((function(_t){_t.attachToContract(Dt)})),this.allEvents=function(_t){let Pt=_t.abi.filter((function(_t){return"event"===_t.type})),Ft=new Be(_t.requestManager,Pt,_t.address);return Pt.map((function(Pt){return new Ee(_t.requestManager,Pt,_t.address)})).forEach((function(Pt){Pt.attachToContract(_t)})),Ft.getAllEventsFunction()}(this)}}_t.AbstractFilter=Te,_t.BigNumber=je,_t.Contract=Oe,_t.ContractFactory=class{constructor(_t,Pt){this.requestManager=_t,this.abi=Pt}async deploy(..._t){let Pt,Ft=_t[_t.length-1];if(wt(Ft)&&!bt(Ft)&&(Pt=_t.pop()),!Pt)throw new Error("Missing options object");if(!Pt.data||"string"!=typeof Pt.data)throw new Error("Invalid options.data");if(Z(Pt.value)>0&&!(this.abi.filter((function(Pt){return"constructor"===Pt.type&&Pt.inputs.length===_t.length}))[0]||{}).payable)throw new Error("Cannot send value to non-payable constructor");let Ut=(Lt=this.abi,Kt=_t,Lt.filter((function(_t){return"constructor"===_t.type&&_t.inputs&&_t.inputs.length===Kt.length})).map((function(_t){return _t.inputs||[]})).map((function(_t){return un.encodeParams(_t,Kt)}))[0]||"");var Lt,Kt;Pt.data+=Ut,Pt.gas||(Pt.gas=await this.requestManager.eth_estimateGas(Pt));const Yt=await this.requestManager.eth_sendTransaction(Pt);if(!Yt)throw new Error("Error while sending contract creation transaction. A TxHash was not retrieved");const Zt=await async function(_t,Pt){const Ft=Dt();let Ut=0;const o=()=>{Ut++,Ut>50?Ft.reject(new Error("Contract transaction couldn't be found after 50 blocks")):_t.eth_getTransactionReceipt(Pt).then((_t=>{_t&&_t.blockHash?Ft.resolve(_t):setTimeout(o,1e3)}),(_t=>Ft.reject(_t)))};o();const Lt=await Ft,Kt=await _t.eth_getCode(Lt.contractAddress,"latest");if(Kt&&Kt.length>3)return Lt.contractAddress;throw Object.assign(new Error("The contract code couldn't be stored, please check your gas amount."),{response:Kt,receipt:Lt})}(this.requestManager,Yt),ee=await this.at(Zt);return ee.transactionHash=Yt,ee}async at(_t){if(!ht(_t))throw new TypeError(`Invalid address ${JSON.stringify(_t)}`);return new Oe(this.requestManager,this.abi,_t)}},_t.EthBlockFilter=class extends Ae{constructor(_t){super(_t,{})}async getNewFilter(){return this.requestManager.eth_newBlockFilter()}},_t.EthFilter=Ae,_t.EthPendingTransactionFilter=class extends Ae{constructor(_t){super(_t,{})}async getNewFilter(){return this.requestManager.eth_newPendingTransactionFilter()}},_t.HTTPProvider=class{constructor(_t,Pt={}){this.host=_t,this.options=Pt,this.debug=!1,this.host=_t||"http://localhost:8545"}send(){throw new Error("Sync requests are deprecated")}sendAsync(_t,Pt){try{let Ft=null;if(Ft=_t instanceof Array?_t.map((_t=>e(_t))):e(_t),"undefined"==typeof fetch)throw new Error("There is no global fetch object. Please install and import isomorphic-fetch");const Dt={body:JSON.stringify(Ft),method:"POST",headers:Object.assign(Object.assign({},this.options.headers),{"Content-Type":"application/json"})};this.debug&&console.log("SEND >> "+Dt.body),fetch(this.host,Dt).then((async _t=>{if(_t.ok){const Ft=await _t.json();this.debug&&console.log("RECV << "+JSON.stringify(Ft)),Ft.error?Pt(Object.assign(new Error(Ft.error.json||Ft.error),Ft.error)):Pt(null,Ft)}else this.debug&&console.log("ERR << "+JSON.stringify(_t)),Pt(new Error("External error. response code: "+_t.status))}),(_t=>{this.debug&&console.log("ERR << "+JSON.stringify(_t)),Pt(_t)}))}catch(_t){this.debug&&console.log("ERR << "+JSON.stringify(_t)),Pt(_t)}}},_t.Method=qt,_t.Property=$t,_t.RequestManager=zt,_t.SHHFilter=class extends Te{constructor(_t,Pt){super(_t),this.requestManager=_t,this.options=Pt,this.options=this.options||{topics:[]},this.options.topics=this.options.topics||[],this.options.topics=this.options.topics.map((function(_t){return ke(_t)})),this.options={topics:this.options.topics,to:this.options.to}}async getMessages(){const _t=await this.filterId;return this.requestManager.shh_getMessages(_t)}async getNewFilter(){return this.requestManager.shh_newFilter(this.options)}async getChanges(){const _t=await this.filterId;return this.requestManager.shh_getFilterChanges(_t)}async uninstall(){const _t=await this.filterId;return this.requestManager.shh_uninstallFilter(_t)}},_t.SolidityEvent=Ee,_t.SolidityFunction=xe,_t.WebSocketProvider=class{constructor(_t,Pt={}){this.url=_t,this.options=Pt,this.isDisposed=!1,this.responseCallbacks=new Map,this.notificationCallbacks=new Set,this.debug=!1,this.lastChunk="",this.connect()}dispose(){this.isDisposed=!0;const _t=this.connection;this.timeout(new Error("Provider disposed.")),_t.then((_t=>_t.close()))}send(){throw new Error("Sync requests are deprecated")}sendAsync(_t,Pt){const Ft=[];let Ut;if(_t instanceof Array)Ut=Promise.all(_t.map((_t=>{const Pt=Dt();try{const Dt=e(_t);Ft.push(Dt),this.responseCallbacks.set(Dt.id,Pt)}catch(_t){Pt.reject(_t)}return Pt})));else{const Pt=Dt();try{const Dt=e(_t);Ft.push(Dt),this.responseCallbacks.set(Dt.id,Pt)}catch(_t){Pt.reject(_t)}Ut=Pt}Ut.then((_t=>Pt(null,_t)),(_t=>Pt(_t))),this.connection.then((_t=>{Ft.forEach((Pt=>{const Ft=JSON.stringify(Pt);this.debug&&console.log("SEND >> "+Ft),_t.send(Ft)}))}),(_t=>{Pt(_t)}))}parseResponse(_t){let Pt=[];return _t.replace(/\}[\n\r]?\{/g,"}|--|{").replace(/\}\][\n\r]?\[\{/g,"}]|--|[{").replace(/\}[\n\r]?\[\{/g,"}|--|[{").replace(/\}\][\n\r]?\{/g,"}]|--|{").split("|--|").forEach((_t=>{let Ft=_t;this.lastChunk&&(Ft=this.lastChunk+Ft);let Dt=null;try{Dt=JSON.parse(Ft)}catch(_t){return this.lastChunk=Ft,clearTimeout(this.lastChunkTimeout),void(this.lastChunkTimeout=setTimeout((()=>{this.timeout()}),15e3))}clearTimeout(this.lastChunkTimeout),this.lastChunk="",Dt&&Pt.push(Dt)})),Pt}processMessage(_t){if("id"in _t){const Pt=_t.id,Ft=this.responseCallbacks.get(Pt);if(!Ft)return void console.error("Error: Received a response for an unknown request",_t);this.responseCallbacks.delete(Pt),"error"in _t?Ft.reject(Object.assign(new Error(_t.error.message||_t.error),_t.error)):"result"in _t&&Ft.resolve(_t)}else this.notificationCallbacks.forEach((Pt=>Pt(null,_t)))}timeout(_t){this.connection&&this.connection.isPending||(this.connection=Dt());const Pt=_t||new Error("Connection timeout");this.responseCallbacks.forEach((_t=>_t.reject(Pt))),this.responseCallbacks.clear(),this.isDisposed||this.connect()}connect(){this.connection&&!this.connection.isPending&&this.connection.then((_t=>_t.close())),this.connection&&this.connection.isPending||(this.connection=Dt()),this.lastChunk="";let _t=this.options.WebSocketConstructor||("undefined"!=typeof WebSocket?WebSocket:void 0);if(!_t)throw new Error("Please provide a WebSocketConstructor");const Pt=new _t(this.url,this.options.protocol);Pt.onopen=()=>{this.connection.resolve(Pt)},Pt.onerror=_t=>{const Pt=new Error("Error in web socket");Pt.data=_t,this.timeout(Pt)},Pt.onclose=_t=>{this.timeout(new Error(`Connection closed (${_t&&_t.reason||"Unknown reason"})`))},Pt.onmessage=_t=>{let Pt="string"==typeof _t.data?_t.data:"";this.debug&&console.log("RECV << "+_t.data),this.parseResponse(Pt).forEach((_t=>{_t instanceof Array?_t.forEach((_t=>this.processMessage(_t))):this.processMessage(_t)}))}}},_t.bytesToHex=q,_t.bytesToUtf8String=R,_t.concatBytes=z,_t.default=zt,_t.extractDisplayName=W,_t.extractTypeName=V,_t.fromAscii=function(_t,Pt=0){let Ft="";for(let Pt=0;Pt<_t.length;Pt++){let Dt=_t.charCodeAt(Pt).toString(16);Ft+=Dt.length<2?"0"+Dt:Dt}return"0x"+Ft.padEnd(Pt,"0")},_t.fromDecimal=et,_t.fromTwosComplement=ut,_t.fromWei=function(_t,Pt){let Ft=ot(_t).dividedBy(rt(Pt));return mt(_t)?Ft:Ft.toString(10)},_t.getAddress=ct,_t.getValueOfUnit=rt,_t.hexToBytes=D,_t.isAddress=ht,_t.isArray=bt,_t.isBigNumber=mt,_t.isBloom=function(_t){return!!/^(0x)?[0-9a-f]{512}$/i.test(_t)&&!!/^(0x)?[0-9a-f]{512}$/i.test(_t)},_t.isBoolean=vt,_t.isChecksumAddress=pt,_t.isFunction=function(_t){return"function"==typeof _t},_t.isHex=function(_t){return"string"==typeof _t&&/^0x[0-9a-fA-F]+$/.test(_t)},_t.isJson=function(_t){try{return!!JSON.parse(_t)}catch(_t){return!1}},_t.isObject=wt,_t.isStrictAddress=lt,_t.isString=yt,_t.isTopic=function(_t){return!!/^(0x)?[0-9a-f]{64}$/i.test(_t)&&!!/^(0x)?[0-9a-f]{64}$/i.test(_t)},_t.isValidResponse=xt,_t.padLeft=H,_t.padRight=function(_t,Pt,Ft){return _t+new Array(Pt-_t.length+1).join(Ft||"0")},_t.sha3=$,_t.signedIsNegative=at,_t.stringToUtf8Bytes=M,_t.toAddress=gt,_t.toArray=dt,_t.toAscii=function(_t){let Pt="",Ft=0,Dt=_t.length;for("0x"===_t.substring(0,2)&&(Ft=2);Ft<Dt;Ft+=2){let Dt=parseInt(_t.substr(Ft,2),16);Pt+=String.fromCharCode(Dt)}return Pt},_t.toBatchPayload=function(_t){return _t.map((function(_t){return Nt(_t.method,_t.params)}))},_t.toBigNumber=ot,_t.toBoolean=tt,_t.toChecksumAddress=ft,_t.toData=X,_t.toDecimal=Z,_t.toHex=nt,_t.toJsonRpcRequest=Nt,_t.toNullDecimal=K,_t.toString=Y,_t.toStringData=Q,_t.toTwosComplement=st,_t.toWei=function(_t,Pt){let Ft=ot(_t).times(rt(Pt));return mt(_t)?Ft:Ft.toString(10)},_t.transformToFullName=G,Object.defineProperty(_t,"__esModule",{value:!0})}));var __awaiter=this&&this.__awaiter||function(_t,Pt,Ft,Dt){return new(Ft||(Ft=Promise))((function(Ut,Lt){function fulfilled(_t){try{step(Dt.next(_t))}catch(_t){Lt(_t)}}function rejected(_t){try{step(Dt.throw(_t))}catch(_t){Lt(_t)}}function step(_t){var Pt;_t.done?Ut(_t.value):(Pt=_t.value,Pt instanceof Ft?Pt:new Ft((function(_t){_t(Pt)}))).then(fulfilled,rejected)}step((Dt=Dt.apply(_t,Pt||[])).next())}))},__generator=this&&this.__generator||function(_t,Pt){var Ft,Dt,Ut,Lt,Kt={label:0,sent:function(){if(1&Ut[0])throw Ut[1];return Ut[1]},trys:[],ops:[]};return Lt={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(Lt[Symbol.iterator]=function(){return this}),Lt;function verb(Lt){return function(Yt){return function(Lt){if(Ft)throw new TypeError("Generator is already executing.");for(;Kt;)try{if(Ft=1,Dt&&(Ut=2&Lt[0]?Dt.return:Lt[0]?Dt.throw||((Ut=Dt.return)&&Ut.call(Dt),0):Dt.next)&&!(Ut=Ut.call(Dt,Lt[1])).done)return Ut;switch(Dt=0,Ut&&(Lt=[2&Lt[0],Ut.value]),Lt[0]){case 0:case 1:Ut=Lt;break;case 4:return Kt.label++,{value:Lt[1],done:!1};case 5:Kt.label++,Dt=Lt[1],Lt=[0];continue;case 7:Lt=Kt.ops.pop(),Kt.trys.pop();continue;default:if(!((Ut=(Ut=Kt.trys).length>0&&Ut[Ut.length-1])||6!==Lt[0]&&2!==Lt[0])){Kt=0;continue}if(3===Lt[0]&&(!Ut||Lt[1]>Ut[0]&&Lt[1]<Ut[3])){Kt.label=Lt[1];break}if(6===Lt[0]&&Kt.label<Ut[1]){Kt.label=Ut[1],Ut=Lt;break}if(Ut&&Kt.label<Ut[2]){Kt.label=Ut[2],Kt.ops.push(Lt);break}Ut[2]&&Kt.ops.pop(),Kt.trys.pop();continue}Lt=Pt.call(_t,Kt)}catch(_t){Lt=[6,_t],Dt=0}finally{Ft=Ut=0}if(5&Lt[0])throw Lt[1];return{value:Lt[0]?Lt[1]:void 0,done:!0}}([Lt,Yt])}}},__extends=this&&this.__extends||function(){var extendStatics=function(_t,Pt){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_t,Pt){_t.__proto__=Pt}||function(_t,Pt){for(var Ft in Pt)Object.prototype.hasOwnProperty.call(Pt,Ft)&&(_t[Ft]=Pt[Ft])})(_t,Pt)};return function(_t,Pt){if("function"!=typeof Pt&&null!==Pt)throw new TypeError("Class extends value "+String(Pt)+" is not a constructor or null");function __(){this.constructor=_t}extendStatics(_t,Pt),_t.prototype=null===Pt?Object.create(Pt):(__.prototype=Pt.prototype,new __)}}();define("brainAbi",["require","exports"],(function(_t,Pt){Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.default=[{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"userAddress",type:"address"},{indexed:!1,internalType:"address payable",name:"relayerAddress",type:"address"},{indexed:!1,internalType:"bytes",name:"functionSignature",type:"bytes"}],name:"MetaTransactionExecuted",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"_contract",type:"address"},{indexed:!1,internalType:"uint256",name:"id",type:"uint256"},{indexed:!1,internalType:"string",name:"scene",type:"string"},{indexed:!1,internalType:"string",name:"question",type:"string"},{indexed:!1,internalType:"string",name:"answer",type:"string"}],name:"QuestionAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"_contract",type:"address"},{indexed:!1,internalType:"uint256",name:"id",type:"uint256"},{indexed:!1,internalType:"string",name:"scene",type:"string"},{indexed:!1,internalType:"string",name:"question",type:"string"}],name:"QuestionMuted",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"_contract",type:"address"},{indexed:!1,internalType:"uint256",name:"id",type:"uint256"},{indexed:!1,internalType:"string",name:"scene",type:"string"},{indexed:!1,internalType:"string",name:"question",type:"string"},{indexed:!1,internalType:"uint256",name:"questionId",type:"uint256"}],name:"QuestionRemoved",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"_contract",type:"address"},{indexed:!1,internalType:"uint256",name:"id",type:"uint256"},{indexed:!1,internalType:"string",name:"scene",type:"string"},{indexed:!1,internalType:"string",name:"question",type:"string"}],name:"QuestionUnmuted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"_contract",type:"address"},{indexed:!1,internalType:"uint256",name:"id",type:"uint256"},{indexed:!1,internalType:"string",name:"name",type:"string"}],name:"nameSet",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"ERC712_VERSION",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_contract",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"string",name:"scene",type:"string"},{internalType:"string",name:"question",type:"string"},{internalType:"string",name:"answer",type:"string"}],name:"addQuestion",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"userAddress",type:"address"},{internalType:"bytes",name:"functionSignature",type:"bytes"},{internalType:"bytes32",name:"sigR",type:"bytes32"},{internalType:"bytes32",name:"sigS",type:"bytes32"},{internalType:"uint8",name:"sigV",type:"uint8"}],name:"executeMetaTransaction",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"_contract",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"string",name:"scene",type:"string"},{internalType:"string",name:"question",type:"string"}],name:"getAnswer",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"getChainId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getDomainSeperator",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_contract",type:"address"},{internalType:"uint256",name:"id",type:"uint256"}],name:"getName",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getNonce",outputs:[{internalType:"uint256",name:"nonce",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_contract",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"string",name:"scene",type:"string"},{internalType:"uint256",name:"offset",type:"uint256"}],name:"getQuestions",outputs:[{internalType:"string[]",name:"",type:"string[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_contract",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"string",name:"scene",type:"string"}],name:"getQuestionsCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"uint256",name:"index",type:"uint256"}],name:"getRoleMember",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleMemberCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"domainSeparator",type:"string"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_contract",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"string",name:"scene",type:"string"},{internalType:"string",name:"question",type:"string"}],name:"isQuestionMuted",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_contract",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"string",name:"scene",type:"string"},{internalType:"string",name:"question",type:"string"}],name:"muteQuestion",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_contract",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"string",name:"scene",type:"string"},{internalType:"string",name:"question",type:"string"},{internalType:"uint256",name:"questionId",type:"uint256"}],name:"removeQuestion",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_contract",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"string",name:"name",type:"string"}],name:"setName",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_contract",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"string",name:"scene",type:"string"},{internalType:"string",name:"question",type:"string"}],name:"unmuteQuestion",outputs:[],stateMutability:"nonpayable",type:"function"}]})),define("common",["require","exports"],(function(_t,Pt){function distance(_t,Pt){var Ft=_t.x-Pt.x,Dt=_t.y-Pt.y,Ut=_t.z-Pt.z;return Ft*Ft+Dt*Dt+Ut*Ut}function interpolateValue(_t,Pt,Ft,Dt,Ut){return(Ut-_t)/(Pt-_t)*(Dt-Ft)+Ft}function dot(_t,Pt){return _t.x*Pt.x+_t.y*Pt.y+_t.z*Pt.z}Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.gravityToVelocity=Pt.tiles=Pt.getUniqueEntityByComponent=Pt.planeRayIntersection=Pt.getGlobalPosition=Pt.dot=Pt.isInsideSquare=Pt.fetchRetry=Pt.interpolateAnimation=Pt.interpolateValue=Pt.randomInt=Pt.randomRange=Pt.distance_is_less_than=Pt.distance=void 0,Pt.distance=distance,Pt.distance_is_less_than=function(_t,Pt,Ft){return distance(_t,Pt)<Ft*Ft*Ft},Pt.randomRange=function(_t,Pt){return Math.random()*(Pt-_t)+_t},Pt.randomInt=function(_t,Pt){return Math.floor(Math.random()*(Pt-_t)+_t)},Pt.interpolateValue=interpolateValue,Pt.interpolateAnimation=function(_t,Pt){for(var Ft=0,Dt=0,Ut=0;Ut<_t.length;Ut++)if(_t[Ut].time>Pt){if(!(Ut>0))return _t[0].value;Ft=Ut-1,Dt=Ut;break}return interpolateValue(_t[Ft].time,_t[Dt].time,_t[Ft].value,_t[Dt].value,Pt)},Pt.fetchRetry=function(_t,Pt,Ft){return __awaiter(void 0,void 0,void 0,(function(){var Dt,Ut;return __generator(this,(function(Lt){switch(Lt.label){case 0:Dt=0,Lt.label=1;case 1:if(!(Dt<Ft))return[3,6];Lt.label=2;case 2:return Lt.trys.push([2,4,,5]),[4,fetch(_t,Pt)];case 3:return[2,Lt.sent()];case 4:if(Ut=Lt.sent(),Dt+1===Ft)throw Ut;return[3,5];case 5:return Dt++,[3,1];case 6:return[2]}}))}))},Pt.isInsideSquare=function(_t,Pt,Ft,Dt,Ut,Lt){return!(_t<Ft||_t>Dt||Pt<Ut||Pt>Lt)},Pt.dot=dot,Pt.getGlobalPosition=function getGlobalPosition(_t){var Pt=_t.hasComponent(Transform)?_t.getComponent(Transform).position.clone():Vector3.Zero(),Ft=_t.getParent();if(null!=Ft){var Dt=Ft.hasComponent(Transform)?Ft.getComponent(Transform).rotation:Quaternion.Identity;return getGlobalPosition(Ft).add(Pt.rotate(Dt))}return Pt},Pt.planeRayIntersection=function(_t,Pt,Ft,Dt){var Ut=dot(Pt.subtract(Ft),Dt)/dot(_t,Dt);return Pt.subtract(_t.scale(Ut))},Pt.getUniqueEntityByComponent=function(_t){var Pt=engine.getEntitiesWithComponent(_t);for(var Ft in Pt)if(Pt.hasOwnProperty(Ft))return Pt[Ft].getComponent(_t)},Pt.tiles=function(_t,Pt,Ft,Dt,Ut){void 0===Ut&&(Ut=!1);var Lt=1/_t,Kt=1/Pt;return Ut?[Lt*Ft,Kt*Dt,Lt*(Ft+1),Kt*Dt,Lt*(Ft+1),Kt*(Dt+1),Lt*Ft,Kt*(Dt+1),Lt*Ft,Kt*Dt,Lt*(Ft+1),Kt*Dt,Lt*(Ft+1),Kt*(Dt+1),Lt*Ft,Kt*(Dt+1)]:[Lt*(Ft+1),Kt*Dt,Lt*Ft,Kt*Dt,Lt*Ft,Kt*(Dt+1),Lt*(Ft+1),Kt*(Dt+1),Lt*(Ft+1),Kt*Dt,Lt*Ft,Kt*Dt,Lt*Ft,Kt*(Dt+1),Lt*(Ft+1),Kt*(Dt+1)]},Pt.gravityToVelocity=function(_t,Pt,Ft,Dt){return _t*Pt*Dt}})),define("compicactus",["require","exports","common"],(function(_t,Pt,Ft){Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.Compicactus=void 0;var Dt=["Action-01-Look R-L","Action-02-Look R","Action-03-Look L","Action-04-Look-Up"],Ut=function(_t){function Compicactus(){var Pt=_t.call(this)||this;return Pt.element_entities=[],Pt.variation={body:"",cigar:"",eyes:"",glasses:"",hat:"",mustache:"",nose:"",pot:""},Pt.set_body(0),Pt}return __extends(Compicactus,_t),Compicactus.prototype.play_random=function(){var _t=Dt[Math.floor(Math.random()*Dt.length)];log("clip_name",_t);for(var Pt=0;Pt<this.element_entities.length;Pt++){var Ft=this.element_entities[Pt].getComponent(Animator).getClip(_t);Ft.play(),Ft.looping=!1}},Compicactus.prototype.remove_elements=function(){for(var _t=0;_t<this.element_entities.length;_t++)engine.removeEntity(this.element_entities[_t])},Compicactus.prototype.set_body=function(_t){return __awaiter(this,void 0,void 0,(function(){var Pt,Dt;return __generator(this,(function(Ut){switch(Ut.label){case 0:return log("set body"),this.remove_elements(),Pt={headers:{Accept:"application/json"},method:"GET"},log("get variations"),[4,(0,Ft.fetchRetry)("https://ipfs.io/ipfs/QmVcN4A6EzBrrWcsovrKsRg5sTootZ9HmSuTadGQ2XrL9y",Pt,3).then((function(_t){return null==_t?[]:_t.json()})).catch((function(_t){return log("Error")}))];case 1:return Dt=Ut.sent(),log("variations",Dt),this.variation=Dt[_t],this.add_element("body"),this.add_element("cigar"),this.add_element("eyes"),this.add_element("glasses"),this.add_element("hat"),this.add_element("mustache"),this.add_element("nose"),this.add_element("pot"),[2]}}))}))},Compicactus.prototype.add_element=function(_t){""!=this.variation[_t]&&(this.element_entities.push(new Entity),this.get_last_element().addComponent(new GLTFShape("compi_models/"+this.variation[_t]+".glb")),this.get_last_element().addComponent(new Animator),engine.addEntity(this.get_last_element()),this.get_last_element().setParent(this))},Compicactus.prototype.get_last_element=function(){return this.element_entities[this.element_entities.length-1]},Compicactus}(Entity);Pt.Compicactus=Ut})),define("erc20Abi",["require","exports"],(function(_t,Pt){Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.default=[{inputs:[{internalType:"string",name:"name_",type:"string"},{internalType:"string",name:"symbol_",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"userAddress",type:"address"},{indexed:!1,internalType:"address payable",name:"relayerAddress",type:"address"},{indexed:!1,internalType:"bytes",name:"functionSignature",type:"bytes"}],name:"MetaTransactionExecuted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"CHILD_CHAIN_ID",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"CHILD_CHAIN_ID_BYTES",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[],name:"ERC712_VERSION",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"ROOT_CHAIN_ID",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"ROOT_CHAIN_ID_BYTES",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"userAddress",type:"address"},{internalType:"bytes",name:"functionSignature",type:"bytes"},{internalType:"bytes32",name:"sigR",type:"bytes32"},{internalType:"bytes32",name:"sigS",type:"bytes32"},{internalType:"uint8",name:"sigV",type:"uint8"}],name:"executeMetaTransaction",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getNonce",outputs:[{internalType:"uint256",name:"nonce",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"}]})),define("minterAbi",["require","exports"],(function(_t,Pt){Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.default=[{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"contractURI",type:"string"}],name:"ContractURISet",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address[]",name:"discountTokens",type:"address[]"},{indexed:!1,internalType:"bool[]",name:"discountTokensIsERC1155",type:"bool[]"}],name:"DiscountTokensSet",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"contract IERC20Upgradeable",name:"tokenERC20",type:"address"}],name:"ERC20Set",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"contract IERC721Upgradeable",name:"tokenERC721",type:"address"}],name:"ERC721Set",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"userAddress",type:"address"},{indexed:!1,internalType:"address payable",name:"relayerAddress",type:"address"},{indexed:!1,internalType:"bytes",name:"functionSignature",type:"bytes"}],name:"MetaTransactionExecuted",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"multPrice",type:"uint256"}],name:"PriceSet",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"startTime",type:"uint256"},{indexed:!1,internalType:"uint256",name:"endTime",type:"uint256"}],name:"TimeWindowSet",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"balance",type:"uint256"}],name:"Withdraw",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"ERC712_VERSION",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"userAddress",type:"address"},{internalType:"bytes",name:"functionSignature",type:"bytes"},{internalType:"bytes32",name:"sigR",type:"bytes32"},{internalType:"bytes32",name:"sigS",type:"bytes32"},{internalType:"uint8",name:"sigV",type:"uint8"}],name:"executeMetaTransaction",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"payable",type:"function"},{inputs:[],name:"getChainId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getDomainSeperator",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getNonce",outputs:[{internalType:"uint256",name:"nonce",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"for_account",type:"address"}],name:"getPrice",outputs:[{internalType:"uint256",name:"_price",type:"uint256"},{internalType:"bool",name:"use_discount",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"uint256",name:"index",type:"uint256"}],name:"getRoleMember",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleMemberCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"domainSeparator",type:"string"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"isWindowOpen",outputs:[{internalType:"bool",name:"use_discount",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"maxPrice",type:"uint256"}],name:"mintCompi",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address[]",name:"discountTokens",type:"address[]"},{internalType:"bool[]",name:"discountTokensIsERC1155",type:"bool[]"}],name:"setDiscountTokens",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IERC20Upgradeable",name:"tokenERC20",type:"address"}],name:"setERC20",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract ERC721PresetMinterPauserAutoIdUpgradeable",name:"tokenERC721",type:"address"}],name:"setERC721",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"multPrice",type:"uint256"}],name:"setPrice",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"startTime",type:"uint256"},{internalType:"uint256",name:"endTime",type:"uint256"}],name:"setTimeWindow",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"withdrawBalance",outputs:[],stateMutability:"nonpayable",type:"function"}]})),define("pfpAbi",["require","exports"],(function(_t,Pt){Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.default=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"contractURI",type:"string"}],name:"ContractURISet",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"userAddress",type:"address"},{indexed:!1,internalType:"address payable",name:"relayerAddress",type:"address"},{indexed:!1,internalType:"bytes",name:"functionSignature",type:"bytes"}],name:"MetaTransactionExecuted",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Paused",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Unpaused",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"ERC712_VERSION",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"MINTER_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"PAUSER_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"contractURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"userAddress",type:"address"},{internalType:"bytes",name:"functionSignature",type:"bytes"},{internalType:"bytes32",name:"sigR",type:"bytes32"},{internalType:"bytes32",name:"sigS",type:"bytes32"},{internalType:"uint8",name:"sigV",type:"uint8"}],name:"executeMetaTransaction",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getChainId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getDomainSeperator",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getNonce",outputs:[{internalType:"uint256",name:"nonce",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"uint256",name:"index",type:"uint256"}],name:"getRoleMember",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleMemberCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"symbol",type:"string"},{internalType:"string",name:"baseTokenURI",type:"string"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"pause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"paused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"__contractURI",type:"string"}],name:"setContractURI",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"unpause",outputs:[],stateMutability:"nonpayable",type:"function"}]})),define("contracts",["require","exports","@decentraland/Identity","@decentraland/web3-provider","decentraland-transactions","eth-connect","erc20Abi","minterAbi","pfpAbi","brainAbi"],(function(_t,Pt,Ft,Dt,Ut,Lt,Kt,Yt,Zt,ee){Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.Blockchain=Pt.contracts=void 0,Pt.contracts={mana:{matic:{version:"1",abi:Kt.default,address:"0xA1c57f48F0Deb89f569dFbE6E2B7f46D33606fD4",name:"(PoS) Decentraland MANA",chainId:137},mumbai:{version:"1",abi:Kt.default,address:"0x4dA830330048be6380f102a83d3B94ea318bc598",name:"Decentraland MANA (PoS)",chainId:80001}},minter:{matic:{version:"1",abi:Yt.default,address:"",name:"CompiMinter",chainId:137},mumbai:{version:"1",abi:Yt.default,address:"0x0d7c91B526bA1334be837a82e92d6ca47ac6bCD7",name:"CompiMinter",chainId:80001}},pfp:{matic:{version:"1",abi:Zt.default,address:"",name:"CompiPFP",chainId:137},mumbai:{version:"1",abi:Zt.default,address:"0xcF904EeCa0dC1d99E6c4Be05f6C9a733041Ce093",name:"CompiPFP",chainId:80001}},brain:{matic:{version:"1",abi:ee.default,address:"",name:"CompiBrain",chainId:137},mumbai:{version:"1",abi:ee.default,address:"0x308aF74242aFb7bC598Ff1ced52De1D3E6cb02d7",name:"CompiBrain",chainId:80001}}};var re=function(){function Blockchain(_t){if(void 0===_t&&(_t="mumbai"),"mumbai"!=_t&&"matic"!=_t)throw new Error("Network not found: "+_t);this.network=_t,"mumbai"==_t?(this.provider=new Lt.HTTPProvider("https://rpc-mumbai.maticvigil.com"),this.mana_contract=Pt.contracts.mana.mumbai,this.minter_contract=Pt.contracts.minter.mumbai,this.pfp_contract=Pt.contracts.pfp.mumbai,this.brain_contract=Pt.contracts.brain.mumbai):(this.provider=new Lt.HTTPProvider("https://rpc-mainnet.maticvigil.com"),this.mana_contract=Pt.contracts.mana.matic,this.minter_contract=Pt.contracts.minter.matic,this.pfp_contract=Pt.contracts.pfp.matic,this.brain_contract=Pt.contracts.brain.matic),this.metaRequestManager=new Lt.RequestManager(this.provider)}return Blockchain.prototype.getFunction=function(_t,Pt){for(var Ft=0;Ft<Pt.length;Ft++)if("function"==Pt[Ft].type&&Pt[Ft].name==_t)return Pt[Ft];throw new Error("Function not found: "+_t)},Blockchain.prototype.prepareMetaTransaction=function(_t,Pt){return __awaiter(this,void 0,void 0,(function(){var Ft,Kt;return __generator(this,(function(Yt){switch(Yt.label){case 0:return[4,(0,Dt.getProvider)()];case 1:return Ft=Yt.sent(),Kt=new Lt.RequestManager(Ft),[2,(0,Ut.sendMetaTransaction)(Kt,this.metaRequestManager,_t.data,Pt)]}}))}))},Blockchain.prototype.getFactory=function(_t){return __awaiter(this,void 0,void 0,(function(){var Pt;return __generator(this,(function(Ft){switch(Ft.label){case 0:return Pt=new Lt.RequestManager(this.provider),[4,new Lt.ContractFactory(Pt,_t.abi).at(_t.address)];case 1:return[2,Ft.sent()]}}))}))},Blockchain.prototype.getPrice=function(){return __awaiter(this,void 0,void 0,(function(){var _t,Pt=this;return __generator(this,(function(Dt){switch(Dt.label){case 0:return[4,(0,Ft.getUserPublicKey)()];case 1:return _t=Dt.sent(),log("publicKeyRequest",_t),[2,this.getFactory(this.minter_contract).then((function(Ft){return __awaiter(Pt,void 0,void 0,(function(){return __generator(this,(function(Pt){switch(Pt.label){case 0:return[4,Ft.getPrice(_t)];case 1:return[2,Pt.sent()]}}))}))}))]}}))}))},Blockchain.prototype.isWindowOpen=function(){return __awaiter(this,void 0,void 0,(function(){var _t=this;return __generator(this,(function(Pt){return[2,this.getFactory(this.minter_contract).then((function(Pt){return __awaiter(_t,void 0,void 0,(function(){return __generator(this,(function(_t){switch(_t.label){case 0:return[4,Pt.isWindowOpen()];case 1:return[2,_t.sent()]}}))}))}))]}))}))},Blockchain.prototype.mintCompi=function(_t){return __awaiter(this,void 0,void 0,(function(){var Pt,Ft;return __generator(this,(function(Dt){return Pt=new Lt.SolidityFunction(this.getFunction("mintCompi",Yt.default)),Ft=Pt.toPayload([_t]),log(Ft),[2,this.prepareMetaTransaction(Ft,this.minter_contract).then().catch()]}))}))},Blockchain.prototype.balance=function(){return __awaiter(this,void 0,void 0,(function(){var _t,Pt=this;return __generator(this,(function(Dt){switch(Dt.label){case 0:return[4,(0,Ft.getUserPublicKey)()];case 1:return _t=Dt.sent(),[2,this.getFactory(this.mana_contract).then((function(Ft){return __awaiter(Pt,void 0,void 0,(function(){return __generator(this,(function(Pt){switch(Pt.label){case 0:return[4,Ft.balanceOf(_t)];case 1:return[2,Pt.sent()]}}))}))}))]}}))}))},Blockchain.prototype.increaseAllowance=function(_t){return __awaiter(this,void 0,void 0,(function(){var Pt,Ft;return __generator(this,(function(Dt){return Pt=new Lt.SolidityFunction(this.getFunction("increaseAllowance",Kt.default)),Ft=Pt.toPayload([this.minter_contract.address,_t]),log(Ft),[2,this.prepareMetaTransaction(Ft,this.mana_contract).then().catch()]}))}))},Blockchain.prototype.balanceOf=function(){return __awaiter(this,void 0,void 0,(function(){var _t,Pt=this;return __generator(this,(function(Dt){switch(Dt.label){case 0:return[4,(0,Ft.getUserPublicKey)()];case 1:return _t=Dt.sent(),log("publicKeyRequest",_t),[2,this.getFactory(this.pfp_contract).then((function(Ft){return __awaiter(Pt,void 0,void 0,(function(){return __generator(this,(function(Pt){switch(Pt.label){case 0:return[4,Ft.balanceOf(_t)];case 1:return[2,Pt.sent()]}}))}))}))]}}))}))},Blockchain.prototype.tokenOfOwnerByIndex=function(_t){return __awaiter(this,void 0,void 0,(function(){var Pt,Dt=this;return __generator(this,(function(Ut){switch(Ut.label){case 0:return[4,(0,Ft.getUserPublicKey)()];case 1:return Pt=Ut.sent(),log("publicKeyRequest",Pt),[2,this.getFactory(this.pfp_contract).then((function(Ft){return __awaiter(Dt,void 0,void 0,(function(){return __generator(this,(function(Dt){switch(Dt.label){case 0:return[4,Ft.tokenOfOwnerByIndex(Pt,_t)];case 1:return[2,Dt.sent()]}}))}))}))]}}))}))},Blockchain.prototype.getName=function(_t){return __awaiter(this,void 0,void 0,(function(){var Pt=this;return __generator(this,(function(Ft){return[2,this.getFactory(this.brain_contract).then((function(Ft){return __awaiter(Pt,void 0,void 0,(function(){return __generator(this,(function(Pt){switch(Pt.label){case 0:return[4,Ft.getName(this.pfp_contract.address,_t)];case 1:return[2,Pt.sent()]}}))}))}))]}))}))},Blockchain.prototype.getQuestionsCount=function(){return __awaiter(this,void 0,void 0,(function(){var _t=this;return __generator(this,(function(Pt){return[2,this.getFactory(this.brain_contract).then((function(Pt){return __awaiter(_t,void 0,void 0,(function(){return __generator(this,(function(_t){switch(_t.label){case 0:return[4,Pt.getQuestionsCount()];case 1:return[2,_t.sent()]}}))}))}))]}))}))},Blockchain.prototype.setName=function(_t,Pt){return __awaiter(this,void 0,void 0,(function(){var Ft,Dt;return __generator(this,(function(Ut){return Ft=new Lt.SolidityFunction(this.getFunction("setName",ee.default)),Dt=Ft.toPayload([this.pfp_contract.address,_t,Pt]),log(Dt),[2,this.prepareMetaTransaction(Dt,this.brain_contract).then().catch()]}))}))},Blockchain.prototype.addQuestion=function(_t,Pt,Ft){return __awaiter(this,void 0,void 0,(function(){var Dt,Ut;return __generator(this,(function(Kt){return Dt=new Lt.SolidityFunction(this.getFunction("addQuestion",ee.default)),Ut=Dt.toPayload([this.pfp_contract.address,_t,"default",Pt,Ft]),log(Ut),[2,this.prepareMetaTransaction(Ut,this.brain_contract).then().catch()]}))}))},Blockchain.prototype.getAnswer=function(_t,Pt){return __awaiter(this,void 0,void 0,(function(){var Ft=this;return __generator(this,(function(Dt){return[2,this.getFactory(this.brain_contract).then((function(Dt){return __awaiter(Ft,void 0,void 0,(function(){return __generator(this,(function(Ft){switch(Ft.label){case 0:return[4,Dt.getAnswer(this.pfp_contract.address,_t,"default",Pt)];case 1:return[2,Ft.sent()]}}))}))}))]}))}))},Blockchain.prototype.getQuestions=function(_t,Pt){return __awaiter(this,void 0,void 0,(function(){var Ft=this;return __generator(this,(function(Dt){return[2,this.getFactory(this.brain_contract).then((function(Dt){return __awaiter(Ft,void 0,void 0,(function(){return __generator(this,(function(Ft){switch(Ft.label){case 0:return[4,Dt.getQuestions(this.pfp_contract.address,_t,"default",Pt)];case 1:return[2,Ft.sent()]}}))}))}))]}))}))},Blockchain}();Pt.Blockchain=re})),define("mint",["require","exports","contracts","eth-connect"],(function(_t,Pt,Ft,Dt){Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.Mint=void 0;var Ut=new GLTFShape("models/mint_mint.gltf"),Lt=new GLTFShape("models/mint_price.gltf"),Kt=new GLTFShape("models/mint_getpmana.gltf"),Yt=new GLTFShape("models/mint_50off.gltf"),Zt=new TextShape,ee=new Ft.Blockchain("mumbai"),re=function(){function Mint(_t){var Pt=this;this.mint_mint_entity=new Entity,this.mint_price_entity=new Entity,this.mint_getpmana_entity=new Entity,this.mint_50off_entity=new Entity,this.price_entity=new Entity,this.current_price=["0",!1],this.with_discount=!1,Ut.visible=!1,this.mint_mint_entity.addComponent(Ut),this.mint_mint_entity.addComponent(new Transform),this.mint_mint_entity.setParent(_t),engine.addEntity(this.mint_mint_entity),this.mint_mint_entity.addComponent(new OnPointerDown((function(){Pt.mint(Pt)}),{hoverText:"Mint Compi"})),Yt.visible=!1,this.mint_50off_entity.addComponent(Yt),this.mint_50off_entity.addComponent(new Transform),this.mint_50off_entity.setParent(_t),engine.addEntity(this.mint_50off_entity),Lt.visible=!1,this.mint_price_entity.addComponent(Lt),this.mint_price_entity.addComponent(new Transform),this.mint_price_entity.setParent(_t),engine.addEntity(this.mint_price_entity),Kt.visible=!1,this.mint_getpmana_entity.addComponent(Kt),this.mint_getpmana_entity.addComponent(new Transform),this.mint_getpmana_entity.setParent(_t),engine.addEntity(this.mint_getpmana_entity),this.mint_getpmana_entity.addComponent(new OnPointerDown((function(){openExternalURL("https://account.decentraland.org/")}),{hoverText:"Get Polygon Mana"})),Zt.fontSize=2,Zt.visible=!1,this.price_entity.addComponent(Zt),this.price_entity.addComponent(new Transform({position:new Vector3(-.82,1.76,.01),rotation:Quaternion.Euler(0,180,0)})),this.price_entity.setParent(_t),engine.addEntity(this.price_entity)}return Mint.prototype.mint=function(_t){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(Pt){switch(Pt.label){case 0:return log("Minting"),log("price",_t.current_price),[4,ee.increaseAllowance(_t.current_price[0]).then((function(Pt){log("IncreaseAllowance Ok ",Pt),ee.mintCompi(_t.current_price[0]).then((function(_t){log("Mint Ok ",_t)})).catch((function(_t){log("Error on mint",_t)}))})).catch((function(_t){log("Error on IncreaseAllowance",_t)}))];case 1:return Pt.sent(),[2]}}))}))},Mint.prototype.updatePrice=function(){return __awaiter(this,void 0,void 0,(function(){var _t,Pt,Ft,Ut;return __generator(this,(function(Lt){switch(Lt.label){case 0:return[4,ee.isWindowOpen()];case 1:return Lt.sent()?(Yt.visible=!1,this.price_entity.getComponent(TextShape).value="-",log("Getting price"),[4,ee.getPrice()]):[2];case 2:return _t=Lt.sent(),this.current_price=_t,log("this.current_price",this.current_price),Pt=Dt.fromWei(_t[0].toString(),"ether"),log("price_human",Pt),_t[1]&&(Yt.visible=!0),[4,ee.balance()];case 3:return Ft=Lt.sent(),Ut=Dt.fromWei(Ft.toString(),"ether"),log("balance",Ut),Ft<_t?(engine.removeEntity(this.mint_mint_entity),log("Not enough balance")):(engine.addEntity(this.mint_mint_entity),log("Enough balance")),this.price_entity.getComponent(TextShape).value=Pt.toString(),[2]}}))}))},Mint.prototype.deactivate=function(){Ut.visible=!1,Lt.visible=!1,Kt.visible=!1,Yt.visible=!1,Zt.visible=!1},Mint.prototype.activate=function(){Ut.visible=!0,Lt.visible=!0,Kt.visible=!0,Yt.visible=!0,Zt.visible=!0},Mint}();Pt.Mint=re})),define("teach",["require","exports","contracts"],(function(_t,Pt,Ft){Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.Teach=void 0;var Dt=new GLTFShape("models/setName.gltf"),Ut=new GLTFShape("models/button_add.gltf"),Lt=new UICanvas,Kt=new UIInputText(Lt),Yt=new Ft.Blockchain("mumbai"),Zt=function(){function Teach(_t){var Pt=this;this.setname_entity=new Entity,this.addquestion_entity=new Entity,this.adding_question="",this.adding_answer="",this.question_list_entity=[],this.play_list_entity=[],this.edit_list_entity=[],this.delete_list_entity=[],this.question_list=[],this.activated=!1,this.parent=_t,Dt.visible=!1,this.setname_entity.addComponent(Dt),this.setname_entity.addComponent(new Transform),this.setname_entity.setParent(_t),engine.addEntity(this.setname_entity),this.setname_entity.addComponent(new OnPointerDown((function(){Pt.setName(Pt)}),{hoverText:"Set Name"})),Ut.visible=!1,this.addquestion_entity.addComponent(Ut),this.addquestion_entity.addComponent(new Transform({position:new Vector3(-.82,1.8,.01)})),this.addquestion_entity.setParent(_t),engine.addEntity(this.addquestion_entity),this.addquestion_entity.addComponent(new OnPointerDown((function(){Pt.addQuestion(Pt)}),{hoverText:"Add question"})),Kt.width="50%",Kt.height="50px",Kt.vAlign="bottom",Kt.hAlign="center",Kt.fontSize=30,Kt.placeholder="Write name here",Kt.placeholderColor=Color4.Gray(),Kt.positionY="200px",Kt.isPointerBlocker=!0,Kt.visible=!1;for(var _loop_1=function(Dt){Ft.question_list_entity.push(new Entity);var Ut=new TextShape;Ft.question_list_entity[Dt].addComponent(Ut),Ut.fontSize=1,Ut.hTextAlign="left",Ut.color=Color3.Black(),Ut.outlineColor=Color3.White(),Ut.outlineWidth=.1,Ft.question_list_entity[Dt].addComponent(new Transform({position:new Vector3(-.7,1.66-.1*Dt,.01),rotation:Quaternion.Euler(0,180,0)})),Ft.question_list_entity[Dt].setParent(_t),engine.addEntity(Ft.question_list_entity[Dt]),Ft.play_list_entity.push(new Entity);var Lt=new GLTFShape("models/button_play.gltf");Lt.visible=!1,Ft.play_list_entity[Dt].addComponent(Lt),Ft.play_list_entity[Dt].addComponent(new Transform({position:new Vector3(-.4,1.66-.1*Dt,.01),scale:new Vector3(.5,.5,.5)})),Ft.play_list_entity[Dt].setParent(_t),Ft.play_list_entity[Dt].addComponent(new OnPointerDown((function(){Pt.askQuestion(Pt,Dt)}),{hoverText:"Ask question"})),engine.addEntity(Ft.play_list_entity[Dt]),Ft.edit_list_entity.push(new Entity);var Kt=new GLTFShape("models/button_edit.gltf");Kt.visible=!1,Ft.edit_list_entity[Dt].addComponent(Kt),Ft.edit_list_entity[Dt].addComponent(new Transform({position:new Vector3(-.5,1.66-.1*Dt,.01),scale:new Vector3(.5,.5,.5)})),Ft.edit_list_entity[Dt].setParent(_t),Ft.edit_list_entity[Dt].addComponent(new OnPointerDown((function(){Pt.editQuestion(Pt,Dt)}),{hoverText:"Edit question"})),engine.addEntity(Ft.edit_list_entity[Dt]),Ft.delete_list_entity.push(new Entity);var Yt=new GLTFShape("models/button_delete.gltf");Yt.visible=!1,Ft.delete_list_entity[Dt].addComponent(Yt),Ft.delete_list_entity[Dt].addComponent(new Transform({position:new Vector3(-.4-.2,1.66-.1*Dt,.01),scale:new Vector3(.5,.5,.5)})),Ft.delete_list_entity[Dt].setParent(_t),Ft.delete_list_entity[Dt].addComponent(new OnPointerDown((function(){Pt.removeQuestion(Pt,Dt)}),{hoverText:"Remove question"})),engine.addEntity(Ft.delete_list_entity[Dt])},Ft=this,Lt=0;Lt<3;Lt++)_loop_1(Lt)}return Teach.prototype.setName=function(_t){return __awaiter(this,void 0,void 0,(function(){var Pt=this;return __generator(this,(function(Ft){return log("Set Name"),_t.parent.current_compi<0||(log("this.current_token",_t.parent.current_token),Kt.visible=!0,Kt.placeholder="Write name here",Kt.onTextSubmit=new OnTextSubmit((function(_t){return __awaiter(Pt,void 0,void 0,(function(){return __generator(this,(function(Pt){switch(Pt.label){case 0:return Kt.visible=!1,[4,Yt.setName(this.parent.current_token,_t.text).then((function(_t){log("setName Ok ",_t)})).catch((function(_t){log("Error on setName",_t)}))];case 1:return Pt.sent(),[2]}}))}))}))),[2]}))}))},Teach.prototype.addQuestion=function(_t){return __awaiter(this,void 0,void 0,(function(){var Pt=this;return __generator(this,(function(Ft){return log("Add Questions"),_t.parent.current_compi<0||(log("this.current_token",_t.parent.current_token),Kt.visible=!0,Kt.placeholder="Write question",Kt.onTextSubmit=new OnTextSubmit((function(_t){return __awaiter(Pt,void 0,void 0,(function(){var Pt=this;return __generator(this,(function(Ft){return this.adding_question=_t.text,Kt.value="",Kt.placeholder="Write answer",Kt.onTextSubmit=new OnTextSubmit((function(_t){return __awaiter(Pt,void 0,void 0,(function(){return __generator(this,(function(Pt){switch(Pt.label){case 0:return Kt.visible=!1,this.adding_answer=_t.text,[4,Yt.addQuestion(this.parent.current_token,this.adding_question,this.adding_answer).then((function(_t){log("addQuestion Ok ",_t)})).catch((function(_t){log("Error on addQuestion",_t)}))];case 1:return Pt.sent(),[2]}}))}))})),[2]}))}))}))),[2]}))}))},Teach.prototype.editQuestion=function(_t,Pt){return __awaiter(this,void 0,void 0,(function(){var Ft,Dt=this;return __generator(this,(function(Ut){switch(Ut.label){case 0:return log("Add Questions"),_t.parent.current_compi<0?[2]:(log("this.current_token",_t.parent.current_token),[4,Yt.getAnswer(this.parent.current_token,this.question_list[Pt].value)]);case 1:return Ft=Ut.sent(),Kt.visible=!0,Kt.placeholder=Ft,Kt.value=Ft,Kt.onTextSubmit=new OnTextSubmit((function(_t){return __awaiter(Dt,void 0,void 0,(function(){return __generator(this,(function(Ft){switch(Ft.label){case 0:return Kt.visible=!1,[4,Yt.addQuestion(this.parent.current_token,this.question_list[Pt].value,_t.text).then((function(_t){log("addQuestion Ok ",_t)})).catch((function(_t){log("Error on addQuestion",_t)}))];case 1:return Ft.sent(),[2]}}))}))})),[2]}}))}))},Teach.prototype.askQuestion=function(_t,Pt){return __awaiter(this,void 0,void 0,(function(){var _t;return __generator(this,(function(Ft){switch(Ft.label){case 0:return[4,Yt.getAnswer(this.parent.current_token,this.question_list[Pt].value)];case 1:return _t=Ft.sent(),this.parent.answer_entity.getComponent(TextShape).value=_t,this.parent.compi_entity.play_random(),[2]}}))}))},Teach.prototype.removeQuestion=function(_t,Pt){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(_t){return[2]}))}))},Teach.prototype.getQuestions=function(){return __awaiter(this,void 0,void 0,(function(){var _t,Pt,Ft;return __generator(this,(function(Dt){switch(Dt.label){case 0:return this.activated?(_t=0,[4,Yt.getQuestions(this.parent.current_token,_t)]):[2];case 1:for(Pt=Dt.sent(),log(Pt),this.hideList(),this.question_list=[],Ft=0;Ft<3;Ft++)this.question_list_entity[Ft].getComponent(TextShape).value=Pt[Ft],""!=Pt[Ft]&&(this.play_list_entity[Ft].getComponent(GLTFShape).visible=!0,this.edit_list_entity[Ft].getComponent(GLTFShape).visible=!0,this.delete_list_entity[Ft].getComponent(GLTFShape).visible=!0,this.question_list[Ft]={id:Ft+_t,value:Pt[Ft]});return[2]}}))}))},Teach.prototype.hideList=function(){for(var _t=0;_t<3;_t++)this.question_list_entity[_t].getComponent(TextShape).value="",this.play_list_entity[_t].getComponent(GLTFShape).visible=!1,this.edit_list_entity[_t].getComponent(GLTFShape).visible=!1,this.delete_list_entity[_t].getComponent(GLTFShape).visible=!1},Teach.prototype.deactivate=function(){Dt.visible=!1,Kt.visible=!1,Ut.visible=!1,this.hideList(),this.activated=!1},Teach.prototype.activate=function(){Dt.visible=!0,Ut.visible=!0,this.activated=!0,this.getQuestions()},Teach}();Pt.Teach=Zt})),define("stool",["require","exports","contracts","mint","teach","compicactus"],(function(_t,Pt,Ft,Dt,Ut,Lt){Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.Stool=void 0;var Kt=new GLTFShape("models/menu_mint.gltf"),Yt=new GLTFShape("models/menu_chat.gltf"),Zt=new GLTFShape("models/menu_teach.gltf"),ee=new GLTFShape("models/menu_photo.gltf"),re=new GLTFShape("models/menu_sell.gltf"),ve=new GLTFShape("models/stool.gltf"),Me=new GLTFShape("models/sell_cargo.gltf"),Se=new GLTFShape("models/sell_opensea.gltf"),Ie=new GLTFShape("models/left.gltf"),Re=new GLTFShape("models/right.gltf"),Ne=new TextShape,Pe=new TextShape,Fe=new Ft.Blockchain("mumbai"),$e=function(_t){function Stool(){var Pt=_t.call(this)||this;return Pt.menu_mint_entity=new Entity,Pt.menu_chat_entity=new Entity,Pt.menu_teach_entity=new Entity,Pt.menu_photo_entity=new Entity,Pt.menu_sell_entity=new Entity,Pt.sell_cargo_entity=new Entity,Pt.sell_opensea_entity=new Entity,Pt.left_entity=new Entity,Pt.right_entity=new Entity,Pt.compidata_entity=new Entity,Pt.answer_entity=new Entity,Pt.current_compi=-1,Pt.current_token=-1,Pt.current_menu=0,Pt.addComponent(ve),Pt.addComponent(new Transform({position:new Vector3(8,0,8)})),Pt.addComponent(new Billboard(!1,!0,!1)),engine.addEntity(Pt),Pt.mint=new Dt.Mint(Pt),Pt.teach=new Ut.Teach(Pt),Pt.setupSell(),Pt.left_entity.addComponent(Ie),Pt.left_entity.addComponent(new Transform),Pt.left_entity.setParent(Pt),engine.addEntity(Pt.left_entity),Pt.left_entity.addComponent(new OnPointerDown((function(){Pt.previous(Pt)}),{hoverText:"Previous"})),Pt.right_entity.addComponent(Re),Pt.right_entity.addComponent(new Transform),Pt.right_entity.setParent(Pt),engine.addEntity(Pt.right_entity),Pt.right_entity.addComponent(new OnPointerDown((function(){Pt.next(Pt)}),{hoverText:"Next"})),Pt.compi_entity=new Lt.Compicactus,Pt.compi_entity.addComponent(new Transform({position:new Vector3(0,1.05,-.1),scale:new Vector3(.4,.4,.4)})),Pt.compi_entity.setParent(Pt),Ne.fontSize=1,Ne.value="-",Pt.compidata_entity.addComponent(Ne),Pt.compidata_entity.addComponent(new Transform({position:new Vector3(0,1.1,0),rotation:Quaternion.Euler(0,180,0)})),Pt.compidata_entity.setParent(Pt),engine.addEntity(Pt.compidata_entity),Pe.fontSize=2,Pe.value="-",Pe.color=Color3.Black(),Pe.outlineColor=Color3.White(),Pe.outlineWidth=.1,Pt.answer_entity.addComponent(Pe),Pt.answer_entity.addComponent(new Transform({position:new Vector3(0,1.9,0),rotation:Quaternion.Euler(0,180,0)})),Pt.answer_entity.setParent(Pt),engine.addEntity(Pt.answer_entity),Pt.setupMenu(),Pt.ownsCompi(),Pt}return __extends(Stool,_t),Stool.prototype.setupSell=function(){Me.visible=!1,this.sell_cargo_entity.addComponent(Me),this.sell_cargo_entity.addComponent(new Transform),this.sell_cargo_entity.setParent(this),engine.addEntity(this.sell_cargo_entity),this.sell_cargo_entity.addComponent(new OnPointerDown((function(){openExternalURL("https://app.cargo.build")}),{hoverText:"Go to Cargo"})),Se.visible=!1,this.sell_opensea_entity.addComponent(Se),this.sell_opensea_entity.addComponent(new Transform),this.sell_opensea_entity.setParent(this),engine.addEntity(this.sell_opensea_entity),this.sell_opensea_entity.addComponent(new OnPointerDown((function(){openExternalURL("https://opensea.io/")}),{hoverText:"Go to OpenSea"}))},Stool.prototype.setupMenu=function(){var _t=this;this.menu_mint_entity.addComponent(Kt),this.menu_mint_entity.addComponent(new Transform),this.menu_mint_entity.setParent(this),engine.addEntity(this.menu_mint_entity),this.menu_mint_entity.addComponent(new OnPointerDown((function(){_t.current_menu=0,_t.updateMenu()}),{hoverText:"Mint new Compi"})),this.menu_chat_entity.addComponent(Yt),this.menu_chat_entity.addComponent(new Transform),this.menu_chat_entity.setParent(this),engine.addEntity(this.menu_chat_entity),this.menu_chat_entity.addComponent(new OnPointerDown((function(){_t.current_menu=1,_t.updateMenu()}),{hoverText:"Chat with Compi"})),this.menu_teach_entity.addComponent(Zt),this.menu_teach_entity.addComponent(new Transform),this.menu_teach_entity.setParent(this),engine.addEntity(this.menu_teach_entity),this.menu_teach_entity.addComponent(new OnPointerDown((function(){_t.current_menu=2,_t.updateMenu()}),{hoverText:"Teach your Compi"})),this.menu_photo_entity.addComponent(ee),this.menu_photo_entity.addComponent(new Transform),this.menu_photo_entity.setParent(this),engine.addEntity(this.menu_photo_entity),this.menu_photo_entity.addComponent(new OnPointerDown((function(){_t.current_menu=3,_t.updateMenu()}),{hoverText:"Photo mode"})),this.menu_sell_entity.addComponent(re),this.menu_sell_entity.addComponent(new Transform),this.menu_sell_entity.setParent(this),engine.addEntity(this.menu_sell_entity),this.menu_sell_entity.addComponent(new OnPointerDown((function(){_t.current_menu=4,_t.updateMenu()}),{hoverText:"Sell Compi"}))},Stool.prototype.updateMenu=function(){this.mint.deactivate(),Me.visible=!1,Se.visible=!1,this.teach.deactivate(),Kt.visible=!0,Yt.visible=!0,Zt.visible=!0,ee.visible=!0,re.visible=!0,0==this.current_menu?(this.mint.activate(),this.mint.updatePrice()):1==this.current_menu||(2==this.current_menu?this.teach.activate():3==this.current_menu?(Yt.visible=!1,Zt.visible=!1,ee.visible=!1,re.visible=!1):4==this.current_menu&&(Me.visible=!0,Se.visible=!0))},Stool.prototype.previous=function(_t){_t.goto(!1)},Stool.prototype.next=function(_t){_t.goto(!0)},Stool.prototype.goto=function(_t){return void 0===_t&&(_t=!0),__awaiter(this,void 0,void 0,(function(){var Pt;return __generator(this,(function(Ft){switch(Ft.label){case 0:return log("Getting compis"),[4,Fe.balanceOf()];case 1:return(Pt=Ft.sent())>0&&(_t?this.current_compi+=1:this.current_compi-=1,this.current_compi<0?this.current_compi=Pt:this.current_compi>=Pt&&(this.current_compi=0),this.updateCompi()),log(this.current_compi),[2]}}))}))},Stool.prototype.ownsCompi=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(_t){switch(_t.label){case 0:return[4,Fe.balanceOf()];case 1:return _t.sent()>0&&(this.current_compi=0,this.updateCompi()),[2]}}))}))},Stool.prototype.updateCompi=function(){return __awaiter(this,void 0,void 0,(function(){var _t,Pt;return __generator(this,(function(Ft){switch(Ft.label){case 0:return Ne.value="-",[4,Fe.tokenOfOwnerByIndex(this.current_compi)];case 1:return _t=Ft.sent(),this.current_token=_t,[4,Fe.getName(_t)];case 2:return Pt=Ft.sent(),Ne.value=_t+":"+Pt,this.teach.getQuestions(),this.compi_entity.set_body(this.current_compi),[2]}}))}))},Stool}(Entity);Pt.Stool=$e})),define("game",["require","exports","@decentraland/Identity","stool"],(function(_t,Pt,Ft,Dt){Object.defineProperty(Pt,"__esModule",{value:!0}),executeTask((function(){return __awaiter(void 0,void 0,void 0,(function(){var _t;return __generator(this,(function(Pt){switch(Pt.label){case 0:return[4,(0,Ft.getUserPublicKey)()];case 1:return _t=Pt.sent(),log(_t),_t&&new Dt.Stool,[2]}}))}))}));var Ut=new Entity;Ut.addComponent(new GLTFShape("models/Building.gltf")),Ut.addComponent(new Transform({position:new Vector3(8,0,-8),rotation:Quaternion.Euler(0,90,0)})),engine.addEntity(Ut)}));