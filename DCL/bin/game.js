"use strict";const getGlobalThis=function(){if("undefined"!=typeof globalThis)return globalThis;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==this)return this;throw new Error("Unable to locate global `this`")},globalObject=getGlobalThis();var loader;!function(T){let A=0;const E=[],S=[],O={baseUrl:""},k={};function c(T,E,S){let O=null,B={},j=null;"function"==typeof T?B=T:"string"==typeof T?(O=T,"function"==typeof E?B=E:E instanceof Array&&(j=E,B=S)):T instanceof Array&&(j=T,"function"==typeof E&&(B=E)),j=j||["require","exports","module"],null===O&&(O="unnamed-module-"+A++),O=g(O),j=(j||[]).map((T=>function(T,A){return T?b(A,T):A}(O,T))),k[O]||(k[O]={name:O,parent:null,dclamd:1,dependencies:j,handlers:[],exports:{},dependants:new Set}),k[O].dependencies=j,p(j,(function(T){const A=k[O];if(!A)throw new Error("Could not access registered module "+O);let E=A.exports;E="function"==typeof B?B.apply(globalObject,T)||E:B,A.exports=E,d(O)}),(T=>{if("function"!=typeof onerror)throw T;onerror(T)}),O)}function d(T){const A=k[T];if(!A)throw new Error("Could not access registered module "+T);A.dclamd=2;const E=A.handlers;if(E&&E.length)for(let A=0;A<E.length;A++)E[A](k[T])}function u(T,A,E){if(!k[T])return null;if(T===A||50===E)return[T];const S=k[T].dependencies;for(let O=0,k=S.length;O<k;O++){const k=u(S[O],A,E+1);if(null!==k)return k.push(T),k}return null}function a(T,A){const E=k[T];if(!E)return!1;const S={};for(const T in k)S[T]=!1;const O=[];for(O.push(E),S[T]=!0;O.length>0;){const T=O.shift().dependencies;if(T)for(let E=0,B=T.length;E<B;E++){const B=T[E];if(B===A)return!0;const j=k[B];j&&!S[B]&&(S[B]=!0,O.push(j))}}return!1}function p(T,A,E,O){const B=new Array(T.length).fill(null);let j=0,_t=!1;if("string"==typeof T){if(k[T]){if(1===k[T].dclamd)throw new Error(`Trying to load ${T} from ${O}. The first module is still loading.`);return k[T]}throw new Error(T+" has not been defined. Please include it as a dependency in "+O+"'s define()")}const Pt=T.length;for(let Ft=0;Ft<Pt;Ft++)switch(T[Ft]){case"require":const h=function(T,A,E){return p(T,A,E,O)};h.toUrl=function(T){return b(T,O)},B[Ft]=h,j++;break;case"exports":if(!k[O])throw new Error("Parent module "+O+" not registered yet");B[Ft]=k[O].exports,j++;break;case"module":B[Ft]={id:O,uri:b(O)},j++;break;default:{const Lt=T[Ft],m=()=>{B[Ft]=k[Lt].exports,j++,j===Pt&&A&&(_t=!0,A(B))};if(a(Lt,O)){const T=u(Lt,O,0);T&&(T.reverse(),T.push(Lt),S.push(T)),w(Lt,(()=>{}),E,O),m()}else w(Lt,m,E,O);break}}!_t&&j===Pt&&A&&A(B)}function h(T,A){return function(){return dcl.callRpc(T,A.name,E.slice.call(arguments,0))}}function w(T,A,E,S){if(k[T])return k[T].dependants.add(S),void(1===k[T].dclamd?A&&k[T].handlers.push(A):A&&A(k[T]));if(k[T]={name:T,parent:S,dclamd:1,handlers:[A],dependencies:[],dependants:new Set([S]),exports:{}},0===T.indexOf("@")){const A=k[T].exports;if("function"!=typeof dcl.loadModule)throw new Error("Asynchronous modules will not work because loadModule function is not present");dcl.loadModule(T,A).then((E=>{for(const T in E.methods){const S=E.methods[T];A[S.name]=h(E.rpcHandle,S)}d(T)})).catch((T=>{E(T)}))}}function g(T){let A,E=T;for(A=/\/\.\//;A.test(E);)E=E.replace(A,"/");for(E=E.replace(/^\.\//g,""),A=/\/(([^\/])|([^\/][^\/\.])|([^\/\.][^\/])|([^\/][^\/][^\/]+))\/\.\.\//;A.test(E);)E=E.replace(A,"/");return E=E.replace(/^(([^\/])|([^\/][^\/\.])|([^\/\.][^\/])|([^\/][^\/][^\/]+))\/\.\.\//,""),E=E.replace(/^\//g,""),E}function b(T,A){switch(T){case"require":case"exports":case"module":return T}return A?function(T,A){let E=T;if(!E.startsWith("@")&&(E.startsWith("./")||E.startsWith("../"))){const T=A.split("/");T.pop(),E=g(T.join("/")+"/"+E)}return E}(T,A):g(T)}T.config=function(T){if("object"==typeof T)for(const A in T)T.hasOwnProperty(A)&&(O[A]=T[A])},T.define=c,function(T){T.amd={},T.modules=k}(c=T.define||(T.define={})),T.require=p,"undefined"!=typeof dcl&&dcl.onStart((()=>{const T=new Set,A=[];for(const E in k)k[E]&&(1===k[E].dclamd&&A.push(k[E]),k[E].dependencies.forEach((A=>{"require"!==A&&"exports"!==A&&"module"!==A&&(k[A]||T.add(A))})));const E=[];if(S.length&&E.push(`\n> Cyclic dependencies: ${S.map((T=>"\n  - "+T.join(" -> "))).join("")}`),T.size&&E.push(`\n> Undeclared/unknown modules: ${Array.from(T).map((T=>"\n  - "+T)).join("")}`),A.length&&E.push(`\n> These modules didn't load: ${A.map((T=>"\n  - "+T.name)).join("")}.\n`),E.length)throw new Error(E.join("\n"))})),p.toUrl=b}(loader||(loader={})),globalObject.define=loader.define,globalObject.dclamd=loader,function(T){var A=function(){function t(){}return t.AVATAR={getEntityRepresentation:function(T){return T.avatarEntity}},t.FIRST_PERSON_CAMERA={getEntityRepresentation:function(T){return T.firstPersonCameraEntity}},t}(),n=function(T,A){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,A){T.__proto__=A}||function(T,A){for(var E in A)Object.prototype.hasOwnProperty.call(A,E)&&(T[E]=A[E])})(T,A)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function i(T,A){if("function"!=typeof A&&null!==A)throw new TypeError("Class extends value "+String(A)+" is not a constructor or null");function i(){this.constructor=T}n(T,A),T.prototype=null===A?Object.create(A):(i.prototype=A.prototype,new i)}var o=function(){return(o=Object.assign||function(T){for(var A,E=1,S=arguments.length;E<S;E++)for(var O in A=arguments[E])Object.prototype.hasOwnProperty.call(A,O)&&(T[O]=A[O]);return T}).apply(this,arguments)};function r(T,A,E,S){var O,k=arguments.length,B=k<3?A:null===S?S=Object.getOwnPropertyDescriptor(A,E):S;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)B=Reflect.decorate(T,A,E,S);else for(var j=T.length-1;j>=0;j--)(O=T[j])&&(B=(k<3?O(B):k>3?O(A,E,B):O(A,E))||B);return k>3&&B&&Object.defineProperty(A,E,B),B}function s(T,A){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(T,A)}function h(T){var A="function"==typeof Symbol&&Symbol.iterator,E=A&&T[A],S=0;if(E)return E.call(T);if(T&&"number"==typeof T.length)return{next:function(){return T&&S>=T.length&&(T=void 0),{value:T&&T[S++],done:!T}}};throw new TypeError(A?"Object is not iterable.":"Symbol.iterator is not defined.")}function l(T,A){var E="function"==typeof Symbol&&T[Symbol.iterator];if(!E)return T;var S,O,k=E.call(T),B=[];try{for(;(void 0===A||A-- >0)&&!(S=k.next()).done;)B.push(S.value)}catch(T){O={error:T}}finally{try{S&&!S.done&&(E=k.return)&&E.call(k)}finally{if(O)throw O.error}}return B}function p(T,A){for(var E=0,S=A.length,O=T.length;E<S;E++,O++)T[O]=A[E];return T}var E=0;function c(){for(var T=[],A=0;A<arguments.length;A++)T[A]=arguments[A];"undefined"!=typeof dcl?dcl.log.apply(dcl,p([],l(T))):console.log.apply(console,p(["DEBUG:"],l(T)))}function y(T,A){"undefined"!=typeof dcl?dcl.error(T,A):console.error("ERROR:",T,A)}function f(T){if(E++,0===T.length)throw new Error("newId(type: string): type cannot be empty");return T+E.toString(36)}function m(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(T){var A=16*Math.random()|0;return("x"===T?A:3&A|8).toString(16)}))}var S=[];function _(T){if(!("__event_name__"in T)||"string"!=typeof T.__event_name__)throw new Error("The EventConstructor is not registered");return T.__event_name__}var O=function(){function t(){this.listeners={}}return t.prototype.addListener=function(T,A,E){if(!T||"function"!=typeof T)throw new Error("Invalid EventConstructor");var S=_(T),O=this.listeners[S];O||(O=this.listeners[S]=[]);for(var k=0;k<O.length;k++)if(O[k].listener===A)throw new Error("The provided listener is already registered");return O.push({listener:A,fn:E}),this},t.prototype.removeListener=function(T,A){if(!A||"function"!=typeof A)throw new Error("Invalid EventConstructor");var E=_(A),S=this.listeners[E];if(!S)return!1;for(var O=0;O<S.length;O++)if(S[O].listener===T)return S.splice(O,1),!0;return!1},t.prototype.fireEvent=function(T){var A=_(T.constructor),E=this.listeners[A];if(E)for(var S=0;S<E.length;S++)try{var O=E[S];O.fn.call(O.listener,T)}catch(T){y(T)}return this},t}();function x(){var T=f("EV");if(-1!==S.indexOf(T))throw new Error("The event name "+T+" is already taken");return S.push(T),function(A){return A.__event_name__=T,A}}var k,B=r([x(),s("design:paramtypes",[Object,String,Object])],(function(T,A,E){this.entity=T,this.componentName=A,this.component=E})),j=r([x(),s("design:paramtypes",[Object,String,Object])],(function(T,A,E){this.entity=T,this.componentName=A,this.classId=E})),_t=r([x(),s("design:paramtypes",[Object,Object])],(function(T,A){this.entity=T,this.parent=A}));T.UIValueType=void 0,(k=T.UIValueType||(T.UIValueType={}))[k.PERCENT=0]="PERCENT",k[k.PIXELS=1]="PIXELS";var Pt=function(){function e(A){if(this.type=T.UIValueType.PIXELS,"string"==typeof A){var E=A;E.indexOf("px")>-1?this.type=T.UIValueType.PIXELS:E.indexOf("%")>-1&&(this.type=T.UIValueType.PERCENT),this.value=parseFloat(E)}else this.value=A}return e.prototype.toString=function(){var A=this.value.toString();return this.type===T.UIValueType.PERCENT?A+="%":A+="px",A},e}(),Ft="__name__symbol_",Lt="__classId__symbol_",Ut="__component__id_",Zt=r([x(),s("design:paramtypes",[String,String,Number])],(function(T,A,E){this.componentId=T,this.componentName=A,this.classId=E})),Yt=r([x(),s("design:paramtypes",[String])],(function(T){this.componentId=T})),Kt=r([x(),s("design:paramtypes",[String,Object])],(function(T,A){this.componentId=T,this.component=A}));function P(T,A){return function(E){if(E.isComponent)throw new TypeError("You cannot extend a component. Trying to extend "+E.originalClassName+" with: "+T);var S=E,o=function(){var E=Array.prototype.slice.call(arguments),O=new(S.bind.apply(S,p([void 0],l(E))));return Object.defineProperty(O,Ft,{enumerable:!1,writable:!1,configurable:!1,value:T}),void 0!==A&&Object.defineProperty(O,Lt,{enumerable:!1,writable:!1,configurable:!1,value:A}),O};return void 0!==A&&(o.__classId__symbol_=A),o.__name__symbol_=T,o.isComponent=!0,o.originalClassName=T,(o.prototype=E.prototype).constructor=E,o}}function N(T,A){return function(E){if(E.isComponent)throw new TypeError("You cannot extend a component. Trying to extend "+E.originalClassName+" with: "+T);if("number"!=typeof A||isNaN(A))throw new Error("classId: "+A+" is an invalid integer");var S=E,o=function(){if(!N.engine)throw new Error("You need to set a DisposableComponent.engine before creating disposable components");var E=Array.prototype.slice.call(arguments),O=new(S.bind.apply(S,p([void 0],l(E)))),k=f("C");return Object.defineProperty(O,Ft,{enumerable:!1,writable:!1,configurable:!1,value:T}),Object.defineProperty(O,Ut,{enumerable:!1,writable:!1,configurable:!1,value:k}),void 0!==A&&Object.defineProperty(O,Lt,{enumerable:!1,writable:!1,configurable:!1,value:A}),N.engine&&N.engine.registerComponent(O),O};return void 0!==A&&(o.__classId__symbol_=A),o.__name__symbol_=T,o.isComponent=!0,o.isDisposableComponent=!0,o.originalClassName=T,(o.prototype=E.prototype).constructor=E,o}}function F(T){if(!T)throw new TypeError(T+" is not a component.");if(T.__name__symbol_)return T.__name__symbol_;throw new TypeError(T+" is not a registered component.")}function L(T){if(!T)throw new TypeError(T+" is not a component.");if(T.__classId__symbol_)return T.__classId__symbol_;if(!T.__name__symbol_)throw new TypeError(T+" is not a registered component.");return null}function D(T){if(!T)throw new TypeError(T+" is not a component.");if(T.__component__id_)return T.__component__id_;throw new TypeError(T+" is not a registered disposable component.")}!function(T){T.engine=null}(N||(N={}));var ee=function(){function t(){this.dirty=!1,this.data={},this.subscriptions=[]}return t.component=function(T,A){if(delete T[A]){var E=A+"_"+Math.random();T[E]=void 0,Object.defineProperty(T,E,o(o({},Object.getOwnPropertyDescriptor(T,E)),{enumerable:!1})),Object.defineProperty(T,A.toString(),{get:function(){return this[E]},set:function(T){var S=this[E];if(this.data[A]=T?D(T):null,this[E]=T,T!==S){this.dirty=!0;for(var O=0;O<this.subscriptions.length;O++)this.subscriptions[O](A,T,S)}},enumerable:!0})}},t.field=function(T,A){delete T[A]&&Object.defineProperty(T,A.toString(),{get:function(){return this.data[A]},set:function(T){var E=this.data[A];if(this.data[A]=T,T!==E){this.dirty=!0;for(var S=0;S<this.subscriptions.length;S++)this.subscriptions[S](A,T,E)}},enumerable:!0})},t.uiValue=function(T,A){delete T[A]&&Object.defineProperty(T,A.toString(),{get:function(){return this.data[A].toString()},set:function(T){var E=this.data[A],S=new Pt(T);if(this.data[A]=S,S!==E){this.dirty=!0;for(var O=0;O<this.subscriptions.length;O++)this.subscriptions[O](A,S,E)}},enumerable:!0})},t.readonly=function(T,A){delete T[A]&&Object.defineProperty(T,A.toString(),{get:function(){if(A in this.data==0)throw new Error("The field "+A+" is uninitialized");return this.data[A]},set:function(T){if(A in this.data)throw new Error("The field "+A+" is readonly");this.data[A]=T,this.dirty=!0},enumerable:!0,configurable:!1})},t.prototype.onChange=function(T){return this.subscriptions.push(T),this},t.prototype.toJSON=function(){return this.data},t}();function U(T){return Ut in T}var le=function(){function t(){for(var T=[],A=0;A<arguments.length;A++)T[A]=arguments[A];if(this.entities=[],this.active=!1,this._requiresNames=[],!T)throw new Error("ComponentGroup: Could not load the requires list");if(!(T instanceof Array))throw new Error("ComponentGroup: requires list is not an Array");Object.defineProperty(this,"requires",{get:function(){return T.slice()}}),Object.defineProperty(this,"requiresNames",{get:function(){return this._requiresNames.slice()}});for(var n=function(A){var S=T[A],O=null;if(!S)throw new Error("ComponentGroup: the required component at location "+A+" is invalid");try{O=F(S)}catch(T){throw new Error("ComponentGroup: the required component at location "+A+" is not registered as a @Component. Remember to provide the class of the component, not the name")}if(E._requiresNames.some((function(T){return T===O})))throw new Error("ComponentGroup: the required component list has a repeated name "+O);E._requiresNames.push(O)},E=this,S=0;S<T.length;S++)n(S)}return t.prototype.hasEntity=function(T){return!!T.isAddedToEngine()&&-1!==this.entities.indexOf(T)},t.prototype.addEntity=function(T){if(!T.isAddedToEngine())throw new TypeError("ComponentGroup: Cannot add a entity that is not added to the engine");-1===this.entities.indexOf(T)&&this.entities.push(T)},t.prototype.removeEntity=function(T){var A=this.entities.indexOf(T);-1!==A&&this.entities.splice(A,1)},t.prototype.componentRemoved=function(T,A){-1!==this._requiresNames.indexOf(A)&&this.removeEntity(T)},t.prototype.meetsRequirements=function(T){for(var A=0;A<this._requiresNames.length;A++)if(!(this._requiresNames[A]in T.components))return!1;return!0},t}(),ve=function(){function t(T){this.name=T,this.children={},this.eventManager=null,this.alive=!1,this.uuid=f("E"),this.components={},this.engine=null,this._parent=null}return t.prototype.addComponentOrReplace=function(T){if("function"==typeof T)throw new Error("You passed a function or class as a component, an instance of component is expected");if("object"!=typeof T)throw new Error("You passed a "+typeof T+", an instance of component is expected");var A=F(T);if(this.components[A]){if(this.components[A]===T)return T;this.removeComponent(this.components[A],!1)}return this.addComponent(T)},t.prototype.hasComponent=function(T){var A=typeof T;if("string"!==A&&"object"!==A&&"function"!==A)throw new Error("Entity#has(component): component is not a class, name or instance");if(null===T)return!1;var E="string"===A?T:F(T),S=this.components[E];return!!S&&("object"===A?S===T:"function"!==A||S instanceof T)},t.prototype.getComponent=function(T){var A=typeof T;if("string"!==A&&"function"!==A)throw new Error("Entity#get(component): component is not a class or name");var E="string"===A?T:F(T),S=this.components[E];if(!S)throw new Error('Can not get component "'+E+'" from entity "'+this.identifier+'"');if("function"===A){if(S instanceof T)return S;throw new Error('Can not get component "'+E+'" from entity "'+this.identifier+'" (by instance)')}return S},t.prototype.getComponentOrNull=function(T){var A=typeof T;if("string"!==A&&"function"!==A)throw new Error("Entity#getOrNull(component): component is not a class or name");var E="string"===A?T:F(T),S=this.components[E];return S?"function"===A?S instanceof T?S:null:S:null},t.prototype.getComponentOrCreate=function(T){if("function"!=typeof T)throw new Error("Entity#getOrCreate(component): component is not a class");var A=this.getComponentOrNull(T);return A||(F(A=new T),this.addComponentOrReplace(A)),A},t.prototype.addComponent=function(T){if("object"!=typeof T)throw new Error("Entity#add(component): You passed a function or class as a component, an instance of component is expected");var A=F(T),E=L(T);if(this.components[A])throw new Error('A component of type "'+A+'" is already present in entity "'+this.identifier+'"');this.components[A]=T,this.eventManager&&this.eventManager.fireEvent(new j(this,A,E));var S=T;return"function"==typeof S.addedToEntity&&S.addedToEntity(this),T},t.prototype.removeComponent=function(T,A){void 0===A&&(A=!0);var E=typeof T;if("string"!==E&&"function"!==E&&"object"!==E)throw new Error("Entity#remove(component): component is not a class, class or name");var S="string"===E?T:F(T),O=this.components[S];if(O){if("function"===E)return O instanceof T?(delete this.components[S],void(O&&(A&&this.eventManager&&this.eventManager.fireEvent(new B(this,S,O)),"function"==typeof O.removedFromEntity&&O.removedFromEntity(this)))):void c('Entity Warning: Trying to remove wrong (by constructor) component "'+S+'" from entity "'+this.identifier+'"');delete this.components[S],O&&(A&&this.eventManager&&this.eventManager.fireEvent(new B(this,S,O)),"function"==typeof O.removedFromEntity&&O.removedFromEntity(this))}else c('Entity Warning: Trying to remove inexisting component "'+S+'" from entity "'+this.identifier+'"')},t.prototype.isAddedToEngine=function(){return!(!this.engine||!(this.uuid in this.engine.entities)&&this.engine.rootEntity!==this)},t.prototype.setParent=function(T){var A;if(T&&"getEntityRepresentation"in T){if(!this.engine)throw new Error("In order to set an attachable as parent, you first need to add the entity to the engine.");A=T.getEntityRepresentation(this.engine)}else A=!T&&this.engine?this.engine.rootEntity:T;var E=this.getParent();if(A===this)throw new Error('Failed to set parent for entity "'+this.identifier+"\": An entity can't set itself as a its own parent");if(A===E)return this;var S=this.getCircularAncestor(A);if(S)throw new Error('Failed to set parent for entity "'+this.identifier+'": Circular parent references are not allowed (See entity "'+S+'")');return E&&delete E.children[this.uuid],null!==A&&"0"!==A.uuid&&(!A.isAddedToEngine()&&this.isAddedToEngine()&&this.engine.removeEntity(this),A.isAddedToEngine()&&!this.isAddedToEngine()&&A.engine.addEntity(this)),this._parent=A||null,this.registerAsChild(),this.eventManager&&this.engine&&this.eventManager.fireEvent(new _t(this,A)),this},t.prototype.getParent=function(){return this._parent},Object.defineProperty(t.prototype,"identifier",{get:function(){return this.name||this.uuid},enumerable:!1,configurable:!0}),t.prototype.getCircularAncestor=function(T){for(var A=this.engine?this.engine.rootEntity:null,E=T;E&&E!==A;){var S=E.getParent();if(S===this)return E.uuid;E=S}return null},t.prototype.registerAsChild=function(){var T=this.getParent();this.uuid&&T&&(T.children[this.uuid]=this)},t}(),Ce=function(){function t(T){this.eventManager=new O,this.systems=[],this.entityLists={},this.addedSystems=[],this._entities={},this._disposableComponents={},this._componentGroups={},this.simpleSystems=[],this.eventManager.addListener(j,this,this.componentAddedHandler),this.eventManager.addListener(B,this,this.componentRemovedHandler),this.rootEntity=T,this.firstPersonCameraEntity=new ve,this.firstPersonCameraEntity.uuid="FirstPersonCameraEntityReference",this.addEntity(this.firstPersonCameraEntity),this.avatarEntity=new ve,this.avatarEntity.uuid="AvatarEntityReference",this.addEntity(this.avatarEntity)}return Object.defineProperty(t.prototype,"entities",{get:function(){return this._entities},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"disposableComponents",{get:function(){return this._disposableComponents},enumerable:!1,configurable:!0}),t.prototype.addEntity=function(T){var A=T.getParent();if(T.isAddedToEngine())return T;for(var E in T.eventManager=this.eventManager,T.engine=this,this._entities[T.uuid]=T,this.checkRequirementsAndAdd(T),A?A.isAddedToEngine()||A===this.rootEntity||c("Engine: warning, added an entity with a parent not present in the engine. Parent id: "+A.uuid):T.setParent(this.rootEntity),T.alive=!0,T.children){var S=T.children[E];S&&(S.isAddedToEngine()||this.addEntity(S))}return T},t.prototype.removeEntity=function(T){var A=T.uuid;if(T.isAddedToEngine()){for(var E in T.components){var S=this._componentGroups[E];if(S)for(var O in S)S[O].removeEntity(T);delete this.entityLists[E][A]}for(var k=0;k<this.simpleSystems.length;k++){var B=this.simpleSystems[k];B.onRemoveEntity&&B.onRemoveEntity(T)}for(var k in T.children){var j=T.children[k];j&&this.removeEntity(j)}return T.alive=!1,T.eventManager=null,delete this._entities[A],!0}for(var E in c("Engine: Trying to remove non existent entity from engine."),T.isAddedToEngine()?c("Engine: Entity id: "+A):c('Engine: Entity "'+T.uuid+'" has not been added to any engine yet.'),c("Engine: Entity's components:"),T.components)c(E);return!1},t.prototype.addSystem=function(T,A){if(void 0===A&&(A=0),-1!==this.addedSystems.indexOf(T))return c("Engine: Trying to add a system that is already added. Aborting"),T;if(this.systems.length>0)for(var E=0;E<this.systems.length;E++){var S=this.systems[E],O=E===this.systems.length-1;if(S.priority>A){this.addedSystems.push(T),this.systems.splice(E,0,{system:T,priority:A});break}if(O){this.addedSystems.push(T),this.systems.splice(E+1,0,{system:T,priority:A});break}}else this.addedSystems.push(T),this.systems.splice(1,0,{system:T,priority:A});return this.registerSystem(T),T},t.prototype.removeSystem=function(T){var A=this.addedSystems.indexOf(T);if(-1!==A){T.active=!1,T.deactivate&&T.deactivate(),this.addedSystems.splice(A,1);for(var E=0;E<this.systems.length;E++)this.systems[E].system===T&&this.systems.splice(E,1);return!0}return!1},t.prototype.update=function(T){for(var A in this.systems){var E=this.systems[A].system;if(E.active&&E.update)try{E.update(T)}catch(T){y(T)}}return this},t.prototype.getEntitiesWithComponent=function(T){var A="string"==typeof T?T:F(T);return A in this.entityLists?this.entityLists[A]:this.entityLists[A]={}},t.prototype.registerComponent=function(T){var A=D(T),E=F(T),S=L(T);this._disposableComponents[A]=T,null!==S&&(this.eventManager.fireEvent(new Zt(A,E,S)),this.eventManager.fireEvent(new Kt(A,T)))},t.prototype.disposeComponent=function(T){var A=D(T);return delete this._disposableComponents[A]&&(this.eventManager.fireEvent(new Yt(A)),T.onDispose&&T.onDispose(),!0)},t.prototype.updateComponent=function(T){this.eventManager.fireEvent(new Kt(D(T),T))},t.prototype.getComponentGroup=function(){for(var T=[],A=0;A<arguments.length;A++)T[A]=arguments[A];var E=void 0;if(T.length>0&&(_t=this._componentGroups[F(T[0])]))for(var S=T.slice(),O=0;O<_t.length;O++){var k=_t[O];if(S.length===k.requires.length){for(var B=0;B<S.length&&-1!==k.requires.indexOf(S[B]);B++)B===S.length-1&&(E=k);if(E)break}}if(E)return E;(E=new(le.bind.apply(le,p([void 0],l(T))))).active=!0;var j=E.requiresNames;for(O=0;O<j.length;O++){var _t,Pt=j[O];(_t=this._componentGroups[Pt])||(this._componentGroups[Pt]=_t=[]),-1===_t.indexOf(E)&&_t.push(E)}for(var Ft in this._entities)this.checkRequirements(this._entities[Ft],E);return E},t.prototype.removeComponentGroup=function(T){if(T.active){T.active=!1;for(var A=T.requiresNames,E=0;E<A.length;E++){var S=A[E],O=this._componentGroups[S];if(O){var k=O.indexOf(T);-1!==k&&O.splice(k,1)}}return!0}return!1},t.prototype.registerSystem=function(T){T.active=!0,T.activate&&T.activate(this),this.simpleSystems.push(T)},t.prototype.checkRequirementsAndAdd=function(T){if(T.isAddedToEngine()){for(var A in T.components){A in this.entityLists||(this.entityLists[A]={}),this.entityLists[A][T.uuid]=T;var E=this._componentGroups[A];if(E)for(var S in E)this.checkRequirements(T,E[S])}for(var O=0;O<this.simpleSystems.length;O++){var k=this.simpleSystems[O];k.onAddEntity&&k.onAddEntity(T)}}},t.prototype.checkRequirements=function(T,A){A.meetsRequirements(T)?A.hasEntity(T)||A.addEntity(T):A.hasEntity(T)&&A.removeEntity(T)},t.prototype.componentAddedHandler=function(T){var A,E=T.entity,S=T.componentName;if(E.isAddedToEngine()){this.entityLists[S]?this.entityLists[S][E.uuid]=E:this.entityLists[S]=((A={})[E.uuid]=E,A);var O=this._componentGroups[S];if(O)for(var k in O)this.checkRequirements(E,O[k])}},t.prototype.componentRemovedHandler=function(T){var A=T.entity,E=T.componentName;if(A.isAddedToEngine()){delete this.entityLists[E][A.uuid];var S=this._componentGroups[E];if(S)for(var O in S)this.checkRequirements(A,S[O])}},t}(),Se=Promise.resolve().then.bind(Promise.resolve());function G(T){var A=Se(T);return A.isComplete=!1,A.then((function(T){A.isComplete=!0,A.result=T,A.didFail=!1})).catch((function(T){A.isComplete=!0,A.error=T,A.didFail=!0,y("executeTask: FAILED "+T.toString(),T)})),A}var Re,Ie,Ne=function(){function t(T,A,E,S){void 0===A&&(A=!1),this.initalize(T,A,E,S)}return t.prototype.initalize=function(T,A,E,S){return void 0===A&&(A=!1),this.mask=T,this.skipNextObservers=A,this.target=E,this.currentTarget=S,this},t}(),Y=function(T,A,E){void 0===E&&(E=null),this.callback=T,this.mask=A,this.scope=E,this.unregisterOnNextCall=!1,this._willBeUnregistered=!1},Pe=function(){function t(){this._observers=null,this._observables=null}return t.Watch=function(T,A,E,S){var O,k;void 0===E&&(E=-1),void 0===S&&(S=null);var B=new t;B._observers=new Array,B._observables=T;try{for(var j=h(T),_t=j.next();!_t.done;_t=j.next()){var Pt=_t.value.add(A,E,!1,S);Pt&&B._observers.push(Pt)}}catch(T){O={error:T}}finally{try{_t&&!_t.done&&(k=j.return)&&k.call(j)}finally{if(O)throw O.error}}return B},t.prototype.dispose=function(){if(this._observers&&this._observables)for(var T=0;T<this._observers.length;T++)this._observables[T].remove(this._observers[T]);this._observers=null,this._observables=null},t}(),Fe=function(){function t(T){this._observers=new Array,this._onObserverAdded=null,this._eventState=new Ne(0),T&&(this._onObserverAdded=T)}return t.prototype.add=function(T,A,E,S,O){if(void 0===A&&(A=-1),void 0===E&&(E=!1),void 0===S&&(S=null),void 0===O&&(O=!1),!T)return null;var k=new Y(T,A,S);return k.unregisterOnNextCall=O,E?this._observers.unshift(k):this._observers.push(k),this._onObserverAdded&&this._onObserverAdded(k),k},t.prototype.addOnce=function(T){return this.add(T,void 0,void 0,void 0,!0)},t.prototype.remove=function(T){return!!T&&-1!==this._observers.indexOf(T)&&(this._deferUnregister(T),!0)},t.prototype.removeCallback=function(T,A){for(var E=0;E<this._observers.length;E++)if(this._observers[E].callback===T&&(!A||A===this._observers[E].scope))return this._deferUnregister(this._observers[E]),!0;return!1},t.prototype.notifyObservers=function(T,A,E,S){var O,k;if(void 0===A&&(A=-1),!this._observers.length)return!0;var B=this._eventState;B.mask=A,B.target=E,B.currentTarget=S,B.skipNextObservers=!1,B.lastReturnValue=T;try{for(var j=h(this._observers),_t=j.next();!_t.done;_t=j.next()){var Pt=_t.value;if(!Pt._willBeUnregistered&&(Pt.mask&A&&(Pt.scope?B.lastReturnValue=Pt.callback.apply(Pt.scope,[T,B]):B.lastReturnValue=Pt.callback(T,B),Pt.unregisterOnNextCall&&this._deferUnregister(Pt)),B.skipNextObservers))return!1}}catch(T){O={error:T}}finally{try{_t&&!_t.done&&(k=j.return)&&k.call(j)}finally{if(O)throw O.error}}return!0},t.prototype.notifyObserversWithPromise=function(T,A,E,S){var O=this;void 0===A&&(A=-1);var k=Promise.resolve(T);if(!this._observers.length)return k;var B=this._eventState;return B.mask=A,B.target=E,B.currentTarget=S,B.skipNextObservers=!1,this._observers.forEach((function(E){B.skipNextObservers||E._willBeUnregistered||E.mask&A&&(k=E.scope?k.then((function(A){return B.lastReturnValue=A,E.callback.apply(E.scope,[T,B])})):k.then((function(A){return B.lastReturnValue=A,E.callback(T,B)})),E.unregisterOnNextCall&&O._deferUnregister(E))})),k.then((function(){return T}))},t.prototype.notifyObserver=function(T,A,E){void 0===E&&(E=-1);var S=this._eventState;S.mask=E,S.skipNextObservers=!1,T.callback(A,S)},t.prototype.hasObservers=function(){return this._observers.length>0},t.prototype.clear=function(){this._observers=new Array,this._onObserverAdded=null},t.prototype.clone=function(){var T=new t;return T._observers=this._observers.slice(0),T},t.prototype.hasSpecificMask=function(T){var A,E;void 0===T&&(T=-1);try{for(var S=h(this._observers),O=S.next();!O.done;O=S.next()){var k=O.value;if(k.mask&T||k.mask===T)return!0}}catch(T){A={error:T}}finally{try{O&&!O.done&&(E=S.return)&&E.call(S)}finally{if(A)throw A.error}}return!1},t.prototype._deferUnregister=function(T){var A=this;T.unregisterOnNextCall=!1,T._willBeUnregistered=!0,G((function(){return function(T,A,E,S){return new(E||(E=Promise))((function(A,O){function s(T){try{d(S.next(T))}catch(T){O(T)}}function a(T){try{d(S.throw(T))}catch(T){O(T)}}function d(T){var S;T.done?A(T.value):(S=T.value,S instanceof E?S:new E((function(T){T(S)}))).then(s,a)}d((S=S.apply(T,[])).next())}))}(A,0,void 0,(function(){return function(T,A){var E,S,O,k,B={label:0,sent:function(){if(1&O[0])throw O[1];return O[1]},trys:[],ops:[]};return k={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(k[Symbol.iterator]=function(){return this}),k;function a(k){return function(j){return function(k){if(E)throw new TypeError("Generator is already executing.");for(;B;)try{if(E=1,S&&(O=2&k[0]?S.return:k[0]?S.throw||((O=S.return)&&O.call(S),0):S.next)&&!(O=O.call(S,k[1])).done)return O;switch(S=0,O&&(k=[2&k[0],O.value]),k[0]){case 0:case 1:O=k;break;case 4:return B.label++,{value:k[1],done:!1};case 5:B.label++,S=k[1],k=[0];continue;case 7:k=B.ops.pop(),B.trys.pop();continue;default:if(!((O=(O=B.trys).length>0&&O[O.length-1])||6!==k[0]&&2!==k[0])){B=0;continue}if(3===k[0]&&(!O||k[1]>O[0]&&k[1]<O[3])){B.label=k[1];break}if(6===k[0]&&B.label<O[1]){B.label=O[1],O=k;break}if(O&&B.label<O[2]){B.label=O[2],B.ops.push(k);break}O[2]&&B.ops.pop(),B.trys.pop();continue}k=A.call(T,B)}catch(T){k=[6,T],S=0}finally{E=O=0}if(5&k[0])throw k[1];return{value:k[0]?k[1]:void 0,done:!0}}([k,j])}}}(this,(function(A){return[2,this._remove(T)]}))}))}))},t.prototype._remove=function(T){if(!T)return!1;var A=this._observers.indexOf(T);return-1!==A&&(this._observers.splice(A,1),!0)},t}(),Le=r([x(),s("design:paramtypes",[String,Object])],(function(T,A){this.uuid=T,this.payload=A})),Ue=r([x(),s("design:paramtypes",[Object])],(function(T){this.payload=T})),qe=r([x(),s("design:paramtypes",[Object])],(function(T){this.payload=T}));function tt(T){return function(){Ie&&Ie.subscribe(T)}}var He=new Fe(tt("cameraModeChanged")),Ve=new Fe(tt("idleStateChanged")),Ge=new Fe(tt("onEnterScene")),We=Ge,Xe=new Fe(tt("onLeaveScene")),Qe=Xe,$e=new Fe(tt("sceneStart")),Je=new Fe(tt("playerExpression")),Ze=new Fe(tt("onPointerLock")),Ye=new Fe(tt("videoEvent")),tn=new Fe(tt("profileChanged")),nn=new Fe(tt("playerConnected")),rn=new Fe(tt("playerDisconnected")),on=new Fe(tt("onRealmChanged")),sn=new Fe(tt("playerClicked"));function mt(T){(Ie=T)&&Ie.onEvent((function(T){switch(T.type){case"onEnterScene":return void Ge.notifyObservers(T.data);case"onLeaveScene":return void Xe.notifyObservers(T.data);case"cameraModeChanged":return void He.notifyObservers(T.data);case"idleStateChanged":return void Ve.notifyObservers(T.data);case"sceneStart":return void $e.notifyObservers(T.data);case"playerExpression":return void Je.notifyObservers(T.data);case"videoEvent":var A=T.data,E=N.engine.disposableComponents[A.componentId];return E&&E.update(A),void Ye.notifyObservers(A);case"profileChanged":return void tn.notifyObservers(T.data);case"onPointerLock":return void Ze.notifyObservers(T.data);case"playerConnected":return void nn.notifyObservers(T.data);case"playerDisconnected":return void rn.notifyObservers(T.data);case"onRealmChanged":return void on.notifyObservers(T.data);case"playerClicked":return void sn.notifyObservers(T.data)}}))}var an=function(){function t(T){this.dcl=T,this.cachedComponents={}}return t.prototype.activate=function(T){var A=this;this.engine=T,T.eventManager.addListener(j,this,this.componentAdded),T.eventManager.addListener(B,this,this.componentRemoved),T.eventManager.addListener(Zt,this,this.disposableComponentCreated),T.eventManager.addListener(Yt,this,this.disposableComponentRemoved),T.eventManager.addListener(Kt,this,this.disposableComponentUpdated),T.eventManager.addListener(_t,this,this.parentChanged);var E=T.rootEntity.uuid;this.dcl.addEntity(E),this.dcl.onUpdate((function(E){T.update(E),A.presentEntities()})),this.dcl.onEvent((function(A){var E=A.data;switch(A.type){case"uuidEvent":T.eventManager.fireEvent(new Le(E.uuid,E.payload));break;case"raycastResponse":("HitFirst"===E.queryType||"HitAll"===E.queryType)&&T.eventManager.fireEvent(new Ue(E));break;case"actionButtonEvent":T.eventManager.fireEvent(new qe(E.payload))}}))},t.prototype.onAddEntity=function(T){if(T&&T.isAddedToEngine()){var A=T.uuid,E=T.getParent();for(var S in this.dcl.addEntity(A),E&&this.dcl.setParent(A,E.uuid),this.cachedComponents[A]={},T.components){var O=T.components[S],k=L(O);if(null!==k)if(U(O))this.dcl.attachEntityComponent(T.uuid,S,D(O));else{var B=JSON.stringify(O);this.dcl.updateEntityComponent(A,S,k,B),this.cachedComponents[A][S]=B}}}},t.prototype.onRemoveEntity=function(T){if(T.isAddedToEngine()){var A=T.uuid;this.dcl.removeEntity(A),delete this.cachedComponents[A]}},t.prototype.presentEntities=function(){for(var T in this.engine.entities){var A=this.engine.entities[T];for(var E in A.components){var S=L(B=A.components[E]);if(null!==S&&!U(B)){var O=this.getJsonIfDirty(A.uuid,E,B);O&&(this.dcl.updateEntityComponent(A.uuid,E,S,O),this.clearDirty(A.uuid,E,B,O))}}}for(var k in this.engine.disposableComponents){var B;(B=this.engine.disposableComponents[k])instanceof ee&&B.dirty&&(this.dcl.componentUpdated(k,JSON.stringify(B)),B.dirty=!1)}},t.prototype.componentAdded=function(T){if(T.entity.isAddedToEngine()){var A=T.entity.components[T.componentName];if(U(A))this.dcl.attachEntityComponent(T.entity.uuid,T.componentName,D(A));else if(null!==T.classId){var E=JSON.stringify(A);this.dcl.updateEntityComponent(T.entity.uuid,T.componentName,T.classId,E),this.cachedComponents[T.entity.uuid][T.componentName]=E}}},t.prototype.componentRemoved=function(T){T.entity.isAddedToEngine()&&(this.dcl.removeEntityComponent(T.entity.uuid,T.componentName),delete this.cachedComponents[T.entity.uuid][T.componentName])},t.prototype.disposableComponentCreated=function(T){this.dcl.componentCreated(T.componentId,T.componentName,T.classId)},t.prototype.disposableComponentRemoved=function(T){this.dcl.componentDisposed(T.componentId)},t.prototype.disposableComponentUpdated=function(T){this.dcl.componentUpdated(T.componentId,JSON.stringify(T.component))},t.prototype.parentChanged=function(T){this.dcl.setParent(T.entity.uuid,T.parent?T.parent.uuid:"0")},t.prototype.getJsonIfDirty=function(T,A,E){var S=JSON.stringify(E);return S!==this.cachedComponents[T][A]&&S},t.prototype.clearDirty=function(T,A,E,S){this.cachedComponents[T][A]=S},t}(),un="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},cn={},pn={};!function(T){var A,E;Object.defineProperty(T,"__esModule",{value:!0}),T.RAD2DEG=T.DEG2RAD=T.Epsilon=T.ToLinearSpace=T.ToGammaSpace=T.Space=T.Orientation=void 0,(A=T.Orientation||(T.Orientation={}))[A.CW=0]="CW",A[A.CCW=1]="CCW",(E=T.Space||(T.Space={}))[E.LOCAL=0]="LOCAL",E[E.WORLD=1]="WORLD",E[E.BONE=2]="BONE",T.ToGammaSpace=1/2.2,T.ToLinearSpace=2.2,T.Epsilon=1e-6,T.DEG2RAD=Math.PI/180,T.RAD2DEG=360/(2*Math.PI)}(pn);var ln={},dn={};Object.defineProperty(dn,"__esModule",{value:!0}),dn.buildArray=void 0,dn.buildArray=function(T,A){const E=[];for(let S=0;S<T;++S)E.push(A());return E};var hn={},yn={},fn={},mn={},gn={};Object.defineProperty(gn,"__esModule",{value:!0}),gn.Scalar=void 0;class Et{static WithinEpsilon(T,A,E=1401298e-51){const S=T-A;return-E<=S&&S<=E}static ToHex(T){const A=T.toString(16);return T<=15?("0"+A).toUpperCase():A.toUpperCase()}static Sign(T){const A=+T;return 0===A||isNaN(A)?A:A>0?1:-1}static Clamp(T,A=0,E=1){return Math.min(E,Math.max(A,T))}static Log2(T){return Math.log(T)*Math.LOG2E}static Repeat(T,A){return T-Math.floor(T/A)*A}static Normalize(T,A,E){return(T-A)/(E-A)}static Denormalize(T,A,E){return T*(E-A)+A}static DeltaAngle(T,A){let E=Et.Repeat(A-T,360);return E>180&&(E-=360),E}static PingPong(T,A){const E=Et.Repeat(T,2*A);return A-Math.abs(E-A)}static SmoothStep(T,A,E){let S=Et.Clamp(E);return S=-2*S*S*S+3*S*S,A*S+T*(1-S)}static MoveTowards(T,A,E){let S=0;return S=Math.abs(A-T)<=E?A:T+Et.Sign(A-T)*E,S}static MoveTowardsAngle(T,A,E){const S=Et.DeltaAngle(T,A);let O=0;return O=-E<S&&S<E?A:Et.MoveTowards(T,T+S,E),O}static Lerp(T,A,E){return T+(A-T)*E}static LerpAngle(T,A,E){let S=Et.Repeat(A-T,360);return S>180&&(S-=360),T+S*Et.Clamp(E)}static InverseLerp(T,A,E){let S=0;return S=T!==A?Et.Clamp((E-T)/(A-T)):0,S}static Hermite(T,A,E,S,O){const k=O*O,B=O*k;return T*(2*B-3*k+1)+E*(-2*B+3*k)+A*(B-2*k+O)+S*(B-k)}static RandomRange(T,A){return T===A?T:Math.random()*(A-T)+T}static RangeToPercent(T,A,E){return(T-A)/(E-A)}static PercentToRange(T,A,E){return(E-A)*T+A}static NormalizeRadians(T){return T-Et.TwoPi*Math.floor((T+Math.PI)/Et.TwoPi)}}gn.Scalar=Et,Et.TwoPi=2*Math.PI,Object.defineProperty(mn,"__esModule",{value:!0}),mn.Vector4=void 0;const vn=pn,wn=gn,_n=hn;class Mt{constructor(T,A,E,S){this.x=T,this.y=A,this.z=E,this.w=S}static Add(T,A){return new Mt(T.x,T.y,T.z,T.w).addInPlace(A)}static FromArray(T,A=0){return new Mt(T[A],T[A+1],T[A+2],T[A+3])}static FromArrayToRef(T,A,E){E.x=T[A],E.y=T[A+1],E.z=T[A+2],E.w=T[A+3]}static FromFloatArrayToRef(T,A,E){Mt.FromArrayToRef(T,A,E)}static FromFloatsToRef(T,A,E,S,O){O.x=T,O.y=A,O.z=E,O.w=S}static Zero(){return new Mt(0,0,0,0)}static One(){return new Mt(1,1,1,1)}static Normalize(T){const A=Mt.Zero();return Mt.NormalizeToRef(T,A),A}static NormalizeToRef(T,A){A.copyFrom(T),A.normalize()}static Minimize(T,A){const E=new Mt(T.x,T.y,T.z,T.w);return E.minimizeInPlace(A),E}static Maximize(T,A){const E=new Mt(T.x,T.y,T.z,T.w);return E.maximizeInPlace(A),E}static Distance(T,A){return Math.sqrt(Mt.DistanceSquared(T,A))}static DistanceSquared(T,A){const E=T.x-A.x,S=T.y-A.y,O=T.z-A.z,k=T.w-A.w;return E*E+S*S+O*O+k*k}static Center(T,A){const E=Mt.Add(T,A);return E.scaleInPlace(.5),E}static TransformNormal(T,A){const E=Mt.Zero();return Mt.TransformNormalToRef(T,A,E),E}static TransformNormalToRef(T,A,E){const S=A.m,O=T.x*S[0]+T.y*S[4]+T.z*S[8],k=T.x*S[1]+T.y*S[5]+T.z*S[9],B=T.x*S[2]+T.y*S[6]+T.z*S[10];E.x=O,E.y=k,E.z=B,E.w=T.w}static TransformNormalFromFloatsToRef(T,A,E,S,O,k){const B=O.m;k.x=T*B[0]+A*B[4]+E*B[8],k.y=T*B[1]+A*B[5]+E*B[9],k.z=T*B[2]+A*B[6]+E*B[10],k.w=S}toString(){return"{X: "+this.x+" Y:"+this.y+" Z:"+this.z+" W:"+this.w+"}"}getClassName(){return"Vector4"}getHashCode(){let T=this.x||0;return T=397*T^(this.y||0),T=397*T^(this.z||0),T=397*T^(this.w||0),T}asArray(){const T=new Array;return this.toArray(T,0),T}toArray(T,A=0){return T[A]=this.x,T[A+1]=this.y,T[A+2]=this.z,T[A+3]=this.w,this}addInPlace(T){return this.x+=T.x,this.y+=T.y,this.z+=T.z,this.w+=T.w,this}add(T){return new Mt(this.x+T.x,this.y+T.y,this.z+T.z,this.w+T.w)}addToRef(T,A){return A.x=this.x+T.x,A.y=this.y+T.y,A.z=this.z+T.z,A.w=this.w+T.w,this}subtractInPlace(T){return this.x-=T.x,this.y-=T.y,this.z-=T.z,this.w-=T.w,this}subtract(T){return new Mt(this.x-T.x,this.y-T.y,this.z-T.z,this.w-T.w)}subtractToRef(T,A){return A.x=this.x-T.x,A.y=this.y-T.y,A.z=this.z-T.z,A.w=this.w-T.w,this}subtractFromFloats(T,A,E,S){return new Mt(this.x-T,this.y-A,this.z-E,this.w-S)}subtractFromFloatsToRef(T,A,E,S,O){return O.x=this.x-T,O.y=this.y-A,O.z=this.z-E,O.w=this.w-S,this}negate(){return new Mt(-this.x,-this.y,-this.z,-this.w)}scaleInPlace(T){return this.x*=T,this.y*=T,this.z*=T,this.w*=T,this}scale(T){return new Mt(this.x*T,this.y*T,this.z*T,this.w*T)}scaleToRef(T,A){return A.x=this.x*T,A.y=this.y*T,A.z=this.z*T,A.w=this.w*T,this}scaleAndAddToRef(T,A){return A.x+=this.x*T,A.y+=this.y*T,A.z+=this.z*T,A.w+=this.w*T,this}equals(T){return T&&this.x===T.x&&this.y===T.y&&this.z===T.z&&this.w===T.w}equalsWithEpsilon(T,A=vn.Epsilon){return T&&wn.Scalar.WithinEpsilon(this.x,T.x,A)&&wn.Scalar.WithinEpsilon(this.y,T.y,A)&&wn.Scalar.WithinEpsilon(this.z,T.z,A)&&wn.Scalar.WithinEpsilon(this.w,T.w,A)}equalsToFloats(T,A,E,S){return this.x===T&&this.y===A&&this.z===E&&this.w===S}multiplyInPlace(T){return this.x*=T.x,this.y*=T.y,this.z*=T.z,this.w*=T.w,this}multiply(T){return new Mt(this.x*T.x,this.y*T.y,this.z*T.z,this.w*T.w)}multiplyToRef(T,A){return A.x=this.x*T.x,A.y=this.y*T.y,A.z=this.z*T.z,A.w=this.w*T.w,this}multiplyByFloats(T,A,E,S){return new Mt(this.x*T,this.y*A,this.z*E,this.w*S)}divide(T){return new Mt(this.x/T.x,this.y/T.y,this.z/T.z,this.w/T.w)}divideToRef(T,A){return A.x=this.x/T.x,A.y=this.y/T.y,A.z=this.z/T.z,A.w=this.w/T.w,this}divideInPlace(T){return this.divideToRef(T,this)}minimizeInPlace(T){return T.x<this.x&&(this.x=T.x),T.y<this.y&&(this.y=T.y),T.z<this.z&&(this.z=T.z),T.w<this.w&&(this.w=T.w),this}maximizeInPlace(T){return T.x>this.x&&(this.x=T.x),T.y>this.y&&(this.y=T.y),T.z>this.z&&(this.z=T.z),T.w>this.w&&(this.w=T.w),this}floor(){return new Mt(Math.floor(this.x),Math.floor(this.y),Math.floor(this.z),Math.floor(this.w))}fract(){return new Mt(this.x-Math.floor(this.x),this.y-Math.floor(this.y),this.z-Math.floor(this.z),this.w-Math.floor(this.w))}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}lengthSquared(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}normalize(){const T=this.length();return 0===T?this:this.scaleInPlace(1/T)}toVector3(){return new _n.Vector3(this.x,this.y,this.z)}clone(){return new Mt(this.x,this.y,this.z,this.w)}copyFrom(T){return this.x=T.x,this.y=T.y,this.z=T.z,this.w=T.w,this}copyFromFloats(T,A,E,S){return this.x=T,this.y=A,this.z=E,this.w=S,this}set(T,A,E,S){return this.copyFromFloats(T,A,E,S)}setAll(T){return this.x=this.y=this.z=this.w=T,this}}mn.Vector4=Mt,Object.defineProperty(fn,"__esModule",{value:!0}),fn.Matrix=void 0;const bn=hn,Tn=yn,xn=ln,An=mn;class Dt{constructor(){this._isIdentity=!1,this._isIdentityDirty=!0,this._isIdentity3x2=!0,this._isIdentity3x2Dirty=!0,this._m=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this._updateIdentityStatus(!1)}get m(){return this._m}static get IdentityReadOnly(){return Dt._identityReadOnly}static FromArray(T,A=0){const E=new Dt;return Dt.FromArrayToRef(T,A,E),E}static FromArrayToRef(T,A,E){for(let S=0;S<16;S++)E._m[S]=T[S+A];E._markAsUpdated()}static FromFloatArrayToRefScaled(T,A,E,S){for(let O=0;O<16;O++)S._m[O]=T[O+A]*E;S._markAsUpdated()}static FromValuesToRef(T,A,E,S,O,k,B,j,_t,Pt,Ft,Lt,Ut,Zt,Yt,Kt,ee){const le=ee._m;le[0]=T,le[1]=A,le[2]=E,le[3]=S,le[4]=O,le[5]=k,le[6]=B,le[7]=j,le[8]=_t,le[9]=Pt,le[10]=Ft,le[11]=Lt,le[12]=Ut,le[13]=Zt,le[14]=Yt,le[15]=Kt,ee._markAsUpdated()}static FromValues(T,A,E,S,O,k,B,j,_t,Pt,Ft,Lt,Ut,Zt,Yt,Kt){const ee=new Dt,le=ee._m;return le[0]=T,le[1]=A,le[2]=E,le[3]=S,le[4]=O,le[5]=k,le[6]=B,le[7]=j,le[8]=_t,le[9]=Pt,le[10]=Ft,le[11]=Lt,le[12]=Ut,le[13]=Zt,le[14]=Yt,le[15]=Kt,ee._markAsUpdated(),ee}static Compose(T,A,E){const S=new Dt;return Dt.ComposeToRef(T,A,E,S),S}static ComposeToRef(T,A,E,S){Dt.ScalingToRef(T.x,T.y,T.z,xn.MathTmp.Matrix[1]),A.toRotationMatrix(xn.MathTmp.Matrix[0]),xn.MathTmp.Matrix[1].multiplyToRef(xn.MathTmp.Matrix[0],S),S.setTranslation(E)}static Identity(){const T=Dt.FromValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return T._updateIdentityStatus(!0),T}static IdentityToRef(T){Dt.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,T),T._updateIdentityStatus(!0)}static Zero(){const T=Dt.FromValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);return T._updateIdentityStatus(!1),T}static RotationX(T){const A=new Dt;return Dt.RotationXToRef(T,A),A}static Invert(T){const A=new Dt;return T.invertToRef(A),A}static RotationXToRef(T,A){const E=Math.sin(T),S=Math.cos(T);Dt.FromValuesToRef(1,0,0,0,0,S,E,0,0,-E,S,0,0,0,0,1,A),A._updateIdentityStatus(1===S&&0===E)}static RotationY(T){const A=new Dt;return Dt.RotationYToRef(T,A),A}static RotationYToRef(T,A){const E=Math.sin(T),S=Math.cos(T);Dt.FromValuesToRef(S,0,-E,0,0,1,0,0,E,0,S,0,0,0,0,1,A),A._updateIdentityStatus(1===S&&0===E)}static RotationZ(T){const A=new Dt;return Dt.RotationZToRef(T,A),A}static RotationZToRef(T,A){const E=Math.sin(T),S=Math.cos(T);Dt.FromValuesToRef(S,E,0,0,-E,S,0,0,0,0,1,0,0,0,0,1,A),A._updateIdentityStatus(1===S&&0===E)}static RotationAxis(T,A){const E=new Dt;return Dt.RotationAxisToRef(T,A,E),E}static RotationAxisToRef(T,A,E){const S=Math.sin(-A),O=Math.cos(-A),k=1-O;T.normalize();const B=E._m;B[0]=T.x*T.x*k+O,B[1]=T.x*T.y*k-T.z*S,B[2]=T.x*T.z*k+T.y*S,B[3]=0,B[4]=T.y*T.x*k+T.z*S,B[5]=T.y*T.y*k+O,B[6]=T.y*T.z*k-T.x*S,B[7]=0,B[8]=T.z*T.x*k-T.y*S,B[9]=T.z*T.y*k+T.x*S,B[10]=T.z*T.z*k+O,B[11]=0,B[12]=0,B[13]=0,B[14]=0,B[15]=1,E._markAsUpdated()}static RotationYawPitchRoll(T,A,E){const S=new Dt;return Dt.RotationYawPitchRollToRef(T,A,E,S),S}static RotationYawPitchRollToRef(T,A,E,S){Tn.Quaternion.RotationYawPitchRollToRef(T,A,E,xn.MathTmp.Quaternion[0]),xn.MathTmp.Quaternion[0].toRotationMatrix(S)}static Scaling(T,A,E){const S=new Dt;return Dt.ScalingToRef(T,A,E,S),S}static ScalingToRef(T,A,E,S){Dt.FromValuesToRef(T,0,0,0,0,A,0,0,0,0,E,0,0,0,0,1,S),S._updateIdentityStatus(1===T&&1===A&&1===E)}static Translation(T,A,E){const S=new Dt;return Dt.TranslationToRef(T,A,E,S),S}static TranslationToRef(T,A,E,S){Dt.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,T,A,E,1,S),S._updateIdentityStatus(0===T&&0===A&&0===E)}static Lerp(T,A,E){const S=new Dt;return Dt.LerpToRef(T,A,E,S),S}static LerpToRef(T,A,E,S){for(let O=0;O<16;O++)S._m[O]=T._m[O]*(1-E)+A._m[O]*E;S._markAsUpdated()}static DecomposeLerp(T,A,E){const S=new Dt;return Dt.DecomposeLerpToRef(T,A,E,S),S}static DecomposeLerpToRef(T,A,E,S){const O=xn.MathTmp.Vector3[0],k=xn.MathTmp.Quaternion[0],B=xn.MathTmp.Vector3[1];T.decompose(O,k,B);const j=xn.MathTmp.Vector3[2],_t=xn.MathTmp.Quaternion[1],Pt=xn.MathTmp.Vector3[3];A.decompose(j,_t,Pt);const Ft=xn.MathTmp.Vector3[4];bn.Vector3.LerpToRef(O,j,E,Ft);const Lt=xn.MathTmp.Quaternion[2];Tn.Quaternion.SlerpToRef(k,_t,E,Lt);const Ut=xn.MathTmp.Vector3[5];bn.Vector3.LerpToRef(B,Pt,E,Ut),Dt.ComposeToRef(Ft,Lt,Ut,S)}static LookAtLH(T,A,E){const S=new Dt;return Dt.LookAtLHToRef(T,A,E,S),S}static LookAtLHToRef(T,A,E,S){const O=xn.MathTmp.Vector3[0],k=xn.MathTmp.Vector3[1],B=xn.MathTmp.Vector3[2];A.subtractToRef(T,B),B.normalize(),bn.Vector3.CrossToRef(E,B,O);const j=O.lengthSquared();0===j?O.x=1:O.normalizeFromLength(Math.sqrt(j)),bn.Vector3.CrossToRef(B,O,k),k.normalize();const _t=-bn.Vector3.Dot(O,T),Pt=-bn.Vector3.Dot(k,T),Ft=-bn.Vector3.Dot(B,T);Dt.FromValuesToRef(O.x,k.x,B.x,0,O.y,k.y,B.y,0,O.z,k.z,B.z,0,_t,Pt,Ft,1,S)}static LookAtRH(T,A,E){const S=new Dt;return Dt.LookAtRHToRef(T,A,E,S),S}static LookAtRHToRef(T,A,E,S){const O=xn.MathTmp.Vector3[0],k=xn.MathTmp.Vector3[1],B=xn.MathTmp.Vector3[2];T.subtractToRef(A,B),B.normalize(),bn.Vector3.CrossToRef(E,B,O);const j=O.lengthSquared();0===j?O.x=1:O.normalizeFromLength(Math.sqrt(j)),bn.Vector3.CrossToRef(B,O,k),k.normalize();const _t=-bn.Vector3.Dot(O,T),Pt=-bn.Vector3.Dot(k,T),Ft=-bn.Vector3.Dot(B,T);Dt.FromValuesToRef(O.x,k.x,B.x,0,O.y,k.y,B.y,0,O.z,k.z,B.z,0,_t,Pt,Ft,1,S)}static OrthoLH(T,A,E,S){const O=new Dt;return Dt.OrthoLHToRef(T,A,E,S,O),O}static OrthoLHToRef(T,A,E,S,O){const k=2/T,B=2/A,j=2/(S-E),_t=-(S+E)/(S-E);Dt.FromValuesToRef(k,0,0,0,0,B,0,0,0,0,j,0,0,0,_t,1,O),O._updateIdentityStatus(1===k&&1===B&&1===j&&0===_t)}static OrthoOffCenterLH(T,A,E,S,O,k){const B=new Dt;return Dt.OrthoOffCenterLHToRef(T,A,E,S,O,k,B),B}static OrthoOffCenterLHToRef(T,A,E,S,O,k,B){const j=2/(A-T),_t=2/(S-E),Pt=2/(k-O),Ft=-(k+O)/(k-O),Lt=(T+A)/(T-A),Ut=(S+E)/(E-S);Dt.FromValuesToRef(j,0,0,0,0,_t,0,0,0,0,Pt,0,Lt,Ut,Ft,1,B),B._markAsUpdated()}static OrthoOffCenterRH(T,A,E,S,O,k){const B=new Dt;return Dt.OrthoOffCenterRHToRef(T,A,E,S,O,k,B),B}static OrthoOffCenterRHToRef(T,A,E,S,O,k,B){Dt.OrthoOffCenterLHToRef(T,A,E,S,O,k,B),B._m[10]*=-1}static PerspectiveLH(T,A,E,S){const O=new Dt,k=2*E/T,B=2*E/A,j=(S+E)/(S-E),_t=-2*S*E/(S-E);return Dt.FromValuesToRef(k,0,0,0,0,B,0,0,0,0,j,1,0,0,_t,0,O),O._updateIdentityStatus(!1),O}static PerspectiveFovLH(T,A,E,S){const O=new Dt;return Dt.PerspectiveFovLHToRef(T,A,E,S,O),O}static PerspectiveFovLHToRef(T,A,E,S,O,k=!0){const B=E,j=S,_t=1/Math.tan(.5*T),Pt=k?_t/A:_t,Ft=k?_t:_t*A,Lt=(j+B)/(j-B),Ut=-2*j*B/(j-B);Dt.FromValuesToRef(Pt,0,0,0,0,Ft,0,0,0,0,Lt,1,0,0,Ut,0,O),O._updateIdentityStatus(!1)}static PerspectiveFovRH(T,A,E,S){const O=new Dt;return Dt.PerspectiveFovRHToRef(T,A,E,S,O),O}static PerspectiveFovRHToRef(T,A,E,S,O,k=!0){const B=E,j=S,_t=1/Math.tan(.5*T),Pt=k?_t/A:_t,Ft=k?_t:_t*A,Lt=-(j+B)/(j-B),Ut=-2*j*B/(j-B);Dt.FromValuesToRef(Pt,0,0,0,0,Ft,0,0,0,0,Lt,-1,0,0,Ut,0,O),O._updateIdentityStatus(!1)}static PerspectiveFovWebVRToRef(T,A,E,S,O=!1){const k=O?-1:1,B=Math.tan(T.upDegrees*Math.PI/180),j=Math.tan(T.downDegrees*Math.PI/180),_t=Math.tan(T.leftDegrees*Math.PI/180),Pt=Math.tan(T.rightDegrees*Math.PI/180),Ft=2/(_t+Pt),Lt=2/(B+j),Ut=S._m;Ut[0]=Ft,Ut[1]=Ut[2]=Ut[3]=Ut[4]=0,Ut[5]=Lt,Ut[6]=Ut[7]=0,Ut[8]=(_t-Pt)*Ft*.5,Ut[9]=-(B-j)*Lt*.5,Ut[10]=-E/(A-E),Ut[11]=1*k,Ut[12]=Ut[13]=Ut[15]=0,Ut[14]=-2*E*A/(E-A),S._markAsUpdated()}static GetAsMatrix2x2(T){return[T._m[0],T._m[1],T._m[4],T._m[5]]}static GetAsMatrix3x3(T){return[T._m[0],T._m[1],T._m[2],T._m[4],T._m[5],T._m[6],T._m[8],T._m[9],T._m[10]]}static Transpose(T){const A=new Dt;return Dt.TransposeToRef(T,A),A}static TransposeToRef(T,A){const E=A._m,S=T._m;E[0]=S[0],E[1]=S[4],E[2]=S[8],E[3]=S[12],E[4]=S[1],E[5]=S[5],E[6]=S[9],E[7]=S[13],E[8]=S[2],E[9]=S[6],E[10]=S[10],E[11]=S[14],E[12]=S[3],E[13]=S[7],E[14]=S[11],E[15]=S[15],A._updateIdentityStatus(T._isIdentity,T._isIdentityDirty)}static Reflection(T){const A=new Dt;return Dt.ReflectionToRef(T,A),A}static ReflectionToRef(T,A){T.normalize();const E=T.normal.x,S=T.normal.y,O=T.normal.z,k=-2*E,B=-2*S,j=-2*O;Dt.FromValuesToRef(k*E+1,B*E,j*E,0,k*S,B*S+1,j*S,0,k*O,B*O,j*O+1,0,k*T.d,B*T.d,j*T.d,1,A)}static FromXYZAxesToRef(T,A,E,S){Dt.FromValuesToRef(T.x,T.y,T.z,0,A.x,A.y,A.z,0,E.x,E.y,E.z,0,0,0,0,1,S)}static FromQuaternionToRef(T,A){const E=T.x*T.x,S=T.y*T.y,O=T.z*T.z,k=T.x*T.y,B=T.z*T.w,j=T.z*T.x,_t=T.y*T.w,Pt=T.y*T.z,Ft=T.x*T.w;A._m[0]=1-2*(S+O),A._m[1]=2*(k+B),A._m[2]=2*(j-_t),A._m[3]=0,A._m[4]=2*(k-B),A._m[5]=1-2*(O+E),A._m[6]=2*(Pt+Ft),A._m[7]=0,A._m[8]=2*(j+_t),A._m[9]=2*(Pt-Ft),A._m[10]=1-2*(S+E),A._m[11]=0,A._m[12]=0,A._m[13]=0,A._m[14]=0,A._m[15]=1,A._markAsUpdated()}_markAsUpdated(){this.updateFlag=Dt._updateFlagSeed++,this._isIdentity=!1,this._isIdentity3x2=!1,this._isIdentityDirty=!0,this._isIdentity3x2Dirty=!0}isIdentity(){if(this._isIdentityDirty){this._isIdentityDirty=!1;const T=this._m;this._isIdentity=1===T[0]&&0===T[1]&&0===T[2]&&0===T[3]&&0===T[4]&&1===T[5]&&0===T[6]&&0===T[7]&&0===T[8]&&0===T[9]&&1===T[10]&&0===T[11]&&0===T[12]&&0===T[13]&&0===T[14]&&1===T[15]}return this._isIdentity}isIdentityAs3x2(){return this._isIdentity3x2Dirty&&(this._isIdentity3x2Dirty=!1,1!==this._m[0]||1!==this._m[5]||1!==this._m[15]||0!==this._m[1]||0!==this._m[2]||0!==this._m[3]||0!==this._m[4]||0!==this._m[6]||0!==this._m[7]||0!==this._m[8]||0!==this._m[9]||0!==this._m[10]||0!==this._m[11]||0!==this._m[12]||0!==this._m[13]||0!==this._m[14]?this._isIdentity3x2=!1:this._isIdentity3x2=!0),this._isIdentity3x2}determinant(){if(!0===this._isIdentity)return 1;const T=this._m,A=T[0],E=T[1],S=T[2],O=T[3],k=T[4],B=T[5],j=T[6],_t=T[7],Pt=T[8],Ft=T[9],Lt=T[10],Ut=T[11],Zt=T[12],Yt=T[13],Kt=T[14],ee=T[15],le=Lt*ee-Kt*Ut,ve=Ft*ee-Yt*Ut,Ce=Ft*Kt-Yt*Lt,Se=Pt*ee-Zt*Ut,Re=Pt*Kt-Lt*Zt,Ie=Pt*Yt-Zt*Ft;return A*+(B*le-j*ve+_t*Ce)+E*-(k*le-j*Se+_t*Re)+S*+(k*ve-B*Se+_t*Ie)+O*-(k*Ce-B*Re+j*Ie)}toArray(){return this._m}asArray(){return this._m}invert(){return this.invertToRef(this),this}reset(){return Dt.FromValuesToRef(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,this),this._updateIdentityStatus(!1),this}add(T){const A=new Dt;return this.addToRef(T,A),A}addToRef(T,A){for(let E=0;E<16;E++)A._m[E]=this._m[E]+T._m[E];return A._markAsUpdated(),this}addToSelf(T){for(let A=0;A<16;A++)this._m[A]+=T._m[A];return this._markAsUpdated(),this}invertToRef(T){if(!0===this._isIdentity)return Dt.IdentityToRef(T),this;const A=this._m,E=A[0],S=A[1],O=A[2],k=A[3],B=A[4],j=A[5],_t=A[6],Pt=A[7],Ft=A[8],Lt=A[9],Ut=A[10],Zt=A[11],Yt=A[12],Kt=A[13],ee=A[14],le=A[15],ve=Ut*le-ee*Zt,Ce=Lt*le-Kt*Zt,Se=Lt*ee-Kt*Ut,Re=Ft*le-Yt*Zt,Ie=Ft*ee-Ut*Yt,Ne=Ft*Kt-Yt*Lt,Pe=+(j*ve-_t*Ce+Pt*Se),Fe=-(B*ve-_t*Re+Pt*Ie),Le=+(B*Ce-j*Re+Pt*Ne),Ue=-(B*Se-j*Ie+_t*Ne),qe=E*Pe+S*Fe+O*Le+k*Ue;if(0===qe)return T.copyFrom(this),this;const He=1/qe,Ve=_t*le-ee*Pt,Ge=j*le-Kt*Pt,We=j*ee-Kt*_t,Xe=B*le-Yt*Pt,Qe=B*ee-Yt*_t,$e=B*Kt-Yt*j,Je=_t*Zt-Ut*Pt,Ze=j*Zt-Lt*Pt,Ye=j*Ut-Lt*_t,tn=B*Zt-Ft*Pt,nn=B*Ut-Ft*_t,rn=B*Lt-Ft*j,on=-(S*ve-O*Ce+k*Se),sn=+(E*ve-O*Re+k*Ie),an=-(E*Ce-S*Re+k*Ne),un=+(E*Se-S*Ie+O*Ne),cn=+(S*Ve-O*Ge+k*We),pn=-(E*Ve-O*Xe+k*Qe),ln=+(E*Ge-S*Xe+k*$e),dn=-(E*We-S*Qe+O*$e),hn=-(S*Je-O*Ze+k*Ye),yn=+(E*Je-O*tn+k*nn),fn=-(E*Ze-S*tn+k*rn),mn=+(E*Ye-S*nn+O*rn);return Dt.FromValuesToRef(Pe*He,on*He,cn*He,hn*He,Fe*He,sn*He,pn*He,yn*He,Le*He,an*He,ln*He,fn*He,Ue*He,un*He,dn*He,mn*He,T),this}addAtIndex(T,A){return this._m[T]+=A,this._markAsUpdated(),this}multiplyAtIndex(T,A){return this._m[T]*=A,this._markAsUpdated(),this}setTranslationFromFloats(T,A,E){return this._m[12]=T,this._m[13]=A,this._m[14]=E,this._markAsUpdated(),this}setTranslation(T){return this.setTranslationFromFloats(T.x,T.y,T.z)}getTranslation(){return new bn.Vector3(this._m[12],this._m[13],this._m[14])}getTranslationToRef(T){return T.x=this._m[12],T.y=this._m[13],T.z=this._m[14],this}removeRotationAndScaling(){const T=this.m;return Dt.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,T[12],T[13],T[14],T[15],this),this._updateIdentityStatus(0===T[12]&&0===T[13]&&0===T[14]&&1===T[15]),this}multiply(T){const A=new Dt;return this.multiplyToRef(T,A),A}copyFrom(T){T.copyToArray(this._m);const A=T;return this._updateIdentityStatus(A._isIdentity,A._isIdentityDirty,A._isIdentity3x2,A._isIdentity3x2Dirty),this}copyToArray(T,A=0){for(let E=0;E<16;E++)T[A+E]=this._m[E];return this}multiplyToRef(T,A){return this._isIdentity?(A.copyFrom(T),this):T._isIdentity?(A.copyFrom(this),this):(this.multiplyToArray(T,A._m,0),A._markAsUpdated(),this)}multiplyToArray(T,A,E){const S=this._m,O=T.m,k=S[0],B=S[1],j=S[2],_t=S[3],Pt=S[4],Ft=S[5],Lt=S[6],Ut=S[7],Zt=S[8],Yt=S[9],Kt=S[10],ee=S[11],le=S[12],ve=S[13],Ce=S[14],Se=S[15],Re=O[0],Ie=O[1],Ne=O[2],Pe=O[3],Fe=O[4],Le=O[5],Ue=O[6],qe=O[7],He=O[8],Ve=O[9],Ge=O[10],We=O[11],Xe=O[12],Qe=O[13],$e=O[14],Je=O[15];return A[E]=k*Re+B*Fe+j*He+_t*Xe,A[E+1]=k*Ie+B*Le+j*Ve+_t*Qe,A[E+2]=k*Ne+B*Ue+j*Ge+_t*$e,A[E+3]=k*Pe+B*qe+j*We+_t*Je,A[E+4]=Pt*Re+Ft*Fe+Lt*He+Ut*Xe,A[E+5]=Pt*Ie+Ft*Le+Lt*Ve+Ut*Qe,A[E+6]=Pt*Ne+Ft*Ue+Lt*Ge+Ut*$e,A[E+7]=Pt*Pe+Ft*qe+Lt*We+Ut*Je,A[E+8]=Zt*Re+Yt*Fe+Kt*He+ee*Xe,A[E+9]=Zt*Ie+Yt*Le+Kt*Ve+ee*Qe,A[E+10]=Zt*Ne+Yt*Ue+Kt*Ge+ee*$e,A[E+11]=Zt*Pe+Yt*qe+Kt*We+ee*Je,A[E+12]=le*Re+ve*Fe+Ce*He+Se*Xe,A[E+13]=le*Ie+ve*Le+Ce*Ve+Se*Qe,A[E+14]=le*Ne+ve*Ue+Ce*Ge+Se*$e,A[E+15]=le*Pe+ve*qe+Ce*We+Se*Je,this}equals(T){const A=T;if(!A)return!1;if((this._isIdentity||A._isIdentity)&&!this._isIdentityDirty&&!A._isIdentityDirty)return this._isIdentity&&A._isIdentity;const E=this.m,S=A.m;return E[0]===S[0]&&E[1]===S[1]&&E[2]===S[2]&&E[3]===S[3]&&E[4]===S[4]&&E[5]===S[5]&&E[6]===S[6]&&E[7]===S[7]&&E[8]===S[8]&&E[9]===S[9]&&E[10]===S[10]&&E[11]===S[11]&&E[12]===S[12]&&E[13]===S[13]&&E[14]===S[14]&&E[15]===S[15]}clone(){const T=new Dt;return T.copyFrom(this),T}getClassName(){return"Matrix"}getHashCode(){let T=this._m[0]||0;for(let A=1;A<16;A++)T=397*T^(this._m[A]||0);return T}decompose(T,A,E){if(this._isIdentity)return E&&E.setAll(0),T&&T.setAll(1),A&&A.copyFromFloats(0,0,0,1),!0;const S=this._m;E&&E.copyFromFloats(S[12],S[13],S[14]);const O=T||xn.MathTmp.Vector3[0];if(O.x=Math.sqrt(S[0]*S[0]+S[1]*S[1]+S[2]*S[2]),O.y=Math.sqrt(S[4]*S[4]+S[5]*S[5]+S[6]*S[6]),O.z=Math.sqrt(S[8]*S[8]+S[9]*S[9]+S[10]*S[10]),this.determinant()<=0&&(O.y*=-1),0===O.x||0===O.y||0===O.z)return A&&A.copyFromFloats(0,0,0,1),!1;if(A){const T=1/O.x,E=1/O.y,k=1/O.z;Dt.FromValuesToRef(S[0]*T,S[1]*T,S[2]*T,0,S[4]*E,S[5]*E,S[6]*E,0,S[8]*k,S[9]*k,S[10]*k,0,0,0,0,1,xn.MathTmp.Matrix[0]),Tn.Quaternion.FromRotationMatrixToRef(xn.MathTmp.Matrix[0],A)}return!0}getRow(T){if(T<0||T>3)return null;const A=4*T;return new An.Vector4(this._m[A+0],this._m[A+1],this._m[A+2],this._m[A+3])}setRow(T,A){return this.setRowFromFloats(T,A.x,A.y,A.z,A.w)}transpose(){return Dt.Transpose(this)}transposeToRef(T){return Dt.TransposeToRef(this,T),this}setRowFromFloats(T,A,E,S,O){if(T<0||T>3)return this;const k=4*T;return this._m[k+0]=A,this._m[k+1]=E,this._m[k+2]=S,this._m[k+3]=O,this._markAsUpdated(),this}scale(T){const A=new Dt;return this.scaleToRef(T,A),A}scaleToRef(T,A){for(let E=0;E<16;E++)A._m[E]=this._m[E]*T;return A._markAsUpdated(),this}scaleAndAddToRef(T,A){for(let E=0;E<16;E++)A._m[E]+=this._m[E]*T;return A._markAsUpdated(),this}toNormalMatrix(T){const A=xn.MathTmp.Matrix[0];this.invertToRef(A),A.transposeToRef(T);const E=T._m;Dt.FromValuesToRef(E[0],E[1],E[2],0,E[4],E[5],E[6],0,E[8],E[9],E[10],0,0,0,0,1,T)}getRotationMatrix(){const T=new Dt;return this.getRotationMatrixToRef(T),T}getRotationMatrixToRef(T){const A=xn.MathTmp.Vector3[0];if(!this.decompose(A))return Dt.IdentityToRef(T),this;const E=this._m,S=1/A.x,O=1/A.y,k=1/A.z;return Dt.FromValuesToRef(E[0]*S,E[1]*S,E[2]*S,0,E[4]*O,E[5]*O,E[6]*O,0,E[8]*k,E[9]*k,E[10]*k,0,0,0,0,1,T),this}toggleModelMatrixHandInPlace(){const T=this._m;T[2]*=-1,T[6]*=-1,T[8]*=-1,T[9]*=-1,T[14]*=-1,this._markAsUpdated()}toggleProjectionMatrixHandInPlace(){const T=this._m;T[8]*=-1,T[9]*=-1,T[10]*=-1,T[11]*=-1,this._markAsUpdated()}_updateIdentityStatus(T,A=!1,E=!1,S=!0){this.updateFlag=Dt._updateFlagSeed++,this._isIdentity=T,this._isIdentity3x2=T||E,this._isIdentityDirty=!this._isIdentity&&A,this._isIdentity3x2Dirty=!this._isIdentity3x2&&S}}fn.Matrix=Dt,Dt._updateFlagSeed=0,Dt._identityReadOnly=Dt.Identity(),Object.defineProperty(yn,"__esModule",{value:!0}),yn.Quaternion=void 0;const Cn=fn,En=hn,Sn=ln,Rn=pn,Mn=gn;class jt{constructor(T=0,A=0,E=0,S=1){this.x=T,this.y=A,this.z=E,this.w=S}static FromRotationMatrix(T){const A=new jt;return jt.FromRotationMatrixToRef(T,A),A}static FromRotationMatrixToRef(T,A){const E=T.m,S=E[0],O=E[4],k=E[8],B=E[1],j=E[5],_t=E[9],Pt=E[2],Ft=E[6],Lt=E[10],Ut=S+j+Lt;let Zt;Ut>0?(Zt=.5/Math.sqrt(Ut+1),A.w=.25/Zt,A.x=(Ft-_t)*Zt,A.y=(k-Pt)*Zt,A.z=(B-O)*Zt):S>j&&S>Lt?(Zt=2*Math.sqrt(1+S-j-Lt),A.w=(Ft-_t)/Zt,A.x=.25*Zt,A.y=(O+B)/Zt,A.z=(k+Pt)/Zt):j>Lt?(Zt=2*Math.sqrt(1+j-S-Lt),A.w=(k-Pt)/Zt,A.x=(O+B)/Zt,A.y=.25*Zt,A.z=(_t+Ft)/Zt):(Zt=2*Math.sqrt(1+Lt-S-j),A.w=(B-O)/Zt,A.x=(k+Pt)/Zt,A.y=(_t+Ft)/Zt,A.z=.25*Zt)}static Dot(T,A){return T.x*A.x+T.y*A.y+T.z*A.z+T.w*A.w}static AreClose(T,A){return jt.Dot(T,A)>=0}static Zero(){return new jt(0,0,0,0)}static Inverse(T){return new jt(-T.x,-T.y,-T.z,T.w)}static IsIdentity(T){return T&&0===T.x&&0===T.y&&0===T.z&&1===T.w}static RotationAxis(T,A){const E=A*Rn.DEG2RAD;return jt.RotationAxisToRef(T,E,new jt)}static RotationAxisToRef(T,A,E){const S=A*Rn.DEG2RAD,O=Math.sin(S/2);return T.normalize(),E.w=Math.cos(S/2),E.x=T.x*O,E.y=T.y*O,E.z=T.z*O,E}static FromArray(T,A=0){return new jt(T[A],T[A+1],T[A+2],T[A+3])}static FromEulerAnglesRef(T,A,E,S){return jt.RotationYawPitchRollToRef(A*Rn.DEG2RAD,T*Rn.DEG2RAD,E*Rn.DEG2RAD,S)}static RotationYawPitchRoll(T,A,E){const S=new jt;return jt.RotationYawPitchRollToRef(T,A,E,S),S}static RotationYawPitchRollToRef(T,A,E,S){const O=.5*A,k=.5*T,B=.5*E,j=Math.cos(O),_t=Math.cos(k),Pt=Math.cos(B),Ft=Math.sin(O),Lt=Math.sin(k),Ut=Math.sin(B);S.x=_t*Ft*Pt+Lt*j*Ut,S.y=Lt*j*Pt-_t*Ft*Ut,S.z=_t*j*Ut-Lt*Ft*Pt,S.w=_t*j*Pt+Lt*Ft*Ut}static RotationAlphaBetaGamma(T,A,E){const S=new jt;return jt.RotationAlphaBetaGammaToRef(T,A,E,S),S}static RotationAlphaBetaGammaToRef(T,A,E,S){const O=.5*(E+T),k=.5*(E-T),B=.5*A;S.x=Math.cos(k)*Math.sin(B),S.y=Math.sin(k)*Math.sin(B),S.z=Math.sin(O)*Math.cos(B),S.w=Math.cos(O)*Math.cos(B)}static RotationQuaternionFromAxis(T,A,E){const S=new jt(0,0,0,0);return jt.RotationQuaternionFromAxisToRef(T,A,E,S),S}static RotationQuaternionFromAxisToRef(T,A,E,S){const O=Sn.MathTmp.Matrix[0];Cn.Matrix.FromXYZAxesToRef(T.normalize(),A.normalize(),E.normalize(),O),jt.FromRotationMatrixToRef(O,S)}static Slerp(T,A,E){const S=jt.Identity;return jt.SlerpToRef(T,A,E,S),S}static SlerpToRef(T,A,E,S){let O,k,B=T.x*A.x+T.y*A.y+T.z*A.z+T.w*A.w,j=!1;if(B<0&&(j=!0,B=-B),B>.999999)k=1-E,O=j?-E:E;else{const T=Math.acos(B),A=1/Math.sin(T);k=Math.sin((1-E)*T)*A,O=j?-Math.sin(E*T)*A:Math.sin(E*T)*A}S.x=k*T.x+O*A.x,S.y=k*T.y+O*A.y,S.z=k*T.z+O*A.z,S.w=k*T.w+O*A.w}static Hermite(T,A,E,S,O){const k=O*O,B=O*k,j=2*B-3*k+1,_t=-2*B+3*k,Pt=B-2*k+O,Ft=B-k,Lt=T.x*j+E.x*_t+A.x*Pt+S.x*Ft,Ut=T.y*j+E.y*_t+A.y*Pt+S.y*Ft,Zt=T.z*j+E.z*_t+A.z*Pt+S.z*Ft,Yt=T.w*j+E.w*_t+A.w*Pt+S.w*Ft;return new jt(Lt,Ut,Zt,Yt)}static get Identity(){return new jt(0,0,0,1)}static Angle(T,A){const E=jt.Dot(T,A);return 2*Math.acos(Math.min(Math.abs(E),1))*Rn.RAD2DEG}static Euler(T,A,E){return jt.RotationYawPitchRoll(A*Rn.DEG2RAD,T*Rn.DEG2RAD,E*Rn.DEG2RAD)}static LookRotation(T,A=Sn.MathTmp.staticUp){const E=En.Vector3.Normalize(T),S=En.Vector3.Normalize(En.Vector3.Cross(A,E)),O=En.Vector3.Cross(E,S),k=S.x,B=S.y,j=S.z,_t=O.x,Pt=O.y,Ft=O.z,Lt=E.x,Ut=E.y,Zt=E.z,Yt=k+Pt+Zt,Kt=new jt;if(Yt>0){let T=Math.sqrt(Yt+1);return Kt.w=.5*T,T=.5/T,Kt.x=(Ft-Ut)*T,Kt.y=(Lt-j)*T,Kt.z=(B-_t)*T,Kt}if(k>=Pt&&k>=Zt){const T=Math.sqrt(1+k-Pt-Zt),A=.5/T;return Kt.x=.5*T,Kt.y=(B+_t)*A,Kt.z=(j+Lt)*A,Kt.w=(Ft-Ut)*A,Kt}if(Pt>Zt){const T=Math.sqrt(1+Pt-k-Zt),A=.5/T;return Kt.x=(_t+B)*A,Kt.y=.5*T,Kt.z=(Ut+Ft)*A,Kt.w=(Lt-j)*A,Kt}const ee=Math.sqrt(1+Zt-k-Pt),le=.5/ee;return Kt.x=(Lt+j)*le,Kt.y=(Ut+Ft)*le,Kt.z=.5*ee,Kt.w=(B-_t)*le,Kt}static RotateTowards(T,A,E){const S=jt.Angle(T,A);if(0===S)return A;const O=Math.min(1,E/S);return jt.Slerp(T,A,O)}static FromToRotation(T,A,E=Sn.MathTmp.staticUp){const S=T.normalize(),O=A.normalize(),k=En.Vector3.Cross(S,O),B=Math.sqrt(S.lengthSquared()*O.lengthSquared())+En.Vector3.Dot(S,O);return k.lengthSquared()<1e-4?Math.abs(B)<1e-4?new jt(E.x,E.y,E.z,0).normalized:jt.Identity:new jt(k.x,k.y,k.z,B).normalized}get normalized(){return this.normalize()}setFromToRotation(T,A,E=Sn.MathTmp.staticUp){const S=jt.FromToRotation(T,A,E);this.x=S.x,this.y=S.y,this.z=S.z,this.w=S.w}set eulerAngles(T){this.setEuler(T.x,T.y,T.z)}get eulerAngles(){const T=new En.Vector3,A=this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w,E=this.x*this.w-this.y*this.z;return E>.4995*A?(T.x=Math.PI/2,T.y=2*Math.atan2(this.y,this.x),T.z=0):E<-.4995*A?(T.x=-Math.PI/2,T.y=-2*Math.atan2(this.y,this.x),T.z=0):(T.x=Math.asin(2*(this.w*this.x-this.y*this.z)),T.y=Math.atan2(2*this.w*this.y+2*this.z*this.x,1-2*(this.x*this.x+this.y*this.y)),T.z=Math.atan2(2*this.w*this.z+2*this.x*this.y,1-2*(this.z*this.z+this.x*this.x))),T.x*=Rn.RAD2DEG,T.y*=Rn.RAD2DEG,T.z*=Rn.RAD2DEG,T.x=Mn.Scalar.Repeat(T.x,360),T.y=Mn.Scalar.Repeat(T.y,360),T.z=Mn.Scalar.Repeat(T.z,360),T}toString(){return`(${this.x}, ${this.y}, ${this.z}, ${this.w})`}get length(){return Math.sqrt(this.lengthSquared)}get lengthSquared(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}getClassName(){return"Quaternion"}getHashCode(){let T=this.x||0;return T=397*T^(this.y||0),T=397*T^(this.z||0),T=397*T^(this.w||0),T}asArray(){return[this.x,this.y,this.z,this.w]}equals(T){return T&&this.x===T.x&&this.y===T.y&&this.z===T.z&&this.w===T.w}clone(){return new jt(this.x,this.y,this.z,this.w)}copyFrom(T){return this.x=T.x,this.y=T.y,this.z=T.z,this.w=T.w,this}copyFromFloats(T,A,E,S){return this.x=T,this.y=A,this.z=E,this.w=S,this}set(T,A,E,S){return this.copyFromFloats(T,A,E,S)}setEuler(T,A,E){return jt.RotationYawPitchRollToRef(A*Rn.DEG2RAD,T*Rn.DEG2RAD,E*Rn.DEG2RAD,this),this}add(T){return new jt(this.x+T.x,this.y+T.y,this.z+T.z,this.w+T.w)}addInPlace(T){return this.x+=T.x,this.y+=T.y,this.z+=T.z,this.w+=T.w,this}subtract(T){return new jt(this.x-T.x,this.y-T.y,this.z-T.z,this.w-T.w)}scale(T){return new jt(this.x*T,this.y*T,this.z*T,this.w*T)}scaleToRef(T,A){return A.x=this.x*T,A.y=this.y*T,A.z=this.z*T,A.w=this.w*T,this}scaleInPlace(T){return this.x*=T,this.y*=T,this.z*=T,this.w*=T,this}scaleAndAddToRef(T,A){return A.x+=this.x*T,A.y+=this.y*T,A.z+=this.z*T,A.w+=this.w*T,this}multiply(T){const A=new jt(0,0,0,1);return this.multiplyToRef(T,A),A}multiplyToRef(T,A){const E=this.x*T.w+this.y*T.z-this.z*T.y+this.w*T.x,S=-this.x*T.z+this.y*T.w+this.z*T.x+this.w*T.y,O=this.x*T.y-this.y*T.x+this.z*T.w+this.w*T.z,k=-this.x*T.x-this.y*T.y-this.z*T.z+this.w*T.w;return A.copyFromFloats(E,S,O,k),this}multiplyInPlace(T){return this.multiplyToRef(T,this),this}conjugateToRef(T){return T.copyFromFloats(-this.x,-this.y,-this.z,this.w),this}conjugateInPlace(){return this.x*=-1,this.y*=-1,this.z*=-1,this}conjugate(){return new jt(-this.x,-this.y,-this.z,this.w)}normalize(){const T=1/this.length;return this.x*=T,this.y*=T,this.z*=T,this.w*=T,this}angleAxis(T,A){if(0===A.lengthSquared())return jt.Identity;const E=jt.Identity;let S=T*Rn.DEG2RAD;S*=.5;let O=A.normalize();return O=A.scaleInPlace(Math.sin(S)),E.x=O.x,E.y=O.y,E.z=O.z,E.w=Math.cos(S),E.normalize()}toRotationMatrix(T){return Cn.Matrix.FromQuaternionToRef(this,T),this}fromRotationMatrix(T){return jt.FromRotationMatrixToRef(T,this),this}}yn.Quaternion=jt,Object.defineProperty(hn,"__esModule",{value:!0}),hn.Vector3=void 0;const In=ln,Nn=pn,On=yn,Pn=gn;class Xt{constructor(T=0,A=0,E=0){this.x=T,this.y=A,this.z=E}get isNonUniform(){const T=Math.abs(this.x),A=Math.abs(this.y);if(T!==A)return!0;const E=Math.abs(this.z);return T!==E||A!==E}static Add(T,A){return new Xt(T.x,T.y,T.z).addInPlace(A)}static GetClipFactor(T,A,E,S){const O=Xt.Dot(T,E)-S;return O/(O-(Xt.Dot(A,E)-S))}static GetAngleBetweenVectors(T,A,E){const S=T.normalizeToRef(In.MathTmp.Vector3[1]),O=A.normalizeToRef(In.MathTmp.Vector3[2]),k=Xt.Dot(S,O),B=In.MathTmp.Vector3[3];return Xt.CrossToRef(S,O,B),Xt.Dot(B,E)>0?Math.acos(k):-Math.acos(k)}static FromArray(T,A=0){return new Xt(T[A],T[A+1],T[A+2])}static FromFloatArray(T,A){return Xt.FromArray(T,A)}static FromArrayToRef(T,A,E){E.x=T[A],E.y=T[A+1],E.z=T[A+2]}static FromFloatArrayToRef(T,A,E){return Xt.FromArrayToRef(T,A,E)}static FromFloatsToRef(T,A,E,S){S.copyFromFloats(T,A,E)}static Zero(){return new Xt(0,0,0)}static One(){return new Xt(1,1,1)}static Up(){return new Xt(0,1,0)}static Down(){return new Xt(0,-1,0)}static Forward(){return new Xt(0,0,1)}static Backward(){return new Xt(0,0,-1)}static Right(){return new Xt(1,0,0)}static Left(){return new Xt(-1,0,0)}static TransformCoordinates(T,A){const E=Xt.Zero();return Xt.TransformCoordinatesToRef(T,A,E),E}static TransformCoordinatesToRef(T,A,E){return Xt.TransformCoordinatesFromFloatsToRef(T.x,T.y,T.z,A,E)}static TransformCoordinatesFromFloatsToRef(T,A,E,S,O){const k=S.m,B=T*k[0]+A*k[4]+E*k[8]+k[12],j=T*k[1]+A*k[5]+E*k[9]+k[13],_t=T*k[2]+A*k[6]+E*k[10]+k[14],Pt=1/(T*k[3]+A*k[7]+E*k[11]+k[15]);O.x=B*Pt,O.y=j*Pt,O.z=_t*Pt}static TransformNormal(T,A){const E=Xt.Zero();return Xt.TransformNormalToRef(T,A,E),E}static TransformNormalToRef(T,A,E){this.TransformNormalFromFloatsToRef(T.x,T.y,T.z,A,E)}static TransformNormalFromFloatsToRef(T,A,E,S,O){const k=S.m;O.x=T*k[0]+A*k[4]+E*k[8],O.y=T*k[1]+A*k[5]+E*k[9],O.z=T*k[2]+A*k[6]+E*k[10]}static CatmullRom(T,A,E,S,O){const k=O*O,B=O*k,j=.5*(2*A.x+(-T.x+E.x)*O+(2*T.x-5*A.x+4*E.x-S.x)*k+(-T.x+3*A.x-3*E.x+S.x)*B),_t=.5*(2*A.y+(-T.y+E.y)*O+(2*T.y-5*A.y+4*E.y-S.y)*k+(-T.y+3*A.y-3*E.y+S.y)*B),Pt=.5*(2*A.z+(-T.z+E.z)*O+(2*T.z-5*A.z+4*E.z-S.z)*k+(-T.z+3*A.z-3*E.z+S.z)*B);return new Xt(j,_t,Pt)}static Clamp(T,A,E){const S=new Xt;return Xt.ClampToRef(T,A,E,S),S}static ClampToRef(T,A,E,S){let O=T.x;O=O>E.x?E.x:O,O=O<A.x?A.x:O;let k=T.y;k=k>E.y?E.y:k,k=k<A.y?A.y:k;let B=T.z;B=B>E.z?E.z:B,B=B<A.z?A.z:B,S.copyFromFloats(O,k,B)}static Hermite(T,A,E,S,O){const k=O*O,B=O*k,j=2*B-3*k+1,_t=-2*B+3*k,Pt=B-2*k+O,Ft=B-k,Lt=T.x*j+E.x*_t+A.x*Pt+S.x*Ft,Ut=T.y*j+E.y*_t+A.y*Pt+S.y*Ft,Zt=T.z*j+E.z*_t+A.z*Pt+S.z*Ft;return new Xt(Lt,Ut,Zt)}static Lerp(T,A,E){const S=new Xt(0,0,0);return Xt.LerpToRef(T,A,E,S),S}static LerpToRef(T,A,E,S){S.x=T.x+(A.x-T.x)*E,S.y=T.y+(A.y-T.y)*E,S.z=T.z+(A.z-T.z)*E}static Dot(T,A){return T.x*A.x+T.y*A.y+T.z*A.z}static Cross(T,A){const E=Xt.Zero();return Xt.CrossToRef(T,A,E),E}static CrossToRef(T,A,E){const S=T.y*A.z-T.z*A.y,O=T.z*A.x-T.x*A.z,k=T.x*A.y-T.y*A.x;E.copyFromFloats(S,O,k)}static Normalize(T){const A=Xt.Zero();return Xt.NormalizeToRef(T,A),A}static NormalizeToRef(T,A){T.normalizeToRef(A)}static Minimize(T,A){const E=new Xt(T.x,T.y,T.z);return E.minimizeInPlace(A),E}static Maximize(T,A){const E=new Xt(T.x,T.y,T.z);return E.maximizeInPlace(A),E}static Distance(T,A){return Math.sqrt(Xt.DistanceSquared(T,A))}static DistanceSquared(T,A){const E=T.x-A.x,S=T.y-A.y,O=T.z-A.z;return E*E+S*S+O*O}static Center(T,A){const E=Xt.Add(T,A);return E.scaleInPlace(.5),E}static RotationFromAxis(T,A,E){const S=Xt.Zero();return Xt.RotationFromAxisToRef(T,A,E,S),S}static RotationFromAxisToRef(T,A,E,S){const O=In.MathTmp.Quaternion[0];On.Quaternion.RotationQuaternionFromAxisToRef(T,A,E,O),S.copyFrom(O.eulerAngles)}toString(){return`(${this.x}, ${this.y}, ${this.z})`}getClassName(){return"Vector3"}getHashCode(){let T=this.x||0;return T=397*T^(this.y||0),T=397*T^(this.z||0),T}asArray(){const T=[];return this.toArray(T,0),T}toArray(T,A=0){return T[A]=this.x,T[A+1]=this.y,T[A+2]=this.z,this}toQuaternion(){return On.Quaternion.Identity.setEuler(this.y,this.x,this.z)}addInPlace(T){return this.addInPlaceFromFloats(T.x,T.y,T.z)}addInPlaceFromFloats(T,A,E){return this.x+=T,this.y+=A,this.z+=E,this}add(T){return new Xt(this.x+T.x,this.y+T.y,this.z+T.z)}addToRef(T,A){return A.copyFromFloats(this.x+T.x,this.y+T.y,this.z+T.z)}subtractInPlace(T){return this.x-=T.x,this.y-=T.y,this.z-=T.z,this}subtract(T){return new Xt(this.x-T.x,this.y-T.y,this.z-T.z)}subtractToRef(T,A){return this.subtractFromFloatsToRef(T.x,T.y,T.z,A)}subtractFromFloats(T,A,E){return new Xt(this.x-T,this.y-A,this.z-E)}subtractFromFloatsToRef(T,A,E,S){return S.copyFromFloats(this.x-T,this.y-A,this.z-E)}applyMatrix4(T){this.applyMatrix4ToRef(T,this)}applyMatrix4ToRef(T,A){const{x:E,y:S,z:O}=this,{m:k}=T,B=1/(k[3]*E+k[7]*S+k[11]*O+k[15]);return A.x=(k[0]*E+k[4]*S+k[8]*O+k[12])*B,A.y=(k[1]*E+k[5]*S+k[9]*O+k[13])*B,A.z=(k[2]*E+k[6]*S+k[10]*O+k[14])*B,A}rotate(T){return this.rotateToRef(T,this)}rotateToRef(T,A){const{x:E,y:S,z:O}=this,{x:k,y:B,z:j,w:_t}=T,Pt=_t*E+B*O-j*S,Ft=_t*S+j*E-k*O,Lt=_t*O+k*S-B*E,Ut=-k*E-B*S-j*O;return A.x=Pt*_t+Ut*-k+Ft*-j-Lt*-B,A.y=Ft*_t+Ut*-B+Lt*-k-Pt*-j,A.z=Lt*_t+Ut*-j+Pt*-B-Ft*-k,A}negate(){return new Xt(-this.x,-this.y,-this.z)}scaleInPlace(T){return this.x*=T,this.y*=T,this.z*=T,this}scale(T){return new Xt(this.x*T,this.y*T,this.z*T)}scaleToRef(T,A){return A.copyFromFloats(this.x*T,this.y*T,this.z*T)}scaleAndAddToRef(T,A){return A.addInPlaceFromFloats(this.x*T,this.y*T,this.z*T)}equals(T){return T&&this.x===T.x&&this.y===T.y&&this.z===T.z}equalsWithEpsilon(T,A=Nn.Epsilon){return T&&Pn.Scalar.WithinEpsilon(this.x,T.x,A)&&Pn.Scalar.WithinEpsilon(this.y,T.y,A)&&Pn.Scalar.WithinEpsilon(this.z,T.z,A)}equalsToFloats(T,A,E){return this.x===T&&this.y===A&&this.z===E}multiplyInPlace(T){return this.x*=T.x,this.y*=T.y,this.z*=T.z,this}multiply(T){return this.multiplyByFloats(T.x,T.y,T.z)}multiplyToRef(T,A){return A.copyFromFloats(this.x*T.x,this.y*T.y,this.z*T.z)}multiplyByFloats(T,A,E){return new Xt(this.x*T,this.y*A,this.z*E)}divide(T){return new Xt(this.x/T.x,this.y/T.y,this.z/T.z)}divideToRef(T,A){return A.copyFromFloats(this.x/T.x,this.y/T.y,this.z/T.z)}divideInPlace(T){return this.divideToRef(T,this)}minimizeInPlace(T){return this.minimizeInPlaceFromFloats(T.x,T.y,T.z)}maximizeInPlace(T){return this.maximizeInPlaceFromFloats(T.x,T.y,T.z)}minimizeInPlaceFromFloats(T,A,E){return T<this.x&&(this.x=T),A<this.y&&(this.y=A),E<this.z&&(this.z=E),this}maximizeInPlaceFromFloats(T,A,E){return T>this.x&&(this.x=T),A>this.y&&(this.y=A),E>this.z&&(this.z=E),this}floor(){return new Xt(Math.floor(this.x),Math.floor(this.y),Math.floor(this.z))}fract(){return new Xt(this.x-Math.floor(this.x),this.y-Math.floor(this.y),this.z-Math.floor(this.z))}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}lengthSquared(){return this.x*this.x+this.y*this.y+this.z*this.z}normalize(){return this.normalizeFromLength(this.length())}normalizeFromLength(T){return 0===T||1===T?this:this.scaleInPlace(1/T)}normalizeToNew(){const T=new Xt(0,0,0);return this.normalizeToRef(T),T}normalizeToRef(T){const A=this.length();return 0===A||1===A?T.copyFromFloats(this.x,this.y,this.z):this.scaleToRef(1/A,T)}clone(){return new Xt(this.x,this.y,this.z)}copyFrom(T){return this.copyFromFloats(T.x,T.y,T.z)}copyFromFloats(T,A,E){return this.x=T,this.y=A,this.z=E,this}set(T,A,E){return this.copyFromFloats(T,A,E)}setAll(T){return this.x=this.y=this.z=T,this}}hn.Vector3=Xt,Object.defineProperty(ln,"__esModule",{value:!0}),ln.MathTmp=void 0;const Fn=dn,kn=hn,zn=yn,Dn=fn;ln.MathTmp={Vector3:(0,Fn.buildArray)(6,kn.Vector3.Zero),Matrix:(0,Fn.buildArray)(2,Dn.Matrix.Identity),Quaternion:(0,Fn.buildArray)(3,zn.Quaternion.Zero),staticUp:kn.Vector3.Up(),tmpMatrix:Dn.Matrix.Zero()};var Bn={};Object.defineProperty(Bn,"__esModule",{value:!0}),Bn.Angle=void 0;class te{constructor(T){this._radians=T,this._radians<0&&(this._radians+=2*Math.PI)}static BetweenTwoPoints(T,A){const E=A.subtract(T),S=Math.atan2(E.y,E.x);return new te(S)}static FromRadians(T){return new te(T)}static FromDegrees(T){return new te(T*Math.PI/180)}degrees(){return 180*this._radians/Math.PI}radians(){return this._radians}}Bn.Angle=te;var Ln={},Un={};Object.defineProperty(Un,"__esModule",{value:!0}),Un.Vector2=void 0;const qn=pn,Hn=gn;class re{constructor(T=0,A=0){this.x=T,this.y=A}static Zero(){return new re(0,0)}static One(){return new re(1,1)}static Add(T,A){return new re(T.x,T.y).addInPlace(A)}static FromArray(T,A=0){return new re(T[A],T[A+1])}static FromArrayToRef(T,A,E){E.x=T[A],E.y=T[A+1]}static CatmullRom(T,A,E,S,O){const k=O*O,B=O*k,j=.5*(2*A.x+(-T.x+E.x)*O+(2*T.x-5*A.x+4*E.x-S.x)*k+(-T.x+3*A.x-3*E.x+S.x)*B),_t=.5*(2*A.y+(-T.y+E.y)*O+(2*T.y-5*A.y+4*E.y-S.y)*k+(-T.y+3*A.y-3*E.y+S.y)*B);return new re(j,_t)}static Clamp(T,A,E){let S=T.x;S=S>E.x?E.x:S,S=S<A.x?A.x:S;let O=T.y;return O=O>E.y?E.y:O,O=O<A.y?A.y:O,new re(S,O)}static Hermite(T,A,E,S,O){const k=O*O,B=O*k,j=2*B-3*k+1,_t=-2*B+3*k,Pt=B-2*k+O,Ft=B-k,Lt=T.x*j+E.x*_t+A.x*Pt+S.x*Ft,Ut=T.y*j+E.y*_t+A.y*Pt+S.y*Ft;return new re(Lt,Ut)}static Lerp(T,A,E){const S=T.x+(A.x-T.x)*E,O=T.y+(A.y-T.y)*E;return new re(S,O)}static Dot(T,A){return T.x*A.x+T.y*A.y}static Normalize(T){const A=new re(T.x,T.y);return A.normalize(),A}static Minimize(T,A){const E=T.x<A.x?T.x:A.x,S=T.y<A.y?T.y:A.y;return new re(E,S)}static Maximize(T,A){const E=T.x>A.x?T.x:A.x,S=T.y>A.y?T.y:A.y;return new re(E,S)}static Transform(T,A){const E=re.Zero();return re.TransformToRef(T,A,E),E}static TransformToRef(T,A,E){const S=A.m,O=T.x*S[0]+T.y*S[4]+S[12],k=T.x*S[1]+T.y*S[5]+S[13];E.x=O,E.y=k}static PointInTriangle(T,A,E,S){const O=.5*(-E.y*S.x+A.y*(-E.x+S.x)+A.x*(E.y-S.y)+E.x*S.y),k=O<0?-1:1,B=(A.y*S.x-A.x*S.y+(S.y-A.y)*T.x+(A.x-S.x)*T.y)*k,j=(A.x*E.y-A.y*E.x+(A.y-E.y)*T.x+(E.x-A.x)*T.y)*k;return B>0&&j>0&&B+j<2*O*k}static Distance(T,A){return Math.sqrt(re.DistanceSquared(T,A))}static DistanceSquared(T,A){const E=T.x-A.x,S=T.y-A.y;return E*E+S*S}static Center(T,A){const E=re.Add(T,A);return E.scaleInPlace(.5),E}static DistanceOfPointFromSegment(T,A,E){const S=re.DistanceSquared(A,E);if(0===S)return re.Distance(T,A);const O=E.subtract(A),k=Math.max(0,Math.min(1,re.Dot(T.subtract(A),O)/S)),B=A.add(O.multiplyByFloats(k,k));return re.Distance(T,B)}toString(){return"{X: "+this.x+" Y:"+this.y+"}"}getClassName(){return"Vector2"}getHashCode(){let T=this.x||0;return T=397*T^(this.y||0),T}toArray(T,A=0){return T[A]=this.x,T[A+1]=this.y,this}asArray(){const T=new Array;return this.toArray(T,0),T}copyFrom(T){return this.x=T.x,this.y=T.y,this}copyFromFloats(T,A){return this.x=T,this.y=A,this}set(T,A){return this.copyFromFloats(T,A)}add(T){return new re(this.x+T.x,this.y+T.y)}addToRef(T,A){return A.x=this.x+T.x,A.y=this.y+T.y,this}addInPlace(T){return this.x+=T.x,this.y+=T.y,this}addVector3(T){return new re(this.x+T.x,this.y+T.y)}subtract(T){return new re(this.x-T.x,this.y-T.y)}subtractToRef(T,A){return A.x=this.x-T.x,A.y=this.y-T.y,this}subtractInPlace(T){return this.x-=T.x,this.y-=T.y,this}multiplyInPlace(T){return this.x*=T.x,this.y*=T.y,this}multiply(T){return new re(this.x*T.x,this.y*T.y)}multiplyToRef(T,A){return A.x=this.x*T.x,A.y=this.y*T.y,this}multiplyByFloats(T,A){return new re(this.x*T,this.y*A)}divide(T){return new re(this.x/T.x,this.y/T.y)}divideToRef(T,A){return A.x=this.x/T.x,A.y=this.y/T.y,this}divideInPlace(T){return this.divideToRef(T,this)}negate(){return new re(-this.x,-this.y)}scaleInPlace(T){return this.x*=T,this.y*=T,this}scale(T){const A=new re(0,0);return this.scaleToRef(T,A),A}scaleToRef(T,A){return A.x=this.x*T,A.y=this.y*T,this}scaleAndAddToRef(T,A){return A.x+=this.x*T,A.y+=this.y*T,this}equals(T){return T&&this.x===T.x&&this.y===T.y}equalsWithEpsilon(T,A=qn.Epsilon){return T&&Hn.Scalar.WithinEpsilon(this.x,T.x,A)&&Hn.Scalar.WithinEpsilon(this.y,T.y,A)}floor(){return new re(Math.floor(this.x),Math.floor(this.y))}fract(){return new re(this.x-Math.floor(this.x),this.y-Math.floor(this.y))}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}lengthSquared(){return this.x*this.x+this.y*this.y}normalize(){const T=this.length();if(0===T)return this;const A=1/T;return this.x*=A,this.y*=A,this}clone(){return new re(this.x,this.y)}}Un.Vector2=re,Object.defineProperty(Ln,"__esModule",{value:!0}),Ln.Arc2=void 0;const jn=Bn,Vn=Un,Gn=pn;Ln.Arc2=class{constructor(T,A,E){this.startPoint=T,this.midPoint=A,this.endPoint=E;const S=Math.pow(A.x,2)+Math.pow(A.y,2),O=(Math.pow(T.x,2)+Math.pow(T.y,2)-S)/2,k=(S-Math.pow(E.x,2)-Math.pow(E.y,2))/2,B=(T.x-A.x)*(A.y-E.y)-(A.x-E.x)*(T.y-A.y);this.centerPoint=new Vn.Vector2((O*(A.y-E.y)-k*(T.y-A.y))/B,((T.x-A.x)*k-(A.x-E.x)*O)/B),this.radius=this.centerPoint.subtract(this.startPoint).length(),this.startAngle=jn.Angle.BetweenTwoPoints(this.centerPoint,this.startPoint);const j=this.startAngle.degrees();let _t=jn.Angle.BetweenTwoPoints(this.centerPoint,this.midPoint).degrees(),Pt=jn.Angle.BetweenTwoPoints(this.centerPoint,this.endPoint).degrees();_t-j>180&&(_t-=360),_t-j<-180&&(_t+=360),Pt-_t>180&&(Pt-=360),Pt-_t<-180&&(Pt+=360),this.orientation=_t-j<0?Gn.Orientation.CW:Gn.Orientation.CCW,this.angle=jn.Angle.FromDegrees(this.orientation===Gn.Orientation.CW?j-Pt:Pt-j)}};var Wn={};Object.defineProperty(Wn,"__esModule",{value:!0}),Wn.Axis=void 0;const Xn=hn;class pe{}Wn.Axis=pe,pe.X=new Xn.Vector3(1,0,0),pe.Y=new Xn.Vector3(0,1,0),pe.Z=new Xn.Vector3(0,0,1);var Qn={};Object.defineProperty(Qn,"__esModule",{value:!0}),Qn.BezierCurve=void 0,Qn.BezierCurve=class{static Interpolate(T,A,E,S,O){const k=1-3*S+3*A,B=3*S-6*A,j=3*A;let _t=T;for(let A=0;A<5;A++){const A=_t*_t;_t-=1/(3*k*A+2*B*_t+j)*(k*(A*_t)+B*A+j*_t-T),_t=Math.min(1,Math.max(0,_t))}return 3*Math.pow(1-_t,2)*_t*E+3*(1-_t)*Math.pow(_t,2)*O+Math.pow(_t,3)}};var $n={},Jn={};Object.defineProperty(Jn,"__esModule",{value:!0}),Jn.Color4=void 0;const Zn=gn,Yn=pn;class ge{constructor(T=0,A=0,E=0,S=1){this.r=T,this.g=A,this.b=E,this.a=S}static FromHexString(T){if("#"!==T.substring(0,1)||9!==T.length)return new ge(0,0,0,0);const A=parseInt(T.substring(1,3),16),E=parseInt(T.substring(3,5),16),S=parseInt(T.substring(5,7),16),O=parseInt(T.substring(7,9),16);return ge.FromInts(A,E,S,O)}static Lerp(T,A,E){const S=new ge(0,0,0,0);return ge.LerpToRef(T,A,E,S),S}static LerpToRef(T,A,E,S){S.r=T.r+(A.r-T.r)*E,S.g=T.g+(A.g-T.g)*E,S.b=T.b+(A.b-T.b)*E,S.a=T.a+(A.a-T.a)*E}static Red(){return new ge(1,0,0,1)}static Green(){return new ge(0,1,0,1)}static Blue(){return new ge(0,0,1,1)}static Black(){return new ge(0,0,0,1)}static White(){return new ge(1,1,1,1)}static Purple(){return new ge(.5,0,.5,1)}static Magenta(){return new ge(1,0,1,1)}static Yellow(){return new ge(1,1,0,1)}static Gray(){return new ge(.5,.5,.5,1)}static Teal(){return new ge(0,1,1,1)}static Clear(){return new ge(0,0,0,0)}static FromColor3(T,A=1){return new ge(T.r,T.g,T.b,A)}static FromArray(T,A=0){return new ge(T[A],T[A+1],T[A+2],T[A+3])}static FromInts(T,A,E,S){return new ge(T/255,A/255,E/255,S/255)}static CheckColors4(T,A){if(T.length===3*A){const A=[];for(let E=0;E<T.length;E+=3){const S=E/3*4;A[S]=T[E],A[S+1]=T[E+1],A[S+2]=T[E+2],A[S+3]=1}return A}return T}addInPlace(T){return this.r+=T.r,this.g+=T.g,this.b+=T.b,this.a+=T.a,this}asArray(){const T=new Array;return this.toArray(T,0),T}toArray(T,A=0){return T[A]=this.r,T[A+1]=this.g,T[A+2]=this.b,T[A+3]=this.a,this}add(T){return new ge(this.r+T.r,this.g+T.g,this.b+T.b,this.a+T.a)}subtract(T){return new ge(this.r-T.r,this.g-T.g,this.b-T.b,this.a-T.a)}subtractToRef(T,A){return A.r=this.r-T.r,A.g=this.g-T.g,A.b=this.b-T.b,A.a=this.a-T.a,this}scale(T){return new ge(this.r*T,this.g*T,this.b*T,this.a*T)}scaleToRef(T,A){return A.r=this.r*T,A.g=this.g*T,A.b=this.b*T,A.a=this.a*T,this}scaleAndAddToRef(T,A){return A.r+=this.r*T,A.g+=this.g*T,A.b+=this.b*T,A.a+=this.a*T,this}clampToRef(T=0,A=1,E){return E.r=Zn.Scalar.Clamp(this.r,T,A),E.g=Zn.Scalar.Clamp(this.g,T,A),E.b=Zn.Scalar.Clamp(this.b,T,A),E.a=Zn.Scalar.Clamp(this.a,T,A),this}multiply(T){return new ge(this.r*T.r,this.g*T.g,this.b*T.b,this.a*T.a)}multiplyToRef(T,A){return A.r=this.r*T.r,A.g=this.g*T.g,A.b=this.b*T.b,A.a=this.a*T.a,A}toString(){return"{R: "+this.r+" G:"+this.g+" B:"+this.b+" A:"+this.a+"}"}getClassName(){return"Color4"}getHashCode(){let T=this.r||0;return T=397*T^(this.g||0),T=397*T^(this.b||0),T=397*T^(this.a||0),T}clone(){return new ge(this.r,this.g,this.b,this.a)}copyFrom(T){return this.r=T.r,this.g=T.g,this.b=T.b,this.a=T.a,this}copyFromFloats(T,A,E,S){return this.r=T,this.g=A,this.b=E,this.a=S,this}set(T,A,E,S){return this.copyFromFloats(T,A,E,S)}toHexString(){const T=255*this.r|0,A=255*this.g|0,E=255*this.b|0,S=255*this.a|0;return"#"+Zn.Scalar.ToHex(T)+Zn.Scalar.ToHex(A)+Zn.Scalar.ToHex(E)+Zn.Scalar.ToHex(S)}toLinearSpace(){const T=new ge;return this.toLinearSpaceToRef(T),T}toLinearSpaceToRef(T){return T.r=Math.pow(this.r,Yn.ToLinearSpace),T.g=Math.pow(this.g,Yn.ToLinearSpace),T.b=Math.pow(this.b,Yn.ToLinearSpace),T.a=this.a,this}toGammaSpace(){const T=new ge;return this.toGammaSpaceToRef(T),T}toGammaSpaceToRef(T){return T.r=Math.pow(this.r,Yn.ToGammaSpace),T.g=Math.pow(this.g,Yn.ToGammaSpace),T.b=Math.pow(this.b,Yn.ToGammaSpace),T.a=this.a,this}}Jn.Color4=ge,Object.defineProperty($n,"__esModule",{value:!0}),$n.Color3=void 0;const Kn=pn,ti=Jn,ei=gn;class xe{constructor(T=0,A=0,E=0){this.r=T,this.g=A,this.b=E}static FromHexString(T){if("#"!==T.substring(0,1)||7!==T.length)return new xe(0,0,0);const A=parseInt(T.substring(1,3),16),E=parseInt(T.substring(3,5),16),S=parseInt(T.substring(5,7),16);return xe.FromInts(A,E,S)}static FromArray(T,A=0){return new xe(T[A],T[A+1],T[A+2])}static FromInts(T,A,E){return new xe(T/255,A/255,E/255)}static Lerp(T,A,E){const S=new xe(0,0,0);return xe.LerpToRef(T,A,E,S),S}static LerpToRef(T,A,E,S){S.r=T.r+(A.r-T.r)*E,S.g=T.g+(A.g-T.g)*E,S.b=T.b+(A.b-T.b)*E}static Red(){return new xe(1,0,0)}static Green(){return new xe(0,1,0)}static Blue(){return new xe(0,0,1)}static Black(){return new xe(0,0,0)}static White(){return new xe(1,1,1)}static Purple(){return new xe(.5,0,.5)}static Magenta(){return new xe(1,0,1)}static Yellow(){return new xe(1,1,0)}static Gray(){return new xe(.5,.5,.5)}static Teal(){return new xe(0,1,1)}static Random(){return new xe(Math.random(),Math.random(),Math.random())}toString(){return"{R: "+this.r+" G:"+this.g+" B:"+this.b+"}"}getClassName(){return"Color3"}getHashCode(){let T=this.r||0;return T=397*T^(this.g||0),T=397*T^(this.b||0),T}toArray(T,A=0){return T[A]=this.r,T[A+1]=this.g,T[A+2]=this.b,this}toColor4(T=1){return new ti.Color4(this.r,this.g,this.b,T)}asArray(){const T=new Array;return this.toArray(T,0),T}toLuminance(){return.3*this.r+.59*this.g+.11*this.b}multiply(T){return new xe(this.r*T.r,this.g*T.g,this.b*T.b)}multiplyToRef(T,A){return A.r=this.r*T.r,A.g=this.g*T.g,A.b=this.b*T.b,this}equals(T){return T&&this.r===T.r&&this.g===T.g&&this.b===T.b}equalsFloats(T,A,E){return this.r===T&&this.g===A&&this.b===E}scale(T){return new xe(this.r*T,this.g*T,this.b*T)}scaleToRef(T,A){return A.r=this.r*T,A.g=this.g*T,A.b=this.b*T,this}scaleAndAddToRef(T,A){return A.r+=this.r*T,A.g+=this.g*T,A.b+=this.b*T,this}clampToRef(T=0,A=1,E){return E.r=ei.Scalar.Clamp(this.r,T,A),E.g=ei.Scalar.Clamp(this.g,T,A),E.b=ei.Scalar.Clamp(this.b,T,A),this}add(T){return new xe(this.r+T.r,this.g+T.g,this.b+T.b)}addToRef(T,A){return A.r=this.r+T.r,A.g=this.g+T.g,A.b=this.b+T.b,this}subtract(T){return new xe(this.r-T.r,this.g-T.g,this.b-T.b)}subtractToRef(T,A){return A.r=this.r-T.r,A.g=this.g-T.g,A.b=this.b-T.b,this}clone(){return new xe(this.r,this.g,this.b)}copyFrom(T){return this.r=T.r,this.g=T.g,this.b=T.b,this}copyFromFloats(T,A,E){return this.r=T,this.g=A,this.b=E,this}set(T,A,E){return this.copyFromFloats(T,A,E)}toHexString(){const T=255*this.r|0,A=255*this.g|0,E=255*this.b|0;return"#"+ei.Scalar.ToHex(T)+ei.Scalar.ToHex(A)+ei.Scalar.ToHex(E)}toLinearSpace(){const T=new xe;return this.toLinearSpaceToRef(T),T}toLinearSpaceToRef(T){return T.r=Math.pow(this.r,Kn.ToLinearSpace),T.g=Math.pow(this.g,Kn.ToLinearSpace),T.b=Math.pow(this.b,Kn.ToLinearSpace),this}toGammaSpace(){const T=new xe;return this.toGammaSpaceToRef(T),T}toGammaSpaceToRef(T){return T.r=Math.pow(this.r,Kn.ToGammaSpace),T.g=Math.pow(this.g,Kn.ToGammaSpace),T.b=Math.pow(this.b,Kn.ToGammaSpace),this}toJSON(){return{r:this.r,g:this.g,b:this.b}}}$n.Color3=xe;var ni={};Object.defineProperty(ni,"__esModule",{value:!0}),ni.Curve3=void 0;const ii=hn;class Ae{constructor(T){this._length=0,this._points=T,this._length=this._computeLength(T)}static CreateQuadraticBezier(T,A,E,S){S=S>2?S:3;const O=new Array,r=(T,A,E,S)=>(1-T)*(1-T)*A+2*T*(1-T)*E+T*T*S;for(let k=0;k<=S;k++)O.push(new ii.Vector3(r(k/S,T.x,A.x,E.x),r(k/S,T.y,A.y,E.y),r(k/S,T.z,A.z,E.z)));return new Ae(O)}static CreateCubicBezier(T,A,E,S,O){O=O>3?O:4;const k=new Array,s=(T,A,E,S,O)=>(1-T)*(1-T)*(1-T)*A+3*T*(1-T)*(1-T)*E+3*T*T*(1-T)*S+T*T*T*O;for(let B=0;B<=O;B++)k.push(new ii.Vector3(s(B/O,T.x,A.x,E.x,S.x),s(B/O,T.y,A.y,E.y,S.y),s(B/O,T.z,A.z,E.z,S.z)));return new Ae(k)}static CreateHermiteSpline(T,A,E,S,O){const k=new Array,B=1/O;for(let j=0;j<=O;j++)k.push(ii.Vector3.Hermite(T,A,E,S,j*B));return new Ae(k)}static CreateCatmullRomSpline(T,A,E){const S=new Array,O=1/A;let k=0;if(E){const E=T.length;for(let B=0;B<E;B++){k=0;for(let j=0;j<A;j++)S.push(ii.Vector3.CatmullRom(T[B%E],T[(B+1)%E],T[(B+2)%E],T[(B+3)%E],k)),k+=O}S.push(S[0])}else{const E=new Array;E.push(T[0].clone()),Array.prototype.push.apply(E,T),E.push(T[T.length-1].clone());let B=0;for(B=0;B<E.length-3;B++){k=0;for(let T=0;T<A;T++)S.push(ii.Vector3.CatmullRom(E[B],E[B+1],E[B+2],E[B+3],k)),k+=O}B--,S.push(ii.Vector3.CatmullRom(E[B],E[B+1],E[B+2],E[B+3],k))}return new Ae(S)}getPoints(){return this._points}length(){return this._length}continue(T){const A=this._points[this._points.length-1],E=this._points.slice(),S=T.getPoints();for(let T=1;T<S.length;T++)E.push(S[T].subtract(S[0]).add(A));return new Ae(E)}_computeLength(T){let A=0;for(let E=1;E<T.length;E++)A+=T[E].subtract(T[E-1]).length();return A}}ni.Curve3=Ae;var ri={},oi={};Object.defineProperty(oi,"__esModule",{value:!0}),oi.Plane=void 0;const si=hn,ai=fn,ui=ln;class ze{constructor(T,A,E,S){this.normal=new si.Vector3(T,A,E),this.d=S}static FromArray(T){return new ze(T[0],T[1],T[2],T[3])}static FromPoints(T,A,E){const S=new ze(0,0,0,0);return S.copyFromPoints(T,A,E),S}static FromPositionAndNormal(T,A){const E=new ze(0,0,0,0);return A.normalize(),E.normal=A,E.d=-(A.x*T.x+A.y*T.y+A.z*T.z),E}static SignedDistanceToPlaneFromPositionAndNormal(T,A,E){const S=-(A.x*T.x+A.y*T.y+A.z*T.z);return si.Vector3.Dot(E,A)+S}asArray(){return[this.normal.x,this.normal.y,this.normal.z,this.d]}clone(){return new ze(this.normal.x,this.normal.y,this.normal.z,this.d)}getClassName(){return"Plane"}getHashCode(){let T=this.normal.getHashCode();return T=397*T^(this.d||0),T}normalize(){const T=Math.sqrt(this.normal.x*this.normal.x+this.normal.y*this.normal.y+this.normal.z*this.normal.z);let A=0;return 0!==T&&(A=1/T),this.normal.x*=A,this.normal.y*=A,this.normal.z*=A,this.d*=A,this}transform(T){const A=ui.MathTmp.Matrix[0];ai.Matrix.TransposeToRef(T,A);const E=A.m,S=this.normal.x,O=this.normal.y,k=this.normal.z,B=this.d,j=S*E[0]+O*E[1]+k*E[2]+B*E[3],_t=S*E[4]+O*E[5]+k*E[6]+B*E[7],Pt=S*E[8]+O*E[9]+k*E[10]+B*E[11],Ft=S*E[12]+O*E[13]+k*E[14]+B*E[15];return new ze(j,_t,Pt,Ft)}dotCoordinate(T){return this.normal.x*T.x+this.normal.y*T.y+this.normal.z*T.z+this.d}copyFromPoints(T,A,E){const S=A.x-T.x,O=A.y-T.y,k=A.z-T.z,B=E.x-T.x,j=E.y-T.y,_t=E.z-T.z,Pt=O*_t-k*j,Ft=k*B-S*_t,Lt=S*j-O*B,Ut=Math.sqrt(Pt*Pt+Ft*Ft+Lt*Lt);let Zt;return Zt=0!==Ut?1/Ut:0,this.normal.x=Pt*Zt,this.normal.y=Ft*Zt,this.normal.z=Lt*Zt,this.d=-(this.normal.x*T.x+this.normal.y*T.y+this.normal.z*T.z),this}isFrontFacingTo(T,A){return si.Vector3.Dot(this.normal,T)<=A}signedDistanceTo(T){return si.Vector3.Dot(T,this.normal)+this.d}}oi.Plane=ze,Object.defineProperty(ri,"__esModule",{value:!0}),ri.Frustum=void 0;const ci=oi;class Me{static GetPlanes(T){const A=[];for(let T=0;T<6;T++)A.push(new ci.Plane(0,0,0,0));return Me.GetPlanesToRef(T,A),A}static GetNearPlaneToRef(T,A){const E=T.m;A.normal.x=E[3]+E[2],A.normal.y=E[7]+E[6],A.normal.z=E[11]+E[10],A.d=E[15]+E[14],A.normalize()}static GetFarPlaneToRef(T,A){const E=T.m;A.normal.x=E[3]-E[2],A.normal.y=E[7]-E[6],A.normal.z=E[11]-E[10],A.d=E[15]-E[14],A.normalize()}static GetLeftPlaneToRef(T,A){const E=T.m;A.normal.x=E[3]+E[0],A.normal.y=E[7]+E[4],A.normal.z=E[11]+E[8],A.d=E[15]+E[12],A.normalize()}static GetRightPlaneToRef(T,A){const E=T.m;A.normal.x=E[3]-E[0],A.normal.y=E[7]-E[4],A.normal.z=E[11]-E[8],A.d=E[15]-E[12],A.normalize()}static GetTopPlaneToRef(T,A){const E=T.m;A.normal.x=E[3]-E[1],A.normal.y=E[7]-E[5],A.normal.z=E[11]-E[9],A.d=E[15]-E[13],A.normalize()}static GetBottomPlaneToRef(T,A){const E=T.m;A.normal.x=E[3]+E[1],A.normal.y=E[7]+E[5],A.normal.z=E[11]+E[9],A.d=E[15]+E[13],A.normalize()}static GetPlanesToRef(T,A){Me.GetNearPlaneToRef(T,A[0]),Me.GetFarPlaneToRef(T,A[1]),Me.GetLeftPlaneToRef(T,A[2]),Me.GetRightPlaneToRef(T,A[3]),Me.GetTopPlaneToRef(T,A[4]),Me.GetBottomPlaneToRef(T,A[5])}}ri.Frustum=Me;var pi={};Object.defineProperty(pi,"__esModule",{value:!0}),pi.Path2=void 0;const li=Un,di=Ln,hi=pn;class De{constructor(T,A){this.closed=!1,this._points=new Array,this._length=0,this._points.push(new li.Vector2(T,A))}static StartingAt(T,A){return new De(T,A)}addLineTo(T,A){if(this.closed)return this;const E=new li.Vector2(T,A),S=this._points[this._points.length-1];return this._points.push(E),this._length+=E.subtract(S).length(),this}addArcTo(T,A,E,S,O=36){if(this.closed)return this;const k=this._points[this._points.length-1],B=new li.Vector2(T,A),j=new li.Vector2(E,S),_t=new di.Arc2(k,B,j);let Pt=_t.angle.radians()/O;_t.orientation===hi.Orientation.CW&&(Pt*=-1);let Ft=_t.startAngle.radians()+Pt;for(let T=0;T<O;T++){const T=Math.cos(Ft)*_t.radius+_t.centerPoint.x,A=Math.sin(Ft)*_t.radius+_t.centerPoint.y;this.addLineTo(T,A),Ft+=Pt}return this}close(){return this.closed=!0,this}length(){let T=this._length;if(!this.closed){const A=this._points[this._points.length-1];T+=this._points[0].subtract(A).length()}return T}getPoints(){return this._points}getPointAtLengthPosition(T){if(T<0||T>1)return li.Vector2.Zero();const A=T*this.length();let E=0;for(let T=0;T<this._points.length;T++){const S=(T+1)%this._points.length,O=this._points[T],k=this._points[S].subtract(O),B=k.length()+E;if(A>=E&&A<=B){const T=k.normalize(),S=A-E;return new li.Vector2(O.x+T.x*S,O.y+T.y*S)}E=B}return li.Vector2.Zero()}}pi.Path2=De;var yi={};Object.defineProperty(yi,"__esModule",{value:!0}),yi.Path3D=void 0;const fi=hn,mi=pn,gi=gn;yi.Path3D=class{constructor(T,A=null,E){this.path=T,this._curve=new Array,this._distances=new Array,this._tangents=new Array,this._normals=new Array,this._binormals=new Array;for(let A=0;A<T.length;A++)this._curve[A]=T[A].clone();this._raw=E||!1,this._compute(A)}getCurve(){return this._curve}getTangents(){return this._tangents}getNormals(){return this._normals}getBinormals(){return this._binormals}getDistances(){return this._distances}update(T,A=null){for(let A=0;A<T.length;A++)this._curve[A].x=T[A].x,this._curve[A].y=T[A].y,this._curve[A].z=T[A].z;return this._compute(A),this}_compute(T){const A=this._curve.length;this._tangents[0]=this._getFirstNonNullVector(0),this._raw||this._tangents[0].normalize(),this._tangents[A-1]=this._curve[A-1].subtract(this._curve[A-2]),this._raw||this._tangents[A-1].normalize();const E=this._tangents[0],S=this._normalVector(this._curve[0],E,T);let O,k,B,j;this._normals[0]=S,this._raw||this._normals[0].normalize(),this._binormals[0]=fi.Vector3.Cross(E,this._normals[0]),this._raw||this._binormals[0].normalize(),this._distances[0]=0;for(let T=1;T<A;T++)O=this._getLastNonNullVector(T),T<A-1&&(k=this._getFirstNonNullVector(T),this._tangents[T]=O.add(k),this._tangents[T].normalize()),this._distances[T]=this._distances[T-1]+O.length(),B=this._tangents[T],j=this._binormals[T-1],this._normals[T]=fi.Vector3.Cross(j,B),this._raw||this._normals[T].normalize(),this._binormals[T]=fi.Vector3.Cross(B,this._normals[T]),this._raw||this._binormals[T].normalize()}_getFirstNonNullVector(T){let A=1,E=this._curve[T+A].subtract(this._curve[T]);for(;0===E.length()&&T+A+1<this._curve.length;)A++,E=this._curve[T+A].subtract(this._curve[T]);return E}_getLastNonNullVector(T){let A=1,E=this._curve[T].subtract(this._curve[T-A]);for(;0===E.length()&&T>A+1;)A++,E=this._curve[T].subtract(this._curve[T-A]);return E}_normalVector(T,A,E){let S,O=A.length();if(0===O&&(O=1),null==E){let T;T=gi.Scalar.WithinEpsilon(Math.abs(A.y)/O,1,mi.Epsilon)?gi.Scalar.WithinEpsilon(Math.abs(A.x)/O,1,mi.Epsilon)?gi.Scalar.WithinEpsilon(Math.abs(A.z)/O,1,mi.Epsilon)?fi.Vector3.Zero():new fi.Vector3(0,0,1):new fi.Vector3(1,0,0):new fi.Vector3(0,-1,0),S=fi.Vector3.Cross(A,T)}else S=fi.Vector3.Cross(A,E),fi.Vector3.CrossToRef(S,A,S);return S.normalize(),S}};var vi={};Object.defineProperty(vi,"__esModule",{value:!0}),vi.Size=void 0;class je{constructor(T,A){this.width=T,this.height=A}get surface(){return this.width*this.height}static Zero(){return new je(0,0)}static Lerp(T,A,E){const S=T.width+(A.width-T.width)*E,O=T.height+(A.height-T.height)*E;return new je(S,O)}toString(){return`{W: ${this.width}, H: ${this.height}}`}getClassName(){return"Size"}getHashCode(){let T=this.width||0;return T=397*T^(this.height||0),T}copyFrom(T){this.width=T.width,this.height=T.height}copyFromFloats(T,A){return this.width=T,this.height=A,this}set(T,A){return this.copyFromFloats(T,A)}multiplyByFloats(T,A){return new je(this.width*T,this.height*A)}clone(){return new je(this.width,this.height)}equals(T){return!!T&&this.width===T.width&&this.height===T.height}add(T){return new je(this.width+T.width,this.height+T.height)}subtract(T){return new je(this.width-T.width,this.height-T.height)}}vi.Size=je,function(T){var A=un&&un.__createBinding||(Object.create?function(T,A,E,S){void 0===S&&(S=E),Object.defineProperty(T,S,{enumerable:!0,get:function(){return A[E]}})}:function(T,A,E,S){void 0===S&&(S=E),T[S]=A[E]}),E=un&&un.__exportStar||function(T,E){for(var S in T)"default"===S||Object.prototype.hasOwnProperty.call(E,S)||A(E,T,S)};Object.defineProperty(T,"__esModule",{value:!0}),E(pn,T),E(ln,T),E(Bn,T),E(Ln,T),E(Wn,T),E(Qn,T),E($n,T),E(Jn,T),E(ni,T),E(ri,T),E(fn,T),E(pi,T),E(yi,T),E(oi,T),E(yn,T),E(gn,T),E(vi,T),E(Un,T),E(hn,T),E(mn,T),E(cn,T)}(cn);var wi,_i,bi,Ti,xi={looping:!0,speed:1,weight:1,layer:0},Ai=function(T){function e(A,E){void 0===E&&(E=xi);var S=T.call(this)||this;return S.isAnimationClip=!0,S.looping=xi.looping,S.weight=xi.weight,S.playing=!1,S.shouldReset=!1,S.speed=xi.speed,S.name=f("AnimClip"),S.layer=xi.layer,S.clip=A,S.setParams(o({},E)),S}return i(e,T),e.prototype.setParams=function(T){return this.looping=void 0!==T.looping?T.looping:this.looping,this.speed=T.speed||this.speed,this.weight=T.weight||this.weight,this.layer=T.layer||this.layer,this},e.prototype.toJSON=function(){var A=JSON.parse(JSON.stringify(T.prototype.toJSON.call(this)));return this.shouldReset&&(this.shouldReset=!1),A},e.prototype.play=function(T){var A;void 0===T&&(T=!1),null===(A=this.owner)||void 0===A||A.play(this,T)},e.prototype.pause=function(){var T;null===(T=this.owner)||void 0===T||T.pause(this)},e.prototype.reset=function(){this.shouldReset=!0},e.prototype.stop=function(){var T;null===(T=this.owner)||void 0===T||T.stop(this)},r([ee.readonly,s("design:type",String)],e.prototype,"clip",void 0),r([ee.field,s("design:type",Boolean)],e.prototype,"looping",void 0),r([ee.field,s("design:type",Number)],e.prototype,"weight",void 0),r([ee.field,s("design:type",Boolean)],e.prototype,"playing",void 0),r([ee.field,s("design:type",Boolean)],e.prototype,"shouldReset",void 0),r([ee.field,s("design:type",Number)],e.prototype,"speed",void 0),r([ee.readonly,s("design:type",String)],e.prototype,"name",void 0),e}(ee);T.InputEventType=void 0,(wi=T.InputEventType||(T.InputEventType={}))[wi.DOWN=0]="DOWN",wi[wi.UP=1]="UP",T.CameraMode=void 0,(_i=T.CameraMode||(T.CameraMode={}))[_i.FirstPerson=0]="FirstPerson",_i[_i.ThirdPerson=1]="ThirdPerson",_i[_i.BuildingToolGodMode=2]="BuildingToolGodMode",T.LandRole=void 0,(bi=T.LandRole||(T.LandRole={})).OWNER="owner",bi.OPERATOR="operator",T.ActionButton=void 0,(Ti=T.ActionButton||(T.ActionButton={})).POINTER="POINTER",Ti.PRIMARY="PRIMARY",Ti.SECONDARY="SECONDARY",Ti.ANY="ANY",Ti.FORWARD="FORWARD",Ti.BACKWARD="BACKWARD",Ti.RIGHT="RIGHT",Ti.LEFT="LEFT",Ti.JUMP="JUMP",Ti.WALK="WALK",Ti.ACTION_3="ACTION_3",Ti.ACTION_4="ACTION_4",Ti.ACTION_5="ACTION_5",Ti.ACTION_6="ACTION_6";var Ci,Ei,Ke=function(T){if(this.callback=T,!T||!("apply"in T)||!("call"in T))throw new Error("Callback is not a function");Ii.ensureInstance()},Si=function(T){function e(){return null!==T&&T.apply(this,arguments)||this}return i(e,T),r([P("pointerDown")],e)}(Ke),Mi=function(T){function e(){return null!==T&&T.apply(this,arguments)||this}return i(e,T),r([P("pointerUp")],e)}(Ke),en=function(T,A){this.fn=T,this.useRaycast=A},Ii=function(){function e(){this.buttonIdMapping=[T.ActionButton.POINTER,T.ActionButton.PRIMARY,T.ActionButton.SECONDARY,T.ActionButton.ANY,T.ActionButton.FORWARD,T.ActionButton.BACKWARD,T.ActionButton.RIGHT,T.ActionButton.LEFT,T.ActionButton.JUMP,T.ActionButton.WALK,T.ActionButton.ACTION_3,T.ActionButton.ACTION_4,T.ActionButton.ACTION_5,T.ActionButton.ACTION_6],this.subscriptions=this.buttonIdMapping.reduce((function(T,A){var E;return o(o({},T),((E={})[A]={BUTTON_DOWN:[],BUTTON_UP:[]},E))}),{}),this.internalState=this.buttonIdMapping.reduce((function(T,A){var E;return o(o({},T),((E={})[A]={BUTTON_DOWN:!1},E))}),{})}return Object.defineProperty(e,"instance",{get:function(){return e.ensureInstance(),e._instance},enumerable:!1,configurable:!0}),e.ensureInstance=function(){e._instance||(e._instance=new e)},e.prototype.isButtonPressed=function(T){return this.internalState[T]},e.prototype.subscribe=function(T,A,E,S){var O=this;return this.subscriptions[A][T].push(new en(S,E)),function(){O.unsubscribe(T,A,S)}},e.prototype.unsubscribe=function(T,A,E){var S=this.getSubscriptionId(T,A,E);return S>-1&&this.subscriptions[A][T].splice(S,1)},e.prototype.handlePointerEvent=function(A){var E=this.getPointerById(A.buttonId);if(E){var S=o(o({},A),{button:E,direction:(new cn.Vector3).copyFrom(A.direction),origin:(new cn.Vector3).copyFrom(A.origin),hit:void 0}),O=A.hit?o(o({},A.hit),{hitPoint:(new cn.Vector3).copyFrom(A.hit.hitPoint),normal:(new cn.Vector3).copyFrom(A.hit.normal),worldNormal:(new cn.Vector3).copyFrom(A.hit.worldNormal)}):void 0;if(A.type===T.InputEventType.DOWN){this.internalState[E].BUTTON_DOWN=!0;for(var k=0;k<this.subscriptions[E].BUTTON_DOWN.length;k++)(B=this.subscriptions[E].BUTTON_DOWN[k]).useRaycast?S.hit=O:S.hit=void 0,B.fn(S);O&&O.entityId&&N.engine&&(_t=(j=N.engine.entities[O.entityId])&&j.getComponentOrNull(Si))&&(S.hit=O,_t.callback(S))}else{for(this.internalState[E].BUTTON_DOWN=!1,k=0;k<this.subscriptions[E].BUTTON_UP.length;k++){var B;(B=this.subscriptions[E].BUTTON_UP[k]).useRaycast?S.hit=O:S.hit=void 0,B.fn(S)}var j,_t;O&&O.entityId&&N.engine&&(_t=(j=N.engine.entities[O.entityId])&&j.getComponentOrNull(Mi))&&(S.hit=O,_t.callback(S))}}},e.prototype.getSubscriptionId=function(T,A,E){for(var S=0;S<this.subscriptions[A][T].length;S++)if(this.subscriptions[A][T][S].fn===E)return S;return-1},e.prototype.getPointerById=function(A){if(A<0||A>=this.buttonIdMapping.length)return null;var E=this.buttonIdMapping[A];return E===T.ActionButton.ANY?null:E},e}();T.CLASS_ID=void 0,(Ci=T.CLASS_ID||(T.CLASS_ID={}))[Ci.TRANSFORM=1]="TRANSFORM",Ci[Ci.UUID_CALLBACK=8]="UUID_CALLBACK",Ci[Ci.BOX_SHAPE=16]="BOX_SHAPE",Ci[Ci.SPHERE_SHAPE=17]="SPHERE_SHAPE",Ci[Ci.PLANE_SHAPE=18]="PLANE_SHAPE",Ci[Ci.CONE_SHAPE=19]="CONE_SHAPE",Ci[Ci.CYLINDER_SHAPE=20]="CYLINDER_SHAPE",Ci[Ci.TEXT_SHAPE=21]="TEXT_SHAPE",Ci[Ci.NFT_SHAPE=22]="NFT_SHAPE",Ci[Ci.UI_WORLD_SPACE_SHAPE=23]="UI_WORLD_SPACE_SHAPE",Ci[Ci.UI_SCREEN_SPACE_SHAPE=24]="UI_SCREEN_SPACE_SHAPE",Ci[Ci.UI_CONTAINER_RECT=25]="UI_CONTAINER_RECT",Ci[Ci.UI_CONTAINER_STACK=26]="UI_CONTAINER_STACK",Ci[Ci.UI_TEXT_SHAPE=27]="UI_TEXT_SHAPE",Ci[Ci.UI_INPUT_TEXT_SHAPE=28]="UI_INPUT_TEXT_SHAPE",Ci[Ci.UI_IMAGE_SHAPE=29]="UI_IMAGE_SHAPE",Ci[Ci.UI_SLIDER_SHAPE=30]="UI_SLIDER_SHAPE",Ci[Ci.CIRCLE_SHAPE=31]="CIRCLE_SHAPE",Ci[Ci.BILLBOARD=32]="BILLBOARD",Ci[Ci.ANIMATION=33]="ANIMATION",Ci[Ci.FONT=34]="FONT",Ci[Ci.UI_FULLSCREEN_SHAPE=40]="UI_FULLSCREEN_SHAPE",Ci[Ci.UI_BUTTON_SHAPE=41]="UI_BUTTON_SHAPE",Ci[Ci.GLTF_SHAPE=54]="GLTF_SHAPE",Ci[Ci.OBJ_SHAPE=55]="OBJ_SHAPE",Ci[Ci.AVATAR_SHAPE=56]="AVATAR_SHAPE",Ci[Ci.BASIC_MATERIAL=64]="BASIC_MATERIAL",Ci[Ci.PBR_MATERIAL=65]="PBR_MATERIAL",Ci[Ci.HIGHLIGHT_ENTITY=66]="HIGHLIGHT_ENTITY",Ci[Ci.SOUND=67]="SOUND",Ci[Ci.TEXTURE=68]="TEXTURE",Ci[Ci.VIDEO_CLIP=70]="VIDEO_CLIP",Ci[Ci.VIDEO_TEXTURE=71]="VIDEO_TEXTURE",Ci[Ci.AVATAR_TEXTURE=72]="AVATAR_TEXTURE",Ci[Ci.AUDIO_CLIP=200]="AUDIO_CLIP",Ci[Ci.AUDIO_SOURCE=201]="AUDIO_SOURCE",Ci[Ci.AUDIO_STREAM=202]="AUDIO_STREAM",Ci[Ci.GIZMOS=203]="GIZMOS",Ci[Ci.SMART_ITEM=204]="SMART_ITEM",Ci[Ci.AVATAR_MODIFIER_AREA=205]="AVATAR_MODIFIER_AREA",Ci[Ci.AVATAR_ATTACH=206]="AVATAR_ATTACH",Ci[Ci.CAMERA_MODE_AREA=207]="CAMERA_MODE_AREA",Ci[Ci.NAME=300]="NAME",Ci[Ci.LOCKED_ON_EDIT=301]="LOCKED_ON_EDIT",Ci[Ci.VISIBLE_ON_EDIT=302]="VISIBLE_ON_EDIT",T.AvatarModifiers=void 0,(Ei=T.AvatarModifiers||(T.AvatarModifiers={})).HIDE_AVATARS="HIDE_AVATARS",Ei.DISABLE_PASSPORTS="DISABLE_PASSPORTS";var Ni,Oi=function(A){function n(T){var E=A.call(this)||this;return E.area=T.area,E.modifiers=T.modifiers,E}return i(n,A),r([ee.field,s("design:type",Object)],n.prototype,"area",void 0),r([ee.field,s("design:type",Array)],n.prototype,"modifiers",void 0),r([P("engine.avatarModifierArea",T.CLASS_ID.AVATAR_MODIFIER_AREA),s("design:paramtypes",[Object])],n)}(ee),Pi=function(A){function n(T){void 0===T&&(T={});var E=A.call(this)||this;return E.position=T.position||cn.Vector3.Zero(),E.rotation=T.rotation||cn.Quaternion.Identity,E.scale=T.scale||new cn.Vector3(1,1,1),E}return i(n,A),Object.defineProperty(n.prototype,"eulerAngles",{get:function(){return this.rotation.eulerAngles},enumerable:!1,configurable:!0}),n.prototype.lookAt=function(T,A){void 0===A&&(A=cn.MathTmp.staticUp);var E=new cn.Matrix;return cn.Matrix.LookAtLHToRef(this.position,T,A,E),E.invert(),cn.Quaternion.FromRotationMatrixToRef(E,this.rotation),this},n.prototype.rotate=function(T,A){return this.rotation.multiplyInPlace(this.rotation.angleAxis(A,T)),this},n.prototype.translate=function(T){return this.position.addInPlace(T),this},r([ee.field,s("design:type",cn.Vector3)],n.prototype,"position",void 0),r([ee.field,s("design:type",cn.Quaternion)],n.prototype,"rotation",void 0),r([ee.field,s("design:type",cn.Vector3)],n.prototype,"scale",void 0),r([P("engine.transform",T.CLASS_ID.TRANSFORM),s("design:paramtypes",[Object])],n)}(ee);T.AttachToAvatarAnchorPointId=void 0,(Ni=T.AttachToAvatarAnchorPointId||(T.AttachToAvatarAnchorPointId={}))[Ni.Position=0]="Position",Ni[Ni.NameTag=1]="NameTag",Ni[Ni.LeftHand=2]="LeftHand",Ni[Ni.RightHand=3]="RightHand";var Fi,ki=function(A){function n(E){void 0===E&&(E={});var S=A.call(this)||this;return S.avatarId=E.avatarId||"",S.anchorPointId=E.anchorPointId||T.AttachToAvatarAnchorPointId.Position,S}return i(n,A),r([ee.field,s("design:type",String)],n.prototype,"avatarId",void 0),r([ee.field,s("design:type",Number)],n.prototype,"anchorPointId",void 0),r([ee.field,s("design:type",String)],n.prototype,"avatarSceneId",void 0),r([P("engine.transform",T.CLASS_ID.AVATAR_ATTACH),s("design:paramtypes",[Object])],n)}(ee),zi=function(A){function n(T,E,S){void 0===T&&(T=!0),void 0===E&&(E=!0),void 0===S&&(S=!0);var O=A.call(this)||this;return O.x=!0,O.y=!0,O.z=!0,O.x=T,O.y=E,O.z=S,O}return i(n,A),r([ee.field,s("design:type",Boolean)],n.prototype,"x",void 0),r([ee.field,s("design:type",Boolean)],n.prototype,"y",void 0),r([ee.field,s("design:type",Boolean)],n.prototype,"z",void 0),r([P("engine.billboard",T.CLASS_ID.BILLBOARD),s("design:paramtypes",[Boolean,Boolean,Boolean])],n)}(ee),Di=function(T){function e(){var A=null!==T&&T.apply(this,arguments)||this;return A.withCollisions=!0,A.isPointerBlocker=!0,A.visible=!0,A}return i(e,T),r([ee.field,s("design:type",Boolean)],e.prototype,"withCollisions",void 0),r([ee.field,s("design:type",Boolean)],e.prototype,"isPointerBlocker",void 0),r([ee.field,s("design:type",Boolean)],e.prototype,"visible",void 0),e}(ee),Bi=function(A){function n(){return null!==A&&A.apply(this,arguments)||this}return i(n,A),r([ee.field,s("design:type",Array)],n.prototype,"uvs",void 0),r([N("engine.shape",T.CLASS_ID.BOX_SHAPE)],n)}(Di),Li=function(A){function n(){return null!==A&&A.apply(this,arguments)||this}return i(n,A),r([N("engine.shape",T.CLASS_ID.SPHERE_SHAPE)],n)}(Di),Ui=function(A){function n(){return null!==A&&A.apply(this,arguments)||this}return i(n,A),r([ee.field,s("design:type",Number)],n.prototype,"segments",void 0),r([ee.field,s("design:type",Number)],n.prototype,"arc",void 0),r([N("engine.shape",T.CLASS_ID.CIRCLE_SHAPE)],n)}(Di),qi=function(A){function n(){var T=null!==A&&A.apply(this,arguments)||this;return T.width=1,T.height=1,T}return i(n,A),r([ee.field,s("design:type",Number)],n.prototype,"width",void 0),r([ee.field,s("design:type",Number)],n.prototype,"height",void 0),r([ee.field,s("design:type",Array)],n.prototype,"uvs",void 0),r([N("engine.shape",T.CLASS_ID.PLANE_SHAPE)],n)}(Di),Hi=function(A){function n(){var T=null!==A&&A.apply(this,arguments)||this;return T.radiusTop=0,T.radiusBottom=1,T.segmentsHeight=1,T.segmentsRadial=36,T.openEnded=!1,T.radius=null,T.arc=360,T}return i(n,A),r([ee.field,s("design:type",Number)],n.prototype,"radiusTop",void 0),r([ee.field,s("design:type",Number)],n.prototype,"radiusBottom",void 0),r([ee.field,s("design:type",Number)],n.prototype,"segmentsHeight",void 0),r([ee.field,s("design:type",Number)],n.prototype,"segmentsRadial",void 0),r([ee.field,s("design:type",Boolean)],n.prototype,"openEnded",void 0),r([ee.field,s("design:type",Object)],n.prototype,"radius",void 0),r([ee.field,s("design:type",Number)],n.prototype,"arc",void 0),r([N("engine.shape",T.CLASS_ID.CONE_SHAPE)],n)}(Di),ji=function(A){function n(){var T=null!==A&&A.apply(this,arguments)||this;return T.radiusTop=1,T.radiusBottom=1,T.segmentsHeight=1,T.segmentsRadial=36,T.openEnded=!1,T.radius=null,T.arc=360,T}return i(n,A),r([ee.field,s("design:type",Number)],n.prototype,"radiusTop",void 0),r([ee.field,s("design:type",Number)],n.prototype,"radiusBottom",void 0),r([ee.field,s("design:type",Number)],n.prototype,"segmentsHeight",void 0),r([ee.field,s("design:type",Number)],n.prototype,"segmentsRadial",void 0),r([ee.field,s("design:type",Boolean)],n.prototype,"openEnded",void 0),r([ee.field,s("design:type",Object)],n.prototype,"radius",void 0),r([ee.field,s("design:type",Number)],n.prototype,"arc",void 0),r([N("engine.shape",T.CLASS_ID.CYLINDER_SHAPE)],n)}(Di),Vi=function(A){function n(T){var E=A.call(this)||this;return E.src=T,E}return i(n,A),r([Di.readonly,s("design:type",String)],n.prototype,"src",void 0),r([N("engine.shape",T.CLASS_ID.GLTF_SHAPE),s("design:paramtypes",[String])],n)}(Di);T.PictureFrameStyle=void 0,(Fi=T.PictureFrameStyle||(T.PictureFrameStyle={}))[Fi.Classic=0]="Classic",Fi[Fi.Baroque_Ornament=1]="Baroque_Ornament",Fi[Fi.Diamond_Ornament=2]="Diamond_Ornament",Fi[Fi.Minimal_Wide=3]="Minimal_Wide",Fi[Fi.Minimal_Grey=4]="Minimal_Grey",Fi[Fi.Blocky=5]="Blocky",Fi[Fi.Gold_Edges=6]="Gold_Edges",Fi[Fi.Gold_Carved=7]="Gold_Carved",Fi[Fi.Gold_Wide=8]="Gold_Wide",Fi[Fi.Gold_Rounded=9]="Gold_Rounded",Fi[Fi.Metal_Medium=10]="Metal_Medium",Fi[Fi.Metal_Wide=11]="Metal_Wide",Fi[Fi.Metal_Slim=12]="Metal_Slim",Fi[Fi.Metal_Rounded=13]="Metal_Rounded",Fi[Fi.Pins=14]="Pins",Fi[Fi.Minimal_Black=15]="Minimal_Black",Fi[Fi.Minimal_White=16]="Minimal_White",Fi[Fi.Tape=17]="Tape",Fi[Fi.Wood_Slim=18]="Wood_Slim",Fi[Fi.Wood_Wide=19]="Wood_Wide",Fi[Fi.Wood_Twigs=20]="Wood_Twigs",Fi[Fi.Canvas=21]="Canvas",Fi[Fi.None=22]="None";var Gi,Wi=function(A){function n(E,S){void 0===S&&(S={});var O=A.call(this)||this;O.src=E;var k=new cn.Color3(.6404918,.611472,.8584906),B=T.PictureFrameStyle.Classic;return"r"in S?k=S:null!==S&&(S.color&&(k=S.color),S.style&&(B=S.style)),O.color=k,O.style=B,O}return i(n,A),r([Di.readonly,s("design:type",String)],n.prototype,"src",void 0),r([Di.readonly,s("design:type",Number)],n.prototype,"style",void 0),r([ee.field,s("design:type",cn.Color3)],n.prototype,"color",void 0),r([N("engine.shape",T.CLASS_ID.NFT_SHAPE),s("design:paramtypes",[String,Object])],n)}(Di),Xi=function(A){function n(T,E){var S=A.call(this)||this,O=new RegExp("data:[a-z-]+/[a-z-]+;base64");if((T.length>2048||O.test(T))&&c("⚠️🚨 Base64 textures will be deprecated in version 7 of decentraland-ecs"),S.src=T,E)for(var k in E)S[k]=E[k];return S}return i(n,A),r([ee.readonly,s("design:type",String)],n.prototype,"src",void 0),r([ee.readonly,s("design:type",Number)],n.prototype,"samplingMode",void 0),r([ee.readonly,s("design:type",Number)],n.prototype,"wrap",void 0),r([ee.readonly,s("design:type",Boolean)],n.prototype,"hasAlpha",void 0),r([N("engine.texture",T.CLASS_ID.TEXTURE),s("design:paramtypes",[String,Object])],n)}(ee),Qi=function(A){function n(){var T=null!==A&&A.apply(this,arguments)||this;return T.states=[],T}return i(n,A),n.prototype.addClip=function(T){var A=this;return this.states.push(T),T.onChange((function(){A.dirty=!0})),T.owner=this,this},n.prototype.getClip=function(T){for(var A=0;A<this.states.length;A++){var E=this.states[A];if(E.clip===T)return E}var S=new Ai(T);return this.addClip(S),S},n.prototype.stop=function(T){if(T)T.playing=!1,T.shouldReset=!0;else for(var A=0;A<this.states.length;A++){var E=this.states[A];this.stop(E)}},n.prototype.play=function(T,A){void 0===A&&(A=!1);for(var E=0;E<this.states.length;E++){var S=this.states[E];S.layer===T.layer&&T!==S&&this.pause(S)}A&&(T.shouldReset=!0),T.playing=!0,T.dirty=!0,T.data.nonce=Math.random()},n.prototype.pause=function(T){if(T)T.playing=!1;else for(var A=0;A<this.states.length;A++){var E=this.states[A];this.pause(E)}},r([ee.readonly,s("design:type",Array)],n.prototype,"states",void 0),r([P("engine.animator",T.CLASS_ID.ANIMATION)],n)}(Di),$i=function(A){function n(T){var E=A.call(this)||this;return E.src=T,E}return i(n,A),r([ee.readonly,s("design:type",String)],n.prototype,"src",void 0),r([N("engine.shape",T.CLASS_ID.OBJ_SHAPE),s("design:paramtypes",[String])],n)}(Di),Ji=function(A){function n(T){void 0===T&&(T="");var E=A.call(this)||this;return E.src=T,E}return i(n,A),r([ee.readonly,s("design:type",String)],n.prototype,"src",void 0),r([N("engine.font",T.CLASS_ID.FONT),s("design:paramtypes",[String])],n)}(ee);T.Fonts=void 0,(Gi=T.Fonts||(T.Fonts={})).SanFrancisco="builtin:SF-UI-Text-Regular SDF",Gi.SanFrancisco_Heavy="builtin:SF-UI-Text-Heavy SDF",Gi.SanFrancisco_Semibold="builtin:SF-UI-Text-Semibold SDF",Gi.LiberationSans="builtin:LiberationSans SDF",Gi.SansSerif="SansSerif",Gi.SansSerif_Heavy="SansSerif_Heavy",Gi.SansSerif_Bold="SansSerif_Bold",Gi.SansSerif_SemiBold="SansSerif_SemiBold";var Zi,Yi=function(A){function n(T){var E=A.call(this)||this;return E.outlineWidth=0,E.outlineColor=new cn.Color3(1,1,1),E.color=new cn.Color3(1,1,1),E.fontSize=10,E.opacity=1,E.value="",E.lineSpacing="0px",E.lineCount=0,E.textWrapping=!1,E.shadowBlur=0,E.shadowOffsetX=0,E.shadowOffsetY=0,E.shadowColor=new cn.Color3(1,1,1),E.hTextAlign="center",E.vTextAlign="center",E.width=1,E.height=1,E.paddingTop=0,E.paddingRight=0,E.paddingBottom=0,E.paddingLeft=0,E.billboard=!1,E.visible=!0,T&&(E.value=T),E}return i(n,A),r([ee.field,s("design:type",Number)],n.prototype,"outlineWidth",void 0),r([ee.field,s("design:type",cn.Color3)],n.prototype,"outlineColor",void 0),r([ee.field,s("design:type",cn.Color3)],n.prototype,"color",void 0),r([ee.field,s("design:type",Number)],n.prototype,"fontSize",void 0),r([ee.component,s("design:type",Ji)],n.prototype,"font",void 0),r([ee.field,s("design:type",Number)],n.prototype,"opacity",void 0),r([ee.field,s("design:type",String)],n.prototype,"value",void 0),r([ee.field,s("design:type",String)],n.prototype,"lineSpacing",void 0),r([ee.field,s("design:type",Number)],n.prototype,"lineCount",void 0),r([ee.field,s("design:type",Boolean)],n.prototype,"textWrapping",void 0),r([ee.field,s("design:type",Number)],n.prototype,"shadowBlur",void 0),r([ee.field,s("design:type",Number)],n.prototype,"shadowOffsetX",void 0),r([ee.field,s("design:type",Number)],n.prototype,"shadowOffsetY",void 0),r([ee.field,s("design:type",cn.Color3)],n.prototype,"shadowColor",void 0),r([ee.field,s("design:type",String)],n.prototype,"hTextAlign",void 0),r([ee.field,s("design:type",String)],n.prototype,"vTextAlign",void 0),r([ee.field,s("design:type",Number)],n.prototype,"width",void 0),r([ee.field,s("design:type",Number)],n.prototype,"height",void 0),r([ee.field,s("design:type",Number)],n.prototype,"paddingTop",void 0),r([ee.field,s("design:type",Number)],n.prototype,"paddingRight",void 0),r([ee.field,s("design:type",Number)],n.prototype,"paddingBottom",void 0),r([ee.field,s("design:type",Number)],n.prototype,"paddingLeft",void 0),r([ee.field,s("design:type",Boolean)],n.prototype,"billboard",void 0),r([ee.field,s("design:type",Boolean)],n.prototype,"visible",void 0),r([P("engine.text",T.CLASS_ID.TEXT_SHAPE),s("design:paramtypes",[String])],n)}(ee);T.TransparencyMode=void 0,(Zi=T.TransparencyMode||(T.TransparencyMode={}))[Zi.OPAQUE=0]="OPAQUE",Zi[Zi.ALPHA_TEST=1]="ALPHA_TEST",Zi[Zi.ALPHA_BLEND=2]="ALPHA_BLEND",Zi[Zi.ALPHA_TEST_AND_BLEND=3]="ALPHA_TEST_AND_BLEND",Zi[Zi.AUTO=4]="AUTO";var Ki,tr=function(A){function n(){var E=null!==A&&A.apply(this,arguments)||this;return E.alphaTest=.5,E.castShadows=!0,E.transparencyMode=T.TransparencyMode.AUTO,E}return i(n,A),r([ee.field,s("design:type",Number)],n.prototype,"alphaTest",void 0),r([ee.field,s("design:type",Object)],n.prototype,"albedoColor",void 0),r([ee.field,s("design:type",cn.Color3)],n.prototype,"emissiveColor",void 0),r([ee.field,s("design:type",Number)],n.prototype,"metallic",void 0),r([ee.field,s("design:type",Number)],n.prototype,"roughness",void 0),r([ee.field,s("design:type",cn.Color3)],n.prototype,"reflectivityColor",void 0),r([ee.field,s("design:type",Number)],n.prototype,"directIntensity",void 0),r([ee.field,s("design:type",Number)],n.prototype,"microSurface",void 0),r([ee.field,s("design:type",Number)],n.prototype,"emissiveIntensity",void 0),r([ee.field,s("design:type",Number)],n.prototype,"specularIntensity",void 0),r([ee.component,s("design:type",Object)],n.prototype,"albedoTexture",void 0),r([ee.component,s("design:type",Object)],n.prototype,"alphaTexture",void 0),r([ee.component,s("design:type",Object)],n.prototype,"emissiveTexture",void 0),r([ee.component,s("design:type",Object)],n.prototype,"bumpTexture",void 0),r([ee.field,s("design:type",Boolean)],n.prototype,"castShadows",void 0),r([ee.field,s("design:type",Number)],n.prototype,"transparencyMode",void 0),r([N("engine.material",T.CLASS_ID.PBR_MATERIAL)],n)}(ee),er=function(A){function n(){var T=null!==A&&A.apply(this,arguments)||this;return T.alphaTest=.5,T.castShadows=!0,T}return i(n,A),r([ee.component,s("design:type",Object)],n.prototype,"texture",void 0),r([ee.field,s("design:type",Number)],n.prototype,"alphaTest",void 0),r([ee.field,s("design:type",Boolean)],n.prototype,"castShadows",void 0),r([N("engine.material",T.CLASS_ID.BASIC_MATERIAL)],n)}(ee),nr=function(T){function e(A){var E=T.call(this)||this;if(E.uuid=f("UUID"),!A||!("apply"in A)||!("call"in A))throw new Error("Callback is not a function");return E.callback=A,E}return i(e,T),e.uuidEvent=function(T,A){if(delete T[A]){var E=A+"_"+Math.random();T[E]=void 0,Object.defineProperty(T,E,o(o({},Object.getOwnPropertyDescriptor(T,E)),{enumerable:!1})),Object.defineProperty(T,A.toString(),{get:function(){return this[E]},set:function(T){var S=this[E];if(T){if(!(T instanceof e))throw new Error("value is not an OnUUIDEvent");this.data[A]=T.uuid}else this.data[A]=null;if(this[E]=T,T!==S){this.dirty=!0;for(var O=0;O<this.subscriptions.length;O++)this.subscriptions[O](A,T,S)}},enumerable:!0})}},e.prototype.toJSON=function(){return{uuid:this.uuid,type:this.type}},r([ee.field,s("design:type",Function)],e.prototype,"callback",void 0),e}(ee),ir=function(A){function n(){var E=null!==A&&A.apply(this,arguments)||this;return E.button=T.ActionButton.ANY,E.hoverText="Interact",E.distance=10,E.showFeedback=!0,E}return i(n,A),n.prototype.toJSON=function(){return{uuid:this.uuid,type:this.type,button:this.button,hoverText:this.hoverText,distance:this.distance,showFeedback:this.showFeedback}},r([ee.field,s("design:type",String)],n.prototype,"button",void 0),r([ee.field,s("design:type",String)],n.prototype,"hoverText",void 0),r([ee.field,s("design:type",Number)],n.prototype,"distance",void 0),r([ee.field,s("design:type",Boolean)],n.prototype,"showFeedback",void 0),n}(nr),rr=function(A){function n(){var T=null!==A&&A.apply(this,arguments)||this;return T.type="onPointerLock",T}return i(n,A),r([ee.readonly,s("design:type",String)],n.prototype,"type",void 0),r([P("engine.onPointerLock",T.CLASS_ID.UUID_CALLBACK)],n)}(nr),or=function(A){function n(){var T=null!==A&&A.apply(this,arguments)||this;return T.type="onAnimationEnd",T}return i(n,A),r([ee.readonly,s("design:type",String)],n.prototype,"type",void 0),r([P("engine.onAnimationEnd",T.CLASS_ID.UUID_CALLBACK)],n)}(nr),sr=function(A){function n(){return null!==A&&A.apply(this,arguments)||this}return i(n,A),r([P("engine.smartItem",T.CLASS_ID.SMART_ITEM)],n)}(ee),ar=function(A){function n(T){var E=A.call(this)||this;return E.url=T,E}return i(n,A),r([ee.readonly,s("design:type",String)],n.prototype,"url",void 0),r([N("engine.VideoClip",T.CLASS_ID.VIDEO_CLIP),s("design:paramtypes",[String])],n)}(ee);T.VideoStatus=void 0,(Ki=T.VideoStatus||(T.VideoStatus={}))[Ki.NONE=0]="NONE",Ki[Ki.ERROR=1]="ERROR",Ki[Ki.LOADING=2]="LOADING",Ki[Ki.READY=3]="READY",Ki[Ki.PLAYING=4]="PLAYING",Ki[Ki.BUFFERING=5]="BUFFERING";var ur,cr=function(A){function n(E,S){var O=A.call(this)||this;if(O.volume=1,O.playbackRate=1,O.loop=!1,O.seek=-1,O._position=-1,O._videoLength=-1,O._status=T.VideoStatus.NONE,O.playing=!1,!(E instanceof ar))throw new Error("Trying to create VideoTexture(VideoClip) with an invalid VideoClip");if(O.videoClipId=D(E),S)for(var k in S)O[k]=S[k];return O}return i(n,A),n.prototype.play=function(){this.playing=!0},n.prototype.pause=function(){this.playing=!1},n.prototype.reset=function(){this.seekTime(0),this.pause()},n.prototype.seekTime=function(T){this.seek=T,this.dirty=!0,this.data.nonce=Math.random()},n.prototype.toJSON=function(){if(this.seek>=0){var T=JSON.parse(JSON.stringify(A.prototype.toJSON.call(this)));return this.seek=-1,T}return A.prototype.toJSON.call(this)},n.prototype.update=function(A){A.videoClipId===this.videoClipId&&(this._status=A.videoStatus||T.VideoStatus.NONE,this._videoLength=A.totalVideoLength,this._position=A.currentOffset)},Object.defineProperty(n.prototype,"position",{get:function(){return this._position},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"videoLength",{get:function(){return this._videoLength},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"status",{get:function(){return this._status},enumerable:!1,configurable:!0}),r([ee.readonly,s("design:type",String)],n.prototype,"videoClipId",void 0),r([ee.readonly,s("design:type",Number)],n.prototype,"samplingMode",void 0),r([ee.readonly,s("design:type",Number)],n.prototype,"wrap",void 0),r([ee.field,s("design:type",Number)],n.prototype,"volume",void 0),r([ee.field,s("design:type",Number)],n.prototype,"playbackRate",void 0),r([ee.field,s("design:type",Boolean)],n.prototype,"loop",void 0),r([ee.field,s("design:type",Number)],n.prototype,"seek",void 0),r([ee.field,s("design:type",Boolean)],n.prototype,"playing",void 0),r([N("engine.VideoTexture",T.CLASS_ID.VIDEO_TEXTURE),s("design:paramtypes",[ar,Object])],n)}(ee),pr=function(A){function n(T){var E=A.call(this)||this;return E.area=T.area,E.cameraMode=T.cameraMode,E}return i(n,A),r([ee.field,s("design:type",Object)],n.prototype,"area",void 0),r([ee.field,s("design:type",Number)],n.prototype,"cameraMode",void 0),r([P("engine.cameraModeArea",T.CLASS_ID.CAMERA_MODE_AREA),s("design:paramtypes",[Object])],n)}(ee),lr=function(A){function n(T,E){var S=A.call(this)||this;if(S.userId=T,E)for(var O in E)S[O]=E[O];return S}return i(n,A),r([ee.readonly,s("design:type",String)],n.prototype,"userId",void 0),r([ee.readonly,s("design:type",Number)],n.prototype,"samplingMode",void 0),r([ee.readonly,s("design:type",Number)],n.prototype,"wrap",void 0),r([ee.readonly,s("design:type",Boolean)],n.prototype,"hasAlpha",void 0),r([N("engine.texture",T.CLASS_ID.AVATAR_TEXTURE),s("design:paramtypes",[String,Object])],n)}(ee),dr=function(){function e(){var A=this;this.position=new cn.Vector3,this.rotation=new cn.Quaternion,this.feetPosition=new cn.Vector3,this.worldPosition=new cn.Vector3,this.lastEventPosition={x:0,y:0,z:0},this.lastEventWorldPosition={x:0,y:0,z:0},this.lastEventRotation={x:0,y:0,z:0,w:1},this._playerHeight=1.6,this._cameraMode=T.CameraMode.ThirdPerson,"undefined"!=typeof dcl&&(dcl.subscribe("positionChanged"),dcl.subscribe("rotationChanged"),dcl.subscribe("cameraModeChanged"),dcl.onEvent((function(T){switch(T.type){case"positionChanged":A.positionChanged(T.data);break;case"rotationChanged":A.rotationChanged(T.data);break;case"cameraModeChanged":A.cameraModeChanged(T.data)}}))),Object.defineProperty(this.position,"x",{get:function(){return A.lastEventPosition.x}}),Object.defineProperty(this.position,"y",{get:function(){return A.lastEventPosition.y}}),Object.defineProperty(this.position,"z",{get:function(){return A.lastEventPosition.z}}),Object.defineProperty(this.worldPosition,"x",{get:function(){return A.lastEventWorldPosition.x}}),Object.defineProperty(this.worldPosition,"y",{get:function(){return A.lastEventWorldPosition.y}}),Object.defineProperty(this.worldPosition,"z",{get:function(){return A.lastEventWorldPosition.z}}),Object.defineProperty(this.feetPosition,"x",{get:function(){return A.lastEventPosition.x}}),Object.defineProperty(this.feetPosition,"y",{get:function(){return A.lastEventPosition.y-A.playerHeight}}),Object.defineProperty(this.feetPosition,"z",{get:function(){return A.lastEventPosition.z}}),Object.defineProperty(this.rotation,"x",{get:function(){return A.lastEventRotation.x}}),Object.defineProperty(this.rotation,"y",{get:function(){return A.lastEventRotation.y}}),Object.defineProperty(this.rotation,"z",{get:function(){return A.lastEventRotation.z}}),Object.defineProperty(this.rotation,"w",{get:function(){return A.lastEventRotation.w}})}return Object.defineProperty(e,"instance",{get:function(){return e._instance||(e._instance=new e),e._instance},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playerHeight",{get:function(){return this._playerHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cameraMode",{get:function(){return this._cameraMode},enumerable:!1,configurable:!0}),e.prototype.positionChanged=function(T){this.lastEventPosition=T.position,this.lastEventWorldPosition=T.cameraPosition,this._playerHeight=T.playerHeight},e.prototype.rotationChanged=function(T){this.lastEventRotation=T.quaternion},e.prototype.cameraModeChanged=function(T){this._cameraMode=T.cameraMode},e}();!function(T){T.HitFirst="rqhf",T.HitAll="rqha"}(ur||(ur={}));var hr,yr=function(){function t(){this.queries={}}return Object.defineProperty(t,"instance",{get:function(){return t.ensureInstance(),t._instance},enumerable:!1,configurable:!0}),t.ensureInstance=function(){t._instance||(t._instance=new t)},t.prototype.getRayFromCamera=function(T){var A=dr.instance.rotation,E=cn.Matrix.Identity();A.toRotationMatrix(E);var S=cn.Vector3.TransformCoordinates(cn.Vector3.Forward(),E);return{origin:dr.instance.position,direction:S,distance:T}},t.prototype.getRayFromPositions=function(T,A){var E=A.subtract(T),S=E.length();return{origin:T,direction:E.normalize(),distance:S}},t.prototype.hitFirst=function(T,A,E){var S="number"==typeof E?ur.HitFirst+E:m();this.queries[S]=A,"undefined"!=typeof dcl&&dcl.query("raycast",{queryId:S,queryType:"HitFirst",ray:T})},t.prototype.hitAll=function(T,A,E){var S="number"==typeof E?ur.HitAll+E:m();this.queries[S]=A,"undefined"!=typeof dcl&&dcl.query("raycast",{queryId:S,queryType:"HitAll",ray:T})},t.prototype.hitFirstAvatar=function(T,A){c("not implemented yet")},t.prototype.hitAllAvatars=function(T,A){c("not implemented yet")},t.prototype.handleRaycastHitFirstResponse=function(T){this.queries[T.payload.queryId](T.payload.payload),delete this.queries[T.payload.queryId]},t.prototype.handleRaycastHitAllResponse=function(T){this.queries[T.payload.queryId](T.payload.payload),delete this.queries[T.payload.queryId]},t}(),fr=function(){function t(){}return t.prototype.activate=function(T){T.eventManager.addListener(Ue,this,(function(T){"HitFirst"===T.payload.queryType?yr.instance.handleRaycastHitFirstResponse(T):"HitAll"===T.payload.queryType&&yr.instance.handleRaycastHitAllResponse(T)})),"undefined"!=typeof dcl&&dcl.subscribe("raycastResponse")},t.prototype.deactivate=function(){"undefined"!=typeof dcl&&dcl.unsubscribe("raycastResponse")},t}(),mr=function(){function t(){}return t.prototype.activate=function(T){T.eventManager.addListener(qe,this,(function(T){Ii.instance.handlePointerEvent(T.payload)})),"undefined"!=typeof dcl&&(dcl.subscribe("pointerUp"),dcl.subscribe("pointerDown"),dcl.subscribe("actionButtonEvent"))},t.prototype.deactivate=function(){"undefined"!=typeof dcl&&(dcl.unsubscribe("pointerUp"),dcl.unsubscribe("pointerDown"),dcl.unsubscribe("actionButtonEvent"))},t}(),gr=function(){function t(){this.handlerMap={}}return t.prototype.activate=function(T){T.eventManager.addListener(Le,this,this.handleEvent),T.eventManager.addListener(j,this,this.componentAdded),T.eventManager.addListener(B,this,this.componentRemoved),"undefined"!=typeof dcl&&dcl.subscribe("uuidEvent")},t.prototype.deactivate=function(){"undefined"!=typeof dcl&&dcl.unsubscribe("uuidEvent")},t.prototype.onAddEntity=function(T){for(var A in T.components){var E=T.components[A];E instanceof nr&&(this.handlerMap[E.uuid]=E)}},t.prototype.onRemoveEntity=function(T){for(var A in T.components){var E=T.components[A];E instanceof nr&&delete this.handlerMap[E.uuid]}},t.prototype.componentAdded=function(T){if(T.entity.isAddedToEngine()){var A=T.entity.components[T.componentName];A instanceof nr&&(this.handlerMap[A.uuid]=A)}},t.prototype.componentRemoved=function(T){T.entity.isAddedToEngine()&&T.component instanceof nr&&delete this.handlerMap[T.component.uuid]},t.prototype.handleEvent=function(T){if(T.uuid in this.handlerMap){var A=this.handlerMap[T.uuid];A&&A.callback&&"call"in A.callback&&A.callback(T.payload)}},t}(),vr=new fr,wr=new mr,_r=new gr,br=function(A){function n(T){var E=A.call(this)||this;return E.loop=!1,E.volume=1,E.url=T,E}return i(n,A),r([ee.readonly,s("design:type",String)],n.prototype,"url",void 0),r([ee.field,s("design:type",Boolean)],n.prototype,"loop",void 0),r([ee.field,s("design:type",String)],n.prototype,"loadingCompleteEventId",void 0),r([ee.field,s("design:type",Number)],n.prototype,"volume",void 0),r([N("engine.AudioClip",T.CLASS_ID.AUDIO_CLIP),s("design:paramtypes",[String])],n)}(ee),Tr=function(A){function n(T){var E=A.call(this)||this;if(E.audioClip=T,E.loop=!1,E.volume=1,E.playing=!1,E.pitch=1,E.playedAtTimestamp=Date.now(),!(T instanceof br))throw new Error("Trying to create AudioSource(AudioClip) with an invalid AudioClip");return E.audioClipId=D(T),E}return i(n,A),n.prototype.playOnce=function(){return this.playing=!0,this.dirty=!0,this.playedAtTimestamp=Date.now(),this.data.nonce=Math.random(),this},r([ee.readonly,s("design:type",String)],n.prototype,"audioClipId",void 0),r([ee.field,s("design:type",Boolean)],n.prototype,"loop",void 0),r([ee.field,s("design:type",Number)],n.prototype,"volume",void 0),r([ee.field,s("design:type",Boolean)],n.prototype,"playing",void 0),r([ee.field,s("design:type",Number)],n.prototype,"pitch",void 0),r([ee.field,s("design:type",Number)],n.prototype,"playedAtTimestamp",void 0),r([P("engine.AudioSource",T.CLASS_ID.AUDIO_SOURCE),s("design:paramtypes",[br])],n)}(ee),xr=function(A){function n(T){var E=A.call(this)||this;return E.playing=!1,E.volume=1,E.url=T,E.playing=!0,E}return i(n,A),r([ee.readonly,s("design:type",String)],n.prototype,"url",void 0),r([ee.field,s("design:type",Boolean)],n.prototype,"playing",void 0),r([ee.field,s("design:type",Number)],n.prototype,"volume",void 0),r([P("engine.AudioStream",T.CLASS_ID.AUDIO_STREAM),s("design:paramtypes",[String])],n)}(ee);T.Gizmo=void 0,(hr=T.Gizmo||(T.Gizmo={})).MOVE="MOVE",hr.ROTATE="ROTATE",hr.SCALE="SCALE",hr.NONE="NONE";var Ar,Cr=function(A){function n(){var T=null!==A&&A.apply(this,arguments)||this;return T.type="gizmoEvent",T}return i(n,A),r([ee.readonly,s("design:type",String)],n.prototype,"type",void 0),r([P("engine.gizmoEvent",T.CLASS_ID.UUID_CALLBACK)],n)}(nr),Er=function(A){function n(){var T=null!==A&&A.apply(this,arguments)||this;return T.position=!0,T.rotation=!0,T.scale=!0,T.cycle=!0,T.localReference=!1,T}return i(n,A),r([ee.field,s("design:type",Boolean)],n.prototype,"position",void 0),r([ee.field,s("design:type",Boolean)],n.prototype,"rotation",void 0),r([ee.field,s("design:type",Boolean)],n.prototype,"scale",void 0),r([ee.field,s("design:type",Boolean)],n.prototype,"cycle",void 0),r([ee.field,s("design:type",String)],n.prototype,"selectedGizmo",void 0),r([ee.field,s("design:type",Boolean)],n.prototype,"localReference",void 0),r([P("engine.gizmos",T.CLASS_ID.GIZMOS)],n)}(ee),Sr=function(A){function n(T){var E=A.call(this,T)||this;return E.type="onFocus",_r.handlerMap[E.uuid]=E,E}return i(n,A),r([ee.readonly,s("design:type",String)],n.prototype,"type",void 0),r([P("engine.onFocus",T.CLASS_ID.UUID_CALLBACK),s("design:paramtypes",[Function])],n)}(nr),Rr=function(A){function n(T){var E=A.call(this,T)||this;return E.type="onTextSubmit",_r.handlerMap[E.uuid]=E,E}return i(n,A),r([ee.readonly,s("design:type",String)],n.prototype,"type",void 0),r([P("engine.onTextSubmit",T.CLASS_ID.UUID_CALLBACK),s("design:paramtypes",[Function])],n)}(nr),Mr=function(A){function n(T){var E=A.call(this,T)||this;return E.type="onBlur",_r.handlerMap[E.uuid]=E,E}return i(n,A),r([ee.readonly,s("design:type",String)],n.prototype,"type",void 0),r([P("engine.onBlur",T.CLASS_ID.UUID_CALLBACK),s("design:paramtypes",[Function])],n)}(nr),Ir=function(A){function n(T){var E=A.call(this,T)||this;return E.type="onEnter",_r.handlerMap[E.uuid]=E,E}return i(n,A),r([ee.readonly,s("design:type",String)],n.prototype,"type",void 0),r([P("engine.onEnter",T.CLASS_ID.UUID_CALLBACK),s("design:paramtypes",[Function])],n)}(nr),Nr=function(A){function n(T){var E=A.call(this,T)||this;return E.type="onChange",_r.handlerMap[E.uuid]=E,E}return i(n,A),r([ee.readonly,s("design:type",String)],n.prototype,"type",void 0),r([P("engine.onChange",T.CLASS_ID.UUID_CALLBACK),s("design:paramtypes",[Function])],n)}(nr),Or=function(A){function n(T,E){var S=A.call(this,T)||this;return S.type="onClick",_r.handlerMap[S.uuid]=S,E&&(S.showFeedback=!(!1===E.showFeedback),E.button&&(S.button=E.button),E.hoverText&&(S.hoverText=E.hoverText),E.distance&&(S.distance=E.distance)),S}return i(n,A),r([ee.readonly,s("design:type",String)],n.prototype,"type",void 0),r([P("engine.onClick",T.CLASS_ID.UUID_CALLBACK),s("design:paramtypes",[Function,Object])],n)}(ir),Pr=function(A){function n(T,E){var S=A.call(this,T)||this;return S.type="pointerDown",_r.handlerMap[S.uuid]=S,E&&(S.showFeedback=!(!1===E.showFeedback),E.button&&(S.button=E.button),E.hoverText&&(S.hoverText=E.hoverText),E.distance&&(S.distance=E.distance)),S}return i(n,A),r([ee.readonly,s("design:type",String)],n.prototype,"type",void 0),r([P("engine.pointerDown",T.CLASS_ID.UUID_CALLBACK),s("design:paramtypes",[Function,Object])],n)}(ir),Fr=function(A){function n(T,E){var S=A.call(this,T)||this;return S.type="pointerUp",_r.handlerMap[S.uuid]=S,E&&(S.showFeedback=!(!1===E.showFeedback),E.button&&(S.button=E.button),E.hoverText&&(S.hoverText=E.hoverText),E.distance&&(S.distance=E.distance)),S}return i(n,A),r([ee.readonly,s("design:type",String)],n.prototype,"type",void 0),r([P("engine.pointerUp",T.CLASS_ID.UUID_CALLBACK),s("design:paramtypes",[Function,Object])],n)}(ir),kr=function(A){function n(T,E){var S=A.call(this,T)||this;return S.type="pointerHoverEnter",_r.handlerMap[S.uuid]=S,E&&E.distance&&(S.distance=E.distance),S}return i(n,A),r([ee.readonly,s("design:type",String)],n.prototype,"type",void 0),r([P("engine.pointerHoverEnter",T.CLASS_ID.UUID_CALLBACK),s("design:paramtypes",[Function,Object])],n)}(ir),zr=function(A){function n(T){var E=A.call(this,T)||this;return E.type="pointerHoverExit",_r.handlerMap[E.uuid]=E,E.distance=160,E}return i(n,A),r([ee.readonly,s("design:type",String)],n.prototype,"type",void 0),r([P("engine.pointerHoverExit",T.CLASS_ID.UUID_CALLBACK),s("design:paramtypes",[Function])],n)}(ir),Dr=function(T){function e(A){var E=T.call(this)||this;return E.name=null,E.visible=!0,E.opacity=1,E.hAlign="center",E.vAlign="center",E.width="100px",E.height="50px",E.positionX="0px",E.positionY="0px",E.isPointerBlocker=!0,A&&(E._parent=A,E.data.parentComponent=D(A)),E}return i(e,T),Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parentComponent",{get:function(){return this.data.parentComponent},enumerable:!1,configurable:!0}),r([ee.field,s("design:type",Object)],e.prototype,"name",void 0),r([ee.field,s("design:type",Boolean)],e.prototype,"visible",void 0),r([ee.field,s("design:type",Number)],e.prototype,"opacity",void 0),r([ee.field,s("design:type",String)],e.prototype,"hAlign",void 0),r([ee.field,s("design:type",String)],e.prototype,"vAlign",void 0),r([ee.uiValue,s("design:type",Object)],e.prototype,"width",void 0),r([ee.uiValue,s("design:type",Object)],e.prototype,"height",void 0),r([ee.uiValue,s("design:type",Object)],e.prototype,"positionX",void 0),r([ee.uiValue,s("design:type",Object)],e.prototype,"positionY",void 0),r([ee.field,s("design:type",Boolean)],e.prototype,"isPointerBlocker",void 0),e}(ee),Br=function(A){function n(){return A.call(this,null)||this}return i(n,A),r([N("engine.shape",T.CLASS_ID.UI_FULLSCREEN_SHAPE),s("design:paramtypes",[])],n)}(Dr),Lr=function(A){function n(){return A.call(this,null)||this}return i(n,A),r([N("engine.shape",T.CLASS_ID.UI_WORLD_SPACE_SHAPE),s("design:paramtypes",[])],n)}(Dr),Ur=function(A){function n(){return A.call(this,null)||this}return i(n,A),r([N("engine.shape",T.CLASS_ID.UI_SCREEN_SPACE_SHAPE),s("design:paramtypes",[])],n)}(Dr),qr=function(A){function n(){var T=null!==A&&A.apply(this,arguments)||this;return T.thickness=0,T.color=cn.Color4.Clear(),T.alignmentUsesSize=!0,T}return i(n,A),r([ee.field,s("design:type",Number)],n.prototype,"thickness",void 0),r([ee.field,s("design:type",cn.Color4)],n.prototype,"color",void 0),r([ee.field,s("design:type",Boolean)],n.prototype,"alignmentUsesSize",void 0),r([N("engine.shape",T.CLASS_ID.UI_CONTAINER_RECT)],n)}(Dr);T.UIStackOrientation=void 0,(Ar=T.UIStackOrientation||(T.UIStackOrientation={}))[Ar.VERTICAL=0]="VERTICAL",Ar[Ar.HORIZONTAL=1]="HORIZONTAL";var Hr=function(A){function n(){var E=null!==A&&A.apply(this,arguments)||this;return E.adaptWidth=!0,E.adaptHeight=!0,E.color=cn.Color4.Clear(),E.stackOrientation=T.UIStackOrientation.VERTICAL,E.spacing=0,E}return i(n,A),r([ee.field,s("design:type",Boolean)],n.prototype,"adaptWidth",void 0),r([ee.field,s("design:type",Boolean)],n.prototype,"adaptHeight",void 0),r([ee.field,s("design:type",cn.Color4)],n.prototype,"color",void 0),r([ee.field,s("design:type",Number)],n.prototype,"stackOrientation",void 0),r([ee.field,s("design:type",Number)],n.prototype,"spacing",void 0),r([N("engine.shape",T.CLASS_ID.UI_CONTAINER_STACK)],n)}(Dr),jr=function(A){function n(){var T=null!==A&&A.apply(this,arguments)||this;return T.fontSize=10,T.fontWeight="normal",T.thickness=0,T.cornerRadius=0,T.color=cn.Color4.White(),T.background=cn.Color4.White(),T.paddingTop=0,T.paddingRight=0,T.paddingBottom=0,T.paddingLeft=0,T.shadowBlur=0,T.shadowOffsetX=0,T.shadowOffsetY=0,T.shadowColor=cn.Color4.Black(),T.text="button",T}return i(n,A),r([ee.field,s("design:type",Number)],n.prototype,"fontSize",void 0),r([ee.field,s("design:type",String)],n.prototype,"fontWeight",void 0),r([ee.field,s("design:type",Number)],n.prototype,"thickness",void 0),r([ee.field,s("design:type",Number)],n.prototype,"cornerRadius",void 0),r([ee.field,s("design:type",cn.Color4)],n.prototype,"color",void 0),r([ee.field,s("design:type",cn.Color4)],n.prototype,"background",void 0),r([ee.field,s("design:type",Number)],n.prototype,"paddingTop",void 0),r([ee.field,s("design:type",Number)],n.prototype,"paddingRight",void 0),r([ee.field,s("design:type",Number)],n.prototype,"paddingBottom",void 0),r([ee.field,s("design:type",Number)],n.prototype,"paddingLeft",void 0),r([ee.field,s("design:type",Number)],n.prototype,"shadowBlur",void 0),r([ee.field,s("design:type",Number)],n.prototype,"shadowOffsetX",void 0),r([ee.field,s("design:type",Number)],n.prototype,"shadowOffsetY",void 0),r([ee.field,s("design:type",cn.Color4)],n.prototype,"shadowColor",void 0),r([ee.field,s("design:type",String)],n.prototype,"text",void 0),r([N("engine.shape",T.CLASS_ID.UI_BUTTON_SHAPE)],n)}(Dr),Vr=function(A){function n(){var T=null!==A&&A.apply(this,arguments)||this;return T.outlineWidth=0,T.outlineColor=cn.Color4.White(),T.color=cn.Color4.White(),T.fontSize=10,T.fontAutoSize=!1,T.value="",T.lineSpacing=0,T.lineCount=0,T.adaptWidth=!1,T.adaptHeight=!1,T.textWrapping=!1,T.shadowBlur=0,T.shadowOffsetX=0,T.shadowOffsetY=0,T.shadowColor=cn.Color4.Black(),T.hTextAlign="left",T.vTextAlign="bottom",T.paddingTop=0,T.paddingRight=0,T.paddingBottom=0,T.paddingLeft=0,T}return i(n,A),r([ee.field,s("design:type",Number)],n.prototype,"outlineWidth",void 0),r([ee.field,s("design:type",cn.Color4)],n.prototype,"outlineColor",void 0),r([ee.field,s("design:type",cn.Color4)],n.prototype,"color",void 0),r([ee.field,s("design:type",Number)],n.prototype,"fontSize",void 0),r([ee.field,s("design:type",Boolean)],n.prototype,"fontAutoSize",void 0),r([ee.component,s("design:type",Ji)],n.prototype,"font",void 0),r([ee.field,s("design:type",String)],n.prototype,"value",void 0),r([ee.field,s("design:type",Number)],n.prototype,"lineSpacing",void 0),r([ee.field,s("design:type",Number)],n.prototype,"lineCount",void 0),r([ee.field,s("design:type",Boolean)],n.prototype,"adaptWidth",void 0),r([ee.field,s("design:type",Boolean)],n.prototype,"adaptHeight",void 0),r([ee.field,s("design:type",Boolean)],n.prototype,"textWrapping",void 0),r([ee.field,s("design:type",Number)],n.prototype,"shadowBlur",void 0),r([ee.field,s("design:type",Number)],n.prototype,"shadowOffsetX",void 0),r([ee.field,s("design:type",Number)],n.prototype,"shadowOffsetY",void 0),r([ee.field,s("design:type",cn.Color4)],n.prototype,"shadowColor",void 0),r([ee.field,s("design:type",String)],n.prototype,"hTextAlign",void 0),r([ee.field,s("design:type",String)],n.prototype,"vTextAlign",void 0),r([ee.field,s("design:type",Number)],n.prototype,"paddingTop",void 0),r([ee.field,s("design:type",Number)],n.prototype,"paddingRight",void 0),r([ee.field,s("design:type",Number)],n.prototype,"paddingBottom",void 0),r([ee.field,s("design:type",Number)],n.prototype,"paddingLeft",void 0),r([N("engine.shape",T.CLASS_ID.UI_TEXT_SHAPE)],n)}(Dr),Gr=function(A){function n(T){var E=A.call(this,T)||this;return E.outlineWidth=0,E.outlineColor=cn.Color4.Black(),E.color=cn.Color4.Clear(),E.fontSize=10,E.value="",E.placeholder="",E.margin=10,E.hTextAlign="left",E.vTextAlign="bottom",E.focusedBackground=cn.Color4.Black(),E.textWrapping=!1,E.shadowBlur=0,E.shadowOffsetX=0,E.shadowOffsetY=0,E.shadowColor=cn.Color4.White(),E.paddingTop=0,E.paddingRight=0,E.paddingBottom=0,E.paddingLeft=0,E.onTextSubmit=null,E.onChanged=null,E.onFocus=null,E.onBlur=null,E.onTextChanged=new Nr((function(T){var A=T.value,S=A.value,O=A.isSubmit,k=E.dirty;if(E.value=S,E.dirty=k,O&&E.onTextSubmit){var B={text:S};E.onTextSubmit.callback(B)}else if(!O&&E.onChanged){var j={value:S,pointerId:T.pointerId};E.onChanged.callback(j)}})),E}return i(n,A),r([ee.field,s("design:type",Number)],n.prototype,"outlineWidth",void 0),r([ee.field,s("design:type",cn.Color4)],n.prototype,"outlineColor",void 0),r([ee.field,s("design:type",cn.Color4)],n.prototype,"color",void 0),r([ee.field,s("design:type",Number)],n.prototype,"fontSize",void 0),r([ee.component,s("design:type",Ji)],n.prototype,"font",void 0),r([ee.field,s("design:type",String)],n.prototype,"value",void 0),r([ee.field,s("design:type",String)],n.prototype,"placeholder",void 0),r([ee.field,s("design:type",Number)],n.prototype,"margin",void 0),r([ee.field,s("design:type",String)],n.prototype,"hTextAlign",void 0),r([ee.field,s("design:type",String)],n.prototype,"vTextAlign",void 0),r([ee.field,s("design:type",cn.Color4)],n.prototype,"focusedBackground",void 0),r([ee.field,s("design:type",Boolean)],n.prototype,"textWrapping",void 0),r([ee.field,s("design:type",Number)],n.prototype,"shadowBlur",void 0),r([ee.field,s("design:type",Number)],n.prototype,"shadowOffsetX",void 0),r([ee.field,s("design:type",Number)],n.prototype,"shadowOffsetY",void 0),r([ee.field,s("design:type",cn.Color4)],n.prototype,"shadowColor",void 0),r([ee.field,s("design:type",Number)],n.prototype,"paddingTop",void 0),r([ee.field,s("design:type",Number)],n.prototype,"paddingRight",void 0),r([ee.field,s("design:type",Number)],n.prototype,"paddingBottom",void 0),r([ee.field,s("design:type",Number)],n.prototype,"paddingLeft",void 0),r([nr.uuidEvent,s("design:type",Nr)],n.prototype,"onTextChanged",void 0),r([nr.uuidEvent,s("design:type",Object)],n.prototype,"onFocus",void 0),r([nr.uuidEvent,s("design:type",Object)],n.prototype,"onBlur",void 0),r([N("engine.shape",T.CLASS_ID.UI_INPUT_TEXT_SHAPE),s("design:paramtypes",[Object])],n)}(Dr),Wr=function(A){function n(T,E){var S=A.call(this,T)||this;return S.sourceLeft=0,S.sourceTop=0,S.sourceWidth=1,S.sourceHeight=1,S.paddingTop=0,S.paddingRight=0,S.paddingBottom=0,S.paddingLeft=0,S.sizeInPixels=!0,S.onClick=null,S.source=E,S}return i(n,A),r([ee.field,s("design:type",Number)],n.prototype,"sourceLeft",void 0),r([ee.field,s("design:type",Number)],n.prototype,"sourceTop",void 0),r([ee.field,s("design:type",Number)],n.prototype,"sourceWidth",void 0),r([ee.field,s("design:type",Number)],n.prototype,"sourceHeight",void 0),r([ee.component,s("design:type",Xi)],n.prototype,"source",void 0),r([ee.field,s("design:type",Number)],n.prototype,"paddingTop",void 0),r([ee.field,s("design:type",Number)],n.prototype,"paddingRight",void 0),r([ee.field,s("design:type",Number)],n.prototype,"paddingBottom",void 0),r([ee.field,s("design:type",Number)],n.prototype,"paddingLeft",void 0),r([ee.field,s("design:type",Boolean)],n.prototype,"sizeInPixels",void 0),r([nr.uuidEvent,s("design:type",Object)],n.prototype,"onClick",void 0),r([N("engine.shape",T.CLASS_ID.UI_IMAGE_SHAPE),s("design:paramtypes",[Dr,Xi])],n)}(Dr),Xr=function(A){function n(){var T=null!==A&&A.apply(this,arguments)||this;return T.valueX=0,T.valueY=0,T.backgroundColor=cn.Color4.Clear(),T.isHorizontal=!1,T.isVertical=!1,T.paddingTop=0,T.paddingRight=0,T.paddingBottom=0,T.paddingLeft=0,T.onChanged=null,T}return i(n,A),r([ee.field,s("design:type",Number)],n.prototype,"valueX",void 0),r([ee.field,s("design:type",Number)],n.prototype,"valueY",void 0),r([ee.field,s("design:type",cn.Color4)],n.prototype,"backgroundColor",void 0),r([ee.field,s("design:type",Boolean)],n.prototype,"isHorizontal",void 0),r([ee.field,s("design:type",Boolean)],n.prototype,"isVertical",void 0),r([ee.field,s("design:type",Number)],n.prototype,"paddingTop",void 0),r([ee.field,s("design:type",Number)],n.prototype,"paddingRight",void 0),r([ee.field,s("design:type",Number)],n.prototype,"paddingBottom",void 0),r([ee.field,s("design:type",Number)],n.prototype,"paddingLeft",void 0),r([nr.uuidEvent,s("design:type",Object)],n.prototype,"onChanged",void 0),r([N("engine.shape",T.CLASS_ID.UI_SLIDER_SHAPE)],n)}(Dr),Qr=function(A){function n(){var T=null!==A&&A.apply(this,arguments)||this;return T.useDummyModel=!1,T.talking=!1,T}var E;return i(n,A),E=n,n.Dummy=function(){var T=new E;return T.useDummyModel=!0,T},r([ee.field,s("design:type",String)],n.prototype,"id",void 0),r([ee.field,s("design:type",String)],n.prototype,"name",void 0),r([ee.field,s("design:type",String)],n.prototype,"expressionTriggerId",void 0),r([ee.field,s("design:type",Number)],n.prototype,"expressionTriggerTimestamp",void 0),r([ee.field,s("design:type",String)],n.prototype,"bodyShape",void 0),r([ee.field,s("design:type",Array)],n.prototype,"wearables",void 0),r([ee.field,s("design:type",Object)],n.prototype,"skinColor",void 0),r([ee.field,s("design:type",Object)],n.prototype,"hairColor",void 0),r([ee.field,s("design:type",Object)],n.prototype,"eyeColor",void 0),r([ee.field,s("design:type",Boolean)],n.prototype,"useDummyModel",void 0),r([ee.field,s("design:type",Boolean)],n.prototype,"talking",void 0),E=r([P("engine.avatarShape",T.CLASS_ID.AVATAR_SHAPE)],n)}(ee),$r=null,Jr=null,Zr=null;function Ri(){return Zr||(Zr=new Fe),Zr}var Yr=function(){function t(){var T=this;this.messageQueue=[],this.connected=!1,this.flushing=!1,function(){if(!Jr){(Jr=dcl.loadModule("@decentraland/CommunicationsController",{})).then((function(T){$r=T}));var T=Ri();dcl.subscribe("comms"),dcl.onEvent((function(A){"comms"===A.type&&T.notifyObservers(A.data)}))}return Jr}().then((function(){T.connected=!0,T.flush()}))}return t.prototype.on=function(T,A){return Ri().add((function(E){try{var S=JSON.parse(E.message);S.message===T&&A(S.payload,E.sender)}catch(E){dcl.error("Error parsing comms message "+(E.message||""),E)}}))},t.prototype.sendRaw=function(T){this.messageQueue.push(T),this.connected&&this.flush()},t.prototype.emit=function(T,A){var E=JSON.stringify({message:T,payload:A});this.sendRaw(E),Ri().notifyObservers({message:E,sender:"self"})},t.prototype.flush=function(){var T=this;if(0!==this.messageQueue.length&&this.connected&&$r&&!this.flushing){var A=this.messageQueue.shift();this.flushing=!0,dcl.callRpc($r.rpcHandle,"send",[A]).then((function(A){T.flushing=!1,T.flush()}),(function(A){T.flushing=!1,y("Error flushing MessageBus",A)}))}},t}(),Kr=new ve("scene");Kr.uuid="0";var to=new Ce(Kr);N.engine=to,"undefined"!=typeof dcl&&(to.addSystem(new an(dcl),1/0),mt(dcl)),to.addSystem(_r),to.addSystem(wr),to.addSystem(vr),T.AVATAR_OBSERVABLE="AVATAR_OBSERVABLE",T.Angle=cn.Angle,T.AnimationState=Ai,T.Animator=Qi,T.Arc2=cn.Arc2,T.AttachToAvatar=ki,T.Attachable=A,T.AudioClip=br,T.AudioSource=Tr,T.AudioStream=xr,T.AvatarModifierArea=Oi,T.AvatarShape=Qr,T.AvatarTexture=lr,T.Axis=cn.Axis,T.BasicMaterial=er,T.BezierCurve=cn.BezierCurve,T.Billboard=zi,T.BoxShape=Bi,T.Camera=dr,T.CameraModeArea=pr,T.CircleShape=Ui,T.Color3=cn.Color3,T.Color4=cn.Color4,T.Component=P,T.ComponentAdded=j,T.ComponentGroup=le,T.ComponentRemoved=B,T.ConeShape=Hi,T.Curve3=cn.Curve3,T.CylinderShape=ji,T.DEG2RAD=cn.DEG2RAD,T.DisposableComponent=N,T.DisposableComponentCreated=Zt,T.DisposableComponentRemoved=Yt,T.DisposableComponentUpdated=Kt,T.Engine=Ce,T.Entity=ve,T.Epsilon=cn.Epsilon,T.EventConstructor=x,T.EventManager=O,T.Font=Ji,T.Frustum=cn.Frustum,T.GLTFShape=Vi,T.Gizmos=Er,T.GlobalPointerDown=Si,T.GlobalPointerUp=Mi,T.Input=Ii,T.Material=tr,T.Matrix=cn.Matrix,T.MessageBus=Yr,T.MultiObserver=Pe,T.NFTShape=Wi,T.OBJShape=$i,T.Observable=Fe,T.ObservableComponent=ee,T.Observer=Y,T.ObserverEventState=Ne,T.OnAnimationEnd=or,T.OnBlur=Mr,T.OnChanged=Nr,T.OnClick=Or,T.OnEnter=Ir,T.OnFocus=Sr,T.OnGizmoEvent=Cr,T.OnPointerDown=Pr,T.OnPointerHoverEnter=kr,T.OnPointerHoverExit=zr,T.OnPointerLock=rr,T.OnPointerUUIDEvent=ir,T.OnPointerUp=Fr,T.OnTextSubmit=Rr,T.OnUUIDEvent=nr,T.Orientation=cn.Orientation,T.ParentChanged=_t,T.Path2=cn.Path2,T.Path3D=cn.Path3D,T.PhysicsCast=yr,T.Plane=cn.Plane,T.PlaneShape=qi,T.PointerEvent=qe,T.PointerEventComponent=Ke,T.PointerEventSystem=mr,T.Quaternion=cn.Quaternion,T.RAD2DEG=cn.RAD2DEG,T.RaycastEventSystem=fr,T.RaycastResponse=Ue,T.Scalar=cn.Scalar,T.Shape=Di,T.Size=cn.Size,T.SmartItem=sr,T.Space=cn.Space,T.SphereShape=Li,T.Subscription=en,T.TextShape=Yi,T.Texture=Xi,T.ToGammaSpace=cn.ToGammaSpace,T.ToLinearSpace=cn.ToLinearSpace,T.Transform=Pi,T.UIButton=jr,T.UICanvas=Ur,T.UIContainerRect=qr,T.UIContainerStack=Hr,T.UIFullScreen=Br,T.UIImage=Wr,T.UIInputText=Gr,T.UIScrollRect=Xr,T.UIShape=Dr,T.UIText=Vr,T.UIValue=Pt,T.UIWorldSpace=Lr,T.UUIDEvent=Le,T.UUIDEventSystem=gr,T.Vector2=cn.Vector2,T.Vector3=cn.Vector3,T.Vector4=cn.Vector4,T.VideoClip=ar,T.VideoTexture=cr,T._initEventObservables=mt,T.buildArray=function(T,A){for(var E=[],S=0;S<T;++S)E.push(A());return E},T.engine=to,T.error=y,T.executeTask=G,T.getComponentClassId=L,T.getComponentId=D,T.getComponentName=F,T.getMessageObserver=Ri,T.isDisposableComponent=U,T.log=c,T.newId=f,T.onCameraModeChangedObservable=He,T.onEnterScene=We,T.onEnterSceneObservable=Ge,T.onIdleStateChangedObservable=Ve,T.onLeaveScene=Qe,T.onLeaveSceneObservable=Xe,T.onPlayerClickedObservable=sn,T.onPlayerConnectedObservable=nn,T.onPlayerDisconnectedObservable=rn,T.onPlayerExpressionObservable=Je,T.onPointerLockedStateChange=Ze,T.onProfileChanged=tn,T.onRealmChangedObservable=on,T.onSceneReadyObservable=$e,T.onVideoEvent=Ye,T.openExternalURL=function(T){"undefined"!=typeof dcl?dcl.openExternalUrl(T):y("ERROR: openExternalURL dcl is undefined")},T.openNFTDialog=function(T,A){if(void 0===A&&(A=null),"undefined"!=typeof dcl){var E=T.match(/ethereum:\/\/(.+)\/(.+)/);if(!E||E.length<3)return;dcl.openNFTDialog(E[1],E[2],A)}else y("ERROR: openNFTDialog dcl is undefined")},T.pointerEventSystem=wr,T.raycastEventSystem=vr,T.teleportTo=function(T){var A;A=[T],void 0===Re&&"undefined"!=typeof dcl&&(Re=dcl.loadModule("@decentraland/UserActionModule",{})),void 0!==Re&&"undefined"!=typeof dcl&&Re.then((function(T){dcl.callRpc(T.rpcHandle,"requestTeleport",A)}))},T.uuid=m,T.uuidEventSystem=_r,Object.defineProperty(T,"__esModule",{value:!0})}(this.self=this.self||{}),function(T,A){"object"==typeof exports&&"undefined"!=typeof module?A(exports):"function"==typeof define&&define.amd?define("eth-connect",["exports"],A):A((T="undefined"!=typeof globalThis?globalThis:T||self).ethconnect={})}(this,(function(T){function e(T){if(T.jsonrpc="2.0",!T.id||"number"!=typeof T.id||Math.floor(T.id)!==T.id)throw new Error(`Invalid RPC message(invalid id) message: ${JSON.stringify(T)}`);if(!T.method||"string"!=typeof T.method||0===T.method.trim().length)throw new Error(`Invalid RPC message(invalid method) message: ${JSON.stringify(T)}`);if(!T.params||"object"!=typeof T.params)throw new Error(`Invalid RPC message(invalid params) message: ${JSON.stringify(T)}`);return T}function n(T,A){return T(A={exports:{}},A.exports),A.exports}var A,E=n((function(T,A){function n(){let T,A;const E=new Promise(((S,O)=>{T=T=>{S(T),E.isPending=!1},A=T=>{O(T),E.isPending=!1}})).catch((T=>Promise.reject(T)));return E.resolve=T,E.reject=A,"finally"in E||(E.finally=T=>{E.then(T),E.catch(T)}),E.isPending=!0,E}Object.defineProperty(A,"__esModule",{value:!0}),A.future=n,A.default=n}));(A=E)&&A.__esModule&&Object.prototype.hasOwnProperty.call(A,"default")&&A.default;var S=E.future,O="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function a(){throw new Error("setTimeout has not been defined")}function c(){throw new Error("clearTimeout has not been defined")}var k=a,B=c;function h(T){if(k===setTimeout)return setTimeout(T,0);if((k===a||!k)&&setTimeout)return k=setTimeout,setTimeout(T,0);try{return k(T,0)}catch(A){try{return k.call(null,T,0)}catch(A){return k.call(this,T,0)}}}"function"==typeof O.setTimeout&&(k=setTimeout),"function"==typeof O.clearTimeout&&(B=clearTimeout);var j,_t=[],Pt=!1,Ft=-1;function m(){Pt&&j&&(Pt=!1,j.length?_t=j.concat(_t):Ft=-1,_t.length&&y())}function y(){if(!Pt){var T=h(m);Pt=!0;for(var A=_t.length;A;){for(j=_t,_t=[];++Ft<A;)j&&j[Ft].run();Ft=-1,A=_t.length}j=null,Pt=!1,function(T){if(B===clearTimeout)return clearTimeout(T);if((B===c||!B)&&clearTimeout)return B=clearTimeout,clearTimeout(T);try{B(T)}catch(A){try{return B.call(null,T)}catch(A){return B.call(this,T)}}}(T)}}function w(T,A){this.fun=T,this.array=A}function v(){}w.prototype.run=function(){this.fun.apply(null,this.array)};var Lt=v,Ut=v,Zt=v,Yt=v,Kt=v,ee=v,le=v,ve=O.performance||{},Ce=ve.now||ve.mozNow||ve.msNow||ve.oNow||ve.webkitNow||function(){return(new Date).getTime()},Se=new Date,Re={nextTick:function(T){var A=new Array(arguments.length-1);if(arguments.length>1)for(var E=1;E<arguments.length;E++)A[E-1]=arguments[E];_t.push(new w(T,A)),1!==_t.length||Pt||h(y)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:Lt,addListener:Ut,once:Zt,off:Yt,removeListener:Kt,removeAllListeners:ee,emit:le,binding:function(T){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(T){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(T){var A=.001*Ce.call(ve),E=Math.floor(A),S=Math.floor(A%1*1e9);return T&&(E-=T[0],(S-=T[1])<0&&(E--,S+=1e9)),[E,S]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-Se)/1e3}},Ie=n((function(T){!function(){var A="input is invalid type",E="object"==typeof window,S=E?window:{};S.JS_SHA3_NO_WINDOW&&(E=!1);var k=!E&&"object"==typeof self;!S.JS_SHA3_NO_NODE_JS&&"object"==typeof Re&&Re.versions&&Re.versions.node?S=O:k&&(S=self);var B=!S.JS_SHA3_NO_COMMON_JS&&T.exports,j=!S.JS_SHA3_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,_t="0123456789abcdef".split(""),Pt=[4,1024,262144,67108864],Ft=[0,8,16,24],Lt=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],Ut=[224,256,384,512],Zt=[128,256],Yt=["hex","buffer","arrayBuffer","array","digest"],Kt={128:168,256:136};!S.JS_SHA3_NO_NODE_JS&&Array.isArray||(Array.isArray=function(T){return"[object Array]"===Object.prototype.toString.call(T)}),!j||!S.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(T){return"object"==typeof T&&T.buffer&&T.buffer.constructor===ArrayBuffer});for(var m=function(T,A,E){return function(S){return new C(T,A,T).update(S)[E]()}},y=function(T,A,E){return function(S,O){return new C(T,A,O).update(S)[E]()}},w=function(T,A,E){return function(A,S,O,k){return le["cshake"+T].update(A,S,O,k)[E]()}},v=function(T,A,E){return function(A,S,O,k){return le["kmac"+T].update(A,S,O,k)[E]()}},b=function(T,A,E,S){for(var O=0;O<Yt.length;++O){var k=Yt[O];T[k]=A(E,S,k)}return T},_=function(T,A){var E=m(T,A,"hex");return E.create=function(){return new C(T,A,T)},E.update=function(T){return E.create().update(T)},b(E,m,T,A)},ee=[{name:"keccak",padding:[1,256,65536,16777216],bits:Ut,createMethod:_},{name:"sha3",padding:[6,1536,393216,100663296],bits:Ut,createMethod:_},{name:"shake",padding:[31,7936,2031616,520093696],bits:Zt,createMethod:function(T,A){var E=y(T,A,"hex");return E.create=function(E){return new C(T,A,E)},E.update=function(T,A){return E.create(A).update(T)},b(E,y,T,A)}},{name:"cshake",padding:Pt,bits:Zt,createMethod:function(T,A){var E=Kt[T],S=w(T,0,"hex");return S.create=function(S,O,k){return O||k?new C(T,A,S).bytepad([O,k],E):le["shake"+T].create(S)},S.update=function(T,A,E,O){return S.create(A,E,O).update(T)},b(S,w,T,A)}},{name:"kmac",padding:Pt,bits:Zt,createMethod:function(T,A){var E=Kt[T],S=v(T,0,"hex");return S.create=function(S,O,k){return new I(T,A,O).bytepad(["KMAC",k],E).bytepad([S],E)},S.update=function(T,A,E,O){return S.create(T,E,O).update(A)},b(S,v,T,A)}}],le={},ve=[],Ce=0;Ce<ee.length;++Ce)for(var Se=ee[Ce],Ie=Se.bits,Ne=0;Ne<Ie.length;++Ne){var Pe=Se.name+"_"+Ie[Ne];if(ve.push(Pe),le[Pe]=Se.createMethod(Ie[Ne],Se.padding),"sha3"!==Se.name){var Fe=Se.name+Ie[Ne];ve.push(Fe),le[Fe]=le[Pe]}}function C(T,A,E){this.blocks=[],this.s=[],this.padding=A,this.outputBits=E,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(T<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=E>>5,this.extraBytes=(31&E)>>3;for(var S=0;S<50;++S)this.s[S]=0}function I(T,A,E){C.call(this,T,A,E)}C.prototype.update=function(T){if(this.finalized)throw new Error("finalize already called");var E,S=typeof T;if("string"!==S){if("object"!==S)throw new Error(A);if(null===T)throw new Error(A);if(j&&T.constructor===ArrayBuffer)T=new Uint8Array(T);else if(!(Array.isArray(T)||j&&ArrayBuffer.isView(T)))throw new Error(A);E=!0}for(var O,k,B=this.blocks,_t=this.byteCount,Pt=T.length,Lt=this.blockCount,Ut=0,Zt=this.s;Ut<Pt;){if(this.reset)for(this.reset=!1,B[0]=this.block,O=1;O<Lt+1;++O)B[O]=0;if(E)for(O=this.start;Ut<Pt&&O<_t;++Ut)B[O>>2]|=T[Ut]<<Ft[3&O++];else for(O=this.start;Ut<Pt&&O<_t;++Ut)(k=T.charCodeAt(Ut))<128?B[O>>2]|=k<<Ft[3&O++]:k<2048?(B[O>>2]|=(192|k>>6)<<Ft[3&O++],B[O>>2]|=(128|63&k)<<Ft[3&O++]):k<55296||k>=57344?(B[O>>2]|=(224|k>>12)<<Ft[3&O++],B[O>>2]|=(128|k>>6&63)<<Ft[3&O++],B[O>>2]|=(128|63&k)<<Ft[3&O++]):(k=65536+((1023&k)<<10|1023&T.charCodeAt(++Ut)),B[O>>2]|=(240|k>>18)<<Ft[3&O++],B[O>>2]|=(128|k>>12&63)<<Ft[3&O++],B[O>>2]|=(128|k>>6&63)<<Ft[3&O++],B[O>>2]|=(128|63&k)<<Ft[3&O++]);if(this.lastByteIndex=O,O>=_t){for(this.start=O-_t,this.block=B[Lt],O=0;O<Lt;++O)Zt[O]^=B[O];P(Zt),this.reset=!0}else this.start=O}return this},C.prototype.encode=function(T,A){var E=255&T,S=1,O=[E];for(E=255&(T>>=8);E>0;)O.unshift(E),E=255&(T>>=8),++S;return A?O.push(S):O.unshift(S),this.update(O),O.length},C.prototype.encodeString=function(T){var E,S=typeof T;if("string"!==S){if("object"!==S)throw new Error(A);if(null===T)throw new Error(A);if(j&&T.constructor===ArrayBuffer)T=new Uint8Array(T);else if(!(Array.isArray(T)||j&&ArrayBuffer.isView(T)))throw new Error(A);E=!0}var O=0,k=T.length;if(E)O=k;else for(var B=0;B<T.length;++B){var _t=T.charCodeAt(B);_t<128?O+=1:_t<2048?O+=2:_t<55296||_t>=57344?O+=3:(_t=65536+((1023&_t)<<10|1023&T.charCodeAt(++B)),O+=4)}return O+=this.encode(8*O),this.update(T),O},C.prototype.bytepad=function(T,A){for(var E=this.encode(A),S=0;S<T.length;++S)E+=this.encodeString(T[S]);var O=A-E%A,k=[];return k.length=O,this.update(k),this},C.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var T=this.blocks,A=this.lastByteIndex,E=this.blockCount,S=this.s;if(T[A>>2]|=this.padding[3&A],this.lastByteIndex===this.byteCount)for(T[0]=T[E],A=1;A<E+1;++A)T[A]=0;for(T[E-1]|=2147483648,A=0;A<E;++A)S[A]^=T[A];P(S)}},C.prototype.toString=C.prototype.hex=function(){this.finalize();for(var T,A=this.blockCount,E=this.s,S=this.outputBlocks,O=this.extraBytes,k=0,B=0,j="";B<S;){for(k=0;k<A&&B<S;++k,++B)T=E[k],j+=_t[T>>4&15]+_t[15&T]+_t[T>>12&15]+_t[T>>8&15]+_t[T>>20&15]+_t[T>>16&15]+_t[T>>28&15]+_t[T>>24&15];B%A==0&&(P(E),k=0)}return O&&(T=E[k],j+=_t[T>>4&15]+_t[15&T],O>1&&(j+=_t[T>>12&15]+_t[T>>8&15]),O>2&&(j+=_t[T>>20&15]+_t[T>>16&15])),j},C.prototype.arrayBuffer=function(){this.finalize();var T,A=this.blockCount,E=this.s,S=this.outputBlocks,O=this.extraBytes,k=0,B=0,j=this.outputBits>>3;T=O?new ArrayBuffer(S+1<<2):new ArrayBuffer(j);for(var _t=new Uint32Array(T);B<S;){for(k=0;k<A&&B<S;++k,++B)_t[B]=E[k];B%A==0&&P(E)}return O&&(_t[k]=E[k],T=T.slice(0,j)),T},C.prototype.buffer=C.prototype.arrayBuffer,C.prototype.digest=C.prototype.array=function(){this.finalize();for(var T,A,E=this.blockCount,S=this.s,O=this.outputBlocks,k=this.extraBytes,B=0,j=0,_t=[];j<O;){for(B=0;B<E&&j<O;++B,++j)T=j<<2,A=S[B],_t[T]=255&A,_t[T+1]=A>>8&255,_t[T+2]=A>>16&255,_t[T+3]=A>>24&255;j%E==0&&P(S)}return k&&(T=j<<2,A=S[B],_t[T]=255&A,k>1&&(_t[T+1]=A>>8&255),k>2&&(_t[T+2]=A>>16&255)),_t},I.prototype=new C,I.prototype.finalize=function(){return this.encode(this.outputBits,!0),C.prototype.finalize.call(this)};var P=function(T){var A,E,S,O,k,B,j,_t,Pt,Ft,Ut,Zt,Yt,Kt,ee,le,ve,Ce,Se,Re,Ie,Ne,Pe,Fe,Le,Ue,qe,He,Ve,Ge,We,Xe,Qe,$e,Je,Ze,Ye,tn,nn,rn,on,sn,an,un,cn,pn,ln,dn,hn,yn,fn,mn,gn,vn,wn,_n,bn,Tn,xn,An,Cn,En,Sn;for(S=0;S<48;S+=2)O=T[0]^T[10]^T[20]^T[30]^T[40],k=T[1]^T[11]^T[21]^T[31]^T[41],B=T[2]^T[12]^T[22]^T[32]^T[42],j=T[3]^T[13]^T[23]^T[33]^T[43],_t=T[4]^T[14]^T[24]^T[34]^T[44],Pt=T[5]^T[15]^T[25]^T[35]^T[45],Ft=T[6]^T[16]^T[26]^T[36]^T[46],Ut=T[7]^T[17]^T[27]^T[37]^T[47],A=(Zt=T[8]^T[18]^T[28]^T[38]^T[48])^(B<<1|j>>>31),E=(Yt=T[9]^T[19]^T[29]^T[39]^T[49])^(j<<1|B>>>31),T[0]^=A,T[1]^=E,T[10]^=A,T[11]^=E,T[20]^=A,T[21]^=E,T[30]^=A,T[31]^=E,T[40]^=A,T[41]^=E,A=O^(_t<<1|Pt>>>31),E=k^(Pt<<1|_t>>>31),T[2]^=A,T[3]^=E,T[12]^=A,T[13]^=E,T[22]^=A,T[23]^=E,T[32]^=A,T[33]^=E,T[42]^=A,T[43]^=E,A=B^(Ft<<1|Ut>>>31),E=j^(Ut<<1|Ft>>>31),T[4]^=A,T[5]^=E,T[14]^=A,T[15]^=E,T[24]^=A,T[25]^=E,T[34]^=A,T[35]^=E,T[44]^=A,T[45]^=E,A=_t^(Zt<<1|Yt>>>31),E=Pt^(Yt<<1|Zt>>>31),T[6]^=A,T[7]^=E,T[16]^=A,T[17]^=E,T[26]^=A,T[27]^=E,T[36]^=A,T[37]^=E,T[46]^=A,T[47]^=E,A=Ft^(O<<1|k>>>31),E=Ut^(k<<1|O>>>31),T[8]^=A,T[9]^=E,T[18]^=A,T[19]^=E,T[28]^=A,T[29]^=E,T[38]^=A,T[39]^=E,T[48]^=A,T[49]^=E,Kt=T[0],ee=T[1],pn=T[11]<<4|T[10]>>>28,ln=T[10]<<4|T[11]>>>28,He=T[20]<<3|T[21]>>>29,Ve=T[21]<<3|T[20]>>>29,An=T[31]<<9|T[30]>>>23,Cn=T[30]<<9|T[31]>>>23,sn=T[40]<<18|T[41]>>>14,an=T[41]<<18|T[40]>>>14,$e=T[2]<<1|T[3]>>>31,Je=T[3]<<1|T[2]>>>31,le=T[13]<<12|T[12]>>>20,ve=T[12]<<12|T[13]>>>20,dn=T[22]<<10|T[23]>>>22,hn=T[23]<<10|T[22]>>>22,Ge=T[33]<<13|T[32]>>>19,We=T[32]<<13|T[33]>>>19,En=T[42]<<2|T[43]>>>30,Sn=T[43]<<2|T[42]>>>30,vn=T[5]<<30|T[4]>>>2,wn=T[4]<<30|T[5]>>>2,Ze=T[14]<<6|T[15]>>>26,Ye=T[15]<<6|T[14]>>>26,Ce=T[25]<<11|T[24]>>>21,Se=T[24]<<11|T[25]>>>21,yn=T[34]<<15|T[35]>>>17,fn=T[35]<<15|T[34]>>>17,Xe=T[45]<<29|T[44]>>>3,Qe=T[44]<<29|T[45]>>>3,Fe=T[6]<<28|T[7]>>>4,Le=T[7]<<28|T[6]>>>4,_n=T[17]<<23|T[16]>>>9,bn=T[16]<<23|T[17]>>>9,tn=T[26]<<25|T[27]>>>7,nn=T[27]<<25|T[26]>>>7,Re=T[36]<<21|T[37]>>>11,Ie=T[37]<<21|T[36]>>>11,mn=T[47]<<24|T[46]>>>8,gn=T[46]<<24|T[47]>>>8,un=T[8]<<27|T[9]>>>5,cn=T[9]<<27|T[8]>>>5,Ue=T[18]<<20|T[19]>>>12,qe=T[19]<<20|T[18]>>>12,Tn=T[29]<<7|T[28]>>>25,xn=T[28]<<7|T[29]>>>25,rn=T[38]<<8|T[39]>>>24,on=T[39]<<8|T[38]>>>24,Ne=T[48]<<14|T[49]>>>18,Pe=T[49]<<14|T[48]>>>18,T[0]=Kt^~le&Ce,T[1]=ee^~ve&Se,T[10]=Fe^~Ue&He,T[11]=Le^~qe&Ve,T[20]=$e^~Ze&tn,T[21]=Je^~Ye&nn,T[30]=un^~pn&dn,T[31]=cn^~ln&hn,T[40]=vn^~_n&Tn,T[41]=wn^~bn&xn,T[2]=le^~Ce&Re,T[3]=ve^~Se&Ie,T[12]=Ue^~He&Ge,T[13]=qe^~Ve&We,T[22]=Ze^~tn&rn,T[23]=Ye^~nn&on,T[32]=pn^~dn&yn,T[33]=ln^~hn&fn,T[42]=_n^~Tn&An,T[43]=bn^~xn&Cn,T[4]=Ce^~Re&Ne,T[5]=Se^~Ie&Pe,T[14]=He^~Ge&Xe,T[15]=Ve^~We&Qe,T[24]=tn^~rn&sn,T[25]=nn^~on&an,T[34]=dn^~yn&mn,T[35]=hn^~fn&gn,T[44]=Tn^~An&En,T[45]=xn^~Cn&Sn,T[6]=Re^~Ne&Kt,T[7]=Ie^~Pe&ee,T[16]=Ge^~Xe&Fe,T[17]=We^~Qe&Le,T[26]=rn^~sn&$e,T[27]=on^~an&Je,T[36]=yn^~mn&un,T[37]=fn^~gn&cn,T[46]=An^~En&vn,T[47]=Cn^~Sn&wn,T[8]=Ne^~Kt&le,T[9]=Pe^~ee&ve,T[18]=Xe^~Fe&Ue,T[19]=Qe^~Le&qe,T[28]=sn^~$e&Ze,T[29]=an^~Je&Ye,T[38]=mn^~un&pn,T[39]=gn^~cn&ln,T[48]=En^~vn&_n,T[49]=Sn^~wn&bn,T[0]^=Lt[S],T[1]^=Lt[S+1]};if(B)T.exports=le;else for(Ce=0;Ce<ve.length;++Ce)S[ve[Ce]]=le[ve[Ce]]}()}));Ie.keccak_224,Ie.keccak224,Ie.keccak_256;var Ne=Ie.keccak256;Ie.keccak_384,Ie.keccak384,Ie.keccak_512,Ie.keccak512,Ie.sha3_224,Ie.sha3_256,Ie.sha3_384,Ie.sha3_512,Ie.shake_128,Ie.shake128,Ie.shake_256,Ie.shake256,Ie.cshake_128,Ie.cshake128,Ie.cshake_256,Ie.cshake256,Ie.kmac_128,Ie.kmac128,Ie.kmac_256,Ie.kmac256;var Pe=n((function(T){!function(A){var E,S=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,O=Math.ceil,k=Math.floor,B="[BigNumber Error] ",j=B+"Number primitive has more than 15 significant digits: ",_t=1e14,Pt=14,Ft=9007199254740991,Lt=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],Ut=1e7,Zt=1e9;function d(T){var A=0|T;return T>0||T===A?A:A-1}function g(T){for(var A,E,S=1,O=T.length,k=T[0]+"";S<O;){for(A=T[S++]+"",E=Pt-A.length;E--;A="0"+A);k+=A}for(O=k.length;48===k.charCodeAt(--O););return k.slice(0,O+1||1)}function m(T,A){var E,S,O=T.c,k=A.c,B=T.s,j=A.s,_t=T.e,Pt=A.e;if(!B||!j)return null;if(E=O&&!O[0],S=k&&!k[0],E||S)return E?S?0:-j:B;if(B!=j)return B;if(E=B<0,S=_t==Pt,!O||!k)return S?0:!O^E?1:-1;if(!S)return _t>Pt^E?1:-1;for(j=(_t=O.length)<(Pt=k.length)?_t:Pt,B=0;B<j;B++)if(O[B]!=k[B])return O[B]>k[B]^E?1:-1;return _t==Pt?0:_t>Pt^E?1:-1}function y(T,A,E,S){if(T<A||T>E||T!==k(T))throw Error(B+(S||"Argument")+("number"==typeof T?T<A||T>E?" out of range: ":" not an integer: ":" not a primitive number: ")+String(T))}function w(T){var A=T.c.length-1;return d(T.e/Pt)==A&&T.c[A]%2!=0}function v(T,A){return(T.length>1?T.charAt(0)+"."+T.slice(1):T)+(A<0?"e":"e+")+A}function b(T,A,E){var S,O;if(A<0){for(O=E+".";++A;O+=E);T=O+T}else if(++A>(S=T.length)){for(O=E,A-=S;--A;O+=E);T+=O}else A<S&&(T=T.slice(0,A)+"."+T.slice(A));return T}(E=function t(T){var A,E,Yt,Kt,ee,le,ve,Ce,Se,Re,Ie=H.prototype={constructor:H,toString:null,valueOf:null},Ne=new H(1),Pe=20,Fe=4,Le=-7,Ue=21,qe=-1e7,He=1e7,Ve=!1,Ge=1,We=0,Xe={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},Qe="0123456789abcdefghijklmnopqrstuvwxyz";function H(T,A){var O,B,_t,Lt,Ut,Zt,Kt,ee,le=this;if(!(le instanceof H))return new H(T,A);if(null==A){if(T&&!0===T._isBigNumber)return le.s=T.s,void(!T.c||T.e>He?le.c=le.e=null:T.e<qe?le.c=[le.e=0]:(le.e=T.e,le.c=T.c.slice()));if((Zt="number"==typeof T)&&0*T==0){if(le.s=1/T<0?(T=-T,-1):1,T===~~T){for(Lt=0,Ut=T;Ut>=10;Ut/=10,Lt++);return void(Lt>He?le.c=le.e=null:(le.e=Lt,le.c=[T]))}ee=String(T)}else{if(!S.test(ee=String(T)))return Yt(le,ee,Zt);le.s=45==ee.charCodeAt(0)?(ee=ee.slice(1),-1):1}(Lt=ee.indexOf("."))>-1&&(ee=ee.replace(".","")),(Ut=ee.search(/e/i))>0?(Lt<0&&(Lt=Ut),Lt+=+ee.slice(Ut+1),ee=ee.substring(0,Ut)):Lt<0&&(Lt=ee.length)}else{if(y(A,2,Qe.length,"Base"),10==A)return W(le=new H(T),Pe+le.e+1,Fe);if(ee=String(T),Zt="number"==typeof T){if(0*T!=0)return Yt(le,ee,Zt,A);if(le.s=1/T<0?(ee=ee.slice(1),-1):1,H.DEBUG&&ee.replace(/^0\.0*|\./,"").length>15)throw Error(j+T)}else le.s=45===ee.charCodeAt(0)?(ee=ee.slice(1),-1):1;for(O=Qe.slice(0,A),Lt=Ut=0,Kt=ee.length;Ut<Kt;Ut++)if(O.indexOf(B=ee.charAt(Ut))<0){if("."==B){if(Ut>Lt){Lt=Kt;continue}}else if(!_t&&(ee==ee.toUpperCase()&&(ee=ee.toLowerCase())||ee==ee.toLowerCase()&&(ee=ee.toUpperCase()))){_t=!0,Ut=-1,Lt=0;continue}return Yt(le,String(T),Zt,A)}Zt=!1,(Lt=(ee=E(ee,A,10,le.s)).indexOf("."))>-1?ee=ee.replace(".",""):Lt=ee.length}for(Ut=0;48===ee.charCodeAt(Ut);Ut++);for(Kt=ee.length;48===ee.charCodeAt(--Kt););if(ee=ee.slice(Ut,++Kt)){if(Kt-=Ut,Zt&&H.DEBUG&&Kt>15&&(T>Ft||T!==k(T)))throw Error(j+le.s*T);if((Lt=Lt-Ut-1)>He)le.c=le.e=null;else if(Lt<qe)le.c=[le.e=0];else{if(le.e=Lt,le.c=[],Ut=(Lt+1)%Pt,Lt<0&&(Ut+=Pt),Ut<Kt){for(Ut&&le.c.push(+ee.slice(0,Ut)),Kt-=Pt;Ut<Kt;)le.c.push(+ee.slice(Ut,Ut+=Pt));Ut=Pt-(ee=ee.slice(Ut)).length}else Ut-=Kt;for(;Ut--;ee+="0");le.c.push(+ee)}}else le.c=[le.e=0]}function G(T,A,E,S){var O,k,B,j,_t;if(null==E?E=Fe:y(E,0,8),!T.c)return T.toString();if(O=T.c[0],B=T.e,null==A)_t=g(T.c),_t=1==S||2==S&&(B<=Le||B>=Ue)?v(_t,B):b(_t,B,"0");else if(k=(T=W(new H(T),A,E)).e,j=(_t=g(T.c)).length,1==S||2==S&&(A<=k||k<=Le)){for(;j<A;_t+="0",j++);_t=v(_t,k)}else if(A-=B,_t=b(_t,k,"0"),k+1>j){if(--A>0)for(_t+=".";A--;_t+="0");}else if((A+=k-j)>0)for(k+1==j&&(_t+=".");A--;_t+="0");return T.s<0&&O?"-"+_t:_t}function z(T,A){for(var E,S=1,O=new H(T[0]);S<T.length;S++){if(!(E=new H(T[S])).s){O=E;break}A.call(O,E)&&(O=E)}return O}function J(T,A,E){for(var S=1,O=A.length;!A[--O];A.pop());for(O=A[0];O>=10;O/=10,S++);return(E=S+E*Pt-1)>He?T.c=T.e=null:E<qe?T.c=[T.e=0]:(T.e=E,T.c=A),T}function W(T,A,E,S){var B,j,Ft,Ut,Zt,Yt,Kt,ee=T.c,le=Lt;if(ee){t:{for(B=1,Ut=ee[0];Ut>=10;Ut/=10,B++);if((j=A-B)<0)j+=Pt,Ft=A,Kt=(Zt=ee[Yt=0])/le[B-Ft-1]%10|0;else if((Yt=O((j+1)/Pt))>=ee.length){if(!S)break t;for(;ee.length<=Yt;ee.push(0));Zt=Kt=0,B=1,Ft=(j%=Pt)-Pt+1}else{for(Zt=Ut=ee[Yt],B=1;Ut>=10;Ut/=10,B++);Kt=(Ft=(j%=Pt)-Pt+B)<0?0:Zt/le[B-Ft-1]%10|0}if(S=S||A<0||null!=ee[Yt+1]||(Ft<0?Zt:Zt%le[B-Ft-1]),S=E<4?(Kt||S)&&(0==E||E==(T.s<0?3:2)):Kt>5||5==Kt&&(4==E||S||6==E&&(j>0?Ft>0?Zt/le[B-Ft]:0:ee[Yt-1])%10&1||E==(T.s<0?8:7)),A<1||!ee[0])return ee.length=0,S?(A-=T.e+1,ee[0]=le[(Pt-A%Pt)%Pt],T.e=-A||0):ee[0]=T.e=0,T;if(0==j?(ee.length=Yt,Ut=1,Yt--):(ee.length=Yt+1,Ut=le[Pt-j],ee[Yt]=Ft>0?k(Zt/le[B-Ft]%le[Ft])*Ut:0),S)for(;;){if(0==Yt){for(j=1,Ft=ee[0];Ft>=10;Ft/=10,j++);for(Ft=ee[0]+=Ut,Ut=1;Ft>=10;Ft/=10,Ut++);j!=Ut&&(T.e++,ee[0]==_t&&(ee[0]=1));break}if(ee[Yt]+=Ut,ee[Yt]!=_t)break;ee[Yt--]=0,Ut=1}for(j=ee.length;0===ee[--j];ee.pop());}T.e>He?T.c=T.e=null:T.e<qe&&(T.c=[T.e=0])}return T}function V(T){var A,E=T.e;return null===E?T.toString():(A=g(T.c),A=E<=Le||E>=Ue?v(A,E):b(A,E,"0"),T.s<0?"-"+A:A)}return H.clone=t,H.ROUND_UP=0,H.ROUND_DOWN=1,H.ROUND_CEIL=2,H.ROUND_FLOOR=3,H.ROUND_HALF_UP=4,H.ROUND_HALF_DOWN=5,H.ROUND_HALF_EVEN=6,H.ROUND_HALF_CEIL=7,H.ROUND_HALF_FLOOR=8,H.EUCLID=9,H.config=H.set=function(T){var A,E;if(null!=T){if("object"!=typeof T)throw Error(B+"Object expected: "+T);if(T.hasOwnProperty(A="DECIMAL_PLACES")&&(y(E=T[A],0,Zt,A),Pe=E),T.hasOwnProperty(A="ROUNDING_MODE")&&(y(E=T[A],0,8,A),Fe=E),T.hasOwnProperty(A="EXPONENTIAL_AT")&&((E=T[A])&&E.pop?(y(E[0],-Zt,0,A),y(E[1],0,Zt,A),Le=E[0],Ue=E[1]):(y(E,-Zt,Zt,A),Le=-(Ue=E<0?-E:E))),T.hasOwnProperty(A="RANGE"))if((E=T[A])&&E.pop)y(E[0],-Zt,-1,A),y(E[1],1,Zt,A),qe=E[0],He=E[1];else{if(y(E,-Zt,Zt,A),!E)throw Error(B+A+" cannot be zero: "+E);qe=-(He=E<0?-E:E)}if(T.hasOwnProperty(A="CRYPTO")){if((E=T[A])!==!!E)throw Error(B+A+" not true or false: "+E);if(E){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Ve=!E,Error(B+"crypto unavailable");Ve=E}else Ve=E}if(T.hasOwnProperty(A="MODULO_MODE")&&(y(E=T[A],0,9,A),Ge=E),T.hasOwnProperty(A="POW_PRECISION")&&(y(E=T[A],0,Zt,A),We=E),T.hasOwnProperty(A="FORMAT")){if("object"!=typeof(E=T[A]))throw Error(B+A+" not an object: "+E);Xe=E}if(T.hasOwnProperty(A="ALPHABET")){if("string"!=typeof(E=T[A])||/^.?$|[+\-.\s]|(.).*\1/.test(E))throw Error(B+A+" invalid: "+E);Qe=E}}return{DECIMAL_PLACES:Pe,ROUNDING_MODE:Fe,EXPONENTIAL_AT:[Le,Ue],RANGE:[qe,He],CRYPTO:Ve,MODULO_MODE:Ge,POW_PRECISION:We,FORMAT:Xe,ALPHABET:Qe}},H.isBigNumber=function(T){if(!T||!0!==T._isBigNumber)return!1;if(!H.DEBUG)return!0;var A,E,S=T.c,O=T.e,j=T.s;t:if("[object Array]"=={}.toString.call(S)){if((1===j||-1===j)&&O>=-Zt&&O<=Zt&&O===k(O)){if(0===S[0]){if(0===O&&1===S.length)return!0;break t}if((A=(O+1)%Pt)<1&&(A+=Pt),String(S[0]).length==A){for(A=0;A<S.length;A++)if((E=S[A])<0||E>=_t||E!==k(E))break t;if(0!==E)return!0}}}else if(null===S&&null===O&&(null===j||1===j||-1===j))return!0;throw Error(B+"Invalid BigNumber: "+T)},H.maximum=H.max=function(){return z(arguments,Ie.lt)},H.minimum=H.min=function(){return z(arguments,Ie.gt)},H.random=(Kt=9007199254740992,ee=Math.random()*Kt&2097151?function(){return k(Math.random()*Kt)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(T){var A,E,S,j,_t,Ft=0,Ut=[],Yt=new H(Ne);if(null==T?T=Pe:y(T,0,Zt),j=O(T/Pt),Ve)if(crypto.getRandomValues){for(A=crypto.getRandomValues(new Uint32Array(j*=2));Ft<j;)(_t=131072*A[Ft]+(A[Ft+1]>>>11))>=9e15?(E=crypto.getRandomValues(new Uint32Array(2)),A[Ft]=E[0],A[Ft+1]=E[1]):(Ut.push(_t%1e14),Ft+=2);Ft=j/2}else{if(!crypto.randomBytes)throw Ve=!1,Error(B+"crypto unavailable");for(A=crypto.randomBytes(j*=7);Ft<j;)(_t=281474976710656*(31&A[Ft])+1099511627776*A[Ft+1]+4294967296*A[Ft+2]+16777216*A[Ft+3]+(A[Ft+4]<<16)+(A[Ft+5]<<8)+A[Ft+6])>=9e15?crypto.randomBytes(7).copy(A,Ft):(Ut.push(_t%1e14),Ft+=7);Ft=j/7}if(!Ve)for(;Ft<j;)(_t=ee())<9e15&&(Ut[Ft++]=_t%1e14);for(j=Ut[--Ft],T%=Pt,j&&T&&(_t=Lt[Pt-T],Ut[Ft]=k(j/_t)*_t);0===Ut[Ft];Ut.pop(),Ft--);if(Ft<0)Ut=[S=0];else{for(S=-1;0===Ut[0];Ut.splice(0,1),S-=Pt);for(Ft=1,_t=Ut[0];_t>=10;_t/=10,Ft++);Ft<Pt&&(S-=Pt-Ft)}return Yt.e=S,Yt.c=Ut,Yt}),H.sum=function(){for(var T=1,A=arguments,E=new H(A[0]);T<A.length;)E=E.plus(A[T++]);return E},E=function(){var T="0123456789";function e(T,A,E,S){for(var O,k,B=[0],j=0,_t=T.length;j<_t;){for(k=B.length;k--;B[k]*=A);for(B[0]+=S.indexOf(T.charAt(j++)),O=0;O<B.length;O++)B[O]>E-1&&(null==B[O+1]&&(B[O+1]=0),B[O+1]+=B[O]/E|0,B[O]%=E)}return B.reverse()}return function(E,S,O,k,B){var j,_t,Pt,Ft,Lt,Ut,Zt,Yt,Kt=E.indexOf("."),ee=Pe,le=Fe;for(Kt>=0&&(Ft=We,We=0,E=E.replace(".",""),Ut=(Yt=new H(S)).pow(E.length-Kt),We=Ft,Yt.c=e(b(g(Ut.c),Ut.e,"0"),10,O,T),Yt.e=Yt.c.length),Pt=Ft=(Zt=e(E,S,O,B?(j=Qe,T):(j=T,Qe))).length;0==Zt[--Ft];Zt.pop());if(!Zt[0])return j.charAt(0);if(Kt<0?--Pt:(Ut.c=Zt,Ut.e=Pt,Ut.s=k,Zt=(Ut=A(Ut,Yt,ee,le,O)).c,Lt=Ut.r,Pt=Ut.e),Kt=Zt[_t=Pt+ee+1],Ft=O/2,Lt=Lt||_t<0||null!=Zt[_t+1],Lt=le<4?(null!=Kt||Lt)&&(0==le||le==(Ut.s<0?3:2)):Kt>Ft||Kt==Ft&&(4==le||Lt||6==le&&1&Zt[_t-1]||le==(Ut.s<0?8:7)),_t<1||!Zt[0])E=Lt?b(j.charAt(1),-ee,j.charAt(0)):j.charAt(0);else{if(Zt.length=_t,Lt)for(--O;++Zt[--_t]>O;)Zt[_t]=0,_t||(++Pt,Zt=[1].concat(Zt));for(Ft=Zt.length;!Zt[--Ft];);for(Kt=0,E="";Kt<=Ft;E+=j.charAt(Zt[Kt++]));E=b(E,Pt,j.charAt(0))}return E}}(),A=function(){function t(T,A,E){var S,O,k,B,j=0,_t=T.length,Pt=A%Ut,Ft=A/Ut|0;for(T=T.slice();_t--;)j=((O=Pt*(k=T[_t]%Ut)+(S=Ft*k+(B=T[_t]/Ut|0)*Pt)%Ut*Ut+j)/E|0)+(S/Ut|0)+Ft*B,T[_t]=O%E;return j&&(T=[j].concat(T)),T}function e(T,A,E,S){var O,k;if(E!=S)k=E>S?1:-1;else for(O=k=0;O<E;O++)if(T[O]!=A[O]){k=T[O]>A[O]?1:-1;break}return k}function n(T,A,E,S){for(var O=0;E--;)T[E]-=O,O=T[E]<A[E]?1:0,T[E]=O*S+T[E]-A[E];for(;!T[0]&&T.length>1;T.splice(0,1));}return function(T,A,E,S,O){var B,j,Ft,Lt,Ut,Zt,Yt,Kt,ee,le,ve,Ce,Se,Re,Ie,Ne,Pe,Fe=T.s==A.s?1:-1,Le=T.c,Ue=A.c;if(!(Le&&Le[0]&&Ue&&Ue[0]))return new H(T.s&&A.s&&(Le?!Ue||Le[0]!=Ue[0]:Ue)?Le&&0==Le[0]||!Ue?0*Fe:Fe/0:NaN);for(ee=(Kt=new H(Fe)).c=[],Fe=E+(j=T.e-A.e)+1,O||(O=_t,j=d(T.e/Pt)-d(A.e/Pt),Fe=Fe/Pt|0),Ft=0;Ue[Ft]==(Le[Ft]||0);Ft++);if(Ue[Ft]>(Le[Ft]||0)&&j--,Fe<0)ee.push(1),Lt=!0;else{for(Re=Le.length,Ne=Ue.length,Ft=0,Fe+=2,(Ut=k(O/(Ue[0]+1)))>1&&(Ue=t(Ue,Ut,O),Le=t(Le,Ut,O),Ne=Ue.length,Re=Le.length),Se=Ne,ve=(le=Le.slice(0,Ne)).length;ve<Ne;le[ve++]=0);Pe=Ue.slice(),Pe=[0].concat(Pe),Ie=Ue[0],Ue[1]>=O/2&&Ie++;do{if(Ut=0,(B=e(Ue,le,Ne,ve))<0){if(Ce=le[0],Ne!=ve&&(Ce=Ce*O+(le[1]||0)),(Ut=k(Ce/Ie))>1)for(Ut>=O&&(Ut=O-1),Yt=(Zt=t(Ue,Ut,O)).length,ve=le.length;1==e(Zt,le,Yt,ve);)Ut--,n(Zt,Ne<Yt?Pe:Ue,Yt,O),Yt=Zt.length,B=1;else 0==Ut&&(B=Ut=1),Yt=(Zt=Ue.slice()).length;if(Yt<ve&&(Zt=[0].concat(Zt)),n(le,Zt,ve,O),ve=le.length,-1==B)for(;e(Ue,le,Ne,ve)<1;)Ut++,n(le,Ne<ve?Pe:Ue,ve,O),ve=le.length}else 0===B&&(Ut++,le=[0]);ee[Ft++]=Ut,le[0]?le[ve++]=Le[Se]||0:(le=[Le[Se]],ve=1)}while((Se++<Re||null!=le[0])&&Fe--);Lt=null!=le[0],ee[0]||ee.splice(0,1)}if(O==_t){for(Ft=1,Fe=ee[0];Fe>=10;Fe/=10,Ft++);W(Kt,E+(Kt.e=Ft+j*Pt-1)+1,S,Lt)}else Kt.e=j,Kt.r=+Lt;return Kt}}(),le=/^(-?)0([xbo])(?=\w[\w.]*$)/i,ve=/^([^.]+)\.$/,Ce=/^\.([^.]+)$/,Se=/^-?(Infinity|NaN)$/,Re=/^\s*\+(?=[\w.])|^\s+|\s+$/g,Yt=function(T,A,E,S){var O,k=E?A:A.replace(Re,"");if(Se.test(k))T.s=isNaN(k)?null:k<0?-1:1;else{if(!E&&(k=k.replace(le,(function(T,A,E){return O="x"==(E=E.toLowerCase())?16:"b"==E?2:8,S&&S!=O?T:A})),S&&(O=S,k=k.replace(ve,"$1").replace(Ce,"0.$1")),A!=k))return new H(k,O);if(H.DEBUG)throw Error(B+"Not a"+(S?" base "+S:"")+" number: "+A);T.s=null}T.c=T.e=null},Ie.absoluteValue=Ie.abs=function(){var T=new H(this);return T.s<0&&(T.s=1),T},Ie.comparedTo=function(T,A){return m(this,new H(T,A))},Ie.decimalPlaces=Ie.dp=function(T,A){var E,S,O,k=this;if(null!=T)return y(T,0,Zt),null==A?A=Fe:y(A,0,8),W(new H(k),T+k.e+1,A);if(!(E=k.c))return null;if(S=((O=E.length-1)-d(this.e/Pt))*Pt,O=E[O])for(;O%10==0;O/=10,S--);return S<0&&(S=0),S},Ie.dividedBy=Ie.div=function(T,E){return A(this,new H(T,E),Pe,Fe)},Ie.dividedToIntegerBy=Ie.idiv=function(T,E){return A(this,new H(T,E),0,1)},Ie.exponentiatedBy=Ie.pow=function(T,A){var E,S,j,_t,Ft,Lt,Ut,Zt,Yt=this;if((T=new H(T)).c&&!T.isInteger())throw Error(B+"Exponent not an integer: "+V(T));if(null!=A&&(A=new H(A)),Ft=T.e>14,!Yt.c||!Yt.c[0]||1==Yt.c[0]&&!Yt.e&&1==Yt.c.length||!T.c||!T.c[0])return Zt=new H(Math.pow(+V(Yt),Ft?2-w(T):+V(T))),A?Zt.mod(A):Zt;if(Lt=T.s<0,A){if(A.c?!A.c[0]:!A.s)return new H(NaN);(S=!Lt&&Yt.isInteger()&&A.isInteger())&&(Yt=Yt.mod(A))}else{if(T.e>9&&(Yt.e>0||Yt.e<-1||(0==Yt.e?Yt.c[0]>1||Ft&&Yt.c[1]>=24e7:Yt.c[0]<8e13||Ft&&Yt.c[0]<=9999975e7)))return _t=Yt.s<0&&w(T)?-0:0,Yt.e>-1&&(_t=1/_t),new H(Lt?1/_t:_t);We&&(_t=O(We/Pt+2))}for(Ft?(E=new H(.5),Lt&&(T.s=1),Ut=w(T)):Ut=(j=Math.abs(+V(T)))%2,Zt=new H(Ne);;){if(Ut){if(!(Zt=Zt.times(Yt)).c)break;_t?Zt.c.length>_t&&(Zt.c.length=_t):S&&(Zt=Zt.mod(A))}if(j){if(0===(j=k(j/2)))break;Ut=j%2}else if(W(T=T.times(E),T.e+1,1),T.e>14)Ut=w(T);else{if(0==(j=+V(T)))break;Ut=j%2}Yt=Yt.times(Yt),_t?Yt.c&&Yt.c.length>_t&&(Yt.c.length=_t):S&&(Yt=Yt.mod(A))}return S?Zt:(Lt&&(Zt=Ne.div(Zt)),A?Zt.mod(A):_t?W(Zt,We,Fe,void 0):Zt)},Ie.integerValue=function(T){var A=new H(this);return null==T?T=Fe:y(T,0,8),W(A,A.e+1,T)},Ie.isEqualTo=Ie.eq=function(T,A){return 0===m(this,new H(T,A))},Ie.isFinite=function(){return!!this.c},Ie.isGreaterThan=Ie.gt=function(T,A){return m(this,new H(T,A))>0},Ie.isGreaterThanOrEqualTo=Ie.gte=function(T,A){return 1===(A=m(this,new H(T,A)))||0===A},Ie.isInteger=function(){return!!this.c&&d(this.e/Pt)>this.c.length-2},Ie.isLessThan=Ie.lt=function(T,A){return m(this,new H(T,A))<0},Ie.isLessThanOrEqualTo=Ie.lte=function(T,A){return-1===(A=m(this,new H(T,A)))||0===A},Ie.isNaN=function(){return!this.s},Ie.isNegative=function(){return this.s<0},Ie.isPositive=function(){return this.s>0},Ie.isZero=function(){return!!this.c&&0==this.c[0]},Ie.minus=function(T,A){var E,S,O,k,B=this,j=B.s;if(A=(T=new H(T,A)).s,!j||!A)return new H(NaN);if(j!=A)return T.s=-A,B.plus(T);var Ft=B.e/Pt,Lt=T.e/Pt,Ut=B.c,Zt=T.c;if(!Ft||!Lt){if(!Ut||!Zt)return Ut?(T.s=-A,T):new H(Zt?B:NaN);if(!Ut[0]||!Zt[0])return Zt[0]?(T.s=-A,T):new H(Ut[0]?B:3==Fe?-0:0)}if(Ft=d(Ft),Lt=d(Lt),Ut=Ut.slice(),j=Ft-Lt){for((k=j<0)?(j=-j,O=Ut):(Lt=Ft,O=Zt),O.reverse(),A=j;A--;O.push(0));O.reverse()}else for(S=(k=(j=Ut.length)<(A=Zt.length))?j:A,j=A=0;A<S;A++)if(Ut[A]!=Zt[A]){k=Ut[A]<Zt[A];break}if(k&&(O=Ut,Ut=Zt,Zt=O,T.s=-T.s),(A=(S=Zt.length)-(E=Ut.length))>0)for(;A--;Ut[E++]=0);for(A=_t-1;S>j;){if(Ut[--S]<Zt[S]){for(E=S;E&&!Ut[--E];Ut[E]=A);--Ut[E],Ut[S]+=_t}Ut[S]-=Zt[S]}for(;0==Ut[0];Ut.splice(0,1),--Lt);return Ut[0]?J(T,Ut,Lt):(T.s=3==Fe?-1:1,T.c=[T.e=0],T)},Ie.modulo=Ie.mod=function(T,E){var S,O,k=this;return T=new H(T,E),!k.c||!T.s||T.c&&!T.c[0]?new H(NaN):!T.c||k.c&&!k.c[0]?new H(k):(9==Ge?(O=T.s,T.s=1,S=A(k,T,0,3),T.s=O,S.s*=O):S=A(k,T,0,Ge),(T=k.minus(S.times(T))).c[0]||1!=Ge||(T.s=k.s),T)},Ie.multipliedBy=Ie.times=function(T,A){var E,S,O,k,B,j,Ft,Lt,Zt,Yt,Kt,ee,le,ve,Ce,Se=this,Re=Se.c,Ie=(T=new H(T,A)).c;if(!(Re&&Ie&&Re[0]&&Ie[0]))return!Se.s||!T.s||Re&&!Re[0]&&!Ie||Ie&&!Ie[0]&&!Re?T.c=T.e=T.s=null:(T.s*=Se.s,Re&&Ie?(T.c=[0],T.e=0):T.c=T.e=null),T;for(S=d(Se.e/Pt)+d(T.e/Pt),T.s*=Se.s,(Ft=Re.length)<(Yt=Ie.length)&&(le=Re,Re=Ie,Ie=le,O=Ft,Ft=Yt,Yt=O),O=Ft+Yt,le=[];O--;le.push(0));for(ve=_t,Ce=Ut,O=Yt;--O>=0;){for(E=0,Kt=Ie[O]%Ce,ee=Ie[O]/Ce|0,k=O+(B=Ft);k>O;)E=((Lt=Kt*(Lt=Re[--B]%Ce)+(j=ee*Lt+(Zt=Re[B]/Ce|0)*Kt)%Ce*Ce+le[k]+E)/ve|0)+(j/Ce|0)+ee*Zt,le[k--]=Lt%ve;le[k]=E}return E?++S:le.splice(0,1),J(T,le,S)},Ie.negated=function(){var T=new H(this);return T.s=-T.s||null,T},Ie.plus=function(T,A){var E,S=this,O=S.s;if(A=(T=new H(T,A)).s,!O||!A)return new H(NaN);if(O!=A)return T.s=-A,S.minus(T);var k=S.e/Pt,B=T.e/Pt,j=S.c,Ft=T.c;if(!k||!B){if(!j||!Ft)return new H(O/0);if(!j[0]||!Ft[0])return Ft[0]?T:new H(j[0]?S:0*O)}if(k=d(k),B=d(B),j=j.slice(),O=k-B){for(O>0?(B=k,E=Ft):(O=-O,E=j),E.reverse();O--;E.push(0));E.reverse()}for((O=j.length)-(A=Ft.length)<0&&(E=Ft,Ft=j,j=E,A=O),O=0;A;)O=(j[--A]=j[A]+Ft[A]+O)/_t|0,j[A]=_t===j[A]?0:j[A]%_t;return O&&(j=[O].concat(j),++B),J(T,j,B)},Ie.precision=Ie.sd=function(T,A){var E,S,O,k=this;if(null!=T&&T!==!!T)return y(T,1,Zt),null==A?A=Fe:y(A,0,8),W(new H(k),T,A);if(!(E=k.c))return null;if(S=(O=E.length-1)*Pt+1,O=E[O]){for(;O%10==0;O/=10,S--);for(O=E[0];O>=10;O/=10,S++);}return T&&k.e+1>S&&(S=k.e+1),S},Ie.shiftedBy=function(T){return y(T,-9007199254740991,Ft),this.times("1e"+T)},Ie.squareRoot=Ie.sqrt=function(){var T,E,S,O,k,B=this,j=B.c,_t=B.s,Pt=B.e,Ft=Pe+4,Lt=new H("0.5");if(1!==_t||!j||!j[0])return new H(!_t||_t<0&&(!j||j[0])?NaN:j?B:1/0);if(0==(_t=Math.sqrt(+V(B)))||_t==1/0?(((E=g(j)).length+Pt)%2==0&&(E+="0"),_t=Math.sqrt(+E),Pt=d((Pt+1)/2)-(Pt<0||Pt%2),S=new H(E=_t==1/0?"5e"+Pt:(E=_t.toExponential()).slice(0,E.indexOf("e")+1)+Pt)):S=new H(_t+""),S.c[0])for((_t=(Pt=S.e)+Ft)<3&&(_t=0);;)if(k=S,S=Lt.times(k.plus(A(B,k,Ft,1))),g(k.c).slice(0,_t)===(E=g(S.c)).slice(0,_t)){if(S.e<Pt&&--_t,"9999"!=(E=E.slice(_t-3,_t+1))&&(O||"4999"!=E)){+E&&(+E.slice(1)||"5"!=E.charAt(0))||(W(S,S.e+Pe+2,1),T=!S.times(S).eq(B));break}if(!O&&(W(k,k.e+Pe+2,0),k.times(k).eq(B))){S=k;break}Ft+=4,_t+=4,O=1}return W(S,S.e+Pe+1,Fe,T)},Ie.toExponential=function(T,A){return null!=T&&(y(T,0,Zt),T++),G(this,T,A,1)},Ie.toFixed=function(T,A){return null!=T&&(y(T,0,Zt),T=T+this.e+1),G(this,T,A)},Ie.toFormat=function(T,A,E){var S,O=this;if(null==E)null!=T&&A&&"object"==typeof A?(E=A,A=null):T&&"object"==typeof T?(E=T,T=A=null):E=Xe;else if("object"!=typeof E)throw Error(B+"Argument not an object: "+E);if(S=O.toFixed(T,A),O.c){var k,j=S.split("."),_t=+E.groupSize,Pt=+E.secondaryGroupSize,Ft=E.groupSeparator||"",Lt=j[0],Ut=j[1],Zt=O.s<0,Yt=Zt?Lt.slice(1):Lt,Kt=Yt.length;if(Pt&&(k=_t,_t=Pt,Pt=k,Kt-=k),_t>0&&Kt>0){for(k=Kt%_t||_t,Lt=Yt.substr(0,k);k<Kt;k+=_t)Lt+=Ft+Yt.substr(k,_t);Pt>0&&(Lt+=Ft+Yt.slice(k)),Zt&&(Lt="-"+Lt)}S=Ut?Lt+(E.decimalSeparator||"")+((Pt=+E.fractionGroupSize)?Ut.replace(new RegExp("\\d{"+Pt+"}\\B","g"),"$&"+(E.fractionGroupSeparator||"")):Ut):Lt}return(E.prefix||"")+S+(E.suffix||"")},Ie.toFraction=function(T){var E,S,O,k,j,_t,Ft,Ut,Zt,Yt,Kt,ee,le=this,ve=le.c;if(null!=T&&(!(Ft=new H(T)).isInteger()&&(Ft.c||1!==Ft.s)||Ft.lt(Ne)))throw Error(B+"Argument "+(Ft.isInteger()?"out of range: ":"not an integer: ")+V(Ft));if(!ve)return new H(le);for(E=new H(Ne),Zt=S=new H(Ne),O=Ut=new H(Ne),ee=g(ve),j=E.e=ee.length-le.e-1,E.c[0]=Lt[(_t=j%Pt)<0?Pt+_t:_t],T=!T||Ft.comparedTo(E)>0?j>0?E:Zt:Ft,_t=He,He=1/0,Ft=new H(ee),Ut.c[0]=0;Yt=A(Ft,E,0,1),1!=(k=S.plus(Yt.times(O))).comparedTo(T);)S=O,O=k,Zt=Ut.plus(Yt.times(k=Zt)),Ut=k,E=Ft.minus(Yt.times(k=E)),Ft=k;return k=A(T.minus(S),O,0,1),Ut=Ut.plus(k.times(Zt)),S=S.plus(k.times(O)),Ut.s=Zt.s=le.s,Kt=A(Zt,O,j*=2,Fe).minus(le).abs().comparedTo(A(Ut,S,j,Fe).minus(le).abs())<1?[Zt,O]:[Ut,S],He=_t,Kt},Ie.toNumber=function(){return+V(this)},Ie.toPrecision=function(T,A){return null!=T&&y(T,1,Zt),G(this,T,A,2)},Ie.toString=function(T){var A,S=this,O=S.s,k=S.e;return null===k?O?(A="Infinity",O<0&&(A="-"+A)):A="NaN":(null==T?A=k<=Le||k>=Ue?v(g(S.c),k):b(g(S.c),k,"0"):10===T?A=b(g((S=W(new H(S),Pe+k+1,Fe)).c),S.e,"0"):(y(T,2,Qe.length,"Base"),A=E(b(g(S.c),k,"0"),10,T,O,!0)),O<0&&S.c[0]&&(A="-"+A)),A},Ie.valueOf=Ie.toJSON=function(){return V(this)},Ie._isBigNumber=!0,null!=T&&H.set(T),H}()).default=E.BigNumber=E,T.exports?T.exports=E:(A||(A="undefined"!=typeof self&&self?self:window),A.BigNumber=E)}(this)})).BigNumber;const Fe={ROUNDING_MODE:Pe.ROUND_DOWN};function M(T){return(new TextEncoder).encode(T)}function R(T){return"string"==typeof T?R(D(T)):(new TextDecoder).decode(T)}Pe.config(Fe);const Le="INVALID_ARGUMENT";function U(T,A="UNKNOWN_ERROR",E={}){let S=[];Object.keys(E).forEach((T=>{try{S.push(T+"="+JSON.stringify(E[T]))}catch(A){S.push(T+"="+JSON.stringify(E[T].toString()))}}));let O=T;S.length&&(T+=" ("+S.join(", ")+")");let k=new Error(T);return k.reason=O,k.code=A,Object.keys(E).forEach((function(T){k[T]=E[T]})),k}function D(T){if("string"!=typeof T)throw new Error("hexToBytes only accept strings, got: "+typeof T);if("0x"===T.substr(0,2))return D(T.substr(2));const A=new Uint8Array(Math.ceil(T.length/2));let E=0;for(let S=0;S<T.length;S+=2){const O=parseInt(T.substr(S,2),16);if(isNaN(O))throw new Error("Cannot read hex string:"+JSON.stringify(T));A[E]=O,E++}return A}function q(T){return Array.from(T).map((T=>T.toString(16).padStart(2,"0"))).join("")}function $(T,A){if("string"==typeof T){if(A&&"hex"===A.encoding&&"string"==typeof T){let A=T;A.length>2&&"0x"===A.substr(0,2)&&(A=A.substr(2));const E=D(A);return Ne(E)}return Ne(M(T))}return Ne(T)}let Ue={noether:"0",wei:"1",kwei:"1000",Kwei:"1000",babbage:"1000",femtoether:"1000",mwei:"1000000",Mwei:"1000000",lovelace:"1000000",picoether:"1000000",gwei:"1000000000",Gwei:"1000000000",shannon:"1000000000",nanoether:"1000000000",nano:"1000000000",szabo:"1000000000000",microether:"1000000000000",micro:"1000000000000",finney:"1000000000000000",milliether:"1000000000000000",milli:"1000000000000000",ether:"1000000000000000000",kether:"1000000000000000000000",grand:"1000000000000000000000",mether:"1000000000000000000000000",gether:"1000000000000000000000000000",tether:"1000000000000000000000000000000"};function H(T,A,E){return new Array(A-T.length+1).join(E||"0")+T}function G(T){return wt(T)&&T.name&&-1!==T.name.indexOf("(")?T.name:T.name+"("+J(!1,T.inputs||[]).join(",")+")"}function z(...T){const A=T.reduce(((T,A)=>T+A.length),0);var E=new Uint8Array(A);let S=0;for(let A of T)E.set(A,S),S+=A.length;return E}function J(T,A){const E=[];return A.forEach((function(A){if("object"==typeof A.components){if("tuple"!==A.type.substring(0,5))throw new Error("components found but type is not tuple; report on GitHub");var S="",O=A.type.indexOf("[");O>=0&&(S=A.type.substring(O));var k=J(T,A.components);bt(k)&&T?E.push("tuple("+k.join(",")+")"+S):T?E.push("("+k+")"):E.push("("+k.join(",")+")"+S)}else E.push(A.type)})),E}function W(T){let A=T.indexOf("("),E=T.indexOf(")");return-1!==A&&-1!==E?T.substr(0,A):T}function V(T){let A=T.indexOf("("),E=T.indexOf(")");return-1!==A&&-1!==E?T.substr(A+1,E-A-1).replace(" ",""):""}function K(T){return null==T?T:ot(T).toNumber()}function Z(T){return ot(T).toNumber()}function Y(T){return mt(T)?T.toString(10):""+T}function X(T){return"string"==typeof T&&!T.startsWith("0x")&&/^[A-Za-z0-9]+$/.test(T)?"0x"+T:nt(T)}function Q(T){if("string"==typeof T)return T.startsWith("0x")&&/^[A-Za-z0-9]+$/.test(T)?nt(T):"0x"+q(M(T));if(T instanceof Uint8Array)return"0x"+q(T);throw new Error(`toStringData: Error trying to convert ${T} (${typeof T}) to a hex string.`)}function tt(T){return"boolean"==typeof T?T:0!==ot(T).toNumber()}function et(T){let A=ot(T),E=A.toString(16);return A.isLessThan(0)?"-0x"+E.substr(1):"0x"+E}function nt(T){if(vt(T))return et(+T);if(mt(T))return et(T);if(yt(T)){const A=T;if(0===A.indexOf("-0x"))return et(A);if(0===A.indexOf("0x"))return A;if(!isFinite(A))return q(M(A))}if(T instanceof Uint8Array)return"0x"+q(T);if(bt(T)||wt(T))throw new Error("toHex can only be called with scalar values, not objects or arrays");return et(T)}function rt(T){let A=T?T.toLowerCase():"ether",E=Ue[A];if(void 0===E)throw new Error("This unit doesn't exists, please use the one of the following units"+JSON.stringify(Ue,null,2));return new Pe(E,10)}function ot(T){let A=T||0;return mt(A)?A:("string"==typeof A&&(A=A.trim()),"string"!=typeof A||0!==A.indexOf("0x")&&0!==A.indexOf("-0x")?A instanceof Uint8Array?new Pe(q(A),16):new Pe(A,10):new Pe(A.replace("0x","").toLowerCase(),16))}function it(T){return new Pe(new Array(T).fill("1").join(""),2)}function st(T,A=256){let E=ot(T).integerValue();return E.isLessThan(0)?it(A).plus(E).plus(1):E}function at(T,A){return"1"==H(T.toString(2),A,"0")[0]}function ct(T){if("string"!=typeof T)throw U("invalid address",Le,{arg:"address",value:T});if(T.trim().match(/^(0x)?[0-9a-fA-F]{40}$/))return"0x"!==T.trim().substring(0,2)&&(T="0x"+T),ft(T);throw U("invalid address",Le,{arg:"address",value:T})}function ut(T,A=256){if(at(T,A)){const E=it(A);return T.minus(E).minus(1)}return T}function lt(T){return/^0x[0-9a-f]{40}$/i.test(T)}function ht(T){return!!/^(0x)?[0-9a-f]{40}$/i.test(T)&&(!(!/^(0x)?[0-9a-f]{40}$/.test(T)&&!/^(0x)?[0-9A-F]{40}$/.test(T))||pt(T))}function pt(T){const A=T.replace("0x","");let E=$(A.toLowerCase());for(let T=0;T<40;T++)if(parseInt(E[T],16)>7&&A[T].toUpperCase()!==A[T]||parseInt(E[T],16)<=7&&A[T].toLowerCase()!==A[T])return!1;return!0}function ft(T){if(void 0===T)return"";const A=T.toLowerCase().replace("0x",""),E=$(A);let S="0x";for(let T=0;T<A.length;T++)parseInt(E[T],16)>7?S+=A[T].toUpperCase():S+=A[T];return S}function dt(T){if(!Array.isArray(T))throw new Error(`Value was not an array: ${JSON.stringify(T)}`);return T}function gt(T){return lt(T)?T:/^[0-9a-f]{40}$/.test(T)?"0x"+T:"0x"+H(nt(T).substr(2),40)}function mt(T){return T instanceof Pe}function yt(T){return"string"==typeof T||T&&T.constructor&&"String"===T.constructor.name}function wt(T){return null!==T&&!Array.isArray(T)&&"object"==typeof T}function vt(T){return"boolean"==typeof T}function bt(T){return Array.isArray(T)}var qe,He,Ve;function Nt(A,E){if(!A)throw new Error("jsonrpc method should be specified!");if("string"!=typeof A)throw new Error(`jsonrpc must be a string, got ${typeof A}!`);return T.messageId++,{jsonrpc:"2.0",id:T.messageId,method:A,params:E||[]}}function xt(T){return Array.isArray(T)?T.every(e):e(T);function e(T){return!(!T||"error"in T||"2.0"!==T.jsonrpc||"number"!=typeof T.id||null==T.result&&void 0===T.result)}}
/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */function kt(T,A,E,S){var O,k=arguments.length,B=k<3?A:null===S?S=Object.getOwnPropertyDescriptor(A,E):S;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)B=Reflect.decorate(T,A,E,S);else for(var j=T.length-1;j>=0;j--)(O=T[j])&&(B=(k<3?O(B):k>3?O(A,E,B):O(A,E))||B);return k>3&&B&&Object.defineProperty(A,E,B),B}function Tt(T,A){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(T,A)}function At(T){return ot(T)}function Et(T){return void 0===T?"latest":Bt(T)}function Bt(T){return void 0===T||null==T?null:function(T){return"latest"===T||"pending"===T||"earliest"===T}(T)?T:nt(T)}function Ot(T){return T.from=T.from,T.from&&(T.from=jt(T.from)),T.to&&(T.to=jt(T.to)),void 0!==T.gasPrice&&(T.gasPrice=et(T.gasPrice)),void 0!==T.gas&&(T.gas=et(T.gas)),void 0!==T.value&&(T.value=et(T.value)),void 0!==T.nonce&&(T.nonce=et(T.nonce)),T.data&&!T.data.startsWith("0x")&&/^[A-Za-z0-9]+$/.test(T.data)&&(T.data="0x"+T.data),T}function St(T){if("string"!=typeof T)throw new Error("The provided input for transactionId is not a string, got: "+JSON.stringify(T));if(0!==T.indexOf("0x"))throw new Error("TransactionID must start with 0x, got: "+JSON.stringify(T));if(66!==T.length)throw new Error("TransactionID must be a 32 byte hex, got: "+JSON.stringify(T));return T}function Ct(T){if("object"!=typeof T)throw new Error("Did not provide transaction options");if(!T.from)throw new Error('Missing "from" in transaction options');return T.from=jt(T.from),T.to&&(T.to=jt(T.to)),void 0!==T.gasPrice&&(T.gasPrice=et(T.gasPrice)),void 0!==T.gas&&(T.gas=et(T.gas)),void 0!==T.value&&(T.value=et(T.value)),void 0!==T.nonce&&(T.nonce=et(T.nonce)),T.data&&!T.data.startsWith("0x")&&/^[A-Za-z0-9]+$/.test(T.data)&&(T.data="0x"+T.data),T}function It(T){return T?(null!==T.blockNumber&&(T.blockNumber=Z(T.blockNumber)),null!==T.transactionIndex&&(T.transactionIndex=Z(T.transactionIndex)),T.nonce=Z(T.nonce),T.gas=Z(T.gas),T.gasPrice=ot(T.gasPrice),T.value=ot(T.value),T):null}function Mt(T){return T?(T.gasLimit=Z(T.gasLimit),T.gasUsed=Z(T.gasUsed),T.size=Z(T.size),T.timestamp=Z(T.timestamp),null!==T.number&&(T.number=Z(T.number)),T.difficulty=ot(T.difficulty),T.totalDifficulty=ot(T.totalDifficulty),bt(T.transactions)&&T.transactions.forEach((function(A,E){yt(A)||(T.transactions[E]=It(A)||T.transactions[E])})),T):null}function Rt(T){return T?(T.blockNumber&&(T.blockNumber=Z(T.blockNumber)),T.transactionIndex&&(T.transactionIndex=Z(T.transactionIndex)),T.logIndex&&(T.logIndex=Z(T.logIndex)),T):T}function jt(T){if(lt(T))return T;if(ht(T))return"0x"+T;throw new Error(`Invalid address: ${JSON.stringify(T)}`)}T.TransactionStatus=void 0,(qe=T.TransactionStatus||(T.TransactionStatus={})).pending="pending",qe.confirmed="confirmed",qe.failed="failed",T.TransactionType=void 0,(He=T.TransactionType||(T.TransactionType={})).queued="queued",He.dropped="dropped",He.replaced="replaced",He.pending="pending",He.reverted="reverted",He.confirmed="confirmed",T.messageId=0;class qt{constructor(T){this.callName=T.callName,this.params=T.params||0,this.inputFormatter=T.inputFormatter||null,this.outputFormatter=T.outputFormatter}validateArgs(T){if(T.length!==this.params)throw A=this.callName,E=T.length,S=this.params,new Error(`Invalid number of input parameters to RPC method "${A}" given: ${E}, expected: ${S}`);var A,E,S}formatInput(T){return this.inputFormatter?this.inputFormatter.map((function(A,E){return A?A(T[E]):T[E]})):T}formatOutput(T){return null!==T?this.outputFormatter(T):null}toPayload(T){let A=this.formatInput(T);return this.validateArgs(A),{method:this.callName,params:A}}async execute(T,...A){let E=this.toPayload(A);if(!T)throw new Error("Missing RequestManager in method#exec");const S=await T.sendAsync(E);return this.formatOutput(S)}}class $t{constructor(T){this.getter=T.getter,this.outputFormatter=T.outputFormatter}formatOutput(T){return this.outputFormatter(T)}async execute(T,...A){const E=await T.sendAsync({method:this.getter,params:[]});return this.formatOutput(E)}}function Ht(T){return new Promise((A=>setTimeout(A,T)))}function Gt(A,E){const S=T.eth[E];if(!S)throw new Error(`Could not find the method/property named ${E.toString()}`);Object.defineProperty(A,E,{value:function(){return S.execute(this,...arguments)}})}T.eth=void 0,(Ve=T.eth||(T.eth={})).eth_getBalance=new qt({callName:"eth_getBalance",params:2,inputFormatter:[jt,Et],outputFormatter:At}),Ve.eth_getStorageAt=new qt({callName:"eth_getStorageAt",params:3,inputFormatter:[jt,nt,Et],outputFormatter:X}),Ve.eth_getCode=new qt({callName:"eth_getCode",params:2,inputFormatter:[jt,Et],outputFormatter:X}),Ve.eth_getBlockByHash=new qt({callName:"eth_getBlockByHash",params:2,inputFormatter:[Bt,function(T){return!!T}],outputFormatter:Mt}),Ve.eth_getBlockByNumber=new qt({callName:"eth_getBlockByNumber",params:2,inputFormatter:[Bt,function(T){return!!T}],outputFormatter:Mt}),Ve.eth_getUncleByBlockHashAndIndex=new qt({callName:"eth_getUncleByBlockHashAndIndex",params:2,inputFormatter:[Bt,nt],outputFormatter:Mt}),Ve.eth_getUncleByBlockNumberAndIndex=new qt({callName:"eth_getUncleByBlockNumberAndIndex",params:2,inputFormatter:[Bt,nt],outputFormatter:Mt}),Ve.eth_getBlockTransactionCountByHash=new qt({callName:"eth_getBlockTransactionCountByHash",params:1,inputFormatter:[Bt],outputFormatter:Z}),Ve.eth_getBlockTransactionCountByNumber=new qt({callName:"eth_getBlockTransactionCountByNumber",params:1,inputFormatter:[Bt],outputFormatter:Z}),Ve.eth_getUncleCountByBlockHash=new qt({callName:"eth_getUncleCountByBlockHash",params:1,inputFormatter:[Bt],outputFormatter:Z}),Ve.eth_getUncleCountByBlockNumber=new qt({callName:"eth_getUncleCountByBlockNumber",params:1,inputFormatter:[Bt],outputFormatter:Z}),Ve.eth_getTransactionByHash=new qt({callName:"eth_getTransactionByHash",params:1,inputFormatter:[St],outputFormatter:It}),Ve.eth_getTransactionByBlockHashAndIndex=new qt({callName:"eth_getTransactionByBlockHashAndIndex",params:2,inputFormatter:[Bt,nt],outputFormatter:It}),Ve.eth_getTransactionByBlockNumberAndIndex=new qt({callName:"eth_getTransactionByBlockNumberAndIndex",params:2,inputFormatter:[Bt,nt],outputFormatter:It}),Ve.eth_getTransactionReceipt=new qt({callName:"eth_getTransactionReceipt",params:1,inputFormatter:[St],outputFormatter:function(T){return T?(null!==T.blockNumber&&(T.blockNumber=Z(T.blockNumber)),null!==T.transactionIndex&&(T.transactionIndex=Z(T.transactionIndex)),T.cumulativeGasUsed=Z(T.cumulativeGasUsed),T.gasUsed=Z(T.gasUsed),T.logs&&bt(T.logs)&&(T.logs=T.logs.map((function(T){return Rt(T)}))),T.status=Z(T.status||""),T):null}}),Ve.eth_getTransactionCount=new qt({callName:"eth_getTransactionCount",params:2,inputFormatter:[jt,Et],outputFormatter:Z}),Ve.eth_sendRawTransaction=new qt({callName:"eth_sendRawTransaction",params:1,inputFormatter:[null],outputFormatter:X}),Ve.web3_sha3=new qt({callName:"web3_sha3",params:1,inputFormatter:[null],outputFormatter:X}),Ve.eth_sendTransaction=new qt({callName:"eth_sendTransaction",params:1,inputFormatter:[Ct],outputFormatter:X}),Ve.eth_sign=new qt({callName:"eth_sign",params:2,inputFormatter:[jt,null],outputFormatter:X}),Ve.eth_call=new qt({callName:"eth_call",params:2,inputFormatter:[Ot,Et],outputFormatter:X}),Ve.eth_estimateGas=new qt({callName:"eth_estimateGas",params:1,inputFormatter:[Ot],outputFormatter:Z}),Ve.eth_submitWork=new qt({callName:"eth_submitWork",params:3,inputFormatter:[null,null,null],outputFormatter:tt}),Ve.eth_getWork=new qt({callName:"eth_getWork",params:0,inputFormatter:[],outputFormatter:dt}),Ve.eth_coinbase=new $t({getter:"eth_coinbase",outputFormatter:gt}),Ve.eth_mining=new $t({getter:"eth_mining",outputFormatter:tt}),Ve.eth_hashrate=new $t({getter:"eth_hashrate",outputFormatter:Z}),Ve.eth_syncing=new $t({getter:"eth_syncing",outputFormatter:function(T){return T?(T.startingBlock=Z(T.startingBlock),T.currentBlock=Z(T.currentBlock),T.highestBlock=Z(T.highestBlock),T.knownStates&&(T.knownStates=Z(T.knownStates),T.pulledStates=Z(T.pulledStates)),T):T}}),Ve.eth_gasPrice=new $t({getter:"eth_gasPrice",outputFormatter:At}),Ve.eth_accounts=new $t({getter:"eth_accounts",outputFormatter:dt}),Ve.eth_blockNumber=new $t({getter:"eth_blockNumber",outputFormatter:Z}),Ve.eth_protocolVersion=new $t({getter:"eth_protocolVersion",outputFormatter:Z}),Ve.web3_clientVersion=new $t({getter:"web3_clientVersion",outputFormatter:Y}),Ve.net_version=new $t({getter:"net_version",outputFormatter:Y}),Ve.shh_version=new qt({callName:"shh_version",params:0,inputFormatter:[],outputFormatter:Z}),Ve.shh_post=new qt({callName:"shh_post",params:1,inputFormatter:[null],outputFormatter:tt}),Ve.personal_newAccount=new qt({callName:"personal_newAccount",params:1,inputFormatter:[null],outputFormatter:gt}),Ve.personal_importRawKey=new qt({callName:"personal_importRawKey",params:2,inputFormatter:[null,null],outputFormatter:gt}),Ve.personal_sign=new qt({callName:"personal_sign",params:3,inputFormatter:[Q,jt,null],outputFormatter:X}),Ve.personal_ecRecover=new qt({callName:"personal_ecRecover",params:2,inputFormatter:[Q,null],outputFormatter:gt}),Ve.personal_unlockAccount=new qt({callName:"personal_unlockAccount",params:3,inputFormatter:[jt,null,K],outputFormatter:tt}),Ve.personal_sendTransaction=new qt({callName:"personal_sendTransaction",params:2,inputFormatter:[Ct,null],outputFormatter:X}),Ve.personal_lockAccount=new qt({callName:"personal_lockAccount",params:1,inputFormatter:[jt],outputFormatter:tt}),Ve.personal_listAccounts=new $t({getter:"personal_listAccounts",outputFormatter:dt}),Ve.net_listening=new $t({getter:"net_listening",outputFormatter:tt}),Ve.net_peerCount=new $t({getter:"net_peerCount",outputFormatter:Z}),Ve.eth_newFilter=new qt({callName:"eth_newFilter",params:1,inputFormatter:[function(T){return T}],outputFormatter:nt}),Ve.eth_getLogs=new qt({callName:"eth_getLogs",params:1,inputFormatter:[nt],outputFormatter:dt}),Ve.eth_newBlockFilter=new qt({callName:"eth_newBlockFilter",params:0,inputFormatter:[],outputFormatter:nt}),Ve.eth_newPendingTransactionFilter=new qt({callName:"eth_newPendingTransactionFilter",params:0,inputFormatter:[],outputFormatter:nt}),Ve.eth_uninstallFilter=new qt({callName:"eth_uninstallFilter",params:1,inputFormatter:[nt],outputFormatter:tt}),Ve.eth_getFilterLogs=new qt({callName:"eth_getFilterLogs",params:1,inputFormatter:[nt],outputFormatter:dt}),Ve.eth_getFilterChanges=new qt({callName:"eth_getFilterChanges",params:1,inputFormatter:[nt],outputFormatter:dt}),Ve.eth_submitHashrate=new qt({callName:"eth_submitHashrate",params:2,inputFormatter:[null,null],outputFormatter:tt}),Ve.shh_newIdentity=new qt({callName:"shh_newIdentity",params:0,inputFormatter:[],outputFormatter:X}),Ve.shh_hasIdentity=new qt({callName:"shh_hasIdentity",params:1,inputFormatter:[null],outputFormatter:tt}),Ve.shh_newGroup=new qt({callName:"shh_newGroup",params:0,inputFormatter:[],outputFormatter:X}),Ve.shh_addToGroup=new qt({callName:"shh_addToGroup",params:1,inputFormatter:[null],outputFormatter:tt}),Ve.shh_newFilter=new qt({callName:"shh_newFilter",params:1,inputFormatter:[null],outputFormatter:nt}),Ve.shh_uninstallFilter=new qt({callName:"shh_uninstallFilter",params:1,inputFormatter:[null],outputFormatter:tt}),Ve.shh_getLogs=new qt({callName:"shh_getLogs",params:1,inputFormatter:[null],outputFormatter:dt}),Ve.shh_getFilterMessages=new qt({callName:"shh_getFilterMessages",params:1,inputFormatter:[null],outputFormatter:dt}),Ve.shh_getFilterChanges=new qt({callName:"shh_getFilterChanges",params:1,inputFormatter:[null],outputFormatter:dt}),Ve.shh_getMessages=new qt({callName:"shh_getMessages",params:1,inputFormatter:[null],outputFormatter:dt});class zt{constructor(T){this.provider=T,this.requests=new Map}async sendAsync(T){const A=await this.provider;if(!A)throw new Error("Provider not set or invalid");let E=Nt(T.method,T.params);const O=S();return this.requests.set(E.id,O),A.sendAsync(E,((T,A)=>{this.requests.delete(E.id),T?O.reject(T):xt(A)?O.resolve(A.result):O.reject(function(T){let A=T&&T.error&&T.error.message?T.error.message:"Invalid JSON RPC response: "+JSON.stringify(T);return new Error(A)}(A))})),O}setProvider(T){this.provider=T}async getConfirmedTransaction(T){const A=await this.waitForCompletion(T);if(this.isFailure(A))throw new Error(`Transaction "${T}" failed`);return A}async waitForCompletion(A,E){const S=St(A);if(await this.isTxDropped(S,E)){const A=await this.getTransactionAndReceipt(S);return Object.assign(Object.assign({},A),{status:T.TransactionStatus.failed})}for(;;){const A=await this.getTransactionAndReceipt(S);if(!this.isPending(A)&&A.receipt)return Object.assign(Object.assign({},A),{status:this.isFailure(A)?T.TransactionStatus.failed:T.TransactionStatus.confirmed});await Ht(2e3)}}async getTransaction(A){let E,S=null;const O=St(A);try{const T=(await this.eth_accounts())[0];T&&(S=await this.eth_getTransactionCount(T,"latest"))}catch(T){S=null}try{if(E=await this.eth_getTransactionByHash(O),null==E)return null}catch(T){return null}if(null==E.blockNumber){if(null!=S){if(E.nonce<S)return{hash:O,type:T.TransactionType.replaced,nonce:E.nonce};if(E.nonce>S)return{hash:O,type:T.TransactionType.queued,nonce:E.nonce}}return Object.assign({type:T.TransactionType.pending},E)}let k;try{if(k=await this.eth_getTransactionReceipt(O),null==k||0===k.status)return Object.assign({type:T.TransactionType.reverted},E)}catch(T){return null}return Object.assign(Object.assign({type:T.TransactionType.confirmed},E),{receipt:k})}async isTxDropped(T,A=15){let E=A;for(;E>0;){if(null!==await this.getTransactionAndReceipt(T))return!1;E-=1,await Ht(2e3)}return!0}async getTransactionAndReceipt(T){T=St(T);const[A,E]=await Promise.all([this.eth_getTransactionByHash(T),this.eth_getTransactionReceipt(T)]);return Object.assign(Object.assign({},A),{receipt:E})}isPending(T){return T&&null===T.blockNumber}isFailure(T){return T&&(!T.receipt||0===T.receipt.status)}}function Jt(T){return"slice"in T&&T.slice||(T.slice=function(){var A=Array.prototype.slice.call(arguments);return new Uint8Array(Array.prototype.slice.apply(T,A))}),T}function Wt(T){if(null==T)throw U("cannot convert null value to array",Le,{arg:"value",value:T});if(T instanceof Uint8Array)return Jt(new Uint8Array(T));if("string"==typeof T){let S=T.match(/^(0x)?[0-9a-fA-F]*$/);if(!S)throw U("invalid hexidecimal string",Le,{arg:"value",value:T});if("0x"!==S[1])throw U("hex string must have 0x prefix",Le,{arg:"value",value:T});(T=T.substring(2)).length%2&&(T="0"+T);for(var A=[],E=0;E<T.length;E+=2)A.push(parseInt(T.substr(E,2),16));return Jt(new Uint8Array(A))}if(function(T){if(!T||parseInt(String(T.length))!=T.length||"string"==typeof T)return!1;for(var A=0;A<T.length;A++){var E=T[A];if(E<0||E>=256||parseInt(String(E))!=E)return!1}return!0}(T))return Jt(new Uint8Array(T));throw U("invalid arrayify value",void 0,{arg:"value",value:T,type:typeof T})}function Vt(T,A,E){Object.defineProperty(T,A,{enumerable:!0,value:E,writable:!1})}kt([Gt,Tt("design:type",Function)],zt.prototype,"web3_clientVersion",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"web3_sha3",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"net_version",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"net_peerCount",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"net_listening",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_protocolVersion",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_syncing",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_coinbase",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_mining",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_hashrate",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_gasPrice",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_accounts",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_blockNumber",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getBalance",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getStorageAt",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getTransactionCount",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getBlockTransactionCountByHash",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getBlockTransactionCountByNumber",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getUncleCountByBlockHash",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getUncleCountByBlockNumber",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getCode",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_sign",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_sendTransaction",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_sendRawTransaction",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_call",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_estimateGas",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getBlockByHash",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getBlockByNumber",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getTransactionByHash",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getTransactionByBlockHashAndIndex",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getTransactionByBlockNumberAndIndex",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getTransactionReceipt",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getUncleByBlockHashAndIndex",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getUncleByBlockNumberAndIndex",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_newFilter",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_newBlockFilter",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_newPendingTransactionFilter",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_uninstallFilter",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getFilterChanges",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getFilterLogs",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getLogs",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getWork",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_submitWork",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_submitHashrate",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"shh_post",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"shh_version",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"shh_newIdentity",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"shh_hasIdentity",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"shh_newGroup",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"shh_addToGroup",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"shh_newFilter",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"shh_uninstallFilter",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"shh_getFilterChanges",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"shh_getMessages",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"personal_unlockAccount",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"personal_newAccount",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"personal_listAccounts",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"personal_lockAccount",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"personal_importRawKey",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"personal_sendTransaction",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"personal_sign",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"personal_ecRecover",void 0);const Ge=new Pe(-1),We=new Pe(0),Xe=new Pe(1),Qe=new Pe("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function Qt(T){return function(T,A){function n(A){return new Error('unexpected character "'+T[A]+'" at position '+A+' in "'+T+'"')}for(var E={type:"",name:"",state:{allowType:!0}},S=E,O=0;O<T.length;O++){var k=T[O];switch(k){case"(":if(!S.state.allowParams)throw n(O);S.state.allowType=!1,S.type=te(S.type),S.components=[{type:"",name:"",parent:S,state:{allowType:!0}}],S=S.components[0];break;case")":delete S.state,"indexed"===S.name&&(S.indexed=!0,S.name=""),S.type=te(S.type);var B=S;if(!(S=S.parent))throw n(O);delete B.parent,S.state.allowParams=!1,S.state.allowName=!0,S.state.allowArray=!0;break;case",":delete S.state,"indexed"===S.name&&(S.indexed=!0,S.name=""),S.type=te(S.type);var j={type:"",name:"",parent:S.parent,state:{allowType:!0}};S.parent.components.push(j),delete S.parent,S=j;break;case" ":S.state.allowType&&""!==S.type&&(S.type=te(S.type),delete S.state.allowType,S.state.allowName=!0,S.state.allowParams=!0),S.state.allowName&&""!==S.name&&("indexed"===S.name?(S.indexed=!0,S.name=""):S.state.allowName=!1);break;case"[":if(!S.state.allowArray)throw n(O);S.type+=k,S.state.allowArray=!1,S.state.allowName=!1,S.state.readArray=!0;break;case"]":if(!S.state.readArray)throw n(O);S.type+=k,S.state.readArray=!1,S.state.allowArray=!0,S.state.allowName=!0;break;default:if(S.state.allowType)S.type+=k,S.state.allowParams=!0,S.state.allowArray=!0;else if(S.state.allowName)S.name+=k,delete S.state.allowArray;else{if(!S.state.readArray)throw n(O);S.type+=k}}}if(S.parent)throw new Error("unexpected eof");return delete E.state,"indexed"===S.name&&(S.indexed=!0,S.name=""),E.type=te(E.type),E}(T)}function te(T){return T.match(/^uint($|[^1-9])/)?T="uint256"+T.substring(4):T.match(/^int($|[^1-9])/)&&(T="int256"+T.substring(3)),T}const $e=new RegExp(/^bytes([0-9]*)$/),Je=new RegExp(/^(u?int)([0-9]*)$/),Ze=new RegExp(/^(.*)\[([0-9]*)\]$/),oe=function(T,A){var E=T.match(Je);return E&&parseInt(E[2])<=48?A.toNumber():A};class ie{constructor(T,A,E,S="",O){this.coerceFunc=T,this.name=A,this.type=E,this.localName=S,this.dynamic=O}}class se extends ie{constructor(T){super(T.coerceFunc,T.name,T.type,void 0,T.dynamic),Vt(this,"coder",T)}encode(T){return this.coder.encode(T)}decode(T,A){return this.coder.decode(T,A)}}class ae extends ie{constructor(T,A){super(T,"null","",A,!1)}encode(T){return Wt([])}decode(T,A){if(A>T.length)throw new Error("invalid null");return{consumed:0,value:this.coerceFunc("null",void 0)}}}function ce(T,A){return new Pe(T.toString(2).substr(-A),2)}class ue extends ie{constructor(T,A,E,S){const O=(E?"int":"uint")+8*A;super(T,O,O,S,!1),this.size=A,this.signed=E}encode(T){try{let A=ot(T);if(this.signed){let T=ce(Qe,8*this.size-1);if(A.gt(T))throw new Error("out-of-bounds");if(T=T.plus(Xe).multipliedBy(Ge),A.lt(T))throw new Error("out-of-bounds")}else if(A.lt(We)||A.gt(ce(Qe,8*this.size)))throw new Error("out-of-bounds");A=ce(st(A,8*this.size),8*this.size),this.signed&&(A=st(ut(A,8*this.size),256));let E=H(st(A).toString(16),64);if(-1!=E.indexOf("NaN"))throw U("invalid number value, NaN",Le,{arg:this.localName,coderType:this.name,value:T,v:A,twosComplement:st(A),twosComplement16:st(A).toString(16),pad:H(st(A).toString(16),64),size:this.size});return D(E)}catch(A){throw U("invalid number value",Le,{arg:this.localName,coderType:this.name,value:T,message:A.toString()})}}decode(T,A){if(T.length<A+32)throw U("insufficient data for "+this.name+" type",Le,{arg:this.localName,coderType:this.name,value:nt(T.slice(A,A+32))});var E=32-this.size,S=new Pe(q(T.slice(A+E,A+32)),16);return S=this.signed?ut(S,8*this.size):ce(S,8*this.size),{consumed:32,value:this.coerceFunc(this.name,S)}}}var Ye=new ue((function(T,A){return A}),32,!1,"none");class he extends ie{constructor(T,A,E){const S="bytes"+A;super(T,S,S,E,!1),this.length=A}encode(T){var A=new Uint8Array(32);try{if("string"==typeof T&&T.length%2!=0)throw new Error("hex string cannot be odd-length");let E=Wt(T);if(E.length>this.length)throw new Error("incorrect data length");A.set(E)}catch(A){throw U("invalid "+this.name+" value. Use hex strings or Uint8Array",Le,{arg:this.localName,coderType:this.name,value:A.value||T,details:A.message})}return A}decode(T,A){if(T.length<A+32)throw U("insufficient data for "+this.name+" type",Le,{arg:this.localName,coderType:this.name,value:nt(T.slice(A,A+32))});return{consumed:32,value:this.coerceFunc(this.name,T.slice(A,A+this.length))}}}function pe(T){var A=32*Math.ceil(T.length/32),E=new Uint8Array(A-T.length);return z(Ye.encode(T.length),T,E)}function fe(T,A,E){if(T.length<A+32)throw U("insufficient data for dynamicBytes length",Le,{arg:E,coderType:"dynamicBytes",value:nt(T.slice(A,A+32))});var S=Ye.decode(T,A).value;try{S=S.toNumber()}catch(T){throw T("dynamic bytes count too large",Le,{arg:E,coderType:"dynamicBytes",value:S.toString()})}if(T.length<A+32+S)throw U("insufficient data for dynamicBytes type",Le,{arg:E,coderType:"dynamicBytes",value:nt(T.slice(A,A+32+S))});return{consumed:32+32*Math.ceil(S/32),value:T.slice(A+32,A+32+S)}}function de(T){return 32*Math.ceil(T/32)}function ge(T,A){if(Array.isArray(A));else{if(!A||"object"!=typeof A)throw U("invalid tuple value",Le,{coderType:"tuple",value:A});var E=[];T.forEach((function(T){E.push(A[T.localName])})),A=E}if(T.length!==A.length)throw U("types/value length mismatch",Le,{coderType:"tuple",value:A});var S=[];T.forEach((function(T,E){S.push({dynamic:T.dynamic,value:T.encode(A[E])})}));var O=0,k=0;S.forEach((function(T){T.dynamic?(O+=32,k+=de(T.value.length)):O+=de(T.value.length)}));var B=0,j=O,_t=new Uint8Array(O+k);return S.forEach((function(T){T.dynamic?(_t.set(Ye.encode(j),B),B+=32,_t.set(T.value,j),j+=de(T.value.length)):(_t.set(T.value,B),B+=de(T.value.length))})),_t}class me extends Array{}class ye extends ie{constructor(T,A,E,S){super(T,"array",A.type+"["+(E>=0?E:"")+"]",S,-1===E||A.dynamic),this.coder=A,this.length=E}encode(T){if(!Array.isArray(T))throw U("expected array value",Le,{arg:this.localName,coderType:"array",value:T});var A=this.length,E=new Uint8Array(0);-1===A&&(A=T.length,E=Ye.encode(A)),function(T,A,E){if(E||(E=""),T<A)throw U("missing argument"+E,"MISSING_ARGUMENT",{count:T,expectedCount:A});if(T>A)throw U("too many arguments"+E,"UNEXPECTED_ARGUMENT",{count:T,expectedCount:A})}(A,T.length,"in coder array"+(this.localName?" "+this.localName:""));for(var S=[],O=0;O<T.length;O++)S.push(this.coder);return z(E,ge(S,T))}decode(T,A){var E=0,S=this.length;if(-1===S){try{var O=Ye.decode(T,A)}catch(T){throw T("insufficient data for dynamic array length",Le,{arg:this.localName,coderType:"array",value:T.value})}try{S=O.value.toNumber()}catch(T){throw T("array count too large",Le,{arg:this.localName,coderType:"array",value:O.value.toString()})}E+=O.consumed,A+=O.consumed}for(var k=[],B=0;B<S;B++)k.push(new se(this.coder));var j=function(T,A,E){var S=E,O=0,k=[];return T.forEach((function(T){if(T.dynamic){var B=Ye.decode(A,E);(j=T.decode(A,S+B.value.toNumber())).consumed=B.consumed}else var j=T.decode(A,E);null!=j.value&&k.push(j.value),E+=j.consumed,O+=j.consumed})),{value:k,consumed:O}}(k,T,A);return j.consumed+=E,j.value=this.coerceFunc(this.type,j.value),j}}class we extends ie{constructor(T,A,E){var S=!1,O=[];A.forEach((function(T){T.dynamic&&(S=!0),O.push(T.type)})),super(T,"tuple","tuple("+O.join(",")+")",E,S),this.coders=A}encode(T){return ge(this.coders,T)}decode(T,A){var E=function(T,A,E){var S=E,O=0,k=new me;return T.forEach((function(T){if(T.dynamic){var B=Ye.decode(A,E);(j=T.decode(A,S+B.value.toNumber())).consumed=B.consumed}else var j=T.decode(A,E);null!=j.value&&k.push(j.value),E+=j.consumed,O+=j.consumed})),T.forEach((function(T,A){let E=T.localName;E&&("length"===E&&(E="_length"),null==k[E]&&(k[E]=k[A]))})),{value:k,consumed:O}}(this.coders,T,A);return E.value=this.coerceFunc(this.type,E.value),E}}const tn={address:class extends ie{constructor(T,A){super(T,"address","address",A,!1)}encode(T){let A=new Uint8Array(32);const E=T.trim();if(!ht(E))throw U("invalid address format",Le,{arg:this.localName,coderType:"address",value:T});try{A.set(D(jt(E)),12)}catch(A){throw U(`invalid address (${A.message})`,Le,{arg:this.localName,coderType:"address",value:T})}return A}decode(T,A){if(T.length<A+32)throw U("insufficuent data for address type",Le,{arg:this.localName,coderType:"address",value:nt(T.slice(A,A+32)),missingBytes:A+32-T.length});return{consumed:32,value:this.coerceFunc("address",ct(nt(T.slice(A+12,A+32))))}}},bool:class extends ie{constructor(T,A){super(T,"bool","bool",A,!1)}encode(T){return Ye.encode(T?1:0)}decode(T,A){try{var E=Ye.decode(T,A)}catch(T){if("insufficient data for uint256 type"===T.reason)throw U("insufficient data for boolean type",Le,{arg:this.localName,coderType:"boolean",value:T.value});throw T}return{consumed:E.consumed,value:this.coerceFunc("bool",!E.value.isZero())}}},string:class extends ie{constructor(T,A){super(T,"string","string",A,!0)}encode(T){if("string"!=typeof T)throw U("invalid string value",Le,{arg:this.localName,coderType:"string",value:T});return pe(M(T))}decode(T,A){var E=fe(T,A,this.localName);return E.value=this.coerceFunc("string",R(E.value)),E}},bytes:class extends ie{constructor(T,A){super(T,"bytes","bytes",A,!0)}encode(T){try{return pe(Wt(T))}catch(T){throw T("invalid bytes value",Le,{arg:this.localName,coderType:"bytes",value:T.value})}}decode(T,A){var E=fe(T,A,this.localName);return E.value=this.coerceFunc("bytes",E.value),E}},function:class extends he{constructor(T,A){super(T,24,A)}}};function be(T,A){var E,S=tn[A.type];if(S)return new S(T,A.name);if(E=A.type.match(Je)){let S=parseInt(E[2]||"256");if(0===S||S>256||S%8!=0)throw U("invalid "+E[1]+" bit length",Le,{arg:"param",value:A});return new ue(T,S/8,"int"===E[1],A.name)}if(E=A.type.match($e)){let S=parseInt(E[1]);if(0===S||S>32)throw U("invalid bytes length",Le,{arg:"param",value:A});return new he(T,S,A.name)}if(E=A.type.match(Ze)){const S=Object.assign({},A);let O=parseInt(E[2]||"-1");return S.type=E[1],new ye(T,be(T,S),O,A.name)}if("tuple"===A.type.substring(0,5))return function(T,A,E){A||(A=[]);var S=A.map((A=>be(T,A)));return new we(T,S,E)}(T,A.components,A.name);if(""===A.type)return new ae(T,A.name);throw U("invalid type",Le,{arg:"type",value:A.type,fullType:A})}class _e{constructor(T){!function(T,A){if(!(T instanceof A))throw U("missing new","MISSING_NEW",{name:A.name})}(this,_e),T||(T=oe),Vt(this,"coerceFunc",T)}encode(T,A){if(T.length!==A.length)throw U("types/values length mismatch",Le,{count:{types:T.length,values:A.length},value:{types:T,values:A}});const E=T.map((T=>"string"==typeof T?Qt(T):T)).map((T=>be(this.coerceFunc,T)));return new we(this.coerceFunc,E,"_").encode(A)}decode(T,A){const E=T.map((T=>"string"==typeof T?Qt(T):T)).map((T=>be(this.coerceFunc,T)));return new we(this.coerceFunc,E,"_").decode(A,0).value}}const nn=new _e;var rn;!function(T){T.encodeParams=function(T,A){return q(nn.encode(T,A))},T.decodeParams=function(T,A){if(T.length>0&&(!A||"0x"===A||"0X"===A))throw new Error("Returned values aren't valid, did it run Out of Gas? You might also see this error if you are not using the correct ABI for the contract you are retrieving data from, requesting data from a block number that does not exist, or querying a node which is not fully synced.");return nn.decode(T,D("0x"+A.replace(/0x/i,"")))}}(rn||(rn={}));class xe{constructor(T){this.json=T,this._inputTypes=T.inputs||[],this._outputTypes=T.outputs||[],this._constant=!!T.constant,this._payable=!!T.payable||"payable"===T.stateMutability,this.needsToBeTransaction=this._payable||"constant"in T&&!T.constant||"nonpayable"===T.stateMutability,this._name=G(T)}extractDefaultBlock(T){return T.length>this._inputTypes.length&&!wt(T[T.length-1])&&Et(T.pop())||"latest"}validateArgs(T){if(T.some((T=>void 0===T)))throw new Error("Invalid call, some arguments are undefined");let A=T.filter((function(T){return!(!0===wt(T)&&!1===bt(T)&&!1===mt(T)&&!(T instanceof Uint8Array))}));if(A.length!==this._inputTypes.length)throw E=A.length,S=this._inputTypes.length,new Error(`Invalid number of arguments to Solidity function. given: ${E}, expected: ${S}`);var E,S}toPayload(T){let A={to:void 0,data:void 0,value:void 0,from:void 0};T.length>this._inputTypes.length&&wt(T[T.length-1])&&(A=T.pop()),this.validateArgs(T);const E=this.signature();let S=rn.encodeParams(this._inputTypes,T);return 0==S.indexOf("0x")&&(S=S.substr(2)),A.data="0x"+E+S,A}signature(){return $(this._name).slice(0,8)}unpackOutput(T){if(!T)return;const A=T.length>=2?T.slice(2):T;let E=rn.decodeParams(this._outputTypes,A);return 1===E.length?E[0]:E}async execute(T,A,...E){if(!T)throw new Error(`Cannot call function ${this.displayName()} because there is no requestManager`);if(this.needsToBeTransaction){const S=this.toPayload(E);if(S.to=A,S.value>0&&!this._payable)throw new Error("Cannot send value to non-payable function");if(!S.from)throw new Error('Missing "from" in transaction options');return await T.eth_sendTransaction(S)}{const S=this.extractDefaultBlock(E),O=this.toPayload(E);O.to=A;const k=await T.eth_call(O,S);return this.unpackOutput(k)}}estimateGas(T,A,...E){if(!(T instanceof zt))throw new Error("estimateGas needs to receive a RequestManager as first argument");let S=this.toPayload(E);return S.to=A,T.eth_estimateGas(S)}displayName(){return W(this._name)}typeName(){return V(this._name)||"void"}attachToContract(T){let A=this.displayName();const E=Object.assign(((...A)=>this.execute(T.requestManager,T.address,...A)),{estimateGas:this.estimateGas.bind(this,T.requestManager,T.address),toPayload:(...T)=>this.toPayload(T)});T[A]||(T[A]=E),T[A][this.typeName()]=E}}function ke(T){if(null==T)return null;const A=String(T).toString();return 0===A.indexOf("0x")?A:q(M(A))}class Te{constructor(T){this.requestManager=T,this.isStarted=!1,this.isDisposed=!1,this.formatter=T=>T,this.filterId=S(),this.callbacks=[],this.stopSemaphore=S()}async watch(T){if(this.isDisposed)throw new Error("The filter was disposed");T&&(this.callbacks.push(T),this.isStarted||await this.start())}async start(){if(this.isDisposed)throw new Error("The filter was disposed");if(!this.isStarted){this.isStarted=!0;try{const T=await this.getNewFilter();if(!T)throw new Error("Could not create a filter, response: "+JSON.stringify(T));this.filterId.resolve(T)}catch(T){throw T}this.stopSemaphore=S(),await this.poll()}}async stop(){if(!this.isStarted)return;if(this.isDisposed)return;this.isDisposed=!0;const T=await this.filterId;if(this.isStarted=!1,this.stopSemaphore&&await this.stopSemaphore,!0!==await this.uninstall())throw new Error(`Couldn't stop the eth filter: ${T}`)}async poll(){if(this.isStarted){if(this.callbacks.length){const T=await this.getChanges();this.callbacks.forEach((A=>{this.formatter?T.forEach((T=>{A(this.formatter(T))})):T.forEach((T=>A(T)))}))}this.stopSemaphore.resolve(1),this.isStarted&&(this.stopSemaphore=S(),setTimeout((T=()=>this.poll(),function(){T().catch((T=>console.error(T)))}),500))}else this.stopSemaphore.resolve(1);var T}}class Ae extends Te{constructor(T,A,E=(T=>T)){super(T),this.requestManager=T,this.options=A,this.formatter=E,this.options=this.options||{},this.options.topics=this.options.topics||[],this.options.topics=this.options.topics.map((function(T){return ke(T)})),this.options={topics:this.options.topics,address:this.options.address?this.options.address:void 0,fromBlock:"number"==typeof this.options.fromBlock||"string"==typeof this.options.fromBlock?Bt(this.options.fromBlock)||void 0:"latest",toBlock:"number"==typeof this.options.toBlock||"string"==typeof this.options.toBlock?Bt(this.options.toBlock)||void 0:"latest"}}async getLogs(){this.isStarted||await this.start();const T=await this.filterId;return this.requestManager.eth_getFilterLogs(T)}async getNewFilter(){return this.requestManager.eth_newFilter(this.options)}async getChanges(){const T=await this.filterId;return this.requestManager.eth_getFilterChanges(T)}async uninstall(){const T=await this.filterId;return this.requestManager.eth_uninstallFilter(T)}}class Ee{constructor(T,A,E){this.requestManager=T,this.address=E,this._anonymous=!1,this._params=A.inputs||[],this._name=G(A),this._anonymous=A.anonymous||!1}types(T){return this._params.filter((function(A){return A.indexed===T}))}displayName(){return W(this._name)}typeName(){return V(this._name)||"void"}signature(){return $(this._name)}encode(T={},A={}){let E={topics:[],address:this.address};void 0!==A.fromBlock&&(E.fromBlock=Bt(A.fromBlock)||void 0),void 0!==A.toBlock&&(E.toBlock=Bt(A.toBlock)||void 0),E.topics=E.topics||[],this._anonymous||E.topics.push("0x"+this.signature());let S=this._params.filter((function(T){return!0===T.indexed})).map((function(A){let E=T[A.name];return null==E?null:bt(E)?E.map((function(T){return"0x"+rn.encodeParams([A],[T])})):"0x"+rn.encodeParams([A],[E])}));return E.topics=E.topics.concat(S),E}decode(T){T.data=T.data||"",T.topics=T.topics||[];let A=(this._anonymous?T.topics:T.topics.slice(1)).map((function(T){return T.slice(2)})).join(""),E=rn.decodeParams(this.types(!0),A),S=T.data.slice(2),O=rn.decodeParams(this.types(!1),S);const k=this._params.reduce((function(T,A){return T[A.name]=A.indexed?E.shift():O.shift(),T}),{});return Object.assign(Object.assign({},Rt(T)),{event:this.displayName(),address:T.address,args:k})}async execute(T,A){let E=this.encode(T,A),S=this.decode.bind(this);return new Ae(this.requestManager,E,S)}attachToContract(T){let A=this.execute.bind(this),E=this.displayName();T.events[E]||(T.events[E]=A),T.events[E][this.typeName()]=this.execute.bind(this,T)}}class Be{constructor(T,A,E){this._requestManager=T,this._json=A,this._address=E}encode(T={}){let A={address:this._address};return void 0!==T.fromBlock&&(A.fromBlock=Bt(T.fromBlock)||void 0),void 0!==T.toBlock&&(A.toBlock=Bt(T.toBlock)||void 0),A}decode(T){T.data=T.data||"";let A=bt(T.topics)&&yt(T.topics[0])?T.topics[0].slice(2):"",E=this._json.filter((function(T){return A===$(G(T))}))[0];return E?new Ee(this._requestManager,E,this._address).decode(T):Rt(T)}async execute(T){let A=this.encode(T),E=this.decode.bind(this);return new Ae(this._requestManager,A,E)}getAllEventsFunction(){return this.execute.bind(this)}}class Oe{constructor(T,A,E){var S;this.requestManager=T,this.abi=A,this.address=E,this.events={},this.transactionHash=null,this.address=E,this.abi=A,(S=this).abi.filter((function(T){return"function"===T.type})).map((function(T){return new xe(T)})).forEach((function(T){T.attachToContract(S)})),this.allEvents=function(T){let A=T.abi.filter((function(T){return"event"===T.type})),E=new Be(T.requestManager,A,T.address);return A.map((function(A){return new Ee(T.requestManager,A,T.address)})).forEach((function(A){A.attachToContract(T)})),E.getAllEventsFunction()}(this)}}T.AbstractFilter=Te,T.BigNumber=Pe,T.Contract=Oe,T.ContractFactory=class{constructor(T,A){this.requestManager=T,this.abi=A}async deploy(...T){let A,E=T[T.length-1];if(wt(E)&&!bt(E)&&(A=T.pop()),!A)throw new Error("Missing options object");if(!A.data||"string"!=typeof A.data)throw new Error("Invalid options.data");if(Z(A.value)>0&&!(this.abi.filter((function(A){return"constructor"===A.type&&A.inputs.length===T.length}))[0]||{}).payable)throw new Error("Cannot send value to non-payable constructor");let O=(k=this.abi,B=T,k.filter((function(T){return"constructor"===T.type&&T.inputs&&T.inputs.length===B.length})).map((function(T){return T.inputs||[]})).map((function(T){return rn.encodeParams(T,B)}))[0]||"");var k,B;A.data+=O,A.gas||(A.gas=await this.requestManager.eth_estimateGas(A));const j=await this.requestManager.eth_sendTransaction(A);if(!j)throw new Error("Error while sending contract creation transaction. A TxHash was not retrieved");const _t=await async function(T,A){const E=S();let O=0;const o=()=>{O++,O>50?E.reject(new Error("Contract transaction couldn't be found after 50 blocks")):T.eth_getTransactionReceipt(A).then((T=>{T&&T.blockHash?E.resolve(T):setTimeout(o,1e3)}),(T=>E.reject(T)))};o();const k=await E,B=await T.eth_getCode(k.contractAddress,"latest");if(B&&B.length>3)return k.contractAddress;throw Object.assign(new Error("The contract code couldn't be stored, please check your gas amount."),{response:B,receipt:k})}(this.requestManager,j),Pt=await this.at(_t);return Pt.transactionHash=j,Pt}async at(T){if(!ht(T))throw new TypeError(`Invalid address ${JSON.stringify(T)}`);return new Oe(this.requestManager,this.abi,T)}},T.EthBlockFilter=class extends Ae{constructor(T){super(T,{})}async getNewFilter(){return this.requestManager.eth_newBlockFilter()}},T.EthFilter=Ae,T.EthPendingTransactionFilter=class extends Ae{constructor(T){super(T,{})}async getNewFilter(){return this.requestManager.eth_newPendingTransactionFilter()}},T.HTTPProvider=class{constructor(T,A={}){this.host=T,this.options=A,this.debug=!1,this.host=T||"http://localhost:8545"}send(){throw new Error("Sync requests are deprecated")}sendAsync(T,A){try{let E=null;if(E=T instanceof Array?T.map((T=>e(T))):e(T),"undefined"==typeof fetch)throw new Error("There is no global fetch object. Please install and import isomorphic-fetch");const S={body:JSON.stringify(E),method:"POST",headers:Object.assign(Object.assign({},this.options.headers),{"Content-Type":"application/json"})};this.debug&&console.log("SEND >> "+S.body),fetch(this.host,S).then((async T=>{if(T.ok){const E=await T.json();this.debug&&console.log("RECV << "+JSON.stringify(E)),E.error?A(Object.assign(new Error(E.error.json||E.error),E.error)):A(null,E)}else this.debug&&console.log("ERR << "+JSON.stringify(T)),A(new Error("External error. response code: "+T.status))}),(T=>{this.debug&&console.log("ERR << "+JSON.stringify(T)),A(T)}))}catch(T){this.debug&&console.log("ERR << "+JSON.stringify(T)),A(T)}}},T.Method=qt,T.Property=$t,T.RequestManager=zt,T.SHHFilter=class extends Te{constructor(T,A){super(T),this.requestManager=T,this.options=A,this.options=this.options||{topics:[]},this.options.topics=this.options.topics||[],this.options.topics=this.options.topics.map((function(T){return ke(T)})),this.options={topics:this.options.topics,to:this.options.to}}async getMessages(){const T=await this.filterId;return this.requestManager.shh_getMessages(T)}async getNewFilter(){return this.requestManager.shh_newFilter(this.options)}async getChanges(){const T=await this.filterId;return this.requestManager.shh_getFilterChanges(T)}async uninstall(){const T=await this.filterId;return this.requestManager.shh_uninstallFilter(T)}},T.SolidityEvent=Ee,T.SolidityFunction=xe,T.WebSocketProvider=class{constructor(T,A={}){this.url=T,this.options=A,this.isDisposed=!1,this.responseCallbacks=new Map,this.notificationCallbacks=new Set,this.debug=!1,this.lastChunk="",this.connect()}dispose(){this.isDisposed=!0;const T=this.connection;this.timeout(new Error("Provider disposed.")),T.then((T=>T.close()))}send(){throw new Error("Sync requests are deprecated")}sendAsync(T,A){const E=[];let O;if(T instanceof Array)O=Promise.all(T.map((T=>{const A=S();try{const S=e(T);E.push(S),this.responseCallbacks.set(S.id,A)}catch(T){A.reject(T)}return A})));else{const A=S();try{const S=e(T);E.push(S),this.responseCallbacks.set(S.id,A)}catch(T){A.reject(T)}O=A}O.then((T=>A(null,T)),(T=>A(T))),this.connection.then((T=>{E.forEach((A=>{const E=JSON.stringify(A);this.debug&&console.log("SEND >> "+E),T.send(E)}))}),(T=>{A(T)}))}parseResponse(T){let A=[];return T.replace(/\}[\n\r]?\{/g,"}|--|{").replace(/\}\][\n\r]?\[\{/g,"}]|--|[{").replace(/\}[\n\r]?\[\{/g,"}|--|[{").replace(/\}\][\n\r]?\{/g,"}]|--|{").split("|--|").forEach((T=>{let E=T;this.lastChunk&&(E=this.lastChunk+E);let S=null;try{S=JSON.parse(E)}catch(T){return this.lastChunk=E,clearTimeout(this.lastChunkTimeout),void(this.lastChunkTimeout=setTimeout((()=>{this.timeout()}),15e3))}clearTimeout(this.lastChunkTimeout),this.lastChunk="",S&&A.push(S)})),A}processMessage(T){if("id"in T){const A=T.id,E=this.responseCallbacks.get(A);if(!E)return void console.error("Error: Received a response for an unknown request",T);this.responseCallbacks.delete(A),"error"in T?E.reject(Object.assign(new Error(T.error.message||T.error),T.error)):"result"in T&&E.resolve(T)}else this.notificationCallbacks.forEach((A=>A(null,T)))}timeout(T){this.connection&&this.connection.isPending||(this.connection=S());const A=T||new Error("Connection timeout");this.responseCallbacks.forEach((T=>T.reject(A))),this.responseCallbacks.clear(),this.isDisposed||this.connect()}connect(){this.connection&&!this.connection.isPending&&this.connection.then((T=>T.close())),this.connection&&this.connection.isPending||(this.connection=S()),this.lastChunk="";let T=this.options.WebSocketConstructor||("undefined"!=typeof WebSocket?WebSocket:void 0);if(!T)throw new Error("Please provide a WebSocketConstructor");const A=new T(this.url,this.options.protocol);A.onopen=()=>{this.connection.resolve(A)},A.onerror=T=>{const A=new Error("Error in web socket");A.data=T,this.timeout(A)},A.onclose=T=>{this.timeout(new Error(`Connection closed (${T&&T.reason||"Unknown reason"})`))},A.onmessage=T=>{let A="string"==typeof T.data?T.data:"";this.debug&&console.log("RECV << "+T.data),this.parseResponse(A).forEach((T=>{T instanceof Array?T.forEach((T=>this.processMessage(T))):this.processMessage(T)}))}}},T.bytesToHex=q,T.bytesToUtf8String=R,T.concatBytes=z,T.default=zt,T.extractDisplayName=W,T.extractTypeName=V,T.fromAscii=function(T,A=0){let E="";for(let A=0;A<T.length;A++){let S=T.charCodeAt(A).toString(16);E+=S.length<2?"0"+S:S}return"0x"+E.padEnd(A,"0")},T.fromDecimal=et,T.fromTwosComplement=ut,T.fromWei=function(T,A){let E=ot(T).dividedBy(rt(A));return mt(T)?E:E.toString(10)},T.getAddress=ct,T.getValueOfUnit=rt,T.hexToBytes=D,T.isAddress=ht,T.isArray=bt,T.isBigNumber=mt,T.isBloom=function(T){return!!/^(0x)?[0-9a-f]{512}$/i.test(T)&&!!/^(0x)?[0-9a-f]{512}$/i.test(T)},T.isBoolean=vt,T.isChecksumAddress=pt,T.isFunction=function(T){return"function"==typeof T},T.isHex=function(T){return"string"==typeof T&&/^0x[0-9a-fA-F]+$/.test(T)},T.isJson=function(T){try{return!!JSON.parse(T)}catch(T){return!1}},T.isObject=wt,T.isStrictAddress=lt,T.isString=yt,T.isTopic=function(T){return!!/^(0x)?[0-9a-f]{64}$/i.test(T)&&!!/^(0x)?[0-9a-f]{64}$/i.test(T)},T.isValidResponse=xt,T.padLeft=H,T.padRight=function(T,A,E){return T+new Array(A-T.length+1).join(E||"0")},T.sha3=$,T.signedIsNegative=at,T.stringToUtf8Bytes=M,T.toAddress=gt,T.toArray=dt,T.toAscii=function(T){let A="",E=0,S=T.length;for("0x"===T.substring(0,2)&&(E=2);E<S;E+=2){let S=parseInt(T.substr(E,2),16);A+=String.fromCharCode(S)}return A},T.toBatchPayload=function(T){return T.map((function(T){return Nt(T.method,T.params)}))},T.toBigNumber=ot,T.toBoolean=tt,T.toChecksumAddress=ft,T.toData=X,T.toDecimal=Z,T.toHex=nt,T.toJsonRpcRequest=Nt,T.toNullDecimal=K,T.toString=Y,T.toStringData=Q,T.toTwosComplement=st,T.toWei=function(T,A){let E=ot(T).times(rt(A));return mt(T)?E:E.toString(10)},T.transformToFullName=G,Object.defineProperty(T,"__esModule",{value:!0})})),function(T,A){"object"==typeof exports&&"undefined"!=typeof module?A(exports,require("@decentraland/Identity"),require("@decentraland/web3-provider"),require("eth-connect")):"function"==typeof define&&define.amd?define("@compicactus/dcl-scene-utils",["exports","@decentraland/Identity","@decentraland/web3-provider","eth-connect"],A):A((T="undefined"!=typeof globalThis?globalThis:T||self)["@compicactus/dcl-scene-utils"]={},T.Identity,T.web3Provider,T.eth)}(this,(function(T,A,E,S){var O=function(T){if(T&&T.__esModule)return T;var A=Object.create(null);return T&&Object.keys(T).forEach((function(E){if("default"!==E){var S=Object.getOwnPropertyDescriptor(T,E);Object.defineProperty(A,E,S.get?S:{enumerable:!0,get:function(){return T[E]}})}})),A.default=T,Object.freeze(A)}(S),r=function(T,A){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,A){T.__proto__=A}||function(T,A){for(var E in A)Object.prototype.hasOwnProperty.call(A,E)&&(T[E]=A[E])},r(T,A)
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */};function s(T,A){function n(){this.constructor=T}r(T,A),T.prototype=null===A?Object.create(A):(n.prototype=A.prototype,new n)}function u(T,A,E,S){return new(E||(E=Promise))((function(O,k){function r(T){try{u(S.next(T))}catch(T){k(T)}}function s(T){try{u(S.throw(T))}catch(T){k(T)}}function u(T){var A;T.done?O(T.value):(A=T.value,A instanceof E?A:new E((function(T){T(A)}))).then(r,s)}u((S=S.apply(T,A||[])).next())}))}function p(T,A){var E,S,O,k,B={label:0,sent:function(){if(1&O[0])throw O[1];return O[1]},trys:[],ops:[]};return k={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(k[Symbol.iterator]=function(){return this}),k;function s(k){return function(j){return function(k){if(E)throw new TypeError("Generator is already executing.");for(;B;)try{if(E=1,S&&(O=2&k[0]?S.return:k[0]?S.throw||((O=S.return)&&O.call(S),0):S.next)&&!(O=O.call(S,k[1])).done)return O;switch(S=0,O&&(k=[2&k[0],O.value]),k[0]){case 0:case 1:O=k;break;case 4:return B.label++,{value:k[1],done:!1};case 5:B.label++,S=k[1],k=[0];continue;case 7:k=B.ops.pop(),B.trys.pop();continue;default:if(!((O=(O=B.trys).length>0&&O[O.length-1])||6!==k[0]&&2!==k[0])){B=0;continue}if(3===k[0]&&(!O||k[1]>O[0]&&k[1]<O[3])){B.label=k[1];break}if(6===k[0]&&B.label<O[1]){B.label=O[1],O=k;break}if(O&&B.label<O[2]){B.label=O[2],B.ops.push(k);break}O[2]&&B.ops.pop(),B.trys.pop();continue}k=A.call(T,B)}catch(T){k=[6,T],S=0}finally{E=O=0}if(5&k[0])throw k[1];return{value:k[0]?k[1]:void 0,done:!0}}([k,j])}}}function c(T,A){var E="function"==typeof Symbol&&T[Symbol.iterator];if(!E)return T;var S,O,k=E.call(T),B=[];try{for(;(void 0===A||A-- >0)&&!(S=k.next()).done;)B.push(S.value)}catch(T){O={error:T}}finally{try{S&&!S.done&&(E=k.return)&&E.call(k)}finally{if(O)throw O.error}}return B}function y(){for(var T=[],A=0;A<arguments.length;A++)T=T.concat(c(arguments[A]));return T}var d=function(T,A,E){return u(void 0,void 0,void 0,(function(){var S,O;return p(this,(function(k){switch(k.label){case 0:S=0,k.label=1;case 1:if(!(S<E))return[3,6];k.label=2;case 2:return k.trys.push([2,4,,5]),[4,fetch(T,A)];case 3:return[2,k.sent()];case 4:if(O=k.sent(),S+1===E)throw O;return[3,5];case 5:return S++,[3,1];case 6:return[2]}}))}))};function l(T){for(var A=(new Date).getTime(),E=0;E<1e7&&!((new Date).getTime()-A>T);E++);}var k={Add:{position:[-.9736900329589844,.5958811640739441,.040917061269283295],rotation:[9992007221626409e-31,4.81169628585576e-8,-.3581227958202362,-.9336745142936707],scale:[.18492013216018677,.18492008745670319,.18492013216018677],uv:[.746986985206604,.8680751919746399,.8492201566696167,.8680751919746399,.8492201566696167,.9703083634376526,.746986985206604,.9703083634376526,.746986985206604,.8680751919746399,.8492201566696167,.8680751919746399,.8492201566696167,.9703083634376526,.746986985206604,.9703083634376526]},ArrowLeftCompi:{position:[1.4788908958435059,.6966143846511841,.040916964411735535],rotation:[-7105427357601002e-30,1.3435888490676007e-7,-1.0000001192092896,902615418659717e-29],scale:[.14559833705425262,.14559833705425262,.14559833705425262],uv:[.53712397813797,.8761494755744934,.6298521161079407,.8761494755744934,.6298521161079407,.9688776731491089,.53712397813797,.9688776731491089,.53712397813797,.8761494755744934,.6298521161079407,.8761494755744934,.6298521161079407,.9688776731491089,.53712397813797,.9688776731491089]},ArrowLeftQuestions:{position:[-.5068280696868896,-.20516154170036316,.0409170463681221],rotation:[-7105427357601002e-30,1.3435888490676007e-7,-1.0000001192092896,902615418659717e-29],scale:[.13791120052337646,.13791120052337646,.13791120052337646],uv:[.5374969244003296,.876522421836853,.629479169845581,.876522421836853,.629479169845581,.9685047268867493,.5374969244003296,.9685047268867493,.5374969244003296,.876522421836853,.629479169845581,.876522421836853,.629479169845581,.9685047268867493,.5374969244003296,.9685047268867493]},ArrowRightCompi:{position:[.5825899839401245,.7002140879631042,.04091687127947807],rotation:[-2842170943040401e-29,12324151505631147e-31,4.371138118131057e-8,1.0000001192092896],scale:[.15308743715286255,.15308743715286255,.15308743715286255],uv:[.5377315878868103,.8767570853233337,.6292445063591003,.8767570853233337,.6292445063591003,.9682701230049133,.5377315878868103,.9682701230049133,.5377315878868103,.8767570853233337,.6292445063591003,.8767570853233337,.6292445063591003,.9682701230049133,.5377315878868103,.9682701230049133]},ArrowRightQuestions:{position:[-1.3984005451202393,-.21152262389659882,.04091695323586464],rotation:[-2842170943040401e-29,12324151505631147e-31,4.371138118131057e-8,1.0000001192092896],scale:[.14561930298805237,.14561930298805237,.14561930298805237],uv:[.5326187610626221,.8716443181037903,.6300644874572754,.8716443181037903,.6300644874572754,.9690901637077332,.5326187610626221,.9690901637077332,.5326187610626221,.8716443181037903,.6300644874572754,.8716443181037903,.6300644874572754,.9690901637077332,.5326187610626221,.9690901637077332]},BackgroundAnswers:{position:[-.00592494010925293,-.07895167171955109,-1.060785503881334e-8],rotation:[-0,-1174602272000988e-29,8.742277657347586e-8,1],scale:[.8324118256568909,1.189159631729126,1.189159631729126],uv:[.09974434971809387,.4196958541870117,.4860137104988098,.4196958541870117,.4860137104988098,.960472822189331,.09974434971809387,.960472822189331,.09974434971809387,.4196958541870117,.4860137104988098,.4196958541870117,.4860137104988098,.960472822189331,.09974434971809387,.960472822189331]},BackgroundCompicactus:{position:[1.0598316192626953,-.04718310385942459,.0029314737766981125],rotation:[-7103880569560197e-31,-6.2252460963918566e-9,.04633298143744469,-.998926043510437],scale:[1.1614147424697876,1.1614147424697876,1.1614147424697876],uv:[.8326539993286133,.09020934253931046,.874096155166626,.09020934253931046,.874096155166626,.13165152072906494,.8326539993286133,.13165152072906494,.8326539993286133,.09020934253931046,.874096155166626,.09020934253931046,.874096155166626,.13165152072906494,.8326539993286133,.13165152072906494]},BackgroundQuestions:{position:[-.9756283760070801,-.06579305976629257,-8.83987905098138e-9],rotation:[-0,-1.3435884227419592e-7,1,-4.371138828673793e-8],scale:[.8324118256568909,1.189159631729126,1.189159631729126],uv:[.09974434971809387,.4196958541870117,.4860137104988098,.4196958541870117,.4860137104988098,.960472822189331,.09974434971809387,.960472822189331,.09974434971809387,.4196958541870117,.4860137104988098,.4196958541870117,.4860137104988098,.960472822189331,.09974434971809387,.960472822189331]},CancelRedCompi:{position:[1.0075632333755493,-.01593323051929474,.07591697573661804],rotation:[-2842170943040401e-29,12324151505631147e-31,4.371138118131057e-8,1.0000001192092896],scale:[.4886789917945862,.4886789917945862,.4886789917945862],uv:[.5147221088409424,.6938798427581787,.6448183059692383,.6938798427581787,.6448183059692383,.8239762783050537,.5147221088409424,.8239762783050537,.5147221088409424,.6938798427581787,.6448183059692383,.6938798427581787,.6448183059692383,.8239762783050537,.5147221088409424,.8239762783050537]},Compicactus:{position:[1.0598316192626953,-.04718310385942459,.044343285262584686],rotation:[901047179509523e-30,2.344884952876214e-9,-.017452403903007507,-.9998477101325989],scale:[1.1614147424697876,1.1614147424697876,1.1614147424697876],uv:[.001507878303527832,.9648514986038208,.9648514986038208,.9984922409057617,.9984921216964722,.03514862060546875,.03514862060546875,.0015079975128173828,.001507878303527832,.9648514986038208,.9648514986038208,.9984922409057617,.9984921216964722,.03514862060546875,.03514862060546875,.0015079975128173828]},EditAnswer:{position:[-.17161095142364502,.5804060697555542,.040917061269283295],rotation:[-0,0,-0,-1],scale:[.21622267365455627,.21622267365455627,.21622267365455627],uv:[.6404823064804077,.8690820932388306,.7427154779434204,.8690820932388306,.7427154779434204,.9713152647018433,.6404823064804077,.9713152647018433,.6404823064804077,.8690820932388306,.7427154779434204,.8690820932388306,.7427154779434204,.9713152647018433,.6404823064804077,.9713152647018433]},EditName:{position:[1.023306131362915,.9744213819503784,.040916845202445984],rotation:[-0,0,-0,-1],scale:[.21622267365455627,.21622267365455627,.21622267365455627],uv:[.6404823064804077,.8690820932388306,.7427154779434204,.8690820932388306,.7427154779434204,.9713152647018433,.6404823064804077,.9713152647018433,.6404823064804077,.8690820932388306,.7427154779434204,.8690820932388306,.7427154779434204,.9713152647018433,.6404823064804077,.9713152647018433]},Help:{position:[-.4528905153274536,1.1889170408248901,.04091717302799225],rotation:[-0,0,-0,-1],scale:[.36114898324012756,.18057449162006378,.36114898324012756],uv:[.6136775016784668,.13104644417762756,.7717379331588745,.13104644417762756,.7717379331588745,.21007665991783142,.6136775016784668,.21007665991783142,.6136775016784668,.13104644417762756,.7717379331588745,.13104644417762756,.7717379331588745,.21007665991783142,.6136775016784668,.21007665991783142]},Mint:{position:[-.002437543123960495,1.3288666009902954,.04091716185212135],rotation:[-0,0,-0,-1],scale:[.4449852406978607,.22249262034893036,.4449852406978607],uv:[.4526936113834381,.13239853084087372,.6056946516036987,.13239853084087372,.6056946516036987,.20889903604984283,.4526936113834381,.20889903604984283,.4526936113834381,.13239853084087372,.6056946516036987,.13239853084087372,.6056946516036987,.20889903604984283,.4526936113834381,.20889903604984283]},Name:{position:[1.0389444828033447,.7171220183372498,.040916867554187775],rotation:[-2842170943040401e-29,12324151505631147e-31,4.371138118131057e-8,1.0000001192092896],scale:[.6634318828582764,.28844866156578064,.28844866156578064],uv:[.5097656846046448,.2790776193141937,.739005982875824,.2790776193141937,.739005982875824,.3787473142147064,.5097656846046448,.3787473142147064,.5097656846046448,.2790776193141937,.739005982875824,.2790776193141937,.739005982875824,.3787473142147064,.5097656846046448,.3787473142147064]},OkGreenCompi:{position:[1.0075632333755493,-.01593323051929474,.08991697430610657],rotation:[-2842170943040401e-29,12324151505631147e-31,4.371138118131057e-8,1.0000001192092896],scale:[.4886789917945862,.4886789917945862,.4886789917945862],uv:[.6978199481964111,.6938798427581787,.827916145324707,.6938798427581787,.827916145324707,.8239762783050537,.6978199481964111,.8239762783050537,.6978199481964111,.6938798427581787,.827916145324707,.6938798427581787,.827916145324707,.8239762783050537,.6978199481964111,.8239762783050537]},PolygonMana:{position:[.5321251749992371,1.2641630172729492,.04091712832450867],rotation:[-0,0,-0,-1],scale:[.528679609298706,.505429208278656,.47581160068511963],uv:[.21294867992401123,.026864349842071533,.4362680912017822,.026864349842071533,.4362680912017822,.22785180807113647,.21294867992401123,.22785180807113647,.21294867992401123,.026864349842071533,.4362680912017822,.026864349842071533,.4362680912017822,.22785180807113647,.21294867992401123,.22785180807113647]},Remove:{position:[.10745614767074585,.5804059505462646,.040917061269283295],rotation:[-0,0,-0,-1],scale:[.19285941123962402,.19285941123962402,.19285941123962402],uv:[.7486777305603027,.8712334632873535,.8466081619262695,.8712334632873535,.8466081619262695,.9691638946533203,.7486777305603027,.9691638946533203,.7486777305603027,.8712334632873535,.8466081619262695,.8712334632873535,.8466081619262695,.9691638946533203,.7486777305603027,.9691638946533203]},SelectedQuestion:{position:[-.9813814163208008,.285593181848526,.06129398196935654],rotation:[-2842170943040401e-29,12324151505631147e-31,4.371138118131057e-8,1.0000001192092896],scale:[.6806405782699585,.09864357113838196,.19728714227676392],uv:[.1351213902235031,.30550289154052734,.45817357301712036,.30550289154052734,.45817357301712036,.3523220419883728,.1351213902235031,.3523220419883728,.1351213902235031,.30550289154052734,.45817357301712036,.30550289154052734,.45817357301712036,.3523220419883728,.1351213902235031,.3523220419883728]},WorkingYellowCompi:{position:[1.0075632333755493,-.01593323051929474,.10591697692871094],rotation:[-2842170943040401e-29,12324151505631147e-31,4.371138118131057e-8,1.0000001192092896],scale:[.4886789917945862,.4886789917945862,.4886789917945862],uv:[.6094315052032471,.5350365042686462,.739527702331543,.5350365042686462,.739527702331543,.6651329398155212,.6094315052032471,.6651329398155212,.6094315052032471,.5350365042686462,.739527702331543,.5350365042686462,.739527702331543,.6651329398155212,.6094315052032471,.6651329398155212]}},B=["Action-01-Look_R-L","Action-02-Look_R","Action-03-Look_L","Action-04-Look-Up","Action-05-Sleep","Action-06-Dancing","Action-07-Swinging","Action-08-LOL","Action-09-Pised_Off","Action-10-Yawn","Action-11-Alert","Action-12_Sigh"],j=function(T){function t(){var A=T.call(this)||this;return A.element_entities=[],A.current_compi=0,A.character_name="Compi",A.variation={body:"",cigar:"",eyes:"",glasses:"",hat:"",mustache:"",nose:"",pot:""},A.plane_material=new BasicMaterial,A.addComponent(new PlaneShape),A.addComponent(A.plane_material),A}return s(t,T),t.prototype.play_random=function(){var T=Math.floor(Math.random()*B.length);this.set_body(this.current_compi,T,!1)},t.prototype.play=function(T){this.set_body(this.current_compi,T,!1)},t.prototype.remove_elements=function(){for(var T=0;T<this.element_entities.length;T++)engine.removeEntity(this.element_entities[T])},t.prototype.set_body=function(T,A,E){return u(this,void 0,void 0,(function(){var S,O,k;return p(this,(function(j){return log("set mp4 body"),this.current_compi=T,E&&(this.plane_material=new BasicMaterial,this.addComponentOrReplace(this.plane_material)),S="https://dweb.link/ipfs/bafybeia7pyfmyjcnjrodau2yxm3h3bs6suv3xfzwvhohktnw6v2cevayaq/mp4/"+T+"/"+T+"_"+B[A]+".mp4",log(S),O=new VideoClip(S),k=new VideoTexture(O),this.plane_material.texture=k,k.playing=!0,[2]}))}))},t.prototype.set_body_=function(T){return u(this,void 0,void 0,(function(){var A,E;return p(this,(function(S){switch(S.label){case 0:return log("set body"),this.remove_elements(),A={headers:{Accept:"application/json"},method:"GET"},log("get variations"),[4,d("https://dweb.link/ipfs/QmVcN4A6EzBrrWcsovrKsRg5sTootZ9HmSuTadGQ2XrL9y",A,3).then((function(T){return null==T?[]:T.json()})).catch((function(T){return log("Error")}))];case 1:return E=S.sent(),log("variations",E),this.variation=E[T],this.add_element("body"),this.add_element("cigar"),this.add_element("eyes"),this.add_element("glasses"),this.add_element("hat"),this.add_element("mustache"),this.add_element("nose"),this.add_element("pot"),[2]}}))}))},t.prototype.add_element=function(T){""!=this.variation[T]&&(this.element_entities.push(new Entity),this.get_last_element().addComponent(new GLTFShape("compi_models/"+this.variation[T]+".glb")),this.get_last_element().addComponent(new Animator),engine.addEntity(this.get_last_element()),this.get_last_element().setParent(this))},t.prototype.get_last_element=function(){return this.element_entities[this.element_entities.length-1]},t}(Entity),_t={Add:{position:[-.9736900329589844,.5958811640739441,.040917061269283295],rotation:[9992007221626409e-31,4.81169628585576e-8,-.3581227958202362,-.9336745142936707],scale:[.18492013216018677,.18492008745670319,.18492013216018677],uv:[.746986985206604,.8680751919746399,.8492201566696167,.8680751919746399,.8492201566696167,.9703083634376526,.746986985206604,.9703083634376526,.746986985206604,.8680751919746399,.8492201566696167,.8680751919746399,.8492201566696167,.9703083634376526,.746986985206604,.9703083634376526]},ArrowLeftCompi:{position:[1.4788908958435059,.6966143846511841,.040916964411735535],rotation:[-7105427357601002e-30,1.3435888490676007e-7,-1.0000001192092896,902615418659717e-29],scale:[.14559833705425262,.14559833705425262,.14559833705425262],uv:[.53712397813797,.8761494755744934,.6298521161079407,.8761494755744934,.6298521161079407,.9688776731491089,.53712397813797,.9688776731491089,.53712397813797,.8761494755744934,.6298521161079407,.8761494755744934,.6298521161079407,.9688776731491089,.53712397813797,.9688776731491089]},ArrowLeftQuestions:{position:[-.5068280696868896,-.20516154170036316,.0409170463681221],rotation:[-7105427357601002e-30,1.3435888490676007e-7,-1.0000001192092896,902615418659717e-29],scale:[.13791120052337646,.13791120052337646,.13791120052337646],uv:[.5374969244003296,.876522421836853,.629479169845581,.876522421836853,.629479169845581,.9685047268867493,.5374969244003296,.9685047268867493,.5374969244003296,.876522421836853,.629479169845581,.876522421836853,.629479169845581,.9685047268867493,.5374969244003296,.9685047268867493]},ArrowRightCompi:{position:[.5825899839401245,.7002140879631042,.04091687127947807],rotation:[-2842170943040401e-29,12324151505631147e-31,4.371138118131057e-8,1.0000001192092896],scale:[.15308743715286255,.15308743715286255,.15308743715286255],uv:[.5377315878868103,.8767570853233337,.6292445063591003,.8767570853233337,.6292445063591003,.9682701230049133,.5377315878868103,.9682701230049133,.5377315878868103,.8767570853233337,.6292445063591003,.8767570853233337,.6292445063591003,.9682701230049133,.5377315878868103,.9682701230049133]},ArrowRightQuestions:{position:[-1.3984005451202393,-.21152262389659882,.04091695323586464],rotation:[-2842170943040401e-29,12324151505631147e-31,4.371138118131057e-8,1.0000001192092896],scale:[.14561930298805237,.14561930298805237,.14561930298805237],uv:[.5326187610626221,.8716443181037903,.6300644874572754,.8716443181037903,.6300644874572754,.9690901637077332,.5326187610626221,.9690901637077332,.5326187610626221,.8716443181037903,.6300644874572754,.8716443181037903,.6300644874572754,.9690901637077332,.5326187610626221,.9690901637077332]},BackgroundAnswers:{position:[-.00592494010925293,-.07895167171955109,-1.060785503881334e-8],rotation:[-0,-1174602272000988e-29,8.742277657347586e-8,1],scale:[.8324118256568909,1.189159631729126,1.189159631729126],uv:[.09974434971809387,.4196958541870117,.4860137104988098,.4196958541870117,.4860137104988098,.960472822189331,.09974434971809387,.960472822189331,.09974434971809387,.4196958541870117,.4860137104988098,.4196958541870117,.4860137104988098,.960472822189331,.09974434971809387,.960472822189331]},BackgroundCompicactus:{position:[1.0598316192626953,-.04718310385942459,.0029314737766981125],rotation:[-7103880569560197e-31,-6.2252460963918566e-9,.04633298143744469,-.998926043510437],scale:[1.1614147424697876,1.1614147424697876,1.1614147424697876],uv:[.8326539993286133,.09020934253931046,.874096155166626,.09020934253931046,.874096155166626,.13165152072906494,.8326539993286133,.13165152072906494,.8326539993286133,.09020934253931046,.874096155166626,.09020934253931046,.874096155166626,.13165152072906494,.8326539993286133,.13165152072906494]},BackgroundQuestions:{position:[-.9756283760070801,-.06579305976629257,-8.83987905098138e-9],rotation:[-0,-1.3435884227419592e-7,1,-4.371138828673793e-8],scale:[.8324118256568909,1.189159631729126,1.189159631729126],uv:[.09974434971809387,.4196958541870117,.4860137104988098,.4196958541870117,.4860137104988098,.960472822189331,.09974434971809387,.960472822189331,.09974434971809387,.4196958541870117,.4860137104988098,.4196958541870117,.4860137104988098,.960472822189331,.09974434971809387,.960472822189331]},CancelRedCompi:{position:[1.0075632333755493,-.01593323051929474,.07591697573661804],rotation:[-2842170943040401e-29,12324151505631147e-31,4.371138118131057e-8,1.0000001192092896],scale:[.4886789917945862,.4886789917945862,.4886789917945862],uv:[.5147221088409424,.6938798427581787,.6448183059692383,.6938798427581787,.6448183059692383,.8239762783050537,.5147221088409424,.8239762783050537,.5147221088409424,.6938798427581787,.6448183059692383,.6938798427581787,.6448183059692383,.8239762783050537,.5147221088409424,.8239762783050537]},Compicactus:{position:[1.0598316192626953,-.04718310385942459,.044343285262584686],rotation:[901047179509523e-30,2.344884952876214e-9,-.017452403903007507,-.9998477101325989],scale:[1.1614147424697876,1.1614147424697876,1.1614147424697876],uv:[.001507878303527832,.0351487398147583,.9648514986038208,.0015079975128173828,.9984921216964722,.9648516178131104,.03514862060546875,.9984922409057617,.001507878303527832,.0351487398147583,.9648514986038208,.0015079975128173828,.9984921216964722,.9648516178131104,.03514862060546875,.9984922409057617]},EditAnswer:{position:[-.17161095142364502,.5804060697555542,.040917061269283295],rotation:[-0,0,-0,-1],scale:[.21622267365455627,.21622267365455627,.21622267365455627],uv:[.6404823064804077,.8690820932388306,.7427154779434204,.8690820932388306,.7427154779434204,.9713152647018433,.6404823064804077,.9713152647018433,.6404823064804077,.8690820932388306,.7427154779434204,.8690820932388306,.7427154779434204,.9713152647018433,.6404823064804077,.9713152647018433]},EditName:{position:[1.023306131362915,.9744213819503784,.040916845202445984],rotation:[-0,0,-0,-1],scale:[.21622267365455627,.21622267365455627,.21622267365455627],uv:[.6404823064804077,.8690820932388306,.7427154779434204,.8690820932388306,.7427154779434204,.9713152647018433,.6404823064804077,.9713152647018433,.6404823064804077,.8690820932388306,.7427154779434204,.8690820932388306,.7427154779434204,.9713152647018433,.6404823064804077,.9713152647018433]},Help:{position:[-.4528905153274536,1.1889170408248901,.04091717302799225],rotation:[-0,0,-0,-1],scale:[.36114898324012756,.18057449162006378,.36114898324012756],uv:[.6136775016784668,.13104644417762756,.7717379331588745,.13104644417762756,.7717379331588745,.21007665991783142,.6136775016784668,.21007665991783142,.6136775016784668,.13104644417762756,.7717379331588745,.13104644417762756,.7717379331588745,.21007665991783142,.6136775016784668,.21007665991783142]},Mint:{position:[-.002437543123960495,1.3288666009902954,.04091716185212135],rotation:[-0,0,-0,-1],scale:[.4449852406978607,.22249262034893036,.4449852406978607],uv:[.4526936113834381,.13239853084087372,.6056946516036987,.13239853084087372,.6056946516036987,.20889903604984283,.4526936113834381,.20889903604984283,.4526936113834381,.13239853084087372,.6056946516036987,.13239853084087372,.6056946516036987,.20889903604984283,.4526936113834381,.20889903604984283]},Name:{position:[1.0389444828033447,.7171220183372498,.040916867554187775],rotation:[-2842170943040401e-29,12324151505631147e-31,4.371138118131057e-8,1.0000001192092896],scale:[.6634318828582764,.28844866156578064,.28844866156578064],uv:[.5097656846046448,.2790776193141937,.739005982875824,.2790776193141937,.739005982875824,.3787473142147064,.5097656846046448,.3787473142147064,.5097656846046448,.2790776193141937,.739005982875824,.2790776193141937,.739005982875824,.3787473142147064,.5097656846046448,.3787473142147064]},OkGreenCompi:{position:[1.0075632333755493,-.01593323051929474,.08991697430610657],rotation:[-2842170943040401e-29,12324151505631147e-31,4.371138118131057e-8,1.0000001192092896],scale:[.4886789917945862,.4886789917945862,.4886789917945862],uv:[.6978199481964111,.6938798427581787,.827916145324707,.6938798427581787,.827916145324707,.8239762783050537,.6978199481964111,.8239762783050537,.6978199481964111,.6938798427581787,.827916145324707,.6938798427581787,.827916145324707,.8239762783050537,.6978199481964111,.8239762783050537]},PolygonMana:{position:[.5321251749992371,1.2641630172729492,.04091712832450867],rotation:[-0,0,-0,-1],scale:[.528679609298706,.505429208278656,.47581160068511963],uv:[.21294867992401123,.026864349842071533,.4362680912017822,.026864349842071533,.4362680912017822,.22785180807113647,.21294867992401123,.22785180807113647,.21294867992401123,.026864349842071533,.4362680912017822,.026864349842071533,.4362680912017822,.22785180807113647,.21294867992401123,.22785180807113647]},Remove:{position:[.10745614767074585,.5804059505462646,.040917061269283295],rotation:[-0,0,-0,-1],scale:[.19285941123962402,.19285941123962402,.19285941123962402],uv:[.7486777305603027,.8712334632873535,.8466081619262695,.8712334632873535,.8466081619262695,.9691638946533203,.7486777305603027,.9691638946533203,.7486777305603027,.8712334632873535,.8466081619262695,.8712334632873535,.8466081619262695,.9691638946533203,.7486777305603027,.9691638946533203]},SelectedQuestion:{position:[-.9813814163208008,.285593181848526,.06129398196935654],rotation:[-2842170943040401e-29,12324151505631147e-31,4.371138118131057e-8,1.0000001192092896],scale:[.6806405782699585,.09864357113838196,.19728714227676392],uv:[.1351213902235031,.30550289154052734,.45817357301712036,.30550289154052734,.45817357301712036,.3523220419883728,.1351213902235031,.3523220419883728,.1351213902235031,.30550289154052734,.45817357301712036,.30550289154052734,.45817357301712036,.3523220419883728,.1351213902235031,.3523220419883728]},WorkingYellowCompi:{position:[1.0075632333755493,-.01593323051929474,.10591697692871094],rotation:[-2842170943040401e-29,12324151505631147e-31,4.371138118131057e-8,1.0000001192092896],scale:[.4886789917945862,.4886789917945862,.4886789917945862],uv:[.6094315052032471,.5350365042686462,.739527702331543,.5350365042686462,.739527702331543,.6651329398155212,.6094315052032471,.6651329398155212,.6094315052032471,.5350365042686462,.739527702331543,.5350365042686462,.739527702331543,.6651329398155212,.6094315052032471,.6651329398155212]}},Pt=["Action-01-Look_R-L","Action-02-Look_R","Action-03-Look_L","Action-04-Look-Up","Action-05-Sleep","Action-06-Dancing","Action-07-Swinging","Action-08-LOL","Action-09-Pised_Off","Action-10-Yawn","Action-11-Alert","Action-12_Sigh"],Ft=function(T){function t(){var A=T.call(this)||this;return A.images_path="https://cors-anywhere.herokuapp.com/https://voxters.s3.eu-west-3.amazonaws.com/thumbnails/boxter_{__ID__}.jpg",A.videos_path="",A.character_name="Voxter",A}return s(t,T),t}(function(T){function t(){var A=T.call(this)||this;return A.element_entities=[],A.current_compi=0,A.images_path="",A.videos_path="",A.character_name="",A.plane_material=new BasicMaterial,A.addComponent(new PlaneShape),A.addComponent(A.plane_material),A}return s(t,T),t.prototype.play_random=function(){var T=Math.floor(Math.random()*Pt.length);this.set_video_body(this.current_compi,T,!1)},t.prototype.play=function(T){this.set_video_body(this.current_compi,T,!1)},t.prototype.remove_elements=function(){for(var T=0;T<this.element_entities.length;T++)engine.removeEntity(this.element_entities[T])},t.prototype.set_body=function(T,A,E){return u(this,void 0,void 0,(function(){return p(this,(function(S){return""!=this.images_path&&this.set_image_body(T,A,E),""!=this.videos_path&&this.set_video_body(T,A,E),[2]}))}))},t.prototype.set_image_body=function(T,A,E){return u(this,void 0,void 0,(function(){var S,O,k;return p(this,(function(B){return""==this.images_path||(log("set image body"),this.current_compi=T,E&&(this.plane_material=new BasicMaterial,this.addComponentOrReplace(this.plane_material)),S=Pt[A],O=(O=this.images_path.replace("{__ID__}",String(T))).replace("{__ACTION__}",String(S)),log(O),k=new Texture(O),this.plane_material.texture=k),[2]}))}))},t.prototype.set_video_body=function(T,A,E){return u(this,void 0,void 0,(function(){var S,O,k,B;return p(this,(function(j){return""==this.videos_path||(log("set video body"),this.current_compi=T,E&&(this.plane_material=new BasicMaterial,this.addComponentOrReplace(this.plane_material)),S=Pt[A],O=(O=this.images_path.replace("{__ID__}",String(T))).replace("{__ACTION__}",String(S)),log(O),k=new VideoClip(O),B=new VideoTexture(k),this.plane_material.texture=B,B.playing=!0),[2]}))}))},t}(Entity)),Lt={COMPICACTUS:0,VOXTER:1,ETHERMON:2,ROVI:3,ZEDRUN:4},Ut={MATIC:"matic",MUMBAI:"mumbai",MOCKUP:"mockup"},Zt=new Texture("https://dweb.link/ipfs/bafybeifaih2h275bmmessdnwk5tkbbdsc6y4aacpbiu4jdsu2numusrxne/CompiUIB.png"),Yt=new Material;Yt.transparencyMode=1,Yt.albedoTexture=Zt,Yt.emissiveTexture=Zt,Yt.emissiveIntensity=1,Yt.emissiveColor=new Color3(.5,.5,.5);var Kt=new UICanvas,ee=function(){function e(){this.current_compi=-1,this.current_token=-1,this.current_menu=0,this.goto_compi=-1,this.dirty_compi=!1,this.play_animation=-1,this.answer="",this.answer_drawn=0,this.answer_dt=0,this.questions="",this.name="",this.price="-",this.price_number=0,this.price_discount=!1,this.question_list=[],this.current_qpage=0,this.goto_qpage=0,this.current_question=0,this.goto_question=0,this.name_to_set="",this.answer_to_set="",this.question_to_add="",this.asking_question="",this.dirty_questions=!1,this.current_action="",this.forced=!1,this.broadcast=[],this.working=!1}return e=function(T,A,E,S){var O,k=arguments.length,B=k<3?A:null===S?S=Object.getOwnPropertyDescriptor(A,E):S;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)B=Reflect.decorate(T,A,E,S);else for(var j=T.length-1;j>=0;j--)(O=T[j])&&(B=(k<3?O(B):k>3?O(A,E,B):O(A,E))||B);return k>3&&B&&Object.defineProperty(A,E,B),B}([Component("stool")],e),e}(),le=function(T){function t(A,E){var S=T.call(this)||this;if(S.compidata_shape=new TextShape,S.answer_shape=new TextShape,S.questions_shape=new TextShape,S.price_shape=new TextShape,S.remove_entity=new Entity,S.editanswer_entity=new Entity,S.cancel_entity=new Entity,S.error_entity=new Entity,S.ok_entity=new Entity,S.working_entity=new Entity,E.character==Lt.COMPICACTUS)S.planesMenu=k,S.compi_entity=new j;else{if(E.character!=Lt.VOXTER)throw new Error("Character not found: "+E.character);S.planesMenu=_t,S.compi_entity=new Ft}S.textInput=new UIInputText(Kt),S.stool_component=new ee,S.addComponent(S.stool_component),engine.addEntity(S),S.stool_component.network=E,-1!=A&&(S.stool_component.forced=!0,S.stool_component.current_action="goto_compi",S.stool_component.goto_compi=A,S.stool_component.dirty_compi=!0,log("Forced")),S.stool_component.forced||(S.createPlane(S.planesMenu.ArrowLeftCompi).addComponent(new OnPointerDown((function(){S.stool_component.working||(S.stool_component.current_action="previous_compi")}),{hoverText:"Previous "+S.compi_entity.character_name})),S.createPlane(S.planesMenu.ArrowRightCompi).addComponent(new OnPointerDown((function(){S.stool_component.working||(S.stool_component.current_action="next_compi")}),{hoverText:"Next "+S.compi_entity.character_name})),S.createPlane(S.planesMenu.Add).addComponent(new OnPointerDown((function(){S.stool_component.working||(S.stool_component.current_action="add_question")}),{hoverText:"Add question"})),S.editanswer_entity=S.createPlane(S.planesMenu.EditAnswer),S.editanswer_entity.getComponent(PlaneShape).visible=!1,S.editanswer_entity.addComponent(new OnPointerDown((function(){S.stool_component.working||(S.stool_component.current_action="edit_answer")}),{hoverText:"Edit answer"})),S.remove_entity=S.createPlane(S.planesMenu.Remove),S.remove_entity.getComponent(PlaneShape).visible=!1,S.remove_entity.addComponent(new OnPointerDown((function(){S.stool_component.working||(S.stool_component.current_action="remove_question")}),{hoverText:"Remove Question"})),S.createPlane(S.planesMenu.EditName).addComponent(new OnPointerDown((function(){S.stool_component.working||(S.stool_component.current_action="set_name")}),{hoverText:"Set Name"})),S.cancel_entity=S.createPlane(S.planesMenu.CancelRedCompi),engine.removeEntity(S.cancel_entity),S.cancel_entity.addComponent(new OnPointerDown((function(){S.stool_component.current_action="cancel"}),{hoverText:"Cancel"})),S.error_entity=S.createPlane(S.planesMenu.CancelRedCompi),engine.removeEntity(S.error_entity),S.error_entity.addComponent(new OnPointerDown((function(){engine.removeEntity(S.error_entity)}),{hoverText:"Error. Please try again!"})),S.ok_entity=S.createPlane(S.planesMenu.OkGreenCompi),engine.removeEntity(S.ok_entity),S.ok_entity.addComponent(new OnPointerDown((function(){engine.removeEntity(S.ok_entity)}),{hoverText:"Success"})),S.working_entity=S.createPlane(S.planesMenu.WorkingYellowCompi),engine.removeEntity(S.working_entity),S.working_entity.addComponent(new OnPointerDown((function(){}),{hoverText:"Waiting for signature. Check wallet!"}))),S.arrowleftquestions_entity=S.createPlane(S.planesMenu.ArrowLeftQuestions),S.arrowleftquestions_entity.addComponent(new OnPointerDown((function(){S.stool_component.working||(S.stool_component.current_action="previous_question_page")}),{hoverText:"Prev page"})),S.arrowrightquestions_entity=S.createPlane(S.planesMenu.ArrowRightQuestions),S.arrowrightquestions_entity.addComponent(new OnPointerDown((function(){S.stool_component.working||(S.stool_component.current_action="next_question_page")}),{hoverText:"Next page"}));var O=S.createPlane(S.planesMenu.BackgroundAnswers);S.createPlane(S.planesMenu.BackgroundCompicactus);var B=S.createPlane(S.planesMenu.BackgroundQuestions),Pt=S.createPlane(S.planesMenu.Compicactus);S.createPlane(S.planesMenu.Name),engine.removeEntity(Pt),S.compi_entity.addComponent(Pt.getComponent(Transform)),S.compi_entity.setParent(S),S.compi_entity.getComponent(PlaneShape).uvs=Pt.getComponent(PlaneShape).uvs;var Ut=new OnPointerDown((function(T){S.stool_component.working||(0==T.buttonId?S.stool_component.current_action="ask_question":1==T.buttonId?S.stool_component.current_action="previous_question":2==T.buttonId&&(S.stool_component.current_action="next_question"))}),{hoverText:"E: Up - F: Down - Click: Ask"});return B.addComponent(Ut),O.addComponent(Ut),S.compidata_shape.fontSize=1,S.compidata_shape.value="",S.compidata_shape.hTextAlign="left",S.compidata_shape.vTextAlign="center",S.compidata_shape.font=new Font(Fonts.SanFrancisco_Heavy),S.compidata_shape.color=Color3.Black(),S.compidata_entity=new Entity,S.compidata_entity.addComponent(S.compidata_shape),S.compidata_entity.addComponent(new Transform({position:new Vector3(1.3,1.24,.08),rotation:Quaternion.Euler(0,180,0),scale:new Vector3(.4,.4,.4)})),S.compidata_entity.setParent(S),S.questions_shape.textWrapping=!0,S.questions_shape.font=new Font(Fonts.SanFrancisco_Heavy),S.questions_shape.hTextAlign="left",S.questions_shape.vTextAlign="top",S.questions_shape.fontSize=1,S.questions_shape.value="",S.questions_shape.width=1.5,S.questions_shape.color=Color3.Black(),S.questions_entity=new Entity,S.questions_entity.addComponent(S.questions_shape),S.questions_entity.addComponent(new Transform({position:new Vector3(-1,.74,.08),rotation:Quaternion.Euler(0,180,0),scale:new Vector3(.5,.5,1)})),S.questions_entity.setParent(S),S.answer_shape.textWrapping=!0,S.answer_shape.font=new Font(Fonts.SanFrancisco_Heavy),S.answer_shape.hTextAlign="center",S.answer_shape.vTextAlign="top",S.answer_shape.fontSize=1,S.answer_shape.value="",S.answer_shape.width=1.3,S.answer_shape.color=Color3.Black(),S.answer_entity=new Entity,S.answer_entity.addComponent(S.answer_shape),S.answer_entity.addComponent(new Transform({position:new Vector3(0,.65,.08),rotation:Quaternion.Euler(0,180,0),scale:new Vector3(.5,.5,1)})),S.answer_entity.setParent(S),S.textInput.width="50%",S.textInput.height="50px",S.textInput.vAlign="bottom",S.textInput.hAlign="center",S.textInput.fontSize=30,S.textInput.placeholder="Write name here",S.textInput.positionY="200px",S.textInput.isPointerBlocker=!0,S.textInput.visible=!1,S}return s(t,T),t.prototype.createPlane=function(T){var A=new Entity,E=new PlaneShape;E.uvs=T.uv,A.addComponent(E);var S=new Transform({position:new(Vector3.bind.apply(Vector3,y([void 0],T.position))),rotation:new(Quaternion.bind.apply(Quaternion,y([void 0],T.rotation))),scale:new(Vector3.bind.apply(Vector3,y([void 0],T.scale)))});return S.position.y+=.55,A.addComponent(S),A.addComponent(Yt),A.setParent(this),A},t.prototype.destroy=function(){engine.removeEntity(this)},t}(Entity),ve=engine.getComponentGroup(ee),Ce=function(){function e(){}return e.prototype.update=function(T){var A,E;try{for(var S=function(T){var A="function"==typeof Symbol&&Symbol.iterator,E=A&&T[A],S=0;if(E)return E.call(T);if(T&&"number"==typeof T.length)return{next:function(){return T&&S>=T.length&&(T=void 0),{value:T&&T[S++],done:!T}}};throw new TypeError(A?"Object is not iterable.":"Symbol.iterator is not defined.")}(ve.entities),O=S.next();!O.done;O=S.next()){var k=O.value,B=k,j=k.getComponent(ee);j.answer_drawn<j.answer.length&&(j.answer_drawn+=Math.round(100*T),j.answer_drawn>j.answer.length&&(j.answer_drawn=j.answer.length),B.answer_shape.value=j.answer.substring(0,j.answer_drawn)),j.questions!=B.questions_shape.value&&(B.questions_shape.value=j.questions,B.questions_shape.width=1.2),j.play_animation>=0&&(B.compi_entity.play(j.play_animation),j.play_animation=-1),"cancel"!=j.current_action?j.working||("goto_compi"!=j.current_action?-1!=j.current_compi?j.dirty_compi?(j.working=!0,this.updateCompi(B)):"previous_compi"!=j.current_action?"next_compi"!=j.current_action?-2!=j.current_compi&&(j.dirty_questions?(j.working=!0,this.updateQuestions(B)):"add_question"!=j.current_action?"remove_question"!=j.current_action?"edit_answer"!=j.current_action?"set_name"!=j.current_action?"ask_question"!=j.current_action?"previous_question"!=j.current_action?"next_question"!=j.current_action?"previous_question_page"!=j.current_action?"next_question_page"!=j.current_action||(log("action: next_question_page"),j.working=!0,j.current_action="",j.goto_qpage=j.current_qpage+1,this.gotoQPage(j)):(log("action: previous_question_page"),j.working=!0,j.current_action="",j.goto_qpage=j.current_qpage-1,this.gotoQPage(j)):(j.working=!0,j.current_action="",j.goto_question=j.current_question+1,this.gotoQuestion(j)):(j.working=!0,j.current_action="",j.goto_question=j.current_question-1,this.gotoQuestion(j)):(j.working=!0,j.current_action="",this.askQuestion(k)):(j.working=!0,j.current_action="",this.setName(k)):(j.working=!0,j.current_action="",this.editAnwser(k)):(j.working=!0,j.current_action="",this.removeQuestion(k)):(j.working=!0,j.current_action="",this.addQuestion(k))):(j.working=!0,j.current_action="",j.goto_compi=j.current_compi+1,this.goto(j)):(j.working=!0,j.current_action="",j.goto_compi=j.current_compi-1,this.goto(j)):(j.working=!0,j.current_action="",j.goto_compi=0,this.goto(j)):(j.working=!0,j.current_action="",this.goto(j))):(j.current_action="",B.textInput.visible=!1,engine.removeEntity(B.cancel_entity),j.working=!1)}}catch(T){A={error:T}}finally{try{O&&!O.done&&(E=S.return)&&E.call(S)}finally{if(A)throw A.error}}},e.prototype.goto=function(T){return u(this,void 0,void 0,(function(){var A;return p(this,(function(E){switch(E.label){case 0:return log("goto"),log("stool_component.current_compi",T.current_compi),log("stool_component.goto_compi",T.goto_compi),log("stool_component.dirty_compi",T.dirty_compi),T.forced?[3,2]:(log("Getting compis"),[4,T.network.balanceOf()]);case 1:return A=E.sent(),log("compisCount",A),A>0?(log("compisCount>0"),T.goto_compi<0?(log("stool_component.goto_compi<0"),T.current_compi=A-1,T.dirty_compi=!0):T.goto_compi>=A?(log("stool_component.goto_compi>=compisCount"),T.current_compi=0,T.dirty_compi=!0):(T.current_compi=T.goto_compi,T.dirty_compi=!0)):(log("else1"),T.current_compi=-2,T.goto_compi=0,T.dirty_compi=!0),[3,3];case 2:log("else2"),T.current_compi=T.goto_compi,T.dirty_compi=!0,E.label=3;case 3:return log("stool_component.current_compi",T.current_compi),log("stool_component.goto_compi",T.goto_compi),log("stool_component.dirty_compi",T.dirty_compi),T.working=!1,[2]}}))}))},e.prototype.gotoQuestion=function(T){return u(this,void 0,void 0,(function(){var A,E;return p(this,(function(S){for(A=0,E=0;E<T.question_list.length;E++)""!=T.question_list[E].value&&(A+=1);return T.goto_question<0?(T.goto_question=A-1,T.current_question=A-1,T.dirty_questions=!0):T.goto_question>=A?(T.goto_question=0,T.current_question=0,T.dirty_questions=!0):(T.current_question=T.goto_question,T.dirty_questions=!0),log(T.goto_question,T.current_question),T.working=!1,[2]}))}))},e.prototype.gotoQPage=function(T){return u(this,void 0,void 0,(function(){var A,E,S,O;return p(this,(function(k){switch(k.label){case 0:for(A=0,O=0;O<T.question_list.length;O++)""!=T.question_list[O].value&&(A+=1);return T.goto_qpage<0||T.goto_qpage>T.current_qpage&&A<10?T.current_qpage=0:T.current_qpage=T.goto_qpage,log("current_qpage",T.current_qpage),E=10*T.current_qpage,[4,T.network.getQuestions(T.current_token,E)];case 1:for(S=k.sent(),log(S),O=0;O<S.length;O++)T.question_list[O]={id:O+E,value:S[O]};return T.current_question=0,T.dirty_questions=!0,T.working=!1,[2]}}))}))},e.prototype.updateCompi=function(T,A){return u(this,void 0,void 0,(function(){var A,E,S;return p(this,(function(O){switch(O.label){case 0:return(A=T.getComponent(ee)).dirty_compi=!1,A.current_compi<0?(T.compi_entity.set_body(0,0,!0),T.compidata_shape.value="Demo",A.working=!1,[2]):(log("updateCompi"),T.compidata_shape.value="-",E=0,A.forced?[3,2]:(T.editanswer_entity.getComponent(PlaneShape).visible=!1,T.remove_entity.getComponent(PlaneShape).visible=!1,[4,A.network.tokenOfOwnerByIndex(A.current_compi)]));case 1:return E=O.sent(),A.current_token=E,[3,3];case 2:E=A.current_token=A.current_compi,O.label=3;case 3:return log("compiId",E),[4,A.network.getName(E)];case 4:return""===(S=O.sent())&&(S="No name set"),T.compidata_shape.value="#"+E+":"+S,T.compi_entity.set_body(E,0,!0),this.gotoQPage(A),A.working=!1,[2]}}))}))},e.prototype.updateQuestions=function(T){return u(this,void 0,void 0,(function(){var A,E,S,O,k;return p(this,(function(B){switch(B.label){case 0:return[4,(A=T.getComponent(ee)).network.getQuestionsCount(A.current_token)];case 1:for(E=B.sent(),T.arrowleftquestions_entity.getComponent(PlaneShape).visible=!0,T.arrowrightquestions_entity.getComponent(PlaneShape).visible=!0,E>10?0==10*A.current_qpage&&(T.arrowleftquestions_entity.getComponent(PlaneShape).visible=!1):(log("hide arrows"),T.arrowleftquestions_entity.getComponent(PlaneShape).visible=!1,T.arrowrightquestions_entity.getComponent(PlaneShape).visible=!1),S="",O=0,k=0;k<A.question_list.length;k++)""!=A.question_list[k].value&&(A.current_question==k?S+="[ ":S+="",S+=""+A.question_list[k].value,O+=1,A.current_question==k?S+=" ]\n":S+="\n");return A.questions=S,O<10&&(T.arrowrightquestions_entity.getComponent(PlaneShape).visible=!1),A.dirty_questions=!1,A.working=!1,[2]}}))}))},e.prototype.setName=function(T){return u(this,void 0,void 0,(function(){var A,E=this;return p(this,(function(S){return A=T.getComponent(ee),log("Set Name"),A.current_compi<0||(T.textInput.visible=!0,T.textInput.placeholder="Write name here",engine.addEntity(T.cancel_entity),T.textInput.onTextSubmit=new OnTextSubmit((function(S){return u(E,void 0,void 0,(function(){return p(this,(function(E){switch(E.label){case 0:return T.textInput.visible=!1,engine.removeEntity(T.cancel_entity),engine.addEntity(T.working_entity),[4,A.network.setName(A.current_token,S.text.trim()).then((function(E){1===E.status?(A.dirty_compi=!0,A.working=!1,engine.removeEntity(T.working_entity),engine.addEntity(T.ok_entity),log("setName Ok ",E)):(A.working=!1,engine.removeEntity(T.working_entity),engine.addEntity(T.error_entity),log("Error on setName",E))})).catch((function(E){A.working=!1,engine.removeEntity(T.working_entity),engine.addEntity(T.error_entity),log("Error on setName",E)}))];case 1:return E.sent(),[2]}}))}))})),engine.addEntity(T.cancel_entity)),[2]}))}))},e.prototype.askQuestion=function(T){return u(this,void 0,void 0,(function(){var A,E,S,O,k,B,j,_t,Pt,Ft,Lt;return p(this,(function(Ut){switch(Ut.label){case 0:return A=T.getComponent(ee),E=A.question_list[A.current_question].value,[4,A.network.getAnswer(A.current_token,E)];case 1:for(S=Ut.sent(),log(S),O=/\{.*?\}/g,B=S;null!==(k=O.exec(S));)k.index===O.lastIndex&&O.lastIndex++,k.forEach((function(T,E){log("Found match, group "+E+": "+T);var S=void 0;try{S=JSON.parse(T)}catch(A){log("Error parsing json to broadcast "+T)}null!=S&&A.broadcast.push(S),B=B.replace(T,"")}));for(j="You: "+E+"\n\n"+T.compi_entity.character_name+": "+B,A.answer=j,A.answer_drawn=0,_t=Math.floor(3*Math.random()),Pt=!1,Ft=0;Ft<A.broadcast.length;Ft++)null!=A.broadcast[Ft].emote&&(A.play_animation=L(A.broadcast[Ft].emote),A.broadcast[Ft].emote=void 0,Pt=!0),null!=A.broadcast[Ft].audio&&(Lt=new AudioStream(A.broadcast[Ft].audio),T.addComponentOrReplace(Lt),Lt.playing=!0,Lt.volume=.2,A.broadcast[Ft].audio=void 0);return Pt||(A.play_animation=_t),log("stool_component.play_animation",A.play_animation),A.forced||(T.editanswer_entity.getComponent(PlaneShape).visible=!0,T.remove_entity.getComponent(PlaneShape).visible=!0),A.working=!1,[2]}}))}))},e.prototype.addQuestion=function(T){return u(this,void 0,void 0,(function(){var A,E=this;return p(this,(function(S){return A=T.getComponent(ee),T.textInput.visible=!0,T.textInput.placeholder="Write question",engine.addEntity(T.cancel_entity),T.textInput.onTextSubmit=new OnTextSubmit((function(S){return u(E,void 0,void 0,(function(){return p(this,(function(E){switch(E.label){case 0:return T.textInput.visible=!1,engine.removeEntity(T.cancel_entity),engine.addEntity(T.working_entity),[4,A.network.addQuestion(A.current_token,S.text.trim(),"Default answer").then((function(E){1===E.status?(A.dirty_compi=!0,A.working=!1,engine.removeEntity(T.working_entity),engine.addEntity(T.ok_entity),log("addQuestion Ok ",E)):(A.working=!1,engine.removeEntity(T.working_entity),engine.addEntity(T.error_entity),log("Error on addQuestion",E))})).catch((function(E){A.working=!1,engine.removeEntity(T.working_entity),engine.addEntity(T.error_entity),log("Error on addQuestion",E)}))];case 1:return E.sent(),[2]}}))}))})),engine.addEntity(T.cancel_entity),[2]}))}))},e.prototype.removeQuestion=function(T){return u(this,void 0,void 0,(function(){var A,E,S;return p(this,(function(O){switch(O.label){case 0:return A=T.getComponent(ee),E=A.question_list[A.current_question].value,S=A.question_list[A.current_question].id,engine.addEntity(T.working_entity),[4,A.network.removeQuestion(A.current_token,E,S).then((function(E){1===E.status?(A.dirty_compi=!0,A.working=!1,engine.removeEntity(T.working_entity),engine.addEntity(T.ok_entity),log("removeQuestion Ok ",E)):(A.working=!1,engine.removeEntity(T.working_entity),engine.addEntity(T.error_entity),log("Error on removeQuestion",E))})).catch((function(E){A.working=!1,engine.removeEntity(T.working_entity),engine.addEntity(T.error_entity),log("Error on removeQuestion",E)}))];case 1:return O.sent(),[2]}}))}))},e.prototype.editAnwser=function(T){return u(this,void 0,void 0,(function(){var A,E=this;return p(this,(function(S){return A=T.getComponent(ee),log("Edit Anwser"),engine.addEntity(T.cancel_entity),T.textInput.visible=!0,T.textInput.placeholder="Write answer here",T.textInput.onTextSubmit=new OnTextSubmit((function(S){return u(E,void 0,void 0,(function(){var E;return p(this,(function(O){switch(O.label){case 0:return T.textInput.visible=!1,log("this.current_token",A.current_token),E=A.question_list[A.current_question].value,engine.removeEntity(T.cancel_entity),engine.addEntity(T.working_entity),[4,A.network.addQuestion(A.current_token,E,S.text.trim()).then((function(E){1===E.status?(A.dirty_compi=!0,A.working=!1,engine.removeEntity(T.working_entity),engine.addEntity(T.ok_entity),log("addQuestion (Edit Anwser) Ok ",E)):(A.working=!1,engine.removeEntity(T.working_entity),engine.addEntity(T.error_entity),log("Error on addQuestion (Edit Anwser)",E))})).catch((function(E){A.working=!1,engine.removeEntity(T.working_entity),engine.addEntity(T.error_entity),log("Error on addQuestion (Edit Anwser)",E)}))];case 1:return O.sent(),[2]}}))}))})),[2]}))}))},e}();function L(T){return"dance"==T?5:"lol"==T?7:"alert"==T?10:"swing"==T?6:"look_l"==T?2:"look_r"==T?1:"look_r_l"==T?0:"look_up"==T?3:"pissed_off"==T?8:"sigh"==T?11:"sleep"==T?4:"yawn"==T?9:0}var Se=[{inputs:[{internalType:"string",name:"name_",type:"string"},{internalType:"string",name:"symbol_",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"userAddress",type:"address"},{indexed:!1,internalType:"address payable",name:"relayerAddress",type:"address"},{indexed:!1,internalType:"bytes",name:"functionSignature",type:"bytes"}],name:"MetaTransactionExecuted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"CHILD_CHAIN_ID",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"CHILD_CHAIN_ID_BYTES",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[],name:"ERC712_VERSION",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"ROOT_CHAIN_ID",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"ROOT_CHAIN_ID_BYTES",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"userAddress",type:"address"},{internalType:"bytes",name:"functionSignature",type:"bytes"},{internalType:"bytes32",name:"sigR",type:"bytes32"},{internalType:"bytes32",name:"sigS",type:"bytes32"},{internalType:"uint8",name:"sigV",type:"uint8"}],name:"executeMetaTransaction",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getNonce",outputs:[{internalType:"uint256",name:"nonce",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"}],Re=[{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"contractURI",type:"string"}],name:"ContractURISet",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address[]",name:"discountTokens",type:"address[]"},{indexed:!1,internalType:"bool[]",name:"discountTokensIsERC1155",type:"bool[]"}],name:"DiscountTokensSet",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"contract IERC20Upgradeable",name:"tokenERC20",type:"address"}],name:"ERC20Set",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"contract IERC721Upgradeable",name:"tokenERC721",type:"address"}],name:"ERC721Set",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"maxSupply",type:"uint256"}],name:"MaxSupplySet",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"userAddress",type:"address"},{indexed:!1,internalType:"address payable",name:"relayerAddress",type:"address"},{indexed:!1,internalType:"bytes",name:"functionSignature",type:"bytes"}],name:"MetaTransactionExecuted",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"multPrice",type:"uint256"}],name:"PriceSet",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"startTime",type:"uint256"},{indexed:!1,internalType:"uint256",name:"endTime",type:"uint256"}],name:"TimeWindowSet",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"balance",type:"uint256"}],name:"Withdraw",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"ERC712_VERSION",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"userAddress",type:"address"},{internalType:"bytes",name:"functionSignature",type:"bytes"},{internalType:"bytes32",name:"sigR",type:"bytes32"},{internalType:"bytes32",name:"sigS",type:"bytes32"},{internalType:"uint8",name:"sigV",type:"uint8"}],name:"executeMetaTransaction",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"payable",type:"function"},{inputs:[],name:"getChainId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getDomainSeperator",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getNonce",outputs:[{internalType:"uint256",name:"nonce",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"for_account",type:"address"}],name:"getPrice",outputs:[{internalType:"uint256",name:"_price",type:"uint256"},{internalType:"bool",name:"use_discount",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"uint256",name:"index",type:"uint256"}],name:"getRoleMember",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleMemberCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getSupply",outputs:[{internalType:"uint32",name:"maxSupply",type:"uint32"},{internalType:"uint256",name:"currentSupply",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getTimeWindow",outputs:[{internalType:"uint256",name:"startTime",type:"uint256"},{internalType:"uint256",name:"endTime",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"domainSeparator",type:"string"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"isWindowOpen",outputs:[{internalType:"bool",name:"use_discount",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"maxPrice",type:"uint256"}],name:"mintCompi",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address[]",name:"discountTokens",type:"address[]"},{internalType:"bool[]",name:"discountTokensIsERC1155",type:"bool[]"}],name:"setDiscountTokens",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IERC20Upgradeable",name:"tokenERC20",type:"address"}],name:"setERC20",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract ERC721PresetMinterPauserAutoIdUpgradeable",name:"tokenERC721",type:"address"}],name:"setERC721",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint32",name:"maxSupply",type:"uint32"}],name:"setMaxSupply",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"multPrice",type:"uint256"}],name:"setPrice",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"startTime",type:"uint256"},{internalType:"uint256",name:"endTime",type:"uint256"}],name:"setTimeWindow",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"withdrawBalance",outputs:[],stateMutability:"nonpayable",type:"function"}],Ie=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"contractURI",type:"string"}],name:"ContractURISet",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"userAddress",type:"address"},{indexed:!1,internalType:"address payable",name:"relayerAddress",type:"address"},{indexed:!1,internalType:"bytes",name:"functionSignature",type:"bytes"}],name:"MetaTransactionExecuted",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Paused",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Unpaused",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"ERC712_VERSION",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"MINTER_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"PAUSER_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"contractURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"userAddress",type:"address"},{internalType:"bytes",name:"functionSignature",type:"bytes"},{internalType:"bytes32",name:"sigR",type:"bytes32"},{internalType:"bytes32",name:"sigS",type:"bytes32"},{internalType:"uint8",name:"sigV",type:"uint8"}],name:"executeMetaTransaction",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getChainId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getDomainSeperator",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getNonce",outputs:[{internalType:"uint256",name:"nonce",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"uint256",name:"index",type:"uint256"}],name:"getRoleMember",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleMemberCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"symbol",type:"string"},{internalType:"string",name:"baseTokenURI",type:"string"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"pause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"paused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"__contractURI",type:"string"}],name:"setContractURI",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"unpause",outputs:[],stateMutability:"nonpayable",type:"function"}],Ne=[{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"userAddress",type:"address"},{indexed:!1,internalType:"address payable",name:"relayerAddress",type:"address"},{indexed:!1,internalType:"bytes",name:"functionSignature",type:"bytes"}],name:"MetaTransactionExecuted",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"_contract",type:"address"},{indexed:!1,internalType:"uint256",name:"id",type:"uint256"},{indexed:!1,internalType:"string",name:"scene",type:"string"},{indexed:!1,internalType:"string",name:"question",type:"string"},{indexed:!1,internalType:"string",name:"answer",type:"string"}],name:"QuestionAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"_contract",type:"address"},{indexed:!1,internalType:"uint256",name:"id",type:"uint256"},{indexed:!1,internalType:"string",name:"scene",type:"string"},{indexed:!1,internalType:"string",name:"question",type:"string"}],name:"QuestionMuted",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"_contract",type:"address"},{indexed:!1,internalType:"uint256",name:"id",type:"uint256"},{indexed:!1,internalType:"string",name:"scene",type:"string"},{indexed:!1,internalType:"string",name:"question",type:"string"},{indexed:!1,internalType:"uint256",name:"questionId",type:"uint256"}],name:"QuestionRemoved",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"_contract",type:"address"},{indexed:!1,internalType:"uint256",name:"id",type:"uint256"},{indexed:!1,internalType:"string",name:"scene",type:"string"},{indexed:!1,internalType:"string",name:"question",type:"string"}],name:"QuestionUnmuted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"_contract",type:"address"},{indexed:!1,internalType:"uint256",name:"id",type:"uint256"},{indexed:!1,internalType:"string",name:"name",type:"string"}],name:"nameSet",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"ERC712_VERSION",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_contract",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"string",name:"scene",type:"string"},{internalType:"string",name:"question",type:"string"},{internalType:"string",name:"answer",type:"string"}],name:"addQuestion",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"userAddress",type:"address"},{internalType:"bytes",name:"functionSignature",type:"bytes"},{internalType:"bytes32",name:"sigR",type:"bytes32"},{internalType:"bytes32",name:"sigS",type:"bytes32"},{internalType:"uint8",name:"sigV",type:"uint8"}],name:"executeMetaTransaction",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"_contract",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"string",name:"scene",type:"string"},{internalType:"string",name:"question",type:"string"}],name:"getAnswer",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"getChainId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getDomainSeperator",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_contract",type:"address"},{internalType:"uint256",name:"id",type:"uint256"}],name:"getName",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getNonce",outputs:[{internalType:"uint256",name:"nonce",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_contract",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"string",name:"scene",type:"string"},{internalType:"uint256",name:"offset",type:"uint256"}],name:"getQuestions",outputs:[{internalType:"string[]",name:"",type:"string[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_contract",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"string",name:"scene",type:"string"}],name:"getQuestionsCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"uint256",name:"index",type:"uint256"}],name:"getRoleMember",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleMemberCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"domainSeparator",type:"string"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_contract",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"string",name:"scene",type:"string"},{internalType:"string",name:"question",type:"string"}],name:"isQuestionMuted",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_contract",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"string",name:"scene",type:"string"},{internalType:"string",name:"question",type:"string"}],name:"muteQuestion",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_contract",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"string",name:"scene",type:"string"},{internalType:"string",name:"question",type:"string"},{internalType:"uint256",name:"questionId",type:"uint256"}],name:"removeQuestion",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_contract",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"string",name:"name",type:"string"}],name:"setName",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_contract",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"string",name:"scene",type:"string"},{internalType:"string",name:"question",type:"string"}],name:"unmuteQuestion",outputs:[],stateMutability:"nonpayable",type:"function"}];!function(T){if(!/^0x[0-9a-f]*$/gi.test("0x"))throw new Error('Not a valid hex string "0x"');for(var A="0x".slice(2);A.length<40;)A="0"+A}();var Pe,Fe=0;function z(T,A,E){return u(this,void 0,void 0,(function(){return p(this,(function(S){return[2,Z(T,"eth_signTypedData_v4",[A,E])]}))}))}function Y(T,A,E){return u(this,void 0,void 0,(function(){var S;return p(this,(function(O){switch(O.label){case 0:return S=J(A),[4,Z(T,"eth_call",[{data:"0x2d0335ab"+S,to:E},"latest"])];case 1:return[2,J(O.sent())]}}))}))}function J(T){return function(T,A,E){for(var S=0;S<64&&!(E.length>=64);S++)E="0"+E;return E}(0,0,T.toString().replace("0x",""))}function Z(T,A,E){return u(this,void 0,void 0,(function(){var S,O;return p(this,(function(k){switch(k.label){case 0:return O={jsonrpc:"2.0",id:++Fe,method:A,params:E},void 0===T.request?[3,2]:[4,T.request(O)];case 1:return S=k.sent(),[3,6];case 2:return void 0===T.sendAsync?[3,4]:[4,T.sendAsync(O)];case 3:return S=k.sent(),[3,6];case 4:return void 0===T.send?[3,6]:[4,T.send(A,E)];case 5:S=k.sent(),k.label=6;case 6:if(S)return[2,S.result||S];throw new Error('Could not send the transaction correcty. Either the provider does not support the method "'+A+'" or is missing a proper send/request.')}}))}))}!function(T){T.Bid="Bid",T.BidV2="BidV2",T.CollectionFactory="CollectionFactory",T.CollectionManager="CollectionManager",T.CollectionStore="CollectionStore",T.Committee="Committee",T.ERC20="ERC20",T.ERC721="ERC721",T.ERC721CollectionV2="ERC721CollectionV2",T.Forwarder="Forwarder",T.MANAToken="MANAToken",T.Marketplace="Marketplace",T.MarketplaceV2="MarketplaceV2",T.Rarities="Rarities",T.ThirdPartyRegistry="ThirdPartyRegistry",T.Tiers="Tiers"}(Pe||(Pe={}));var Le=[{name:"name",type:"string"},{name:"version",type:"string"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"}],Ue=[{name:"nonce",type:"uint256"},{name:"from",type:"address"},{name:"functionSignature",type:"bytes"}],qe=function(){function e(T,A){if(T!=Ut.MUMBAI&&T!=Ut.MATIC&&T!=Ut.MOCKUP)throw new Error("Network not found: "+T);if(A!=Lt.COMPICACTUS&&A!=Lt.VOXTER)throw new Error("Character not found: "+A);this.contracts=this.getContracts(A),this.character=A,this.network=T,T==Ut.MUMBAI?(this.provider=new O.HTTPProvider("https://matic-mumbai.chainstacklabs.com/"),this.mana_contract=this.contracts.mana.mumbai,this.minter_contract=this.contracts.minter.mumbai,this.pfp_contract=this.contracts.pfp.mumbai,this.brain_contract=this.contracts.brain.mumbai):T==Ut.MATIC&&(this.provider=new O.HTTPProvider("https://rpc-mainnet.maticvigil.com"),this.mana_contract=this.contracts.mana.matic,this.minter_contract=this.contracts.minter.matic,this.pfp_contract=this.contracts.pfp.matic,this.brain_contract=this.contracts.brain.matic),this.metaRequestManager=new O.RequestManager(this.provider)}return e.prototype.getContracts=function(T){var A;return T==Lt.COMPICACTUS?A={matic:{address:"0xB1Eb9BE1Cf04a19448355893ca357f6F010b03B6",name:"CompiPFP"},mumbai:{address:"0xcF904EeCa0dC1d99E6c4Be05f6C9a733041Ce093",name:"CompiPFP"}}:T==Lt.VOXTER&&(A={matic:{address:"0x764e5a8c9ca14b456f5afbf31bfb2fa7f1e002b6",name:"Voxters"},mumbai:{address:"",name:""}}),{mana:{matic:{version:"1",abi:Se,address:"0xA1c57f48F0Deb89f569dFbE6E2B7f46D33606fD4",name:"(PoS) Decentraland MANA",chainId:137},mumbai:{version:"1",abi:Se,address:"0x4dA830330048be6380f102a83d3B94ea318bc598",name:"Decentraland MANA (PoS)",chainId:80001}},minter:{matic:{version:"1",abi:Re,address:"0x2E88409bD7eBc3A7b68b808994E2873645b1128D",name:"CompiMinter",chainId:137},mumbai:{version:"1",abi:Re,address:"0x0d7c91B526bA1334be837a82e92d6ca47ac6bCD7",name:"CompiMinter",chainId:80001}},pfp:{matic:{version:"1",abi:Ie,address:A.matic.address,name:A.matic.name,chainId:137},mumbai:{version:"1",abi:Ie,address:A.mumbai.address,name:A.mumbai.name,chainId:80001}},brain:{matic:{version:"1",abi:Ne,address:"0x89e2558091D28290B834ddd42e59E2b72D07Fe0B",name:"CompiBrain",chainId:137},mumbai:{version:"1",abi:Ne,address:"0x308aF74242aFb7bC598Ff1ced52De1D3E6cb02d7",name:"CompiBrain",chainId:80001}}}},e.prototype.getFunction=function(T,A){for(var E=0;E<A.length;E++)if("function"==A[E].type&&A[E].name==T)return A[E];throw new Error("Function not found: "+T)},e.prototype.prepareMetaTransaction=function(T,S){return u(this,void 0,void 0,(function(){var k,B,j,_t,Pt,Ft,Lt,Ut,Zt,Yt,Kt,ee;return p(this,(function(le){switch(le.label){case 0:return log("functionSignature",T),log("functionSignature.data",T.data),[4,E.getProvider()];case 1:return k=le.sent(),B=new O.RequestManager(k),[4,A.getUserPublicKey()];case 2:return j=le.sent(),log("Sending meta transaction"),[4,Y(this.metaRequestManager,j,S.address)];case 3:return _t=le.sent(),log("nonce",_t),ve=S.chainId,Pt="number"==typeof ve?"0x"+J(ve.toString(16)):"0x"+J(ve),Ft=function(T,A){return{name:A.name,version:A.version,verifyingContract:A.address,salt:T}}(Pt,S),Lt=function(T,A,E,S){return{types:{EIP712Domain:Le,MetaTransaction:Ue},domain:S,primaryType:"MetaTransaction",message:{nonce:parseInt(A,16),from:T,functionSignature:E}}}(j,_t,T.data,Ft),log("dataToSign",Lt),[4,z(B,j,JSON.stringify(Lt))];case 4:return Ut=le.sent(),log("signature",Ut),Zt=function(T){var A=T.slice(0,66),E="0x".concat(T.slice(66,130)),S="0x".concat(T.slice(130,132)),O=parseInt(S,16);return[27,28].indexOf(O)>-1||(O+=27),{r:A,s:E,v:O}}(Ut),Yt=Zt.r,Kt=Zt.s,ee=Zt.v,[2,ne(j,S,T.data,Yt,Kt,ee)]}var ve}))}))},e.prototype.prepareMetaTransaction_old=function(T,A){return u(this,void 0,void 0,(function(){return p(this,(function(T){return[2]}))}))},e.prototype.getFactory=function(T){return u(this,void 0,void 0,(function(){var A;return p(this,(function(E){switch(E.label){case 0:return A=new O.RequestManager(this.provider),[4,new O.ContractFactory(A,T.abi).at(T.address)];case 1:return[2,E.sent()]}}))}))},e.prototype.waitTX=function(T){return u(this,void 0,void 0,(function(){var A,E;return p(this,(function(S){switch(S.label){case 0:A=new O.RequestManager(this.provider),E=null,S.label=1;case 1:return null!=E?[3,3]:(l(2e3),[4,A.eth_getTransactionReceipt(T.toString())]);case 2:return E=S.sent(),[3,1];case 3:return[2,E]}}))}))},e.prototype.getPrice=function(){return u(this,void 0,void 0,(function(){var T,E=this;return p(this,(function(S){switch(S.label){case 0:return this.network!=Ut.MOCKUP?[3,2]:[4,this.mockupAnswer([1e19,!1])];case 1:return[2,S.sent()];case 2:return[4,A.getUserPublicKey()];case 3:return T=S.sent(),log("publicKeyRequest",T),[2,this.getFactory(this.minter_contract).then((function(A){return u(E,void 0,void 0,(function(){return p(this,(function(E){switch(E.label){case 0:return[4,A.getPrice(T)];case 1:return[2,E.sent()]}}))}))}))]}}))}))},e.prototype.wei2human=function(T){return O.fromWei(T,"ether")},e.prototype.isWindowOpen=function(){return u(this,void 0,void 0,(function(){var T=this;return p(this,(function(A){return[2,this.getFactory(this.minter_contract).then((function(A){return u(T,void 0,void 0,(function(){return p(this,(function(T){switch(T.label){case 0:return[4,A.isWindowOpen()];case 1:return[2,T.sent()]}}))}))}))]}))}))},e.prototype.getTimeWindow=function(){return u(this,void 0,void 0,(function(){var T=this;return p(this,(function(A){return[2,this.getFactory(this.minter_contract).then((function(A){return u(T,void 0,void 0,(function(){return p(this,(function(T){switch(T.label){case 0:return[4,A.getTimeWindow()];case 1:return[2,T.sent()]}}))}))}))]}))}))},e.prototype.mintCompi=function(T){return u(this,void 0,void 0,(function(){var A,E,S=this;return p(this,(function(k){return A=new O.SolidityFunction(this.getFunction("mintCompi",Re)),E=A.toPayload([T]),log(E),[2,this.prepareMetaTransaction(E,this.minter_contract).then((function(T){return u(S,void 0,void 0,(function(){return p(this,(function(A){return log("increaseAllowance TX ",T),[2,this.waitTX(T)]}))}))})).then().catch()]}))}))},e.prototype.balance=function(){return u(this,void 0,void 0,(function(){var T,E=this;return p(this,(function(S){switch(S.label){case 0:return[4,A.getUserPublicKey()];case 1:return T=S.sent(),[2,this.getFactory(this.mana_contract).then((function(A){return u(E,void 0,void 0,(function(){return p(this,(function(E){switch(E.label){case 0:return[4,A.balanceOf(T)];case 1:return[2,E.sent()]}}))}))}))]}}))}))},e.prototype.increaseAllowance=function(T){return u(this,void 0,void 0,(function(){var A,E,S=this;return p(this,(function(k){return A=new O.SolidityFunction(this.getFunction("increaseAllowance",Se)),E=A.toPayload([this.minter_contract.address,T]),log(E),[2,this.prepareMetaTransaction(E,this.mana_contract).then((function(T){return u(S,void 0,void 0,(function(){return p(this,(function(A){return log("increaseAllowance TX ",T),[2,this.waitTX(T)]}))}))})).then().catch()]}))}))},e.prototype.balanceOf=function(){return u(this,void 0,void 0,(function(){var T,E=this;return p(this,(function(S){switch(S.label){case 0:return this.network!=Ut.MOCKUP?[3,2]:[4,this.mockupAnswer(3)];case 1:return[2,S.sent()];case 2:return[4,A.getUserPublicKey()];case 3:return T=S.sent(),log("publicKeyRequest",T),[2,this.getFactory(this.pfp_contract).then((function(A){return u(E,void 0,void 0,(function(){return p(this,(function(E){switch(E.label){case 0:return[4,A.balanceOf(T)];case 1:return[2,E.sent()]}}))}))}))]}}))}))},e.prototype.tokenOfOwnerByIndex=function(T){return u(this,void 0,void 0,(function(){var E,S=this;return p(this,(function(O){switch(O.label){case 0:return this.network!=Ut.MOCKUP?[3,2]:[4,this.mockupAnswer(T)];case 1:return[2,O.sent()];case 2:return[4,A.getUserPublicKey()];case 3:return E=O.sent(),log("publicKeyRequest",E),[2,this.getFactory(this.pfp_contract).then((function(A){return u(S,void 0,void 0,(function(){return p(this,(function(S){switch(S.label){case 0:return[4,A.tokenOfOwnerByIndex(E,T)];case 1:return[2,S.sent()]}}))}))}))]}}))}))},e.prototype.getName=function(T){return u(this,void 0,void 0,(function(){var A=this;return p(this,(function(E){switch(E.label){case 0:return this.network!=Ut.MOCKUP?[3,2]:[4,this.mockupAnswer("Mockup Name")];case 1:return[2,E.sent()];case 2:return[2,this.getFactory(this.brain_contract).then((function(E){return u(A,void 0,void 0,(function(){return p(this,(function(A){switch(A.label){case 0:return[4,E.getName(this.pfp_contract.address,T)];case 1:return[2,A.sent()]}}))}))}))]}}))}))},e.prototype.getQuestionsCount=function(T){return u(this,void 0,void 0,(function(){var A=this;return p(this,(function(E){switch(E.label){case 0:return this.network!=Ut.MOCKUP?[3,2]:[4,this.mockupAnswer(30)];case 1:return[2,E.sent()];case 2:return[2,this.getFactory(this.brain_contract).then((function(E){return u(A,void 0,void 0,(function(){return p(this,(function(A){switch(A.label){case 0:return[4,E.getQuestionsCount(this.pfp_contract.address,T,"default")];case 1:return[2,A.sent()]}}))}))}))]}}))}))},e.prototype.setName=function(T,A){return u(this,void 0,void 0,(function(){var E,S,k=this;return p(this,(function(B){switch(B.label){case 0:return this.network!=Ut.MOCKUP?[3,2]:[4,this.mockupAnswer(0)];case 1:return[2,B.sent()];case 2:return E=new O.SolidityFunction(this.getFunction("setName",Ne)),S=E.toPayload([this.pfp_contract.address,T,A]),log(S),[2,this.prepareMetaTransaction(S,this.brain_contract).then((function(T){return u(k,void 0,void 0,(function(){return p(this,(function(A){return log("setName TX ",T),[2,this.waitTX(T)]}))}))})).then().catch()]}}))}))},e.prototype.addQuestion=function(T,A,E){return u(this,void 0,void 0,(function(){var S,k,B=this;return p(this,(function(j){switch(j.label){case 0:return this.network!=Ut.MOCKUP?[3,2]:[4,this.mockupAnswer(0)];case 1:return[2,j.sent()];case 2:return S=new O.SolidityFunction(this.getFunction("addQuestion",Ne)),k=S.toPayload([this.pfp_contract.address,T,"default",A,E]),log(k),[2,this.prepareMetaTransaction(k,this.brain_contract).then((function(T){return u(B,void 0,void 0,(function(){return p(this,(function(A){return log("addQuestion TX ",T),[2,this.waitTX(T)]}))}))})).then().catch()]}}))}))},e.prototype.removeQuestion=function(T,A,E){return u(this,void 0,void 0,(function(){var S,k,B=this;return p(this,(function(j){switch(j.label){case 0:return this.network!=Ut.MOCKUP?[3,2]:(log("removeQuestion",A,E),[4,this.mockupAnswer(0)]);case 1:return[2,j.sent()];case 2:return S=new O.SolidityFunction(this.getFunction("removeQuestion",Ne)),k=S.toPayload([this.pfp_contract.address,T,"default",A,E]),log(k),[2,this.prepareMetaTransaction(k,this.brain_contract).then((function(T){return u(B,void 0,void 0,(function(){return p(this,(function(A){return log("removeQuestion TX ",T),[2,this.waitTX(T)]}))}))})).then().catch()]}}))}))},e.prototype.getAnswer=function(T,A){return u(this,void 0,void 0,(function(){var E=this;return p(this,(function(S){switch(S.label){case 0:return this.network!=Ut.MOCKUP?[3,2]:[4,this.mockupAnswer("This is an answer to "+T+" "+A)];case 1:return[2,S.sent()];case 2:return[2,this.getFactory(this.brain_contract).then((function(S){return u(E,void 0,void 0,(function(){return p(this,(function(E){switch(E.label){case 0:return[4,S.getAnswer(this.pfp_contract.address,T,"default",A)];case 1:return[2,E.sent()]}}))}))}))]}}))}))},e.prototype.getQuestions=function(T,A){return u(this,void 0,void 0,(function(){var E=this;return p(this,(function(S){switch(S.label){case 0:return this.network!=Ut.MOCKUP?[3,2]:[4,this.mockupAnswer(this.getMockupQuestions(T,A))];case 1:return[2,S.sent()];case 2:return[2,this.getFactory(this.brain_contract).then((function(S){return u(E,void 0,void 0,(function(){return p(this,(function(E){switch(E.label){case 0:return[4,S.getQuestions(this.pfp_contract.address,T,"default",A)];case 1:return[2,E.sent()]}}))}))}))]}}))}))},e.prototype.getMockupQuestions=function(T,A){var E,S=[];E=A<20?10:A<30?3:0;for(var O=0;O<10;O++)S.push("");for(O=0;O<E;O++)S[O]="Q "+O+" ("+T+", "+A+")";return S},e.prototype.mockupAnswer=function(T){return u(this,void 0,void 0,(function(){var A;return p(this,(function(E){return A=500+500*Math.random(),0==T&&(A=100),l(A),[2,T]}))}))},e}();function ne(T,A,E,S,O,k){return u(this,void 0,void 0,(function(){var B;return p(this,(function(j){switch(j.label){case 0:if(j.trys.push([0,2,,3]),"CompiBrain"!=A.name)throw new Error("Only CompiBrain allowed");return[4,fetch("https://api.biconomy.io/api/v2/meta-tx/native",{method:"POST",headers:{"x-api-key":"i9-eTBtwe.d7329c08-cc47-4c48-ae64-6cb6b6cf81e4","Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({to:A.address,apiId:"45770c1c-bc67-41c1-8948-530da59fd7d1",params:[T,E,S,O,k],from:T})}).then((function(T){return T.json()})).then((function(T){return u(this,void 0,void 0,(function(){return p(this,(function(A){return log(T),[2,T.txHash]}))}))})).catch((function(T){log(T)}))];case 1:return[2,j.sent()];case 2:return B=j.sent(),log(B),[3,3];case 3:return[2]}}))}))}T.Blockchain=qe,T.CHARACTER=Lt,T.CompiNPC=le,T.CompiNPCSystem=Ce,T.Compicactus=j,T.NETWORK=Ut,Object.defineProperty(T,"__esModule",{value:!0})}));var __awaiter=this&&this.__awaiter||function(T,A,E,S){return new(E||(E=Promise))((function(O,k){function fulfilled(T){try{step(S.next(T))}catch(T){k(T)}}function rejected(T){try{step(S.throw(T))}catch(T){k(T)}}function step(T){var A;T.done?O(T.value):(A=T.value,A instanceof E?A:new E((function(T){T(A)}))).then(fulfilled,rejected)}step((S=S.apply(T,A||[])).next())}))},__generator=this&&this.__generator||function(T,A){var E,S,O,k,B={label:0,sent:function(){if(1&O[0])throw O[1];return O[1]},trys:[],ops:[]};return k={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(k[Symbol.iterator]=function(){return this}),k;function verb(k){return function(j){return function(k){if(E)throw new TypeError("Generator is already executing.");for(;B;)try{if(E=1,S&&(O=2&k[0]?S.return:k[0]?S.throw||((O=S.return)&&O.call(S),0):S.next)&&!(O=O.call(S,k[1])).done)return O;switch(S=0,O&&(k=[2&k[0],O.value]),k[0]){case 0:case 1:O=k;break;case 4:return B.label++,{value:k[1],done:!1};case 5:B.label++,S=k[1],k=[0];continue;case 7:k=B.ops.pop(),B.trys.pop();continue;default:if(!((O=(O=B.trys).length>0&&O[O.length-1])||6!==k[0]&&2!==k[0])){B=0;continue}if(3===k[0]&&(!O||k[1]>O[0]&&k[1]<O[3])){B.label=k[1];break}if(6===k[0]&&B.label<O[1]){B.label=O[1],O=k;break}if(O&&B.label<O[2]){B.label=O[2],B.ops.push(k);break}O[2]&&B.ops.pop(),B.trys.pop();continue}k=A.call(T,B)}catch(T){k=[6,T],S=0}finally{E=O=0}if(5&k[0])throw k[1];return{value:k[0]?k[1]:void 0,done:!0}}([k,j])}}};define("game",["require","exports","@compicactus/dcl-scene-utils"],(function(T,A,E){Object.defineProperty(A,"__esModule",{value:!0}),A.TimerSystem=void 0;var S=new Material;S.albedoColor=new Color3(0,.2,0),S.specularIntensity=0,S.metallic=0,S.roughness=1;var O=new Entity;O.addComponent(new PlaneShape),O.addComponent(S),O.addComponent(new Transform({rotation:Quaternion.Euler(90,0,0),position:new Vector3(8,.01,0),scale:new Vector3(16,32,1)})),engine.addEntity(O);var k=new Entity;k.addComponent(new GLTFShape("models/BoothTrain.glb")),k.addComponent(new Transform({position:new Vector3(8,0,0)})),engine.addEntity(k);var B=new Entity;B.addComponent(new GLTFShape("models/BoothMint.glb")),B.addComponent(new Transform({position:new Vector3(5,0,0)})),engine.addEntity(B);var j=new Entity;j.addComponent(new GLTFShape("models/BoothTwitter.glb")),j.addComponent(new Transform({position:new Vector3(3,0,0)})),engine.addEntity(j),j.addComponent(new OnPointerDown((function(){return __awaiter(void 0,void 0,void 0,(function(){return __generator(this,(function(T){return openExternalURL("https://twitter.com/compicactus"),[2]}))}))}),{hoverText:"Info about Compicactus"}));var _t=new Entity,Pt=new GLTFShape("models/Error.glb");Pt.visible=!1,_t.addComponent(Pt),_t.addComponent(new Transform({position:new Vector3(5,1.5,.1),scale:new Vector3(4,4,4)}));var Ft=new Animator;_t.addComponent(Ft);var Lt=new AnimationState("ArmatureAction");Ft.addClip(Lt),engine.addEntity(_t),Lt.stop(),_t.addComponent(new OnPointerDown((function(){return __awaiter(void 0,void 0,void 0,(function(){return __generator(this,(function(T){return clearMessages(),[2]}))}))}),{hoverText:"Ok"}));var Ut=new Entity,Zt=new GLTFShape("models/Success.glb");Zt.visible=!1,Ut.addComponent(Zt),Ut.addComponent(new Transform({position:new Vector3(5.2,.7,.1),scale:new Vector3(2,2,2)}));var Yt=new Animator;Ut.addComponent(Yt);var Kt=new AnimationState("CheckAction");Yt.addClip(Kt),engine.addEntity(Ut),Kt.stop(),Ut.addComponent(new OnPointerDown((function(){return __awaiter(void 0,void 0,void 0,(function(){return __generator(this,(function(T){return clearMessages(),[2]}))}))}),{hoverText:"Ok"}));var ee,le,ve=new E.Blockchain(E.NETWORK.MATIC,E.CHARACTER.COMPICACTUS);new E.CompiNPC(-1,ve).addComponent(new Transform({position:new Vector3(8,.5,.01)})),engine.addSystem(new E.CompiNPCSystem),B.addComponent(new OnPointerDown((function(){return __awaiter(void 0,void 0,void 0,(function(){var T;return __generator(this,(function(A){switch(A.label){case 0:return le?[2]:(le=!0,T=ee,log("price",T),clearMessages(),setStatus("Waiting for signature 1 of 2"),[4,ve.increaseAllowance(T[0]).then((function(A){1===A.status?(log("IncreaseAllowance Ok ",A),setStatus("Waiting for signature 2 of 2"),ve.mintCompi(T[0]).then((function(T){1===T.status?(log("Mint Ok ",T),Zt.visible=!0,Kt.looping=!1,Kt.play(!0),Pt.visible=!1,le=!1,setStatus("Compi minted!"),updatePrice()):(log("Error on mint",T),showError(),setStatus("Error minting"),updatePrice())})).catch((function(T){log("Error on mint",T),showError(),setStatus("Error minting"),updatePrice()}))):(log("Error on IncreaseAllowance",A),setStatus("Error allowing MANA"),showError())})).catch((function(T){log("Error on IncreaseAllowance",T),setStatus("Error allowing MANA"),showError()}))]);case 1:return A.sent(),[2]}}))}))}),{hoverText:"Mint Compi"}));var Ce=new TextShape;Ce.font=new Font(Fonts.SanFrancisco_Heavy),Ce.hTextAlign="left",Ce.vTextAlign="top",Ce.fontSize=4,Ce.value="-",Ce.color=new Color3(.3,.05,.05);var Se=new Entity;Se.addComponent(Ce),Se.addComponent(new Transform({position:new Vector3(5.8,2.2,0),rotation:Quaternion.Euler(0,180,0)})),engine.addEntity(Se);var Re=new TextShape;Re.font=new Font(Fonts.SanFrancisco_Heavy),Re.hTextAlign="left",Re.vTextAlign="top",Re.fontSize=1,Re.value="Status:\n-Idle",Re.color=Color3.White();var Ie=new Entity;function updatePrice(){var T=this;executeTask((function(){return __awaiter(T,void 0,void 0,(function(){return __generator(this,(function(T){switch(T.label){case 0:return[4,ve.getPrice()];case 1:return ee=T.sent(),Ce.value=ve.wei2human(ee[0].toString()),ee[1]&&(Ce.value+="\n50% Off!"),[2]}}))}))}))}function setStatus(T){Re.value="Status:\n-".concat(T)}function showError(){Pt.visible=!0,Lt.looping=!1,Lt.play(!0),Zt.visible=!1,le=!1}function clearMessages(){Pt.visible=!1,Zt.visible=!1}Ie.addComponent(Re),Ie.addComponent(new Transform({position:new Vector3(5.8,1.2,0),rotation:Quaternion.Euler(0,180,0)})),engine.addEntity(Ie),updatePrice();var Ne=Date.UTC(2021,9,16,16,5);log("date",Ne),executeTask((function(){return __awaiter(void 0,void 0,void 0,(function(){var T;return __generator(this,(function(A){switch(A.label){case 0:return[4,ve.getTimeWindow()];case 1:return T=A.sent(),Ne=Number(T[0]),[2]}}))}))}));var Pe=function(){function TimerSystem(){this.acumulated_time=0}return TimerSystem.prototype.update=function(T){if(this.acumulated_time+=T,!(this.acumulated_time<1)){var A,E=(new Date).getTime(),S=Ne-E,O=Math.floor(S/864e5),k=Math.floor(S%864e5/36e5),B=Math.floor(S%36e5/6e4),j=Math.floor(S%6e4/1e3);S<0?(A="Live!",engine.removeSystem(this)):A=" Starting in ".concat(O,"d ").concat(k,"h ").concat(B,"m ").concat(j,"s"),setStatus(A)}},TimerSystem}();A.TimerSystem=Pe,engine.addSystem(new Pe)}));